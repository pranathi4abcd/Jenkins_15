(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{dIPq:function(e,t,c){"use strict";c.r(t),c.d(t,"PatientOccupancyReportModule",function(){return _});var o=c("ofXK"),i=c("tyNb"),n=c("Nach"),s=c("CwUn"),l=c("fXoL"),r=c("dcBc"),a=c("PtJb"),u=c("7zAq"),p=c("NLkC"),d=c("Egam"),h=c("3Pt+"),b=c("arFO"),m=c("rEr+"),y=c("7zfz"),v=c("AAHA"),g=c("jIHw");function S(e,t){if(1&e){const e=l.Zb();l.Yb(0,"div",6),l.Yb(1,"app-center-dropdown",30),l.ic("onclinicSelect",function(t){return l.Lc(e),l.mc().onclinicSelect(t)}),l.Xb(),l.Xb()}2&e&&(l.Fb(1),l.tc("mode","get"))}function f(e,t){if(1&e){const e=l.Zb();l.Yb(0,"button",35),l.ic("click",function(){return l.Lc(e),l.mc(2).exportToItemExcel()}),l.Xb()}}function T(e,t){if(1&e&&(l.Yb(0,"div",31),l.Yb(1,"span",32),l.Uc(2),l.Xb(),l.Yb(3,"span",33),l.Sc(4,f,1,0,"button",34),l.Xb(),l.Xb()),2&e){const e=l.mc();l.Fb(2),l.Wc(" ",(null==e.lstReport?null:e.lstReport.length)>0?"Total Records: "+e.filteredValuesLength:""," "),l.Fb(2),l.tc("ngIf",(null==e.lstIAccessStr?null:e.lstIAccessStr.includes(e.ActionList.Download.toString()))&&(null==e.lstReport?null:e.lstReport.length)>0)}}function R(e,t){if(1&e&&(l.Yb(0,"tr"),l.Yb(1,"td"),l.Uc(2," No records found "),l.Xb(),l.Xb()),2&e){const e=t.$implicit;l.Fb(1),l.Gb("colspan",null==e?null:e.length)}}function Y(e,t){1&e&&l.Tb(0,"col",38)}function I(e,t){if(1&e&&(l.Yb(0,"colgroup"),l.Tb(1,"col",36),l.Tb(2,"col",37),l.Tb(3,"col",38),l.Tb(4,"col",38),l.Tb(5,"col",38),l.Tb(6,"col",38),l.Tb(7,"col",39),l.Sc(8,Y,1,0,"col",40),l.Tb(9,"col",38),l.Xb()),2&e){const e=l.mc();l.Fb(8),l.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin||e.UserTypeCurre===e.userTypes.Admin)}}function X(e,t){1&e&&(l.Yb(0,"th",42),l.Uc(1,"Revenue"),l.Xb())}function A(e,t){if(1&e&&(l.Yb(0,"tr"),l.Yb(1,"th",41),l.Uc(2,"Date"),l.Xb(),l.Yb(3,"th",42),l.Uc(4,"Occupancy(Head Count-M/F)"),l.Xb(),l.Yb(5,"th",42),l.Uc(6,"Occupied Rooms"),l.Xb(),l.Yb(7,"th",42),l.Uc(8,"Admitted HC(Rooms)"),l.Xb(),l.Yb(9,"th",42),l.Uc(10,"Act Admitted HC(Rooms)"),l.Xb(),l.Yb(11,"th",42),l.Uc(12,"Discharged HC(Rooms)"),l.Xb(),l.Yb(13,"th",42),l.Uc(14,"Act Discharged HC(Rooms)"),l.Xb(),l.Sc(15,X,2,0,"th",43),l.Yb(16,"th",42),l.Uc(17,"Occupied Percentage"),l.Xb(),l.Xb()),2&e){const e=l.mc();l.Fb(15),l.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin||e.UserTypeCurre===e.userTypes.Admin)}}function C(e,t){if(1&e&&(l.Yb(0,"td",42),l.Uc(1),l.nc(2,"number"),l.nc(3,"number"),l.Xb()),2&e){const e=l.mc().$implicit,t=l.mc();l.Fb(1),l.Xc("\u20b9",l.pc(2,2,e.Revenue,"1.1-2")," ",t.isPreviousData?" | \u20b9"+(null!=e.previousRevenue?l.pc(3,5,e.previousRevenue,"1.2-2"):null==e?null:e.previousRevenue):"","")}}function M(e,t){if(1&e&&(l.Yb(0,"tr"),l.Yb(1,"td",41),l.Uc(2),l.nc(3,"date"),l.Xb(),l.Yb(4,"td",42),l.Uc(5),l.Xb(),l.Yb(6,"td",42),l.Uc(7),l.Xb(),l.Yb(8,"td",42),l.Uc(9),l.Xb(),l.Yb(10,"td",42),l.Uc(11),l.Xb(),l.Yb(12,"td",42),l.Uc(13),l.Xb(),l.Yb(14,"td",42),l.Uc(15),l.Xb(),l.Sc(16,C,4,8,"td",43),l.Yb(17,"td",42),l.Uc(18),l.nc(19,"number"),l.nc(20,"number"),l.Xb(),l.Xb()),2&e){const e=t.$implicit,c=l.mc();l.Fb(2),l.Vc(l.pc(3,22,e.Date,c.customDateFormat.DEF_DATE)),l.Fb(3),l.Zc("",e.TotalHCAll," (",e.TotalHCMale,"/",e.TotalHCFemale,") ",c.isPreviousData?" | "+e.previousTotalHCAll+"("+e.previousTotalHCMale+"/"+e.previousTotalHCFemale+")":"",""),l.Fb(2),l.Xc("",e.TotalRoomOccupancy," ",c.isPreviousData?" | "+e.previousTotalRoomOccupancy:"",""),l.Fb(2),l.Yc("",e.TotalHCCheckedIn," (",e.TotalRoomOccupiedToday,") ",c.isPreviousData?" | "+e.previousTotalHCCheckedIn+"("+e.previousTotalRoomOccupiedToday+")":"",""),l.Fb(2),l.Yc("",e.TotalActualHCCheckedIn," (",e.TotalActualRoomOccupiedToday,") ",c.isPreviousData?" | "+e.previousTotalActualHCCheckedIn+"("+e.previousTotalActualRoomOccupiedToday+")":"",""),l.Fb(2),l.Yc("",e.TotalHCCheckedOut," (",e.TotalRoomUnOccupiedToday,") ",c.isPreviousData?" | "+e.previousTotalHCCheckedOut+"("+e.previousTotalRoomUnOccupiedToday+")":"",""),l.Fb(2),l.Yc("",e.TotalActualHCCheckedOut," (",e.TotalActualRoomUnOccupiedToday,") ",c.isPreviousData?" | "+e.previousTotalActualHCCheckedOut+"("+e.previousTotalActualRoomUnOccupiedToday+")":"",""),l.Fb(1),l.tc("ngIf",c.UserTypeCurre===c.userTypes.SuperAdmin||c.UserTypeCurre===c.userTypes.Admin),l.Fb(2),l.Xc("",l.pc(19,25,e.OccupancyPercent,"1.2-2")," % ",c.isPreviousData?" | "+(null!=e.previousOccupancyPercent?l.pc(20,28,e.previousOccupancyPercent,"1.2-2"):e.previousOccupancyPercent)+" %":"","")}}function U(e,t){if(1&e&&(l.Yb(0,"tr"),l.Yb(1,"td",44),l.Uc(2,"Total"),l.Xb(),l.Yb(3,"td",42),l.Uc(4),l.nc(5,"number"),l.nc(6,"number"),l.Xb(),l.Tb(7,"td"),l.Xb()),2&e){const e=l.mc();l.Fb(1),l.tc("colSpan",e.UserTypeCurre===e.userTypes.SuperAdmin||e.UserTypeCurre===e.userTypes.Admin?"8":"7"),l.Fb(3),l.Xc("",l.pc(5,3,e.totaloccupancy,"1.2-2")," % ",e.isPreviousData?" | "+(0!=e.prevtotaloccupancy?l.pc(6,6,e.prevtotaloccupancy,"1.2-2"):e.prevtotaloccupancy)+" %":"","")}}const P=function(){return{standalone:!0}},O=function(){return{width:"100%"}},w=function(){return[]},F=[{path:"",component:(()=>{class e extends s.a{constructor(e,t,c,o,i,s,l,r){super(),this.cdRef=e,this.router=t,this._ConstantServices=c,this._MasterServices=o,this._ReportServices=i,this._RoomServices=s,this._UtilityService=l,this.datepipe=r,this.UserTypeCurre=localStorage.getItem("userTypeId"),this.ClinicIdSelected=null,this.userTypes=n.s,this.customDateFormat=n.h,this.today=new Date,this.lstRoomTypeMaster=[],this.lstRoomTypeMsterModelselectedItems=[],this.checkedItemArray=[],this.LstRoomTypeMsterModelSettings={},this.stlstYear=[],this.stlstMonth=[],this.filteredValuesLength=0,this.totaloccupancy=0,this.prevtotaloccupancy=0,this.isPreviousData=!1,this.ActionList=n.a,this.lstIAccess=[],this.lstIAccessStr=[],this._ConstantServices.ActiveMenuName="Patient Occupancy Report";for(var a=2022,u=(new Date).getFullYear()+2;u>=a;)this.stlstYear.push({name:a,code:a}),a+=1;this.stlstMonth=this._ReportServices.Month,this.year=(new Date).getFullYear(),this.month=(new Date).getMonth()+1,this.getPageLevelAccess()}getPageLevelAccess(){var e,t,c=this.getUrlWithoutParams(),o=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==o?void 0:o.find(e=>e.MenuItemURL===c))&&(this.lstIAccess=null===(e=o.find(e=>e.MenuItemURL===c))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(e=>{this.lstIAccessStr.push(e.ActionId.toString())}))}getUrlWithoutParams(){let e=this.router.parseUrl(this.router.url);return e.queryParams={},e.fragment=null,e.toString()}ngOnInit(){n.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.LoadRoomTypeList(),this.GetPatientOccupancyReport())}onItemSelect(e){var t;this.checkedItemArray=[];for(var c=0;c<(null===(t=this.lstRoomTypeMsterModelselectedItems)||void 0===t?void 0:t.length);c++)this.checkedItemArray.push({id:this.lstRoomTypeMsterModelselectedItems[c].RoomTypeMasterID})}onDeSelect(e){var t;this.checkedItemArray=[];for(var c=0;c<(null===(t=this.lstRoomTypeMsterModelselectedItems)||void 0===t?void 0:t.length);c++)this.checkedItemArray.push({id:this.lstRoomTypeMsterModelselectedItems[c].RoomTypeMasterID})}onSelectAll(e){this.checkedItemArray=[]}onDeSelectAll(e){this.checkedItemArray=[]}LoadRoomTypeList(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._RoomServices.GetRoomTypeMasterByClinic(this.ClinicIdSelected).subscribe(e=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);this.lstRoomTypeMaster=t=t||[],this.LstRoomTypeMsterModelSettings={idField:"RoomTypeMasterID",textField:"RoomTypeName",itemsShowLimit:1,allowSearchFilter:!0},this.lstRoomTypeMsterModelselectedItems=t,this.checkedItemArray=[],this.cdRef.detectChanges()}},e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.message)})}onclinicSelect(e){this.ClinicIdSelected=e,this.LoadRoomTypeList(),this.GetPatientOccupancyReport()}GetPatientOccupancyReport(){this.lstReport=[],""!=this.ClinicIdSelected&&null!=this.ClinicIdSelected&&null!=this.ClinicIdSelected?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._ReportServices.GetPatientOccupancyReport(this.checkedItemArray,this.ClinicIdSelected,this.year,this.month,this.isPreviousData).subscribe(e=>{var t,c;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var o=JSON.parse(e.actionResult.result);this.lstReport=o=o||[],(null===(t=this.lstReport)||void 0===t?void 0:t.length)>0&&(this.totaloccupancy=this.lstReport.map(e=>e.OccupancyPercent).reduce(function(e,t){return e+t}),this.totaloccupancy=this.totaloccupancy/this.lstReport.length,this.prevtotaloccupancy=this.lstReport.map(e=>e.previousOccupancyPercent).reduce(function(e,t){return e+t}),this.prevtotaloccupancy=this.prevtotaloccupancy/this.lstReport.length),this.filteredValuesLength=null===(c=this.lstReport)||void 0===c?void 0:c.length,this.cdRef.detectChanges()}else this.lstReport=[],this.totaloccupancy=0,this.prevtotaloccupancy=0,this.cdRef.detectChanges()},e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.message)})):this._UtilityService.showWarningAlert("Please select center")}exportToItemExcel(){let e={reportname:"PatientOccupancyReport",filename:"PatientOccupancyReport"};e.clinicId=this.ClinicIdSelected,e.bookingStatus=this.year,e.month=this.month,e.lstCommonId=this.checkedItemArray,e.userTypeId=this.UserTypeCurre,e.isGrouped=this.isPreviousData,this._MasterServices.downloadReport(e)}onFilter(e,t){var c;this.filteredValuesLength=e.filteredValue.length,(null===(c=e.filteredValue)||void 0===c?void 0:c.length)>0&&(this.totaloccupancy=e.filteredValue.map(e=>e.OccupancyPercent).reduce(function(e,t){return e+t}),this.totaloccupancy=this.totaloccupancy/e.filteredValue.length),this.prevtotaloccupancy=e.filteredValue.map(e=>e.previousOccupancyPercent).reduce(function(e,t){return e+t}),this.prevtotaloccupancy=this.prevtotaloccupancy/e.filteredValue.length}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(l.h),l.Sb(i.i),l.Sb(n.f),l.Sb(r.a),l.Sb(a.a),l.Sb(u.a),l.Sb(p.a),l.Sb(o.f))},e.\u0275cmp=l.Mb({type:e,selectors:[["app-patient-occupancy-report"]],features:[l.Cb],decls:48,vars:27,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],["class","col-md-3",4,"ngIf"],[1,"col-md-3"],[1,"form-group"],["for",""],[1,"required"],[1,"multidropdowndiv"],["name","ddlRoomType",1,"form-control","multidropdownheight",3,"ngModelOptions","placeholder","settings","data","ngModel","ngModelChange","onSelect","onDeSelect","onSelectAll","onDeSelectAll"],[1,"col-md-2"],["optionLabel","name","optionValue","code",3,"options","ngModel","ngModelOptions","ngModelChange"],["optionLabel","Name","optionValue","Value",3,"options","ngModel","ngModelOptions","ngModelChange"],[1,"col-md-2","mt-9"],[1,"input-group"],[1,"mr-2"],["type","checkbox","name","chkisPreviousData",3,"ngModel","change","ngModelChange"],[1,"col-md-2","mt-7"],["type","button","matTooltip","Search",1,"btn","btn-new-primary",3,"click"],[1,"row"],["scrollHeight","calc(100vh - 300px)","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[3,"mode","onclinicSelect"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[2,"width","90px"],[2,"width","200px"],[2,"width","150px"],[2,"width","160px"],["style","width:150px",4,"ngIf"],[1,"text-left"],[1,"text-center"],["class","text-center",4,"ngIf"],[3,"colSpan"]],template:function(e,t){if(1&e){const e=l.Zb();l.Yb(0,"div",0),l.Yb(1,"div",1),l.Yb(2,"div",2),l.Yb(3,"div",3),l.Yb(4,"div",4),l.Sc(5,S,2,1,"div",5),l.Yb(6,"div",6),l.Yb(7,"div",7),l.Yb(8,"label",8),l.Uc(9,"Room Type"),l.Yb(10,"span",9),l.Uc(11,"*"),l.Xb(),l.Xb(),l.Yb(12,"div",10),l.Yb(13,"ng-multiselect-dropdown",11),l.ic("ngModelChange",function(e){return t.lstRoomTypeMsterModelselectedItems=e})("onSelect",function(e){return t.onItemSelect(e)})("onDeSelect",function(e){return t.onDeSelect(e)})("onSelectAll",function(e){return t.onSelectAll(e)})("onDeSelectAll",function(e){return t.onDeSelectAll(e)}),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(14,"div",12),l.Yb(15,"div",7),l.Yb(16,"label",8),l.Uc(17,"Select Year "),l.Yb(18,"span",9),l.Uc(19,"*"),l.Xb(),l.Xb(),l.Yb(20,"p-dropdown",13),l.ic("ngModelChange",function(e){return t.year=e}),l.Xb(),l.Xb(),l.Xb(),l.Yb(21,"div",12),l.Yb(22,"div",7),l.Yb(23,"label",8),l.Uc(24,"Select Month"),l.Yb(25,"span",9),l.Uc(26,"*"),l.Xb(),l.Xb(),l.Yb(27,"p-dropdown",14),l.ic("ngModelChange",function(e){return t.month=e}),l.Xb(),l.Xb(),l.Xb(),l.Yb(28,"div",15),l.Yb(29,"div",7),l.Yb(30,"div",16),l.Yb(31,"label",17),l.Uc(32,"With Previous Data"),l.Xb(),l.Yb(33,"input",18),l.ic("change",function(){return t.GetPatientOccupancyReport()})("ngModelChange",function(e){return t.isPreviousData=e}),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(34,"div",19),l.Yb(35,"div",7),l.Yb(36,"button",20),l.ic("click",function(){return t.GetPatientOccupancyReport()}),l.Uc(37," Search "),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(38,"div",21),l.Yb(39,"div",1),l.Yb(40,"p-table",22,23),l.ic("onFilter",function(c){l.Lc(e);const o=l.Ic(41);return t.onFilter(c,o)}),l.Sc(42,T,5,2,"ng-template",24),l.Sc(43,R,3,1,"ng-template",25),l.Sc(44,I,10,1,"ng-template",26),l.Sc(45,A,18,1,"ng-template",27),l.Sc(46,M,21,31,"ng-template",28),l.Sc(47,U,8,9,"ng-template",29),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()}2&e&&(l.Fb(5),l.tc("ngIf",t.UserTypeCurre===t.userTypes.SuperAdmin),l.Fb(8),l.tc("ngModelOptions",l.yc(21,P))("placeholder","All")("settings",t.LstRoomTypeMsterModelSettings)("data",t.lstRoomTypeMaster)("ngModel",t.lstRoomTypeMsterModelselectedItems),l.Fb(7),l.Pc(l.yc(22,O)),l.tc("options",t.stlstYear)("ngModel",t.year)("ngModelOptions",l.yc(23,P)),l.Fb(7),l.Pc(l.yc(24,O)),l.tc("options",t.stlstMonth)("ngModel",t.month)("ngModelOptions",l.yc(25,P)),l.Fb(6),l.tc("ngModel",t.isPreviousData),l.Fb(7),l.tc("value",t.lstReport)("rowHover",!0)("globalFilterFields",l.yc(26,w))("scrollable",!0))},directives:[o.p,d.a,h.o,h.r,b.a,h.a,m.c,y.i,v.a,g.b],pipes:[o.f,o.g],styles:[""]}),e.\u0275prov=l.Ob({token:e,factory:e.\u0275fac}),e})()}];let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({imports:[[i.l.forChild(F)],i.l]}),e})();var k=c("7kUa"),L=c("lVkt"),H=c("T2Aj");let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({imports:[[o.c,D,h.i,m.f,g.c,b.b,k.b,L.b,d.b.forRoot(),H.a]]}),e})()}}]);