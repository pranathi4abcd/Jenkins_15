!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=r(e);if(t){var c=r(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{xLhn:function(a,r,c){"use strict";c.r(r),c.d(r,"RawItemReportModule",function(){return G});var o=c("ofXK"),l=c("tyNb"),s=c("Nach"),u=c("CwUn"),d=c("fXoL"),b=c("dcBc"),p=c("PtJb"),f=c("NLkC"),m=c("eO1q"),h=c("3Pt+"),g=c("rEr+"),v=c("7zfz"),y=c("AAHA"),w=c("jIHw"),I=["calendar"];function S(e,t){1&e&&(d.Yb(0,"div",7),d.Yb(1,"label",22),d.Uc(2,"Select Clinic: "),d.Yb(3,"span",9),d.Uc(4,"*"),d.Xb(),d.Xb(),d.Xb())}function D(e,t){if(1&e){var n=d.Zb();d.Yb(0,"div",12),d.Yb(1,"app-center-dropdown",23),d.ic("onclinicSelect",function(e){return d.Lc(n),d.mc().onclinicSelect(e)}),d.Xb(),d.Xb()}2&e&&(d.Fb(1),d.tc("isCenterLabel",!1)("mode","get"))}function R(e,t){if(1&e){var n=d.Zb();d.Yb(0,"button",28),d.ic("click",function(){return d.Lc(n),d.mc(2).exportToItemExcel()}),d.Xb()}}function F(e,t){if(1&e&&(d.Yb(0,"div",24),d.Yb(1,"span",25),d.Uc(2),d.Xb(),d.Yb(3,"span",26),d.Sc(4,R,1,0,"button",27),d.Xb(),d.Xb()),2&e){var n=d.mc();d.Fb(2),d.Wc(" ",(null==n.lstRawItemDetails?null:n.lstRawItemDetails.length)>0?"Total Records: "+n.filteredValuesLength:""," "),d.Fb(2),d.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Download.toString()))&&(null==n.lstRawItemDetails?null:n.lstRawItemDetails.length)>0)}}function Y(e,t){if(1&e&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&e){var n=t.$implicit;d.Fb(1),d.Gb("colspan",null==n?null:n.length)}}function C(e,t){if(1&e&&(d.Yb(0,"th"),d.Uc(1),d.Xb()),2&e){var n=t.$implicit;d.Fb(1),d.Wc(" ",n.header," ")}}function X(e,t){if(1&e&&(d.Yb(0,"tr"),d.Sc(1,C,2,1,"th",29),d.Xb()),2&e){var n=d.mc();d.Fb(1),d.tc("ngForOf",n.lstRawItemField)}}function A(e,t){1&e&&d.Tb(0,"col",31)}function O(e,t){if(1&e&&(d.Yb(0,"colgroup"),d.Sc(1,A,1,0,"col",30),d.Xb()),2&e){var n=d.mc();d.Fb(1),d.tc("ngForOf",n.lstRawItemField)}}function U(e,t){if(1&e&&(d.Yb(0,"td",33),d.Yb(1,"span"),d.Uc(2),d.Xb(),d.Xb()),2&e){var n=t.$implicit,i=d.mc().$implicit;d.Fb(2),d.Vc(i[n.field])}}function M(e,t){if(1&e&&(d.Yb(0,"tr"),d.Sc(1,U,3,1,"td",32),d.Xb()),2&e){var n=t.columns;d.Fb(1),d.tc("ngForOf",n)}}var k,x,T,L=function(){return{standalone:!0}},_=[{path:"",component:(k=function(a){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(u,a);var r,c,o,l=i(u);function u(t,n,i,a,r,c,o){var d;return e(this,u),(d=l.call(this)).cdRef=t,d.router=n,d._ConstantServices=i,d._MasterServices=a,d._ReportServices=r,d._UtilityService=c,d.datepipe=o,d.UserTypeCurre=localStorage.getItem("userTypeId"),d.userTypes=s.s,d.filteredValuesLength=0,d.ClinicIdSelected="",d.rangeDates=[],d.customDateFormat=s.h,d.maxDate=new Date,d.lstRawItemDetails=[],d.lstRawItemField=[],d.ActionList=s.a,d.lstIAccess=[],d.lstIAccessStr=[],d._ConstantServices.ActiveMenuName="Raw Item Report",d.getPageLevelAccess(),d}return r=u,(c=[{key:"getPageLevelAccess",value:function(){var e,t,n=this,i=this.getUrlWithoutParams(),a=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==a?void 0:a.find(function(e){return e.MenuItemURL===i}))&&(this.lstIAccess=null===(e=a.find(function(e){return e.MenuItemURL===i}))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(function(e){n.lstIAccessStr.push(e.ActionId.toString())}))}},{key:"getUrlWithoutParams",value:function(){var e=this.router.parseUrl(this.router.url);return e.queryParams={},e.fragment=null,e.toString()}},{key:"ngOnInit",value:function(){this.rangeDates=[new Date(Date.now()-6048e5),new Date],s.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.GetConsumedItem()),this.maxYear=this.maxDate.getFullYear()}},{key:"onclinicSelect",value:function(e){this.ClinicIdSelected=e,this.GetConsumedItem()}},{key:"dateRangeChange",value:function(){this.rangeDates[0]&&this.rangeDates[1]&&(void 0!==this.calendar&&(this.calendar.overlayVisible=!1),this.GetConsumedItem())}},{key:"GetConsumedItem",value:function(){if(this.lstRawItemDetails=[],this.lstRawItemField=[],null!=this.ClinicIdSelected&&null!=this.ClinicIdSelected&&""!=this.ClinicIdSelected){if(null!==this.rangeDates[0]||void 0!==this.rangeDates[0]&&null!==this.rangeDates[1]||void 0!==this.rangeDates[1]){var e=new Date(this.datepipe.transform(this.rangeDates[0],"yyyy-MM-dd")),t=new Date(this.datepipe.transform(this.rangeDates[1],"yyyy-MM-dd"));Math.floor((t-e)/864e5)>=15&&(this._UtilityService.showWarningAlert("You can't select more than 15 days"),this.rangeDates[0]=new Date(Date.now()-6048e5),this.rangeDates[1]=new Date)}this.GetRawItemDetailsListByDate()}else this._UtilityService.showWarningAlert("Select Clinic!!")}},{key:"GetRawItemDetailsListByDate",value:function(){var e=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._ReportServices.GetRawItemDetailsListByDate(this.ClinicIdSelected,this.datepipe.transform(this.rangeDates[0],"MM-dd-yyyy"),this.datepipe.transform(this.rangeDates[1],"MM-dd-yyyy")).subscribe(function(t){var n;if(e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.lstRawItemDetails=i=i||[],e.filteredValuesLength=null===(n=e.lstRawItemDetails)||void 0===n?void 0:n.length;var a=JSON.parse(t.actionResult.result2);e.lstRawItemField=a=a||[],e.cdRef.detectChanges()}else e.lstRawItemDetails=[]})}},{key:"exportToItemExcel",value:function(){var e={reportname:"RawItemReportByDates",filename:"RawItemReportByDates"};e.clinicId=this.ClinicIdSelected,e.dFrom=this.rangeDates[0],e.dTo=this.rangeDates[1],this._MasterServices.downloadReport(e)}}])&&t(r.prototype,c),o&&t(r,o),u}(u.a),k.\u0275fac=function(e){return new(e||k)(d.Sb(d.h),d.Sb(l.i),d.Sb(s.f),d.Sb(b.a),d.Sb(p.a),d.Sb(f.a),d.Sb(o.f))},k.\u0275cmp=d.Mb({type:k,selectors:[["app-raw-item-report"]],viewQuery:function(e,t){var n;1&e&&d.cd(I,1),2&e&&d.Hc(n=d.jc())&&(t.calendar=n.first)},features:[d.Cb],decls:27,vars:17,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],["class","col-auto",4,"ngIf"],["class","col col-md-3",4,"ngIf"],[1,"col-auto"],[1,"mt-2"],[1,"required"],["selectionMode","range","inputId","icon","name","rangeDates",3,"maxDate","monthNavigator","yearNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],[1,"col","col-md-3"],["type","button",1,"btn","btn-new-primary",3,"click"],[1,"row"],["scrollHeight","calc(100vh - 250px)","responsiveLayout","scroll",3,"columns","value","rowHover","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","colgroup"],["pTemplate","body"],["for","",1,"pt-2"],[3,"isCenterLabel","mode","onclinicSelect"],[1,"p-d-flex"],[1,"p-ml-left","pt-3"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[4,"ngFor","ngForOf"],["style","width:100px",4,"ngFor","ngForOf"],[2,"width","100px"],["style","word-wrap: break-word;","class","dietcheckbox",4,"ngFor","ngForOf"],[1,"dietcheckbox",2,"word-wrap","break-word"]],template:function(e,t){1&e&&(d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"div",3),d.Yb(4,"div",4),d.Sc(5,S,5,0,"div",5),d.Sc(6,D,2,2,"div",6),d.Yb(7,"div",7),d.Yb(8,"label",8),d.Uc(9,"Date: "),d.Yb(10,"span",9),d.Uc(11,"*"),d.Xb(),d.Xb(),d.Xb(),d.Yb(12,"div",7),d.Yb(13,"p-calendar",10,11),d.ic("ngModelChange",function(e){return t.rangeDates=e})("onSelect",function(){return t.dateRangeChange()}),d.Xb(),d.Xb(),d.Yb(15,"div",12),d.Yb(16,"button",13),d.ic("click",function(){return t.GetConsumedItem()}),d.Uc(17,"Search"),d.Xb(),d.Xb(),d.Xb(),d.Yb(18,"div",14),d.Yb(19,"div",1),d.Yb(20,"p-table",15,16),d.Sc(22,F,5,2,"ng-template",17),d.Sc(23,Y,3,1,"ng-template",18),d.Sc(24,X,2,1,"ng-template",19),d.Sc(25,O,2,1,"ng-template",20),d.Sc(26,M,2,1,"ng-template",21),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()),2&e&&(d.Fb(5),d.tc("ngIf",t.UserTypeCurre===t.userTypes.SuperAdmin),d.Fb(1),d.tc("ngIf",t.UserTypeCurre===t.userTypes.SuperAdmin),d.Fb(7),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.maxYear,""),d.tc("maxDate",t.maxDate)("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.rangeDates)("ngModelOptions",d.yc(16,L))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),d.Fb(7),d.tc("columns",t.lstRawItemField)("value",t.lstRawItemDetails)("rowHover",!0)("scrollable",!0))},directives:[o.p,m.a,h.o,h.r,g.c,v.i,y.a,w.b,o.o],styles:[""]}),k)}],P=((x=function t(){e(this,t)}).\u0275fac=function(e){return new(e||x)},x.\u0275mod=d.Qb({type:x}),x.\u0275inj=d.Pb({imports:[[l.l.forChild(_)],l.l]}),x),j=c("arFO"),N=c("7kUa"),B=c("T2Aj"),G=((T=function t(){e(this,t)}).\u0275fac=function(e){return new(e||T)},T.\u0275mod=d.Qb({type:T}),T.\u0275inj=d.Pb({imports:[[o.c,P,h.i,g.f,w.c,j.b,N.b,m.b,B.a]]}),T)}}])}();