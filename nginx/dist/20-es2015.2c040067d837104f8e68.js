(window.webpackJsonp=window.webpackJsonp||[]).push([[20,150],{dPl2:function(t,e,i){"use strict";i.d(e,"a",function(){return M}),i.d(e,"b",function(){return A}),i.d(e,"c",function(){return R});var n=i("fXoL"),s=i("ofXK"),l=i("xlun"),o=i("Q4Mo"),c=i("7zfz"),r=i("YyRF");function a(t,e){1&t&&n.Ub(0)}function d(t,e){if(1&t&&(n.Wb(0),n.Sc(1,a,1,0,"ng-container",3),n.Vb()),2&t){const t=n.mc(2);n.Fb(1),n.tc("ngTemplateOutlet",t.contentTemplate)}}function b(t,e){if(1&t&&(n.Yb(0,"div",1),n.rc(1),n.Sc(2,d,2,1,"ng-container",2),n.Xb()),2&t){const t=n.mc();n.tc("hidden",!t.selected),n.Gb("id",t.id)("aria-hidden",!t.selected)("aria-labelledby",t.id+"-label"),n.Fb(2),n.tc("ngIf",t.contentTemplate&&(t.cache?t.loaded:t.selected))}}const u=["*"],h=["navbar"],m=["inkbar"];function p(t,e){if(1&t&&n.Tb(0,"span",16),2&t){const t=n.mc(3).$implicit;n.tc("ngClass",t.leftIcon)}}function g(t,e){if(1&t&&n.Tb(0,"span",17),2&t){const t=n.mc(3).$implicit;n.tc("ngClass",t.rightIcon)}}function I(t,e){if(1&t&&(n.Wb(0),n.Sc(1,p,1,1,"span",13),n.Yb(2,"span",14),n.Uc(3),n.Xb(),n.Sc(4,g,1,1,"span",15),n.Vb()),2&t){const t=n.mc(2).$implicit;n.Fb(1),n.tc("ngIf",t.leftIcon),n.Fb(2),n.Vc(t.header),n.Fb(1),n.tc("ngIf",t.rightIcon)}}function f(t,e){1&t&&n.Ub(0)}function v(t,e){if(1&t){const t=n.Zb();n.Yb(0,"span",18),n.ic("click",function(e){n.Lc(t);const i=n.mc(2).$implicit;return n.mc().close(e,i)}),n.Xb()}}const C=function(t,e){return{"p-highlight":t,"p-disabled":e}};function S(t,e){if(1&t){const t=n.Zb();n.Yb(0,"li",8),n.Yb(1,"a",9),n.ic("click",function(e){n.Lc(t);const i=n.mc().$implicit;return n.mc().open(e,i)})("keydown.enter",function(e){n.Lc(t);const i=n.mc().$implicit;return n.mc().open(e,i)}),n.Sc(2,I,5,3,"ng-container",10),n.Sc(3,f,1,0,"ng-container",11),n.Sc(4,v,1,0,"span",12),n.Xb(),n.Xb()}if(2&t){const t=n.mc().$implicit;n.Hb(t.headerStyleClass),n.tc("ngClass",n.Ac(16,C,t.selected,t.disabled))("ngStyle",t.headerStyle),n.Fb(1),n.tc("pTooltip",t.tooltip)("tooltipPosition",t.tooltipPosition)("positionStyle",t.tooltipPositionStyle)("tooltipStyleClass",t.tooltipStyleClass),n.Gb("id",t.id+"-label")("aria-selected",t.selected)("aria-controls",t.id)("aria-selected",t.selected)("tabindex",t.disabled?null:"0"),n.Fb(1),n.tc("ngIf",!t.headerTemplate),n.Fb(1),n.tc("ngTemplateOutlet",t.headerTemplate),n.Fb(1),n.tc("ngIf",t.closable)}}function T(t,e){1&t&&n.Sc(0,S,5,19,"li",7),2&t&&n.tc("ngIf",!e.$implicit.closed)}let y=0,M=(()=>{class t{constructor(t,e,i){this.viewContainer=e,this.cd=i,this.cache=!0,this.tooltipPosition="top",this.tooltipPositionStyle="absolute",this.id="p-tabpanel-"+y++,this.tabView=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"content":default:this.contentTemplate=t.template}})}get selected(){return this._selected}set selected(t){this._selected=t,this.loaded||this.cd.detectChanges(),t&&(this.loaded=!0)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this.tabView.cd.markForCheck()}get header(){return this._header}set header(t){this._header=t,this.tabView.cd.markForCheck()}ngOnDestroy(){this.view=null}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(Object(n.X)(()=>A)),n.Sb(n.S),n.Sb(n.h))},t.\u0275cmp=n.Mb({type:t,selectors:[["p-tabPanel"]],contentQueries:function(t,e,i){if(1&t&&n.Lb(i,c.i,0),2&t){let t;n.Hc(t=n.jc())&&(e.templates=t)}},inputs:{cache:"cache",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",selected:"selected",disabled:"disabled",header:"header",closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",leftIcon:"leftIcon",rightIcon:"rightIcon",tooltip:"tooltip",tooltipStyleClass:"tooltipStyleClass"},ngContentSelectors:u,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(t,e){1&t&&(n.sc(),n.Sc(0,b,3,5,"div",0)),2&t&&n.tc("ngIf",!e.closed)},directives:[s.p,s.t],encapsulation:2}),t})(),A=(()=>{class t{constructor(t,e){this.el=t,this.cd=e,this.orientation="top",this.onChange=new n.o,this.onClose=new n.o,this.activeIndexChange=new n.o}ngAfterContentInit(){this.initTabs(),this.tabPanels.changes.subscribe(t=>{this.initTabs()})}ngAfterViewChecked(){this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}open(t,e){if(e.disabled)t&&t.preventDefault();else{if(!e.selected){let i=this.findSelectedTab();i&&(i.selected=!1),this.tabChanged=!0,e.selected=!0;let n=this.findTabIndex(e);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(n),this.onChange.emit({originalEvent:t,index:n})}t&&t.preventDefault()}}close(t,e){this.controlClose?this.onClose.emit({originalEvent:t,index:this.findTabIndex(e),close:()=>{this.closeTab(e)}}):(this.closeTab(e),this.onClose.emit({originalEvent:t,index:this.findTabIndex(e)})),t.stopPropagation()}closeTab(t){if(!t.disabled){if(t.selected){this.tabChanged=!0,t.selected=!1;for(let e=0;e<this.tabs.length;e++){let i=this.tabs[e];if(!i.closed&&!t.disabled){i.selected=!0;break}}}t.closed=!0}}findSelectedTab(){for(let t=0;t<this.tabs.length;t++)if(this.tabs[t].selected)return this.tabs[t];return null}findTabIndex(t){let e=-1;for(let i=0;i<this.tabs.length;i++)if(this.tabs[i]==t){e=i;break}return e}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(t){this._activeIndex=t,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0)}updateInkBar(){let t=r.b.findSingle(this.navbar.nativeElement,"li.p-highlight");this.inkbar.nativeElement.style.width=r.b.getWidth(t)+"px",this.inkbar.nativeElement.style.left=r.b.getOffset(t).left-r.b.getOffset(this.navbar.nativeElement).left+"px"}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(n.m),n.Sb(n.h))},t.\u0275cmp=n.Mb({type:t,selectors:[["p-tabView"]],contentQueries:function(t,e,i){if(1&t&&n.Lb(i,M,0),2&t){let t;n.Hc(t=n.jc())&&(e.tabPanels=t)}},viewQuery:function(t,e){if(1&t&&(n.cd(h,1),n.cd(m,1)),2&t){let t;n.Hc(t=n.jc())&&(e.navbar=t.first),n.Hc(t=n.jc())&&(e.inkbar=t.first)}},inputs:{orientation:"orientation",activeIndex:"activeIndex",style:"style",styleClass:"styleClass",controlClose:"controlClose"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:u,decls:8,vars:5,consts:[[3,"ngClass","ngStyle"],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],[1,"p-tabview-panels"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown.enter"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tabview-close pi pi-times",3,"click",4,"ngIf"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-close","pi","pi-times",3,"click"]],template:function(t,e){1&t&&(n.sc(),n.Yb(0,"div",0),n.Yb(1,"ul",1,2),n.Sc(3,T,1,1,"ng-template",3),n.Tb(4,"li",4,5),n.Xb(),n.Yb(6,"div",6),n.rc(7),n.Xb(),n.Xb()),2&t&&(n.Hb(e.styleClass),n.tc("ngClass","p-tabview p-component")("ngStyle",e.style),n.Fb(3),n.tc("ngForOf",e.tabs))},directives:[s.n,s.q,s.o,s.p,o.a,l.a,s.t],styles:[".p-tabview-nav{display:flex;flex-wrap:wrap;list-style-type:none;margin:0;padding:0}.p-tabview-nav-link{-ms-user-select:none;-webkit-user-select:none;align-items:center;cursor:pointer;display:flex;overflow:hidden;position:relative;text-decoration:none;user-select:none}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1}.p-tabview-close{z-index:1}"],encapsulation:2,changeDetection:0}),t})(),R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Qb({type:t}),t.\u0275inj=n.Pb({imports:[[s.c,c.j,l.b,o.b],c.j]}),t})()},hQ1B:function(t,e,i){"use strict";i.r(e),i.d(e,"ExtraItemConsumptionModule",function(){return O});var n=i("ofXK"),s=i("tyNb"),l=i("zXHC"),o=i("fXoL");const c=[{path:"",component:l.a}];let r=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({imports:[[s.l.forChild(c)],s.l]}),t})();var a=i("3Pt+"),d=i("rEr+"),b=i("jIHw"),u=i("Q4Mo"),h=i("arFO"),m=i("7kUa"),p=i("eO1q"),g=i("/RsI"),I=i("Nf9I"),f=i("Ks7X"),v=i("LuMj"),C=i("z8Lm"),S=i("1SLH"),T=i("lVkt"),y=i("ELi9"),M=i("Qcri"),A=i("QbTu"),R=i("fCr0"),D=i("g9iH"),P=i("BpGo"),Y=i("T2Aj"),X=i("dPl2"),U=i("9XlL"),N=i("ycwT"),x=i("kcK2");const B=[{path:"",component:i("t9DX").a}];let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({imports:[[s.l.forChild(B)],s.l]}),t})();var E=i("m1XX"),k=i("QoE7");let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({imports:[[n.c,w,E.b,U.a,N.a,k.a]]}),t})();var F=i("V5BG");let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({imports:[[n.c,r,a.i,a.v,d.f,b.c,u.b,h.b,m.b,p.b,g.b,I.b,f.b,v.b,C.b,S.b,T.b,y.a,M.a,A.a,R.CommonModuleModule,D.b,P.a,Y.a,X.c,U.a,N.a,x.a,L,F.b]]}),t})()},t9DX:function(t,e,i){"use strict";i.d(e,"a",function(){return U});var n=i("Nach"),s=i("CwUn"),l=i("fXoL"),o=i("dcBc"),c=i("G+wY"),r=i("NLkC"),a=i("Q8Cd"),d=i("sCq/"),b=i("ofXK"),u=i("Yh3i");function h(t,e){if(1&t&&(l.Yb(0,"table",22),l.Yb(1,"tbody"),l.Yb(2,"tr",8),l.Yb(3,"td",27),l.Yb(4,"strong"),l.Uc(5," Bill of Provisional No: "),l.Yb(6,"span"),l.Uc(7),l.Xb(),l.Xb(),l.Xb(),l.Yb(8,"td",28),l.Yb(9,"b"),l.Uc(10,"Bill of Provisional Date: "),l.Xb(),l.Yb(11,"span"),l.Uc(12),l.nc(13,"date"),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()),2&t){const t=l.mc();l.Fb(7),l.Vc(t.TIProvisionalNo),l.Fb(5),l.Vc(l.pc(13,2,t.TIProvisionalDate,t.customDateFormat.DEF_DATE))}}function m(t,e){1&t&&(l.Yb(0,"th",9),l.Uc(1,"Dis %"),l.Xb())}function p(t,e){1&t&&(l.Yb(0,"th",9),l.Uc(1," Dis Amount"),l.Xb())}function g(t,e){if(1&t&&(l.Yb(0,"td",29),l.Uc(1),l.nc(2,"number"),l.Xb()),2&t){const t=l.mc().$implicit;l.Fb(1),l.Wc(" ",l.pc(2,1,t.IDiscountPercentage,"1.1-2"),"")}}function I(t,e){if(1&t&&(l.Yb(0,"td",29),l.Uc(1),l.nc(2,"number"),l.Xb()),2&t){const t=l.mc().$implicit;l.Fb(1),l.Wc(" ",l.pc(2,1,t.IDiscountAmount,"1.1-2")," ")}}function f(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"td",29),l.Uc(2),l.Xb(),l.Yb(3,"td",29),l.Uc(4),l.Xb(),l.Yb(5,"td",29),l.Uc(6),l.Xb(),l.Yb(7,"td",29),l.Uc(8),l.Xb(),l.Yb(9,"td",29),l.Uc(10),l.nc(11,"number"),l.Xb(),l.Sc(12,g,3,4,"td",30),l.Sc(13,I,3,4,"td",30),l.Yb(14,"td",29),l.Uc(15),l.nc(16,"number"),l.Xb(),l.Xb()),2&t){const t=e.$implicit,i=e.index,n=l.mc();l.Fb(2),l.Wc(" ",i+1,""),l.Fb(2),l.Wc(" ",t.HSNCODE,""),l.Fb(2),l.Wc(" ",null==t.FGENERIC||null==t.FGENERIC||"0 x 0"==t.FGENERIC||0==n.IsRoomDesc?t.Description:"Treatment ("+t.Description+")",""),l.Fb(2),l.Wc(" ",t.Qty,""),l.Fb(2),l.Wc(" ",l.pc(11,8,t.MRP,"1.1-2"),""),l.Fb(2),l.tc("ngIf",n.ItemWiseTotalDisAmount>0),l.Fb(1),l.tc("ngIf",n.ItemWiseTotalDisAmount>0),l.Fb(2),l.Wc(" ",l.pc(16,11,t.MRP*t.Qty-t.IDiscountAmount,"1.1-2"),"")}}function v(t,e){1&t&&l.Tb(0,"td",31)}function C(t,e){1&t&&l.Tb(0,"td",31)}function S(t,e){1&t&&(l.Yb(0,"th",35),l.Uc(1,"Transaction By"),l.Xb())}function T(t,e){if(1&t&&(l.Yb(0,"td",40),l.Uc(1),l.Xb()),2&t){const t=l.mc().$implicit;l.Fb(1),l.Wc(" ",t.DepositPatient," ")}}function y(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"td",40),l.Uc(2),l.nc(3,"titlecase"),l.Xb(),l.Yb(4,"td",40),l.Uc(5),l.nc(6,"titlecase"),l.Xb(),l.Sc(7,T,2,1,"td",41),l.Yb(8,"td",40),l.Uc(9),l.Xb(),l.Yb(10,"td",40),l.Uc(11),l.nc(12,"date"),l.Xb(),l.Yb(13,"td",40),l.Uc(14),l.nc(15,"date"),l.Xb(),l.Yb(16,"td",40),l.Uc(17),l.nc(18,"number"),l.Xb(),l.Xb()),2&t){const t=e.$implicit,i=l.mc(3);l.Fb(2),l.Xc(" ",l.oc(3,8,t.TrnMode)," ","Bank Transfer"==t.TrnMode&&null!=t.BankName?" - "+t.BankName:""," "),l.Fb(3),l.Wc(" ",l.oc(6,10,t.InvType)," "),l.Fb(2),l.tc("ngIf",1==i.lsobjClinicMaster.IsShowTranPatient),l.Fb(2),l.Wc(" ",t.TransactionId," "),l.Fb(2),l.Wc(" ",l.pc(12,12,t.TrnDate,i.customDateFormat.DEF_DATE)," "),l.Fb(3),l.Wc(" ",l.pc(15,15,t.CreatedOn,i.customDateFormat.DEF_DATE)," "),l.Fb(3),l.Wc(" ",l.pc(18,18,"Refund"==t.InvType?-t.Amount:t.Amount,"1.1-2")," ")}}function M(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"th",42),l.Uc(2," Total Refund"),l.Xb(),l.Yb(3,"th",39),l.Uc(4),l.nc(5,"number"),l.Xb(),l.Xb()),2&t){const t=l.mc(3);l.Fb(1),l.tc("colSpan",1==t.lsobjClinicMaster.IsShowTranPatient?6:5),l.Fb(3),l.Wc(" ",l.pc(5,2,t.TotalRefund,"1.1-2"),"")}}function A(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"th",42),l.Uc(2," Total Balance"),l.Xb(),l.Yb(3,"th",39),l.Uc(4),l.nc(5,"number"),l.Xb(),l.Xb()),2&t){const t=l.mc(3);l.Fb(1),l.tc("colSpan",1==t.lsobjClinicMaster.IsShowTranPatient?6:5),l.Fb(3),l.Wc(" ",l.pc(5,2,t.TotalReceive-(t.TotalReceive-(null==t.TrnMain[0]?null:t.TrnMain[0].NETAMNT)+(null==t.TrnMain[0]?null:t.TrnMain[0].NETAMNT)),"1.1-2"),"")}}function R(t,e){if(1&t&&(l.Yb(0,"table",33),l.Yb(1,"thead",7),l.Yb(2,"tr",34),l.Yb(3,"th",35),l.Uc(4,"Payment Mode"),l.Xb(),l.Yb(5,"th",35),l.Uc(6,"Type"),l.Xb(),l.Sc(7,S,2,0,"th",36),l.Yb(8,"th",35),l.Uc(9,"TransactionId"),l.Xb(),l.Yb(10,"th",35),l.Uc(11,"Transaction Date"),l.Xb(),l.Yb(12,"th",35),l.Uc(13,"Receipt Date"),l.Xb(),l.Yb(14,"th",35),l.Uc(15,"Amount"),l.Xb(),l.Xb(),l.Xb(),l.Yb(16,"tbody",7),l.Sc(17,y,19,21,"tr",12),l.Yb(18,"tr"),l.Yb(19,"th",37),l.Uc(20,"\xa0"),l.Xb(),l.Xb(),l.Yb(21,"tr"),l.Yb(22,"th",38),l.Uc(23," Total Receive"),l.Xb(),l.Yb(24,"th",39),l.Uc(25),l.nc(26,"number"),l.Xb(),l.Xb(),l.Sc(27,M,6,5,"tr",20),l.Sc(28,A,6,5,"tr",20),l.Xb(),l.Xb()),2&t){const t=l.mc(2);l.Fb(7),l.tc("ngIf",1==t.lsobjClinicMaster.IsShowTranPatient),l.Fb(10),l.tc("ngForOf",t.TenderInfo),l.Fb(2),l.tc("colSpan",1==t.lsobjClinicMaster.IsShowTranPatient?7:6),l.Fb(3),l.tc("colSpan",1==t.lsobjClinicMaster.IsShowTranPatient?6:5),l.Fb(3),l.Wc(" ",l.pc(26,7,t.TotalReceive,"1.1-2"),""),l.Fb(2),l.tc("ngIf",t.TotalRefund>0&&!t.lsobjClinicMaster.IsTIBriefSummary),l.Fb(1),l.tc("ngIf",t.TenderInfo.length>0&&t.lsobjClinicMaster.IsTIBriefSummary)}}function D(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"td",32),l.Sc(2,R,29,10,"table",21),l.Xb(),l.Xb()),2&t){const t=l.mc();l.Fb(2),l.tc("ngIf",t.TenderInfo.length>0)}}function P(t,e){1&t&&(l.Yb(0,"table",22),l.Yb(1,"tbody"),l.Yb(2,"tr"),l.Yb(3,"td",35),l.Yb(4,"strong"),l.Uc(5,"Brief Summary"),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb())}function Y(t,e){if(1&t&&(l.Yb(0,"table",33),l.Yb(1,"thead",7),l.Yb(2,"tr",34),l.Yb(3,"th",35),l.Uc(4,"Added Rs"),l.Xb(),l.Yb(5,"th",35),l.Uc(6,"Concession Rs"),l.Xb(),l.Yb(7,"th",35),l.Uc(8,"Total Due Rs"),l.Xb(),l.Yb(9,"th",35),l.Uc(10,"Deposited Rs"),l.Xb(),l.Yb(11,"th",35),l.Uc(12,"Refund Rs"),l.Xb(),l.Yb(13,"th",35),l.Uc(14,"Balance Rs"),l.Xb(),l.Xb(),l.Xb(),l.Yb(15,"tbody",7),l.Yb(16,"tr"),l.Yb(17,"td",40),l.Uc(18),l.nc(19,"number"),l.Xb(),l.Yb(20,"td",40),l.Uc(21),l.nc(22,"number"),l.Xb(),l.Yb(23,"td",40),l.Uc(24),l.nc(25,"number"),l.Xb(),l.Yb(26,"td",40),l.Uc(27),l.nc(28,"number"),l.Xb(),l.Yb(29,"td",40),l.Uc(30," 0.0 "),l.Xb(),l.Yb(31,"td",40),l.Uc(32),l.nc(33,"number"),l.Xb(),l.Xb(),l.Xb(),l.Xb()),2&t){const t=l.mc();l.Fb(18),l.Wc(" ",l.pc(19,5,t.TotalAmount+t.TotalDiscount,"1.1-2")," "),l.Fb(3),l.Wc(" ",l.pc(22,8,t.TotalDiscount,"1.1-2")," "),l.Fb(3),l.Wc(" ",l.pc(25,11,t.TotalAmount,"1.1-2")," "),l.Fb(3),l.Wc(" ",l.pc(28,14,t.TotalReceive,"1.1-2")," "),l.Fb(5),l.Wc(" ",l.pc(33,17,t.TotalReceive-(t.TotalReceive-t.TotalAmount+t.TotalAmount),"1.1-2")," ")}}function X(t,e){1&t&&(l.Yb(0,"table",22),l.Yb(1,"tbody"),l.Yb(2,"tr"),l.Yb(3,"td",43),l.Yb(4,"strong"),l.Uc(5,"Bill Is Provisional"),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb())}let U=(()=>{class t extends s.a{constructor(t,e,i,s){super(),this.cdRef=t,this._MasterServices=e,this._PatientServices=i,this._UtilityService=s,this.lsobjClinicMaster=JSON.parse(localStorage.getItem("objClinicMaster"))||null,this.TIProvisionalNo=null,this.TIProvisionalDate=new Date,this.customDateFormat=n.h,this.IsVisitor=!1,this.RemainingAmount=0,this.TrnMain=[],this.ProdList=[],this.ShowBatchExpiry=!1,this.lstItem=[],this.TotalAmount=0,this.ItemWiseTotalDisAmount=0,this.BillWiseDiscountPer=0,this.TenderInfo=[],this.TotalFlatDiscount=0,this.TotalDiscount=0,this.RoomNumber=0,this.LstRoomCountByMCode=[],this.IsRoomDesc=!0,this.TotalReceive=0,this.TotalRefund=0,this.IsLetterhead="false",this.TotalQuantity=0}ngOnInit(){}ngOnChanges(t){this.LoadInvoiceData()}onselectedLetterhead(t){this.IsLetterhead=t}LoadInvoiceData(){this.TotalReceive=0,this.TotalRefund=0,this.TenderInfo=[],this.TrnMain=[],this.ProdList=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.getViewPerformaForHMSCombinedGrouped(this.SlotBookingIdSelected).subscribe(t=>{var e,i,n;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var s=JSON.parse(t.actionResult.result);if(this.ProdList=s=s||[],(null===(e=this.ProdList.filter(t=>"Treatment/Medicated food charges"==t.DESCRIPTION||"Treatment Charges"==t.DESCRIPTION))||void 0===e?void 0:e.length)>0&&(this.IsRoomDesc=!1),this.TotalAmount=0,this.cdRef.detectChanges(),this.ProdList.map(t=>{this.TotalQuantity=this.TotalQuantity+t.Qty,this.TotalAmount=this.TotalAmount+(t.MRP*t.Qty-t.IDiscountAmount),this.ItemWiseTotalDisAmount=this.ItemWiseTotalDisAmount+t.IDiscountAmount}),this.BillWiseDiscountPer=100*this.TotalFlatDiscount/this.TotalAmount,this.TotalDiscount=this.ItemWiseTotalDisAmount+this.TotalFlatDiscount,null!=t.actionResult.result3&&null!=t.actionResult.result3&&(null===(i=t.actionResult.result3)||void 0===i?void 0:i.length)>0){var l=JSON.parse(t.actionResult.result3);this.TenderInfo=l=l||[],(null===(n=this.TenderInfo)||void 0===n?void 0:n.length)>0&&(this.TenderInfo.map(t=>{"Receive"==t.InvType&&(this.TotalReceive=this.TotalReceive+parseFloat(t.Amount)),"Refund"==t.InvType&&(this.TotalRefund=this.TotalRefund+parseFloat(t.Amount))}),this.cdRef.detectChanges())}}this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(l.h),l.Sb(o.a),l.Sb(c.a),l.Sb(r.a))},t.\u0275cmp=l.Mb({type:t,selectors:[["app-pre-invoice-print"]],inputs:{SlotBookingIdSelected:"SlotBookingIdSelected",TIProvisionalNo:"TIProvisionalNo",TIProvisionalDate:"TIProvisionalDate",RemainingAmount:"RemainingAmount"},features:[l.Cb,l.Db],decls:77,vars:34,consts:[[3,"IsLetterhead","IsNgxPrint","onselectedLetterhead"],["id","print-section",1,"row"],[1,"col-md-12"],[3,"IsVisitor","slotBookingId","IsGroup","IsGST","IsLetterhead"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","font-size","15px"],["style","width: 100%; margin: 0 auto; box-sizing: border-box;","cellpadding","0","cellspacing","0",4,"ngIf"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","border","1px solid #d3d3d3","margin-top","10px","overflow-x","scroll"],["align","Center"],[2,"background-color","#d3d3d3"],[2,"padding","6px","border-left","1px solid #d3d3d3"],["style","padding: 6px;border-left: 1px solid #d3d3d3;",4,"ngIf"],[2,"padding","6px","border-left","1px solid #d3d3d3","border-right","1px solid #d3d3d3"],[4,"ngFor","ngForOf"],["colspan","3","align","right",2,"padding","2px"],[2,"padding","2px"],["colspan","2",4,"ngIf"],["align","right",2,"padding","2px"],["colspan","4","align","left",2,"padding","2px"],["align","right",2,"padding","2px","font-size","medium"],[2,"font-size","medium"],[4,"ngIf"],["style","width: 100%; margin: 0 auto; box-sizing: border-box; border: 1px solid #d3d3d3; margin-top: 5px;","cellpadding","0","cellspacing","0",4,"ngIf"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box"],[2,"width","100%","line-height","80px"],[2,"width","60%"],[2,"width","40%"],[1,"mt-3"],[2,"padding","5px"],[2,"text-align","right","padding","5px"],[2,"padding","6px 0","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3"],["style","padding: 6px 0; border-left: 1px solid #d3d3d3; border-bottom: 1px solid #d3d3d3;border-top: 1px solid #d3d3d3;",4,"ngIf"],["colspan","2"],["colspan","8"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","border","1px solid #d3d3d3","margin-top","5px"],[2,"background","#d3d3d3"],[2,"padding","6px"],["style","padding: 6px;",4,"ngIf"],[3,"colSpan"],[2,"padding","6px 10px","border-left","1px solid #d5d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3","text-align","right",3,"colSpan"],[2,"padding","6px 10px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3"],[2,"padding","6px 0","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],["style","padding: 6px 0; border-left: 1px solid #d3d3d3; border-bottom: 1px solid #d3d3d3;",4,"ngIf"],[2,"padding","6px 10px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3","text-align","right",3,"colSpan"],["align","Center",2,"padding","6px"]],template:function(t,e){1&t&&(l.Yb(0,"app-print-access-header",0),l.ic("onselectedLetterhead",function(t){return e.onselectedLetterhead(t)}),l.Xb(),l.Yb(1,"div",1),l.Yb(2,"div",2),l.Tb(3,"app-print-header",3),l.Yb(4,"table",4),l.Yb(5,"tbody"),l.Yb(6,"tr"),l.Sc(7,h,14,5,"table",5),l.Yb(8,"table",6),l.Yb(9,"thead",7),l.Yb(10,"tr",8),l.Yb(11,"th",9),l.Uc(12,"S.No"),l.Xb(),l.Yb(13,"th",9),l.Uc(14,"HSN/SAC"),l.Xb(),l.Yb(15,"th",9),l.Uc(16,"Description"),l.Xb(),l.Yb(17,"th",9),l.Uc(18,"QTY"),l.Xb(),l.Yb(19,"th",9),l.Uc(20,"MRP"),l.Xb(),l.Sc(21,m,2,0,"th",10),l.Sc(22,p,2,0,"th",10),l.Yb(23,"th",11),l.Uc(24," Amount"),l.Xb(),l.Xb(),l.Xb(),l.Yb(25,"tbody",7),l.Sc(26,f,17,14,"tr",12),l.Yb(27,"tr"),l.Yb(28,"td",13),l.Yb(29,"b"),l.Uc(30,"No of item:"),l.Xb(),l.Xb(),l.Yb(31,"td",14),l.Uc(32),l.nc(33,"number"),l.Xb(),l.Sc(34,v,1,0,"td",15),l.Yb(35,"td",16),l.Yb(36,"b"),l.Uc(37,"Total Amount:"),l.Xb(),l.Xb(),l.Yb(38,"td"),l.Uc(39),l.nc(40,"number"),l.Xb(),l.Xb(),l.Yb(41,"tr"),l.Yb(42,"td",17),l.Yb(43,"b"),l.Uc(44,"Amount in words:"),l.Xb(),l.Uc(45),l.nc(46,"amountToWord"),l.Xb(),l.Sc(47,C,1,0,"td",15),l.Yb(48,"td",18),l.Yb(49,"b"),l.Uc(50,"Total Remaining:"),l.Xb(),l.Xb(),l.Yb(51,"td",19),l.Yb(52,"b"),l.Uc(53),l.nc(54,"number"),l.Xb(),l.Xb(),l.Xb(),l.Sc(55,D,3,1,"tr",20),l.Xb(),l.Xb(),l.Sc(56,P,6,0,"table",5),l.Sc(57,Y,34,20,"table",21),l.Sc(58,X,6,0,"table",5),l.Yb(59,"table",22),l.Yb(60,"tbody"),l.Yb(61,"tr",23),l.Yb(62,"td",24),l.Yb(63,"b"),l.Uc(64,"Health Seeker's Signature: ................................"),l.Xb(),l.Xb(),l.Yb(65,"td",25),l.Yb(66,"b"),l.Uc(67,"Authorised Signatory: ................................"),l.Xb(),l.Xb(),l.Xb(),l.Yb(68,"tr"),l.Yb(69,"td",24),l.Yb(70,"b"),l.Uc(71,"Prepared By: .........................................................."),l.Xb(),l.Xb(),l.Yb(72,"td",25),l.Yb(73,"b"),l.Uc(74,"Checked By: ...................................................."),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(75,"div",26),l.Yb(76,"app-print-access-header",0),l.ic("onselectedLetterhead",function(t){return e.onselectedLetterhead(t)}),l.Xb(),l.Xb()),2&t&&(l.tc("IsLetterhead",e.IsLetterhead)("IsNgxPrint",!0),l.Fb(3),l.tc("IsVisitor",e.IsVisitor)("slotBookingId",e.SlotBookingIdSelected)("IsGroup",!0)("IsGST",!0)("IsLetterhead",e.IsLetterhead),l.Fb(4),l.tc("ngIf",null!=e.TIProvisionalNo&&null!=e.TIProvisionalNo&&""!=e.TIProvisionalNo),l.Fb(14),l.tc("ngIf",e.ItemWiseTotalDisAmount>0),l.Fb(1),l.tc("ngIf",e.ItemWiseTotalDisAmount>0),l.Fb(4),l.tc("ngForOf",e.ProdList),l.Fb(6),l.Vc(l.pc(33,23,e.TotalQuantity,"1.0-0")),l.Fb(2),l.tc("ngIf",e.ItemWiseTotalDisAmount>0),l.Fb(5),l.Wc("",l.pc(40,26,e.TotalAmount,"1.1-2")," "),l.Fb(6),l.Wc(" ",l.oc(46,29,e.TotalAmount),""),l.Fb(2),l.tc("ngIf",e.ItemWiseTotalDisAmount>0),l.Fb(6),l.Vc(l.pc(54,31,e.RemainingAmount,"1.1-2")),l.Fb(2),l.tc("ngIf",e.TenderInfo.length>0),l.Fb(1),l.tc("ngIf",e.TenderInfo.length>0&&e.lsobjClinicMaster.IsTIBriefSummary),l.Fb(1),l.tc("ngIf",e.TenderInfo.length>0&&e.lsobjClinicMaster.IsTIBriefSummary),l.Fb(1),l.tc("ngIf",e.TenderInfo.length>0&&e.lsobjClinicMaster.IsTIBriefSummary),l.Fb(18),l.tc("IsLetterhead",e.IsLetterhead)("IsNgxPrint",!0))},directives:[a.a,d.a,b.p,b.o],pipes:[b.g,u.a,b.f,b.y],styles:[""]}),t})()},zXHC:function(t,e,i){"use strict";i.d(e,"a",function(){return Cn});var n=i("1kSV"),s=i("aeiD"),l=i("CwUn"),o=i("Nach"),c=i("fXoL"),r=i("tyNb"),a=i("dcBc"),d=i("G+wY"),b=i("NLkC"),u=i("3Pt+"),h=i("7zfz"),m=i("ofXK"),p=i("/RsI"),g=i("AAHA"),I=i("LuMj"),f=i("arFO"),v=i("V5BG"),C=i("dPl2"),S=i("rEr+"),T=i("jIHw"),y=i("z8Lm"),M=i("g9iH"),A=i("Ks7X"),R=i("7kUa"),D=i("Q4Mo"),P=i("btFH"),Y=i("Rtg/"),X=i("MHjV"),U=i("lVkt"),N=i("eO1q"),x=i("+Lcm"),B=i("Q8Cd"),w=i("sCq/"),E=i("KkSF"),k=i("jhiP"),L=i("9b74"),F=i("t9DX");const O=["AttBankslip1"],_=["AttRefAppslip1"];function W(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",42),c.Yb(1,"div",43),c.Yb(2,"label",44),c.Uc(3,"Center "),c.Yb(4,"span",45),c.Uc(5,"*"),c.Xb(),c.Xb(),c.Xb(),c.Yb(6,"div",46),c.Yb(7,"app-center-dropdown",47),c.ic("onclinicSelect",function(e){return c.Lc(t),c.mc().onclinicSelect(e)})("onselectedClinic",function(e){return c.Lc(t),c.mc().onselectedClinic(e)}),c.Xb(),c.Xb(),c.Xb()}2&t&&(c.Fb(7),c.tc("isCenterLabel",!1)("mode","get"))}function j(t,e){1&t&&c.Tb(0,"hr")}function V(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",48),c.Yb(1,"div",49),c.Yb(2,"p-radioButton",50),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().CustomerType=e})("onClick",function(){return c.Lc(t),c.mc().OnChangeOption()}),c.Xb(),c.Yb(3,"label",51),c.Uc(4,"Patient"),c.Xb(),c.Yb(5,"p-radioButton",52),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().CustomerType=e})("onClick",function(){return c.Lc(t),c.mc().OnChangeOption()}),c.Xb(),c.Yb(6,"label",51),c.Uc(7,"Visitor"),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(2),c.tc("ngModel",t.CustomerType),c.Fb(3),c.tc("ngModel",t.CustomerType)}}function Z(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",48),c.Yb(1,"button",53),c.ic("click",function(){return c.Lc(t),c.mc().ShowInvoiceList()}),c.Uc(2,"Voucher List"),c.Xb(),c.Xb()}}function G(t,e){1&t&&(c.Yb(0,"div",54),c.Yb(1,"label"),c.Uc(2,"Select Health Seeker "),c.Xb(),c.Xb())}function q(t,e){1&t&&c.Uc(0),2&t&&c.Wc(" ",e.$implicit.name," ")}function H(t,e){if(1&t&&c.Uc(0),2&t){const t=e.$implicit;c.Xc(" ",t.FullName,"-",t.BookingNumber," ")}}const Q=function(){return{width:"100%"}};function z(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",55),c.Yb(1,"p-dropdown",56),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().userSelected=e})("onChange",function(){return c.Lc(t),c.mc().onChangeHealthSeeker()}),c.Sc(2,q,1,1,"ng-template",57),c.Sc(3,H,1,2,"ng-template",58),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(1),c.Pc(c.yc(6,Q)),c.tc("options",t.UserList)("ngModel",t.userSelected)("filter",!0)("showClear",!0)}}function K(t,e){1&t&&c.Uc(0),2&t&&c.Wc(" ",e.$implicit.name," ")}const J=function(){return{width:"100%"}};function tt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",55),c.Yb(1,"p-autoComplete",59),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().selectedPatient=e})("onClear",function(){return c.Lc(t),c.mc().onClear()})("onSelect",function(){return c.Lc(t),c.mc().onChangeHealthSeeker()})("completeMethod",function(e){return c.Lc(t),c.mc().searchHealthSeeker(e)}),c.Sc(2,K,1,1,"ng-template",57),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(1),c.Pc(c.yc(6,J)),c.tc("ngModel",t.selectedPatient)("minLength",2)("suggestions",t.suggestions)("inputStyle",c.yc(7,J))}}function et(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",54),c.Yb(1,"input",60),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().SearchByMrNo=e})("change",function(){c.Lc(t);const e=c.mc();return e.userSelected=null,e.selectedPatient=null}),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(1),c.tc("ngModel",t.SearchByMrNo)}}function it(t,e){1&t&&(c.Yb(0,"div",54),c.Yb(1,"label"),c.Uc(2,"Disc. Patient"),c.Xb(),c.Xb())}function nt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",61),c.Yb(1,"div",69),c.Yb(2,"label"),c.Uc(3,"Emp. Code "),c.Yb(4,"span",45),c.Uc(5,"*"),c.Xb(),c.Xb(),c.Yb(6,"input",76),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).VisitorUserMaster.EmpCode=e}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(6),c.tc("ngModel",t.VisitorUserMaster.EmpCode)}}function st(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",61),c.Yb(1,"div",69),c.Yb(2,"label"),c.Uc(3,"Department"),c.Xb(),c.Yb(4,"input",77),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).VisitorUserMaster.Department=e}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(4),c.tc("ngModel",t.VisitorUserMaster.Department)}}function lt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",2),c.Yb(1,"div",61),c.Yb(2,"div",62),c.Yb(3,"label",63),c.Uc(4,"First Name "),c.Yb(5,"span",45),c.Uc(6,"*"),c.Xb(),c.Xb(),c.Yb(7,"input",64,65),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().VisitorUserMaster.FirstName=e})("keypress",function(e){return c.Lc(t),c.mc().validateText(e)}),c.Xb(),c.Xb(),c.Xb(),c.Yb(9,"div",61),c.Yb(10,"div",62),c.Yb(11,"label",63),c.Uc(12,"Last Name"),c.Xb(),c.Yb(13,"input",66),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().VisitorUserMaster.LastName=e})("keypress",function(e){return c.Lc(t),c.mc().validateText(e)}),c.Xb(),c.Xb(),c.Xb(),c.Yb(14,"div",61),c.Yb(15,"div",62),c.Yb(16,"label",63),c.Uc(17,"Mobile"),c.Xb(),c.Yb(18,"input",67,68),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().VisitorUserMaster.ContactNumber=e})("keypress",function(e){return c.Lc(t),c.mc().validateNumber(e)}),c.Xb(),c.Xb(),c.Xb(),c.Yb(20,"div",61),c.Yb(21,"div",69),c.Yb(22,"label"),c.Uc(23,"AddressLine 1"),c.Xb(),c.Yb(24,"input",70),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().VisitorUserMaster.ADDRESS=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(25,"div",71),c.Yb(26,"div",62),c.Yb(27,"div",72),c.Yb(28,"label",73),c.Uc(29,"Is Staff"),c.Xb(),c.Yb(30,"input",74),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().VisitorUserMaster.IsStaff=e}),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Sc(31,nt,7,1,"div",75),c.Sc(32,st,5,1,"div",75),c.Xb()}if(2&t){const t=c.mc();c.Fb(7),c.tc("ngModel",t.VisitorUserMaster.FirstName),c.Fb(6),c.tc("ngModel",t.VisitorUserMaster.LastName),c.Fb(5),c.tc("ngModel",t.VisitorUserMaster.ContactNumber),c.Fb(6),c.tc("ngModel",t.VisitorUserMaster.ADDRESS),c.Fb(6),c.tc("ngModel",t.VisitorUserMaster.IsStaff),c.Fb(1),c.tc("ngIf",t.VisitorUserMaster.IsStaff),c.Fb(1),c.tc("ngIf",t.VisitorUserMaster.IsStaff)}}function ot(t,e){if(1&t&&(c.Yb(0,"label"),c.Uc(1),c.Xb()),2&t){const t=c.mc(2);c.Fb(1),c.Wc("(",t.BalanceType,")")}}function ct(t,e){if(1&t&&(c.Yb(0,"div",48),c.Yb(1,"h5",79),c.Yb(2,"span",86),c.Uc(3," \u20b9 "),c.Xb(),c.Uc(4),c.nc(5,"number"),c.Xb(),c.Xb()),2&t){const t=c.mc(2);c.Fb(4),c.Wc("Remaining Amount: ",c.pc(5,1,t.RemainingAmount,"1.1-2")," ")}}function rt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",87),c.ic("click",function(){return c.Lc(t),c.mc(2).ShowAddCreditNoteModel()}),c.Tb(1,"i",88),c.Uc(2," Add"),c.Xb()}}function at(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",91),c.ic("click",function(){return c.Lc(t),c.mc(3).ShowRefundCreditNoteModel()}),c.Tb(1,"i",92),c.Uc(2," Refund"),c.Xb()}}function dt(t,e){if(1&t&&(c.Yb(0,"div",89),c.Sc(1,at,3,0,"button",90),c.Xb()),2&t){const t=c.mc(2);c.Fb(1),c.tc("ngIf",!t.isCashless&&t.CreditNoteBalanceAmount<0)}}function bt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",78),c.Yb(1,"div",48),c.Yb(2,"h5",79),c.Yb(3,"span",80),c.Uc(4," account_balance_wallet "),c.Xb(),c.Uc(5),c.nc(6,"number"),c.Sc(7,ot,2,1,"label",1),c.Xb(),c.Xb(),c.Yb(8,"div",48),c.Yb(9,"h5",79),c.Yb(10,"span",80),c.Uc(11," account_balance_wallet\n"),c.Xb(),c.Uc(12),c.nc(13,"number"),c.Xb(),c.Xb(),c.Sc(14,ct,6,4,"div",3),c.Yb(15,"div",81),c.Sc(16,rt,3,0,"button",82),c.Yb(17,"button",83),c.ic("click",function(){return c.Lc(t),c.mc().GetColonhydrothrapyCount()}),c.Tb(18,"i",84),c.Xb(),c.Xb(),c.Sc(19,dt,2,1,"div",85),c.Xb()}if(2&t){const t=c.mc();c.Fb(5),c.Wc("Account Balance : ",c.pc(6,6,t.CreditNoteBalanceAmount,"1.1-2")," "),c.Fb(2),c.tc("ngIf",t.BalanceType),c.Fb(5),c.Wc(" Credit Balance : ",c.pc(13,9,t.CreditNoteBalance,"1.1-2"),""),c.Fb(2),c.tc("ngIf",t.RemainingAmount>0||t.RemainingAmount<0),c.Fb(2),c.tc("ngIf",!t.isCashless&&(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))),c.Fb(3),c.tc("ngIf",1==(null==t.ClinicDetails?null:t.ClinicDetails.IsShowRefundonBilling))}}function ut(t,e){1&t&&c.Ub(0)}function ht(t,e){1&t&&c.Ub(0)}function mt(t,e){if(1&t&&(c.Yb(0,"p-tabPanel",103),c.Sc(1,ht,1,0,"ng-container",97),c.Xb()),2&t){c.mc(2);const t=c.Ic(14);c.Fb(1),c.tc("ngTemplateOutlet",t)}}function pt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(2).saveExtraItem()}),c.Uc(1,"Save Item"),c.Xb()}}function gt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(2).saveExtraItemVisitor()}),c.Uc(1,"Save Item"),c.Xb()}}function It(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",93),c.Yb(1,"div",94),c.Yb(2,"p-tabView",95),c.ic("activeIndexChange",function(e){return c.Lc(t),c.mc().selectedTab=e})("onChange",function(e){return c.Lc(t),c.mc().tabClick(e)}),c.Yb(3,"p-tabPanel",96),c.Sc(4,ut,1,0,"ng-container",97),c.Xb(),c.Sc(5,mt,2,1,"p-tabPanel",98),c.Yb(6,"div",93),c.Yb(7,"div",99),c.Yb(8,"div",62),c.Sc(9,pt,2,0,"button",100),c.Sc(10,gt,2,0,"button",100),c.Xb(),c.Xb(),c.Yb(11,"div",99),c.Yb(12,"label",101),c.Yb(13,"strong"),c.Uc(14,"Multi Select"),c.Xb(),c.Xb(),c.Yb(15,"input",102),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().IsListView=e})("click",function(){return c.Lc(t),c.mc().ResetExtraItemList()}),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(),e=c.Ic(14);c.Fb(2),c.tc("activeIndex",t.selectedTab),c.Fb(1),c.uc("header","Patient"==t.CustomerType?"Non-Prescribed":"Billable Item"),c.Fb(1),c.tc("ngTemplateOutlet",e),c.Fb(1),c.tc("ngIf","Patient"==t.CustomerType),c.Fb(4),c.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))&&t.slotBookingStatus!=t.bookingStatus.Discharged&&"Patient"==t.CustomerType),c.Fb(1),c.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))&&"Visitor"==t.CustomerType),c.Fb(5),c.tc("ngModel",t.IsListView)}}function ft(t,e){1&t&&(c.Yb(0,"colgroup"),c.Tb(1,"col",110),c.Tb(2,"col",111),c.Tb(3,"col",112),c.Tb(4,"col",112),c.Tb(5,"col",112),c.Tb(6,"col",111),c.Xb())}function vt(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"th"),c.Uc(2,"Item"),c.Xb(),c.Yb(3,"th"),c.Uc(4,"Unit"),c.Xb(),c.Yb(5,"th",113),c.Uc(6,"Quantity"),c.Xb(),c.Yb(7,"th",113),c.Uc(8,"MRP"),c.Xb(),c.Yb(9,"th",113),c.Uc(10,"Purpose"),c.Xb(),c.Yb(11,"th",113),c.Uc(12,"Action"),c.Xb(),c.Xb())}function Ct(t,e){if(1&t){const t=c.Zb();c.Yb(0,"p-tree",128),c.ic("onNodeSelect",function(e){c.Lc(t);const i=c.mc(2).rowIndex;return c.mc(3).nodeSelect(e,i)})("selectionChange",function(e){return c.Lc(t),c.mc(5).selection=e}),c.Xb()}if(2&t){const t=c.mc(2).rowIndex,e=c.mc(3);c.vc("id","tree_",e.lstExtraItemDetails[t].Sequence,""),c.tc("value",e.itemMaster)("filter",!0)("selection",e.selection)("styleClass","custom-ui-tree")}}function St(t,e){if(1&t&&(c.Sc(0,Ct,1,5,"p-tree",127),c.Tb(1,"br")),2&t){const t=c.mc(4);c.tc("ngIf",0==t.IsListView)}}function Tt(t,e){1&t&&c.Uc(0),2&t&&c.Wc(" ",e.$implicit.UOMName," ")}function yt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"p-inputNumber",129),c.ic("ngModelChange",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).lstExtraItemDetails[i].Qty=e}),c.Xb()}if(2&t){const t=c.mc().rowIndex,e=c.mc(3);c.vc("name","Qty_",e.lstExtraItemDetails[t].Sequence,""),c.tc("ngModel",e.lstExtraItemDetails[t].Qty)("useGrouping",!1)("min",0)("maxlength",5)}}function Mt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",130),c.Yb(1,"div",131),c.Yb(2,"span"),c.Uc(3,"Night"),c.Xb(),c.Xb(),c.Yb(4,"div",132),c.Yb(5,"p-inputNumber",133),c.ic("onInput",function(e){c.Lc(t);const i=c.mc().rowIndex,n=c.mc(3);return n.CalculateITotalNightRev(e,n.lstExtraItemDetails[i].Sequence)})("ngModelChange",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).lstExtraItemDetails[i].NightCount=e}),c.Xb(),c.Xb(),c.Yb(6,"div",131),c.Yb(7,"span"),c.Uc(8," X Bed"),c.Xb(),c.Xb(),c.Yb(9,"div",132),c.Yb(10,"p-inputNumber",133),c.ic("onInput",function(e){c.Lc(t);const i=c.mc().rowIndex,n=c.mc(3);return n.CalculateITotalDaysRev(e,n.lstExtraItemDetails[i].Sequence)})("ngModelChange",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).lstExtraItemDetails[i].RoomCount=e}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc().rowIndex,e=c.mc(3);c.Fb(5),c.Pc(c.yc(14,Q)),c.vc("name","QtyNight_",e.lstExtraItemDetails[t].Sequence,""),c.tc("ngModel",e.lstExtraItemDetails[t].NightCount)("useGrouping",!1)("min",1)("maxlength",5),c.Fb(5),c.Pc(c.yc(15,Q)),c.vc("name","QtyRoom_",e.lstExtraItemDetails[t].Sequence,""),c.tc("ngModel",e.lstExtraItemDetails[t].RoomCount)("useGrouping",!1)("min",1)("maxlength",5)}}function At(t,e){if(1&t){const t=c.Zb();c.Yb(0,"p"),c.Yb(1,"p-inputNumber",134),c.ic("ngModelChange",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).lstExtraItemDetails[i].MRP=e}),c.Xb(),c.Xb()}if(2&t){const t=c.mc().rowIndex,e=c.mc(3);c.Fb(1),c.Pc(c.yc(7,Q)),c.vc("name","MRPDetails_",e.lstExtraItemDetails[t].Sequence,""),c.tc("ngModel",e.lstExtraItemDetails[t].MRP)("useGrouping",!1)("min",1)("maxlength",5)}}function Rt(t,e){if(1&t&&(c.Yb(0,"p"),c.Uc(1),c.nc(2,"number"),c.Xb()),2&t){const t=c.mc().rowIndex,e=c.mc(3);c.Fb(1),c.Wc(" ",c.pc(2,1,e.lstExtraItemDetails[t].MRP,"1.1-2")," ")}}function Dt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"input",135),c.ic("ngModelChange",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).lstExtraItemDetails[i].OtherPurpose=e}),c.Xb()}if(2&t){const t=c.mc().rowIndex,e=c.mc(3);c.vc("name","ItemDesc_",e.lstExtraItemDetails[t].Sequence,""),c.tc("ngModel",e.lstExtraItemDetails[t].OtherPurpose)}}function Pt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"a",124),c.ic("click",function(){c.Lc(t);const e=c.mc().rowIndex,i=c.mc(3);return i.RemoveExtraItemDetails(i.lstExtraItemDetails[e].Sequence)}),c.Tb(1,"i",92),c.Xb()}}function Yt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"i",136),c.ic("click",function(){c.Lc(t);const e=c.mc().rowIndex,i=c.mc(3);return i.ResetItem(i.lstExtraItemDetails[e].Sequence)}),c.Xb()}}function Xt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Yb(2,"button",114),c.ic("click",function(){return c.Lc(t),c.Ic(6).hide()}),c.Uc(3," Cancel "),c.Xb(),c.Yb(4,"p-button",115),c.ic("click",function(e){return c.Lc(t),c.Ic(6).toggle(e)}),c.Xb(),c.Yb(5,"p-overlayPanel",116,117),c.Sc(7,St,2,1,"ng-template",118),c.Xb(),c.Xb(),c.Yb(8,"td"),c.Yb(9,"p-dropdown",119),c.ic("ngModelChange",function(i){c.Lc(t);const n=e.rowIndex;return c.mc(3).lstExtraItemDetails[n].UOMS=i}),c.Sc(10,Tt,1,1,"ng-template",57),c.Xb(),c.Xb(),c.Yb(11,"td",120),c.Sc(12,yt,1,5,"p-inputNumber",121),c.Sc(13,Mt,11,16,"div",122),c.Xb(),c.Yb(14,"td",113),c.Sc(15,At,2,8,"p",1),c.Sc(16,Rt,3,4,"p",1),c.Xb(),c.Yb(17,"td",113),c.Sc(18,Dt,1,2,"input",123),c.Xb(),c.Yb(19,"td",113),c.Yb(20,"a",124),c.ic("click",function(){return c.Lc(t),c.mc(3).AddExtraItemDetails()}),c.Tb(21,"i",88),c.Xb(),c.Sc(22,Pt,2,0,"a",125),c.Sc(23,Yt,1,0,"i",126),c.Xb(),c.Xb()}if(2&t){const t=e.rowIndex,i=c.mc(3);c.Fb(4),c.vc("id","btn_op_",i.lstExtraItemDetails[t].Sequence,""),c.tc("label",""!=i.lstExtraItemDetails[t].Description?i.lstExtraItemDetails[t].Description:"Select Fee Head"),c.Fb(1),c.vc("id","op_",i.lstExtraItemDetails[t].Sequence,""),c.tc("showCloseIcon",!1),c.Fb(4),c.Pc(c.yc(18,Q)),c.vc("name","ddlUM_",i.lstExtraItemDetails[t].Sequence,""),c.tc("options",i.lstExtraItemDetails[t].UMList)("ngModel",i.lstExtraItemDetails[t].UOMS)("filter",!0)("showClear",!0),c.Fb(3),c.tc("ngIf","Room"!=i.lstExtraItemDetails[t].Category),c.Fb(1),c.tc("ngIf","Room"==i.lstExtraItemDetails[t].Category),c.Fb(2),c.tc("ngIf",i.lstExtraItemDetails[t].MCODE==i.defaultItemMCODE.OtherCharge||1==i.lstExtraItemDetails[t].IsEditable),c.Fb(1),c.tc("ngIf",i.lstExtraItemDetails[t].MCODE!=i.defaultItemMCODE.OtherCharge&&0==i.lstExtraItemDetails[t].IsEditable),c.Fb(2),c.tc("ngIf",i.lstExtraItemDetails[t].MCODE==i.defaultItemMCODE.OtherCharge||1==i.lstExtraItemDetails[t].IsEditable),c.Fb(4),c.tc("ngIf",1!==i.lstExtraItemDetails[t].Sequence),c.Fb(1),c.tc("ngIf",""!=i.lstExtraItemDetails[t].Description)}}function Ut(t,e){if(1&t&&(c.Yb(0,"p-table",107,108),c.Sc(2,ft,7,0,"ng-template",109),c.Sc(3,vt,13,0,"ng-template",32),c.Sc(4,Xt,24,19,"ng-template",28),c.Xb()),2&t){const t=c.mc(2);c.tc("value",t.lstExtraItemDetails)("rowHover",!0)("scrollable",!0)}}function Nt(t,e){1&t&&(c.Yb(0,"colgroup"),c.Tb(1,"col",137),c.Tb(2,"col",138),c.Xb())}function xt(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"th"),c.Uc(2,"Item"),c.Xb(),c.Yb(3,"th",113),c.Uc(4,"Quantity"),c.Xb(),c.Xb())}function Bt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"p-tree",144),c.ic("onNodeSelect",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).nodeSelect(e,i)})("onNodeUnselect",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).nodeSelect(e,i)})("selectionChange",function(e){return c.Lc(t),c.mc(4).selectedNodesItem=e}),c.Xb(),c.Tb(1,"br")}if(2&t){const t=c.mc(4);c.tc("filter",!0)("value",t.itemMaster)("filter",!0)("selection",t.selectedNodesItem)("styleClass","custom-ui-tree")}}function wt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"p-inputNumber",145),c.ic("ngModelChange",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).lstExtraItemDetails[i].Qty=e}),c.Xb()}if(2&t){const t=c.mc().rowIndex,e=c.mc(3);c.vc("name","Qty_",e.lstExtraItemDetails[t].Sequence,""),c.tc("ngModel",e.lstExtraItemDetails[t].Qty)("useGrouping",!1)("min",0)("maxlength",5)}}function Et(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",130),c.Yb(1,"div",131),c.Yb(2,"span"),c.Uc(3,"Night"),c.Xb(),c.Xb(),c.Yb(4,"div",132),c.Yb(5,"p-inputNumber",133),c.ic("onInput",function(e){c.Lc(t);const i=c.mc().rowIndex,n=c.mc(3);return n.CalculateITotalNightRev(e,n.lstExtraItemDetails[i].Sequence)})("ngModelChange",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).lstExtraItemDetails[i].NightCount=e}),c.Xb(),c.Xb(),c.Yb(6,"div",131),c.Yb(7,"span"),c.Uc(8," X Bed"),c.Xb(),c.Xb(),c.Yb(9,"div",132),c.Yb(10,"p-inputNumber",133),c.ic("onInput",function(e){c.Lc(t);const i=c.mc().rowIndex,n=c.mc(3);return n.CalculateITotalDaysRev(e,n.lstExtraItemDetails[i].Sequence)})("ngModelChange",function(e){c.Lc(t);const i=c.mc().rowIndex;return c.mc(3).lstExtraItemDetails[i].RoomCount=e}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc().rowIndex,e=c.mc(3);c.Fb(5),c.Pc(c.yc(14,Q)),c.vc("name","QtyNight_",e.lstExtraItemDetails[t].Sequence,""),c.tc("ngModel",e.lstExtraItemDetails[t].NightCount)("useGrouping",!1)("min",1)("maxlength",5),c.Fb(5),c.Pc(c.yc(15,Q)),c.vc("name","QtyRoom_",e.lstExtraItemDetails[t].Sequence,""),c.tc("ngModel",e.lstExtraItemDetails[t].RoomCount)("useGrouping",!1)("min",1)("maxlength",5)}}function kt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Yb(2,"button",139),c.ic("click",function(){return c.Lc(t),c.Ic(6).hide()}),c.Uc(3," Cancel "),c.Xb(),c.Yb(4,"p-button",140),c.ic("click",function(e){return c.Lc(t),c.Ic(6).toggle(e)}),c.Xb(),c.Yb(5,"p-overlayPanel",141,142),c.Sc(7,Bt,2,5,"ng-template",118),c.Xb(),c.Xb(),c.Yb(8,"td",120),c.Sc(9,wt,1,5,"p-inputNumber",143),c.Sc(10,Et,11,16,"div",122),c.Xb(),c.Xb()}if(2&t){const t=e.rowIndex,i=c.mc(3);c.Fb(4),c.tc("label",(null==i.selectedNodesItem?null:i.selectedNodesItem.length)>0?(null==i.lstExtraListItemDetails?null:i.lstExtraListItemDetails.length)+" Item Selected":"Select Fee Head"),c.Fb(1),c.tc("showCloseIcon",!1),c.Fb(4),c.tc("ngIf","Room"!=i.lstExtraItemDetails[t].Category),c.Fb(1),c.tc("ngIf","Room"==i.lstExtraItemDetails[t].Category)}}function Lt(t,e){if(1&t&&(c.Yb(0,"p-table",107,108),c.Sc(2,Nt,3,0,"ng-template",109),c.Sc(3,xt,5,0,"ng-template",32),c.Sc(4,kt,11,4,"ng-template",28),c.Xb()),2&t){const t=c.mc(2);c.tc("value",t.lstExtraItemEmpty)("rowHover",!0)("scrollable",!0)}}function Ft(t,e){if(1&t&&(c.Yb(0,"div",105),c.Sc(1,Ut,5,3,"p-table",106),c.Sc(2,Lt,5,3,"p-table",106),c.Xb()),2&t){const t=c.mc();c.Fb(1),c.tc("ngIf",0==t.IsListView),c.Fb(1),c.tc("ngIf",1==t.IsListView)}}function Ot(t,e){1&t&&c.Ub(0)}function _t(t,e){1&t&&c.Ub(0)}function Wt(t,e){1&t&&c.Ub(0)}function jt(t,e){1&t&&c.Ub(0)}function Vt(t,e){if(1&t&&(c.Yb(0,"div",146),c.Yb(1,"div",94),c.Yb(2,"p-tabView"),c.Yb(3,"p-tabPanel",147),c.Sc(4,Ot,1,0,"ng-container",97),c.Xb(),c.Yb(5,"p-tabPanel",148),c.Sc(6,_t,1,0,"ng-container",97),c.Xb(),c.Yb(7,"p-tabPanel",149),c.Sc(8,Wt,1,0,"ng-container",97),c.Xb(),c.Yb(9,"p-tabPanel",150),c.Sc(10,jt,1,0,"ng-container",97),c.Xb(),c.Xb(),c.Xb(),c.Xb()),2&t){c.mc();const t=c.Ic(17),e=c.Ic(23),i=c.Ic(25),n=c.Ic(21);c.Fb(4),c.tc("ngTemplateOutlet",t),c.Fb(2),c.tc("ngTemplateOutlet",e),c.Fb(2),c.tc("ngTemplateOutlet",i),c.Fb(2),c.tc("ngTemplateOutlet",n)}}function Zt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",165),c.ic("click",function(){return c.Lc(t),c.mc(3).ShowEstimetedBill()}),c.Xb()}}function Gt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",166),c.ic("click",function(){return c.Lc(t),c.mc(3).onItemEditInit()}),c.Xb()}}function qt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",167),c.ic("click",function(){return c.Lc(t),c.mc(3).onItemEditSave()}),c.Xb()}}function Ht(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",168),c.ic("click",function(){return c.Lc(t),c.mc(3).onItemEditCancel()}),c.Xb()}}function Qt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",169),c.ic("click",function(){return c.Lc(t),c.mc(3).DeleteExtraItem(null)}),c.Xb()}}function $t(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",170),c.ic("click",function(){return c.Lc(t),c.mc(3).CreateInvoice()}),c.Xb()}}function zt(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",155),c.Sc(1,Zt,1,0,"button",156),c.Sc(2,Gt,1,0,"button",157),c.Sc(3,qt,1,0,"button",158),c.Sc(4,Ht,1,0,"button",159),c.Sc(5,Qt,1,0,"button",160),c.Sc(6,$t,1,0,"button",161),c.Yb(7,"span",162),c.Tb(8,"i",163),c.Yb(9,"input",164),c.ic("input",function(e){return c.Lc(t),c.mc(),c.Ic(3).filterGlobal(e.target.value,"contains")}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(1),c.tc("ngIf",(null==t.tableDataExtraItem?null:t.tableDataExtraItem.length)>0),c.Fb(1),c.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))&&(null==t.tableDataExtraItem?null:t.tableDataExtraItem.length)>0&&!t.editing),c.Fb(1),c.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))&&(null==t.tableDataExtraItem?null:t.tableDataExtraItem.length)>0&&t.editing),c.Fb(1),c.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))&&(null==t.tableDataExtraItem?null:t.tableDataExtraItem.length)>0&&t.editing),c.Fb(1),c.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Delete.toString()))&&(null==t.tableDataExtraItem?null:t.tableDataExtraItem.length)>0&&(null==t.lstSelectedBillableItem?null:t.lstSelectedBillableItem.length)>0),c.Fb(1),c.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))&&((null==t.tableDataExtraItem?null:t.tableDataExtraItem.length)>0||(null==t.tableDataExtraItemCredit?null:t.tableDataExtraItemCredit.length)>0))}}function Kt(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2," No records found "),c.Xb(),c.Xb()),2&t&&(c.Fb(1),c.Gb("colspan",6))}function Jt(t,e){1&t&&(c.Yb(0,"colgroup"),c.Tb(1,"col",171),c.Tb(2,"col",172),c.Tb(3,"col",173),c.Tb(4,"col",174),c.Tb(5,"col",175),c.Tb(6,"col",175),c.Tb(7,"col",176),c.Tb(8,"col",172),c.Tb(9,"col",174),c.Xb())}function te(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"th",177),c.Tb(2,"p-tableHeaderCheckbox"),c.Xb(),c.Yb(3,"th"),c.Uc(4,"Item Code"),c.Xb(),c.Yb(5,"th"),c.Uc(6,"Item Description"),c.Xb(),c.Yb(7,"th"),c.Uc(8,"Unit"),c.Xb(),c.Yb(9,"th"),c.Uc(10,"Quantity"),c.Xb(),c.Yb(11,"th"),c.Uc(12,"MRP"),c.Xb(),c.Yb(13,"th"),c.Uc(14,"Purchase Date"),c.Xb(),c.Yb(15,"th"),c.Uc(16,"Created By"),c.Xb(),c.Yb(17,"th"),c.Uc(18,"Action"),c.Xb(),c.Xb())}function ee(t,e){if(1&t&&(c.Yb(0,"td"),c.Uc(1),c.Xb()),2&t){const t=c.mc().$implicit;c.Fb(1),c.Vc(t.Qty)}}function ie(t,e){if(1&t){const t=c.Zb();c.Yb(0,"td"),c.Yb(1,"input",180),c.ic("keypress",function(e){return c.Lc(t),c.mc(3).onKeyPress(e)})("ngModelChange",function(e){return c.Lc(t),c.mc().$implicit.Qty=e}),c.Xb(),c.Xb()}if(2&t){const t=c.mc(),e=t.rowIndex,i=t.$implicit;c.Fb(1),c.vc("name","Qty",e,""),c.tc("ngModel",i.Qty)}}function ne(t,e){if(1&t){const t=c.Zb();c.Yb(0,"a",181),c.ic("click",function(){c.Lc(t);const e=c.mc().$implicit;return c.mc(2).DeleteExtraItem(e.BillItemId)}),c.Tb(1,"img",182),c.Xb()}}function se(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"td",177),c.Tb(2,"p-tableCheckbox",178),c.Xb(),c.Yb(3,"td"),c.Uc(4),c.Xb(),c.Yb(5,"td"),c.Uc(6),c.Xb(),c.Yb(7,"td"),c.Uc(8),c.Xb(),c.Sc(9,ee,2,1,"td",1),c.Sc(10,ie,2,2,"td",1),c.Yb(11,"td"),c.Uc(12),c.Xb(),c.Yb(13,"td"),c.Uc(14),c.nc(15,"date"),c.Xb(),c.Yb(16,"td"),c.Uc(17),c.Xb(),c.Yb(18,"td"),c.Sc(19,ne,2,0,"a",179),c.Xb(),c.Xb()),2&t){const t=e.$implicit,i=c.mc(2);c.Fb(2),c.tc("value",t),c.Fb(2),c.Vc(t.MCODE),c.Fb(2),c.Vc(t.Description),c.Fb(2),c.Vc(t.UOMS),c.Fb(1),c.tc("ngIf",!i.editing),c.Fb(1),c.tc("ngIf",i.editing),c.Fb(2),c.Vc(t.MRP),c.Fb(2),c.Vc(c.pc(15,10,t.PurchaseDate,i.customDateFormat.DEF_DATE)),c.Fb(3),c.Vc(t.CreatedBy),c.Fb(2),c.tc("ngIf",!t.IsBilled)}}const le=function(){return["MCODE","Description","UOMS","Qty"]};function oe(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",130),c.Yb(1,"div",94),c.Yb(2,"p-table",151,152),c.ic("selectionChange",function(e){return c.Lc(t),c.mc().lstSelectedBillableItem=e}),c.Sc(4,zt,10,6,"ng-template",153),c.Sc(5,Kt,3,1,"ng-template",154),c.Sc(6,Jt,10,0,"ng-template",109),c.Sc(7,te,19,0,"ng-template",32),c.Sc(8,se,20,13,"ng-template",28),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(2),c.tc("value",t.tableDataExtraItem)("rowHover",!0)("globalFilterFields",c.yc(5,le))("scrollable",!0)("selection",t.lstSelectedBillableItem)}}function ce(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",185),c.ic("click",function(){return c.Lc(t),c.mc(3).PrintCreditInvoice()}),c.Xb()}}function re(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",155),c.Sc(1,ce,1,0,"button",184),c.Yb(2,"span",162),c.Tb(3,"i",163),c.Yb(4,"input",164),c.ic("input",function(e){return c.Lc(t),c.mc(),c.Ic(3).filterGlobal(e.target.value,"contains")}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(1),c.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Print.toString()))&&(null==t.tableDataExtraItemCredit?null:t.tableDataExtraItemCredit.length)>0)}}function ae(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2," No records found "),c.Xb(),c.Xb()),2&t&&(c.Fb(1),c.Gb("colspan",7))}function de(t,e){1&t&&(c.Yb(0,"colgroup"),c.Tb(1,"col",186),c.Tb(2,"col",172),c.Tb(3,"col",176),c.Tb(4,"col",174),c.Tb(5,"col",175),c.Tb(6,"col",176),c.Tb(7,"col",175),c.Xb())}function be(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"th"),c.Yb(2,"p-checkbox",187),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).checked=e})("onChange",function(){return c.Lc(t),c.mc(2).getSelectAllRecord()}),c.Xb(),c.Xb(),c.Yb(3,"th"),c.Uc(4,"Item Code"),c.Xb(),c.Yb(5,"th"),c.Uc(6,"Item Description"),c.Xb(),c.Yb(7,"th"),c.Uc(8,"Unit"),c.Xb(),c.Yb(9,"th"),c.Uc(10,"Quantity"),c.Xb(),c.Yb(11,"th"),c.Uc(12,"Purchase Date"),c.Xb(),c.Yb(13,"th"),c.Uc(14,"Action"),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(2),c.tc("ngModel",t.checked)}}function ue(t,e){if(1&t){const t=c.Zb();c.Yb(0,"a",190),c.ic("click",function(){c.Lc(t);const e=c.mc().$implicit,i=c.mc(2);return i.UpdateExtraItemStatus(e.BillItemId,i.billItemStatus.Cancelled)}),c.Tb(1,"img",182),c.Xb()}}function he(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"td"),c.Yb(2,"p-checkbox",188),c.ic("ngModelChange",function(t){return e.$implicit.checkAccess=t}),c.Xb(),c.Xb(),c.Yb(3,"td"),c.Uc(4),c.Xb(),c.Yb(5,"td"),c.Uc(6),c.Xb(),c.Yb(7,"td"),c.Uc(8),c.Xb(),c.Yb(9,"td"),c.Uc(10),c.Xb(),c.Yb(11,"td"),c.Uc(12),c.nc(13,"date"),c.Xb(),c.Yb(14,"td"),c.Sc(15,ue,2,0,"a",189),c.Xb(),c.Xb()),2&t){const t=e.$implicit,i=c.mc(2);c.Fb(2),c.tc("ngModel",t.checkAccess),c.Fb(2),c.Vc(t.MCODE),c.Fb(2),c.Vc(t.Description),c.Fb(2),c.Vc(t.UOMS),c.Fb(2),c.Vc(t.Qty),c.Fb(2),c.Vc(c.pc(13,7,t.PurchaseDate,i.customDateFormat.DEF_DATE)),c.Fb(3),c.tc("ngIf",!t.IsBilled)}}function me(t,e){if(1&t&&(c.Yb(0,"div",130),c.Yb(1,"div",94),c.Yb(2,"p-table",183,152),c.Sc(4,re,5,1,"ng-template",153),c.Sc(5,ae,3,1,"ng-template",154),c.Sc(6,de,8,0,"ng-template",109),c.Sc(7,be,15,1,"ng-template",32),c.Sc(8,he,16,10,"ng-template",28),c.Xb(),c.Xb(),c.Xb()),2&t){const t=c.mc();c.Fb(2),c.tc("value",t.tableDataExtraItemCredit)("rowHover",!0)("globalFilterFields",c.yc(4,le))("scrollable",!0)}}function pe(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",196),c.ic("click",function(){return c.Lc(t),c.mc(4).PrintCombinedInvoice()}),c.Xb()}}function ge(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",194),c.Sc(1,pe,1,0,"button",195),c.Yb(2,"span",162),c.Tb(3,"i",163),c.Yb(4,"input",164),c.ic("input",function(e){return c.Lc(t),c.mc(),c.Ic(1).filterGlobal(e.target.value,"contains")}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(3);c.Fb(1),c.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Print.toString()))}}function Ie(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2," No records found "),c.Xb(),c.Xb()),2&t&&(c.Fb(1),c.Gb("colspan",10))}function fe(t,e){1&t&&(c.Yb(0,"colgroup"),c.Tb(1,"col",186),c.Tb(2,"col",172),c.Tb(3,"col",176),c.Tb(4,"col",174),c.Tb(5,"col",197),c.Tb(6,"col",175),c.Tb(7,"col",176),c.Tb(8,"col",198),c.Tb(9,"col",172),c.Tb(10,"col",175),c.Xb())}function ve(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"th"),c.Uc(2,"S.No"),c.Xb(),c.Yb(3,"th"),c.Uc(4,"Item Code"),c.Xb(),c.Yb(5,"th"),c.Uc(6,"Item Desc"),c.Xb(),c.Yb(7,"th"),c.Uc(8,"Unit"),c.Xb(),c.Yb(9,"th"),c.Uc(10,"Quantity"),c.Xb(),c.Yb(11,"th"),c.Uc(12,"Rate"),c.Xb(),c.Yb(13,"th"),c.Uc(14,"Purchase Date"),c.Xb(),c.Yb(15,"th"),c.Uc(16,"Bill Date"),c.Xb(),c.Yb(17,"th"),c.Uc(18,"Voucher No"),c.Xb(),c.Yb(19,"th"),c.Uc(20,"Action"),c.Xb(),c.Xb())}function Ce(t,e){if(1&t){const t=c.Zb();c.Yb(0,"span",202),c.ic("click",function(){c.Lc(t);const e=c.mc().$implicit;return c.mc(3).PrintInvoice(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),c.Uc(1," print "),c.Xb()}}function Se(t,e){if(1&t){const t=c.Zb();c.Yb(0,"span",203),c.ic("click",function(){c.Lc(t);const e=c.mc().$implicit;return c.mc(3).PrintBankDepositSlip(e.SlotBookingId,e.VCHRNO,e.PhiscalID)}),c.Uc(1," receipt_long "),c.Xb()}}function Te(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2),c.Xb(),c.Yb(3,"td"),c.Uc(4),c.Xb(),c.Yb(5,"td"),c.Uc(6),c.Xb(),c.Yb(7,"td"),c.Uc(8),c.Xb(),c.Yb(9,"td"),c.Uc(10),c.Xb(),c.Yb(11,"td"),c.Uc(12),c.nc(13,"number"),c.Xb(),c.Yb(14,"td"),c.Uc(15),c.nc(16,"date"),c.Xb(),c.Yb(17,"td"),c.Uc(18),c.nc(19,"date"),c.Xb(),c.Yb(20,"td"),c.Uc(21),c.Xb(),c.Yb(22,"td"),c.Sc(23,Ce,2,0,"span",199),c.Sc(24,Se,2,0,"span",200),c.Yb(25,"span",201),c.ic("click",function(){c.Lc(t);const i=e.$implicit;return c.mc(3).ShowTransactionDetails(i.SlotBookingId,i.VCHRNO,i.PhiscalID,i.Division)}),c.Uc(26," view_list "),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit,i=e.rowIndex,n=c.mc(3);c.Fb(2),c.Vc(i+1),c.Fb(2),c.Vc(t.MCODE),c.Fb(2),c.Vc(t.ITEMDESC),c.Fb(2),c.Vc(t.UNIT),c.Fb(2),c.Vc(t.RealQty),c.Fb(2),c.Vc(c.pc(13,11,t.MRP,"1.1-2")),c.Fb(3),c.Vc(c.pc(16,14,t.PurchaseDate,n.customDateFormat.DEF_DATE)),c.Fb(3),c.Vc(c.pc(19,17,t.BillDate,n.customDateFormat.DEF_DATE)),c.Fb(3),c.Vc(t.VCHRNO),c.Fb(2),c.tc("ngIf",null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Print.toString())),c.Fb(1),c.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Download.toString()))&&null!=t.BankDSlip)}}const ye=function(){return["MCODE","ITEMDESC","UNIT","RealQty","MRP","VCHRNO"]};function Me(t,e){if(1&t&&(c.Yb(0,"p-table",192,193),c.Sc(2,ge,5,1,"ng-template",153),c.Sc(3,Ie,3,1,"ng-template",154),c.Sc(4,fe,11,0,"ng-template",109),c.Sc(5,ve,21,0,"ng-template",32),c.Sc(6,Te,27,20,"ng-template",28),c.Xb()),2&t){const t=c.mc(2);c.tc("value",t.ProdList)("rowHover",!0)("globalFilterFields",c.yc(4,ye))("scrollable",!0)}}function Ae(t,e){if(1&t&&(c.Yb(0,"div",130),c.Yb(1,"div",94),c.Sc(2,Me,7,5,"p-table",191),c.Xb(),c.Xb()),2&t){const t=c.mc();c.Fb(2),c.tc("ngIf",(null==t.ProdList?null:t.ProdList.length)>0)}}function Re(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",208),c.ic("click",function(){return c.Lc(t),c.mc(4).CreateCompleteInvoice()}),c.Xb()}}function De(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",209),c.ic("click",function(){return c.Lc(t),c.mc(4).PrintPreInvoice()}),c.Xb()}if(2&t){const t=c.mc(4);c.tc("label",t.PrintCILabel)}}function Pe(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",210),c.ic("click",function(){return c.Lc(t),c.mc(4).GenerateTIProvisionalNo()}),c.Xb()}}function Ye(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",194),c.Sc(1,Re,1,0,"button",205),c.Sc(2,De,1,1,"button",206),c.Sc(3,Pe,1,0,"button",207),c.Yb(4,"span",162),c.Tb(5,"i",163),c.Yb(6,"input",164),c.ic("input",function(e){return c.Lc(t),c.mc(),c.Ic(1).filterGlobal(e.target.value,"contains")}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(3);c.Fb(1),c.tc("ngIf",("OPD"==t.PerformaItemList[0].BookingType||"IPD"==t.PerformaItemList[0].BookingType&&t.PerformaItemList[0].BookingStatus!==t.bookingStatus.Confirmed)&&(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Print.toString()))),c.Fb(1),c.tc("ngIf",("OPD"==t.PerformaItemList[0].BookingType||"IPD"==t.PerformaItemList[0].BookingType&&t.PerformaItemList[0].BookingStatus!==t.bookingStatus.Confirmed)&&(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Print.toString()))),c.Fb(1),c.tc("ngIf","IPD"==t.PerformaItemList[0].BookingType&&t.PerformaItemList[0].BookingStatus!==t.bookingStatus.Confirmed&&(null==t.TIProvisionalNo||null==t.TIProvisionalNo||""==t.TIProvisionalNo)&&t.isCashless)}}function Xe(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2," No records found "),c.Xb(),c.Xb()),2&t&&(c.Fb(1),c.Gb("colspan",10))}function Ue(t,e){1&t&&(c.Yb(0,"colgroup"),c.Tb(1,"col",186),c.Tb(2,"col",174),c.Tb(3,"col",172),c.Tb(4,"col",186),c.Tb(5,"col",174),c.Tb(6,"col",211),c.Tb(7,"col",211),c.Tb(8,"col",172),c.Tb(9,"col",172),c.Tb(10,"col",111),c.Tb(11,"col",172),c.Xb())}function Ne(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"th"),c.Uc(2,"S.No"),c.Xb(),c.Yb(3,"th"),c.Uc(4,"Item Code"),c.Xb(),c.Yb(5,"th"),c.Uc(6,"Item Desc"),c.Xb(),c.Yb(7,"th"),c.Uc(8,"Unit"),c.Xb(),c.Yb(9,"th"),c.Uc(10,"Quantity"),c.Xb(),c.Yb(11,"th"),c.Uc(12,"Purchase Date"),c.Xb(),c.Yb(13,"th"),c.Uc(14,"Bill Date"),c.Xb(),c.Yb(15,"th"),c.Uc(16,"Voucher No"),c.Xb(),c.Yb(17,"th"),c.Uc(18,"Status"),c.Xb(),c.Yb(19,"th"),c.Uc(20,"Modified By"),c.Xb(),c.Yb(21,"th"),c.Uc(22,"Action"),c.Xb(),c.Xb())}function xe(t,e){if(1&t){const t=c.Zb();c.Yb(0,"i",216),c.ic("click",function(){c.Lc(t);const e=c.mc().$implicit;return c.mc(3).PrintPInvoice(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),c.Xb()}}function Be(t,e){if(1&t){const t=c.Zb();c.Yb(0,"i",217),c.ic("click",function(){c.Lc(t);const e=c.mc().$implicit;return c.mc(3).EditPInvoice(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),c.Xb()}}function we(t,e){if(1&t){const t=c.Zb();c.Yb(0,"i",218),c.ic("click",function(){c.Lc(t);const e=c.mc().$implicit;return c.mc(3).CancelPInvoiceWithNoRefund(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),c.Xb()}}function Ee(t,e){if(1&t){const t=c.Zb();c.Yb(0,"i",219),c.ic("click",function(){c.Lc(t);const e=c.mc().$implicit;return c.mc(3).CancelPInvoiceWithRefund(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),c.Xb()}}function ke(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2),c.Xb(),c.Yb(3,"td"),c.Uc(4),c.Xb(),c.Yb(5,"td"),c.Uc(6),c.Xb(),c.Yb(7,"td"),c.Uc(8),c.Xb(),c.Yb(9,"td"),c.Uc(10),c.Xb(),c.Yb(11,"td"),c.Uc(12),c.nc(13,"date"),c.Xb(),c.Yb(14,"td"),c.Uc(15),c.nc(16,"date"),c.Xb(),c.Yb(17,"td"),c.Uc(18),c.Xb(),c.Yb(19,"td"),c.Uc(20),c.Xb(),c.Yb(21,"td"),c.Uc(22),c.Xb(),c.Yb(23,"td"),c.Sc(24,xe,1,0,"i",212),c.Sc(25,Be,1,0,"i",213),c.Sc(26,we,1,0,"i",214),c.Sc(27,Ee,1,0,"i",215),c.Xb(),c.Xb()),2&t){const t=e.$implicit,i=e.rowIndex,n=c.mc(3);c.Fb(2),c.Vc(i+1),c.Fb(2),c.Vc(t.MCODE),c.Fb(2),c.Vc(t.ITEMDESC),c.Fb(2),c.Vc(t.UNIT),c.Fb(2),c.Vc(t.RealQty),c.Fb(2),c.Vc(c.pc(13,14,t.PurchaseDate,n.customDateFormat.DEF_DATE_TIME)),c.Fb(3),c.Vc(c.pc(16,17,t.BillDate,n.customDateFormat.DEF_DATE_TIME)),c.Fb(3),c.Vc(t.VCHRNO),c.Fb(2),c.Vc(n.billItemStatus[t.Status]),c.Fb(2),c.Vc(t.ModifiedBy),c.Fb(2),c.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Print.toString()))&&t.Status==n.billItemStatus.ProformaRaised),c.Fb(1),c.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))&&t.Status==n.billItemStatus.ProformaRaised),c.Fb(1),c.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Cancel.toString()))&&t.Status==n.billItemStatus.ProformaRaised&&1==t.TherapyStatus&&1==t.SequentialNumber),c.Fb(1),c.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Cancel.toString()))&&t.Status==n.billItemStatus.ProformaRaised&&1==t.TherapyStatus&&1==t.SequentialNumber)}}const Le=function(){return["MCODE","ITEMDESC","UNIT","RealQty","VCHRNO"]};function Fe(t,e){if(1&t&&(c.Yb(0,"p-table",192,204),c.Sc(2,Ye,7,3,"ng-template",153),c.Sc(3,Xe,3,1,"ng-template",154),c.Sc(4,Ue,12,0,"ng-template",109),c.Sc(5,Ne,23,0,"ng-template",32),c.Sc(6,ke,28,20,"ng-template",28),c.Xb()),2&t){const t=c.mc(2);c.tc("value",t.PerformaItemList)("rowHover",!0)("globalFilterFields",c.yc(4,Le))("scrollable",!0)}}function Oe(t,e){if(1&t&&(c.Yb(0,"div",130),c.Yb(1,"div",94),c.Sc(2,Fe,7,5,"p-table",191),c.Xb(),c.Xb()),2&t){const t=c.mc();c.Fb(2),c.tc("ngIf",(null==t.PerformaItemList?null:t.PerformaItemList.length)>0)}}function _e(t,e){if(1&t&&(c.Yb(0,"div",94),c.Tb(1,"app-individual-invoice-list",222),c.Xb()),2&t){const t=c.mc(2);c.Fb(1),c.tc("showIndividualInvoiceList",t.showIndividualInvoiceList)("slotBookingId",t.userSelected)("IsGrouped",t.IsGroupedSelected)("BookingType",t.bookingtypeSelected)}}function We(t,e){if(1&t&&(c.Yb(0,"div",220),c.Sc(1,_e,2,4,"div",221),c.Xb()),2&t){const t=c.mc();c.Fb(1),c.tc("ngIf",""!==t.userSelected&&null!=t.userSelected)}}function je(t,e){if(1&t&&(c.Yb(0,"div",242),c.Yb(1,"h5",79),c.Yb(2,"span",86),c.Uc(3," \u20b9 "),c.Xb(),c.Uc(4),c.nc(5,"number"),c.Xb(),c.Xb()),2&t){const t=c.mc(3);c.Fb(4),c.Wc(" Remaining Amount : ",c.pc(5,1,t.NetPaybleTotal-t.MaxCreditLimit,"1.1-2"),"")}}function Ve(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",245),c.Yb(1,"button",246),c.ic("click",function(){return c.Lc(t),c.mc(3).ShowAddCreditNoteModelCI()}),c.Tb(2,"i",88),c.Uc(3," Receive Amount"),c.Xb(),c.Xb()}}function Ze(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",89),c.Yb(1,"button",91),c.ic("click",function(){return c.Lc(t),c.mc(3).ShowRefundCreditNoteModelCI()}),c.Tb(2,"i",92),c.Uc(3," Refund Amount"),c.Xb(),c.Xb()}}function Ge(t,e){if(1&t&&(c.Yb(0,"div",130),c.Yb(1,"div",242),c.Yb(2,"h5",79),c.Yb(3,"span",80),c.Uc(4," account_balance_wallet "),c.Xb(),c.Uc(5),c.nc(6,"number"),c.Xb(),c.Xb(),c.Yb(7,"div",242),c.Yb(8,"h5",79),c.Yb(9,"span",80),c.Uc(10," account_balance_wallet "),c.Xb(),c.Uc(11),c.nc(12,"number"),c.Xb(),c.Xb(),c.Sc(13,je,6,4,"div",243),c.Sc(14,Ve,4,0,"div",244),c.Sc(15,Ze,4,0,"div",85),c.Xb()),2&t){const t=c.mc(2);c.Fb(5),c.Wc(" Account Balance : ",c.pc(6,5,t.CreditNoteBalanceAmount,"1.1-2"),""),c.Fb(6),c.Wc(" Credit Balance : ",c.pc(12,8,t.CreditNoteBalance,"1.1-2"),""),c.Fb(2),c.tc("ngIf",t.NetPaybleTotal-t.MaxCreditLimit>0),c.Fb(1),c.tc("ngIf",!t.isCashless&&t.NetPaybleTotal-t.MaxCreditLimit>0),c.Fb(1),c.tc("ngIf",!t.isCashless&&t.CreditNoteBalanceAmount<0&&t.NetPaybleTotal-t.MaxCreditLimit<0&&1==(null==t.ClinicDetails?null:t.ClinicDetails.IsShowRefundonBilling))}}function qe(t,e){if(1&t){const t=c.Zb();c.Yb(0,"input",247),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).selectAllItem=e})("change",function(){return c.Lc(t),c.mc(2).getSelectAllItem()}),c.Xb()}if(2&t){const t=c.mc(2);c.tc("ngModel",t.selectAllItem)}}function He(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",130),c.Yb(1,"div",252),c.Uc(2," Nt"),c.Tb(3,"br"),c.Yb(4,"input",253),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().$implicit.NightCount=e})("keypress",function(e){c.Lc(t);const i=c.mc().index,n=c.mc(2);return n.validateNumber(e),n.CalculateITotalNRev(e,i)})("change",function(){c.Lc(t);const e=c.mc().index;return c.mc(2).CalculateITotalNRevWE(e)}),c.Xb(),c.Xb(),c.Yb(5,"div",254),c.Uc(6," X "),c.Xb(),c.Yb(7,"div",252),c.Uc(8," Bed"),c.Tb(9,"br"),c.Yb(10,"input",255),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().$implicit.RoomCount=e})("keypress",function(e){c.Lc(t);const i=c.mc().index,n=c.mc(2);return n.validateNumber(e),n.CalculateITotalRRev(e,i)})("change",function(){c.Lc(t);const e=c.mc().index;return c.mc(2).CalculateITotalRRevWE(e)}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc().$implicit;c.Fb(4),c.tc("ngModel",t.NightCount),c.Fb(6),c.tc("ngModel",t.RoomCount)}}function Qe(t,e){if(1&t){const t=c.Zb();c.Yb(0,"p-inputNumber",256),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().$implicit.Qty=e})("onInput",function(e){c.Lc(t);const i=c.mc().index;return c.mc(2).CalculateItemTotal(e,i)})("onBlur",function(){c.Lc(t);const e=c.mc().index;return c.mc(2).CalculateItemTotalNew(e)}),c.Xb()}if(2&t){const t=c.mc(),e=t.index,i=t.$implicit;c.Pc(c.yc(7,Q)),c.vc("name","txtItemWiseQty_",e+1,""),c.tc("ngModel",i.Qty)("min",1)("max",i.Qty)("maxlength",10)}}function $e(t,e){if(1&t&&(c.Yb(0,"label"),c.Uc(1),c.Xb()),2&t){const t=c.mc().$implicit;c.Fb(1),c.Vc(t.Qty)}}function ze(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Yb(2,"input",248),c.ic("change",function(){return c.Lc(t),c.mc(2).CalculateTotalItemPrice()})("ngModelChange",function(t){return e.$implicit.IsChecked=t}),c.Xb(),c.Xb(),c.Yb(3,"td"),c.Uc(4),c.Xb(),c.Yb(5,"td"),c.Uc(6),c.Xb(),c.Yb(7,"td"),c.Uc(8),c.Xb(),c.Yb(9,"td"),c.Uc(10),c.Xb(),c.Yb(11,"td"),c.Sc(12,He,11,2,"div",122),c.Sc(13,Qe,1,8,"p-inputNumber",249),c.Sc(14,$e,2,1,"label",1),c.Xb(),c.Yb(15,"td"),c.Uc(16),c.Xb(),c.Yb(17,"td"),c.Yb(18,"p-inputNumber",250),c.ic("ngModelChange",function(t){return e.$implicit.DiscountPer=t})("onInput",function(i){c.Lc(t);const n=e.index;return c.mc(2).CalculateDiscount(i,n)})("onBlur",function(){c.Lc(t);const i=e.index;return c.mc(2).CalculateDiscountNew(i)}),c.Xb(),c.Xb(),c.Yb(19,"td"),c.Yb(20,"p-inputNumber",251),c.ic("ngModelChange",function(t){return e.$implicit.DiscountAmount=t})("onInput",function(i){c.Lc(t);const n=e.index;return c.mc(2).CalculateDiscountRev(i,n)})("onBlur",function(){c.Lc(t);const i=e.index;return c.mc(2).CalculateDiscountBlur(i)}),c.Xb(),c.Xb(),c.Yb(21,"td"),c.Uc(22),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit,i=c.mc(2);c.Fb(2),c.tc("disabled",t.IsDisabledCheckBox||0==t.CanEditQty)("ngModel",t.IsChecked),c.Fb(2),c.Wc(" ",t.MCODE," "),c.Fb(2),c.Wc(" ",t.Description," "),c.Fb(2),c.Wc(" ",t.UNIT," "),c.Fb(2),c.Vc(t.MRP),c.Fb(2),c.tc("ngIf",("Edit"==i.TrnMode||"New"==i.TrnMode)&&"Performa"==i.InvMode&&t.CanEditQty&&(t.MCODE==i.defaultItemMCODE.TreatmentOtherCharge||"Room"==t.Category)),c.Fb(1),c.tc("ngIf","Edit"==i.TrnMode&&"Performa"==i.InvMode&&t.CanEditQty&&t.MCODE!=i.defaultItemMCODE.TreatmentOtherCharge&&"Room"!=t.Category),c.Fb(1),c.tc("ngIf","New"==i.TrnMode||0==t.CanEditQty),c.Fb(2),c.Vc(t.GST),c.Fb(2),c.Pc(c.yc(25,Q)),c.tc("ngModel",t.DiscountPer)("min",0)("max",100)("maxlength",3)("disabled","CompleteInvoice"==i.InvMode&&"Visitor"!=i.CustomerType||!t.IsChecked),c.Fb(2),c.Pc(c.yc(26,Q)),c.tc("ngModel",t.DiscountAmount)("disabled","CompleteInvoice"==i.InvMode&&"Visitor"!=i.CustomerType||!t.IsChecked)("min",0)("max",t.Qty*t.MRP)("maxlength",5),c.Fb(2),c.Wc(" ",t.PriceWithGST," ")}}function Ke(t,e){if(1&t){const t=c.Zb();c.Yb(0,"td",264),c.Yb(1,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(3).CheckCreditNote()}),c.Uc(2,"Check Balance"),c.Xb(),c.Xb()}}function Je(t,e){if(1&t&&(c.Yb(0,"td"),c.Yb(1,"label",258),c.Uc(2,"Balance"),c.Xb(),c.Uc(3),c.Xb()),2&t){const t=c.mc(3);c.Fb(3),c.Wc(" ",t.MaxCreditNoteAmount," ")}}function ti(t,e){1&t&&(c.Yb(0,"td",259),c.Yb(1,"label",258),c.Uc(2,"Credit Note Amount"),c.Xb(),c.Xb())}function ei(t,e){if(1&t){const t=c.Zb();c.Yb(0,"td",113),c.Yb(1,"p-inputNumber",265),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(3).CreditNoteTranAmount=e})("onBlur",function(){return c.Lc(t),c.mc(3).CalculateNetPaybleAfterDiscountReverseNew()}),c.Xb(),c.Xb()}if(2&t){const t=c.mc(3);c.Fb(1),c.Pc(c.yc(5,Q)),c.tc("ngModel",t.CreditNoteTranAmount)("min",0)("max",t.MaxCreditNoteAmount)}}function ii(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr",257),c.Yb(1,"td",232),c.Yb(2,"label",258),c.Uc(3,"Credit Note Number"),c.Xb(),c.Xb(),c.Yb(4,"td",259),c.Yb(5,"input",260),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).CreditNoteNumber=e}),c.Xb(),c.Xb(),c.Sc(6,Ke,3,0,"td",261),c.Sc(7,Je,4,1,"td",1),c.Sc(8,ti,3,0,"td",262),c.Sc(9,ei,2,6,"td",263),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(5),c.Pc(c.yc(8,Q)),c.tc("disabled",t.MaxCreditNoteAmount>0||"Edit"==t.TrnMode)("ngModel",t.CreditNoteNumber),c.Fb(1),c.tc("ngIf",0==t.MaxCreditNoteAmount),c.Fb(1),c.tc("ngIf",t.MaxCreditNoteAmount>0&&"Edit"!=t.TrnMode),c.Fb(1),c.tc("ngIf",t.MaxCreditNoteAmount>0||"Edit"==t.TrnMode),c.Fb(1),c.tc("ngIf",t.MaxCreditNoteAmount>0||"Edit"==t.TrnMode)}}function ni(t,e){1&t&&(c.Yb(0,"p"),c.Yb(1,"b"),c.Uc(2,"Requested By"),c.Xb(),c.Xb())}function si(t,e){if(1&t){const t=c.Zb();c.Yb(0,"input",266),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).RequestedBy=e}),c.Xb()}if(2&t){const t=c.mc(2);c.tc("ngModel",t.RequestedBy)}}function li(t,e){1&t&&(c.Yb(0,"p"),c.Yb(1,"b"),c.Uc(2,"Authorized By"),c.Xb(),c.Xb())}function oi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"p-dropdown",267),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).ReferredBy=e}),c.Xb()}if(2&t){const t=c.mc(2);c.Pc(c.yc(6,Q)),c.tc("options",t.lstAuthorizedMaster)("ngModel",t.ReferredBy)("showClear",!0)("filter",!0)}}function ci(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Tb(1,"td"),c.Tb(2,"td"),c.Yb(3,"td",268),c.Yb(4,"p"),c.Yb(5,"b"),c.Uc(6,"General Remarks"),c.Yb(7,"span",45),c.Uc(8,"*"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Yb(9,"td",269),c.Yb(10,"input",270),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).PIEditGenRemarks=e}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(10),c.tc("ngModel",t.PIEditGenRemarks)}}function ri(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(2).ShowReceivePaymentModel()}),c.Uc(1,"Generate Proforma and Receive Payment"),c.Xb()}}function ai(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(2).GeneratePerforma()}),c.Uc(1,"Generate Proforma Only"),c.Xb()}}function di(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(2).GenerateCompleteInvoice()}),c.Uc(1,"Generate Complete Invoice"),c.Xb()}}function bi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(2).ShowAddCreditNoteModelCI()}),c.Uc(1,"Generate Complete Invoice and Received Payment"),c.Xb()}}function ui(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(2).GenerateCompleteInvoice()}),c.Uc(1,"Generate Complete Invoice"),c.Xb()}}function hi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",223),c.Yb(1,"h4",224),c.Uc(2),c.Xb(),c.Yb(3,"button",225),c.ic("click",function(){return(0,e.dismiss)("Cross click")}),c.Yb(4,"span",226),c.Uc(5,"\xd7"),c.Xb(),c.Xb(),c.Xb(),c.Yb(6,"div",227),c.Sc(7,Ge,16,11,"div",122),c.Tb(8,"hr"),c.Yb(9,"div",130),c.Yb(10,"div",228),c.Yb(11,"table",229),c.Yb(12,"thead"),c.Yb(13,"tr"),c.Yb(14,"th"),c.Sc(15,qe,1,1,"input",230),c.Xb(),c.Yb(16,"th"),c.Uc(17,"Item Code"),c.Xb(),c.Yb(18,"th"),c.Uc(19,"Item Details"),c.Xb(),c.Yb(20,"th"),c.Uc(21,"UM"),c.Xb(),c.Yb(22,"th"),c.Uc(23,"Price"),c.Xb(),c.Yb(24,"th"),c.Uc(25,"Quantity"),c.Xb(),c.Yb(26,"th"),c.Uc(27,"GST"),c.Xb(),c.Yb(28,"th"),c.Uc(29,"Discount %"),c.Xb(),c.Yb(30,"th"),c.Uc(31,"Discount Amount"),c.Xb(),c.Yb(32,"th"),c.Uc(33,"Net Amount"),c.Xb(),c.Xb(),c.Xb(),c.Yb(34,"tbody"),c.Sc(35,ze,23,27,"tr",231),c.Yb(36,"tr"),c.Tb(37,"td"),c.Tb(38,"td"),c.Tb(39,"td"),c.Tb(40,"td"),c.Tb(41,"td"),c.Tb(42,"td"),c.Tb(43,"td"),c.Tb(44,"td"),c.Yb(45,"td"),c.Yb(46,"b"),c.Uc(47,"Total"),c.Xb(),c.Xb(),c.Yb(48,"td"),c.Uc(49),c.Xb(),c.Xb(),c.Yb(50,"tr"),c.Tb(51,"td"),c.Tb(52,"td"),c.Tb(53,"td"),c.Tb(54,"td"),c.Yb(55,"td",232),c.Yb(56,"b"),c.Uc(57,"Bill wise Discount %"),c.Xb(),c.Xb(),c.Yb(58,"td"),c.Yb(59,"p-inputNumber",233),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().BillWiseDiscountPer=e})("onInput",function(e){return c.Lc(t),c.mc().CalculateNetPaybleAfterDiscount(e)})("onBlur",function(){return c.Lc(t),c.mc().CalculateNetPaybleAfterDiscountNew()}),c.Xb(),c.Xb(),c.Yb(60,"td"),c.Yb(61,"b"),c.Uc(62,"Discount Amount"),c.Xb(),c.Xb(),c.Yb(63,"td"),c.Yb(64,"p-inputNumber",234),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().BillWiseDiscountAmount=e})("onInput",function(e){return c.Lc(t),c.mc().CalculateNetPaybleAfterDiscountReverse(e)})("onBlur",function(){return c.Lc(t),c.mc().CalculateNetPaybleAfterDiscountReverseNew()}),c.Xb(),c.Xb(),c.Xb(),c.Sc(65,ii,10,9,"tr",235),c.Yb(66,"tr"),c.Tb(67,"td"),c.Tb(68,"td"),c.Tb(69,"td"),c.Tb(70,"td"),c.Tb(71,"td"),c.Tb(72,"td"),c.Tb(73,"td"),c.Tb(74,"td"),c.Yb(75,"td"),c.Yb(76,"b"),c.Uc(77,"Net Payable"),c.Xb(),c.Xb(),c.Yb(78,"td"),c.Uc(79),c.nc(80,"number"),c.Xb(),c.Xb(),c.Yb(81,"tr"),c.Tb(82,"td"),c.Tb(83,"td"),c.Tb(84,"td"),c.Tb(85,"td"),c.Tb(86,"td"),c.Tb(87,"td",236),c.Yb(88,"td",237),c.Sc(89,ni,3,0,"p",1),c.Xb(),c.Yb(90,"td",237),c.Sc(91,si,1,1,"input",238),c.Xb(),c.Yb(92,"td",237),c.Sc(93,li,3,0,"p",1),c.Xb(),c.Yb(94,"td",237),c.Sc(95,oi,1,7,"p-dropdown",239),c.Xb(),c.Xb(),c.Sc(96,ci,11,1,"tr",1),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Yb(97,"div",240),c.Yb(98,"button",241),c.ic("click",function(){return(0,e.close)("Close click")}),c.Uc(99,"Close"),c.Xb(),c.Sc(100,ri,2,0,"button",100),c.Sc(101,ai,2,0,"button",100),c.Sc(102,di,2,0,"button",100),c.Sc(103,bi,2,0,"button",100),c.Sc(104,ui,2,0,"button",100),c.Xb()}if(2&t){const t=c.mc();c.Fb(2),c.Vc("Performa"==t.InvMode?"Generate Proforma Invoice For Item":"Generate Complete Invoice For Item"),c.Fb(5),c.tc("ngIf","CompleteInvoice"==t.InvMode&&"Patient"==t.CustomerType),c.Fb(8),c.tc("ngIf","CompleteInvoice"!=t.InvMode),c.Fb(20),c.tc("ngForOf",t.AllItemPriceRes),c.Fb(14),c.Wc(" ",t.ItemCheckedTotal," "),c.Fb(10),c.Pc(c.yc(36,Q)),c.tc("disabled",(0==t.ItemCheckedTotal||"CompleteInvoice"==t.InvMode)&&"Visitor"!=t.CustomerType)("ngModel",t.BillWiseDiscountPer)("min",0)("max",100)("minFractionDigits",0)("maxFractionDigits",5),c.Fb(5),c.Pc(c.yc(37,Q)),c.tc("disabled",(0==t.ItemCheckedTotal||"CompleteInvoice"==t.InvMode)&&"Visitor"!=t.CustomerType)("ngModel",t.BillWiseDiscountAmount)("min",0)("max",t.ItemCheckedTotal)("minFractionDigits",0)("maxFractionDigits",5),c.Fb(1),c.tc("ngIf","CompleteInvoice"!=t.InvMode),c.Fb(14),c.Wc(" ",c.pc(80,33,t.NetPaybleTotal,"1.0-0")," "),c.Fb(10),c.tc("ngIf",t.ItemTotalDiscount+t.BillWiseDiscountAmount>0),c.Fb(2),c.tc("ngIf",t.ItemTotalDiscount+t.BillWiseDiscountAmount>0),c.Fb(2),c.tc("ngIf",t.ItemTotalDiscount+t.BillWiseDiscountAmount>0),c.Fb(2),c.tc("ngIf",t.ItemTotalDiscount+t.BillWiseDiscountAmount>0),c.Fb(1),c.tc("ngIf","Performa"==t.InvMode&&"Edit"==t.TrnMode),c.Fb(4),c.tc("ngIf","Performa"===t.InvMode&&t.ItemCheckedTotal>0&&1!=t.isCashless),c.Fb(1),c.tc("ngIf","Performa"===t.InvMode&&t.ItemCheckedTotal>0),c.Fb(1),c.tc("ngIf","CompleteInvoice"==t.InvMode&&"Patient"==t.CustomerType&&0==t.isGenerateTI),c.Fb(1),c.tc("ngIf","CompleteInvoice"==t.InvMode&&(1==t.isGenerateTI||"Visitor"==t.CustomerType)&&1!=t.CheckIsCredit&&t.NetPaybleTotal>0),c.Fb(1),c.tc("ngIf","CompleteInvoice"==t.InvMode&&("Visitor"==t.CustomerType||"Patient"==t.CustomerType&&"OPD"==t.bookingtypeSelected)&&(1==t.CheckIsCredit||0==t.NetPaybleTotal))}}function mi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",223),c.Yb(1,"h4",224),c.Uc(2,"Initiate Payment RazorPay"),c.Xb(),c.Yb(3,"button",271),c.ic("click",function(){return(0,e.dismiss)("Cross click")}),c.Yb(4,"span",226),c.Uc(5,"\xd7"),c.Xb(),c.Xb(),c.Xb(),c.Yb(6,"div",227),c.Yb(7,"div",130),c.Yb(8,"div",228),c.Yb(9,"app-razorpay",272),c.ic("GetPaymentStatusEmit",function(e){return c.Lc(t),c.mc().GetPaymentStatusEmit(e)}),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Yb(10,"div",240),c.Yb(11,"button",241),c.ic("click",function(){return(0,e.close)("Close click")}),c.Uc(12,"Close"),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(9),c.tc("OrderRes",t.OrderRes)("ItemPriceRes",t.ItemPriceRes)("SlotBookingIdSelected",t.SlotBookingIdSelected)("IsSelectedItem",t.IsSelectedItem)("UserRes",t.UserRes)("BillWiseDiscountPer",t.BillWiseDiscountPer)("ReferredBy",t.ReferredBy)("PayRequestFrom",t.PayRequestFrom)}}function pi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",223),c.Yb(1,"h4",224),c.Uc(2,"Initiate Payment WordLine"),c.Xb(),c.Yb(3,"button",273),c.ic("click",function(){return(0,e.dismiss)("Cross click")}),c.Yb(4,"span",226),c.Uc(5,"\xd7"),c.Xb(),c.Xb(),c.Xb(),c.Yb(6,"div",227),c.Yb(7,"div",130),c.Yb(8,"div",228),c.Yb(9,"app-worldline",274),c.ic("GetPaymentStatusEmit",function(e){return c.Lc(t),c.mc().GetWLPaymentStatusEmit(e)}),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Yb(10,"div",240),c.Yb(11,"button",241),c.ic("click",function(){return(0,e.close)("Close click")}),c.Uc(12,"Close"),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(9),c.tc("WLOrderRes",t.WLOrderRes)("ItemPriceRes",t.ItemPriceRes)("SlotBookingIdSelected",t.SlotBookingIdSelected)("IsSelectedItem",t.IsSelectedItem)("UserRes",t.UserRes)("BillWiseDiscountPer",t.BillWiseDiscountPer)("ReferredBy",t.ReferredBy)("PayRequestFrom",t.PayRequestFrom)}}function gi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",286),c.Yb(1,"h3"),c.Uc(2,"Credit Details"),c.Xb(),c.Yb(3,"div",287),c.Yb(4,"div",288),c.Uc(5,"Amount "),c.Yb(6,"span",289),c.Uc(7,"*"),c.Xb(),c.Xb(),c.Yb(8,"div",290),c.Yb(9,"p-inputNumber",291),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CREDITAMT=e}),c.Xb(),c.Xb(),c.Xb(),c.Tb(10,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(9),c.Pc(c.yc(5,Q)),c.tc("ngModel",t.TenderObj.CREDITAMT)("min",0)("max",t.MaxCreditLimit)}}const Ii=function(){return{standalone:!0}};function fi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",292),c.Yb(1,"h6",293),c.Yb(2,"strong"),c.Uc(3,"Cash Details"),c.Xb(),c.Xb(),c.Yb(4,"div",287),c.Yb(5,"div",288),c.Yb(6,"label"),c.Yb(7,"strong"),c.Uc(8," Amount "),c.Yb(9,"span",289),c.Uc(10,"*"),c.Xb(),c.Xb(),c.Xb(),c.Yb(11,"p-inputNumber",294),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CASH=e}),c.Xb(),c.Xb(),c.Yb(12,"div",288),c.Yb(13,"label"),c.Yb(14,"strong"),c.Uc(15,"Received Date"),c.Xb(),c.Yb(16,"span",289),c.Uc(17,"*"),c.Xb(),c.Xb(),c.Yb(18,"p-calendar",295,296),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CashRecdDate=e}),c.Xb(),c.Xb(),c.Xb(),c.Tb(20,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(11),c.Pc(c.yc(15,Q)),c.tc("ngModel",t.TenderObj.CASH)("min",0)("max",t.NetPaybleTotal),c.Fb(7),c.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.TenderObj.CashRecdDate)("ngModelOptions",c.yc(16,Ii))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1)}}function vi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",297),c.Yb(1,"h3"),c.Uc(2,"Card Details"),c.Xb(),c.Yb(3,"div",287),c.Yb(4,"div",288),c.Uc(5,"Card Number "),c.Yb(6,"span",289),c.Uc(7,"*"),c.Xb(),c.Xb(),c.Yb(8,"div",288),c.Yb(9,"input",298),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CARDNO=e}),c.Xb(),c.Xb(),c.Yb(10,"div",288),c.Uc(11,"Card Holder Name "),c.Yb(12,"span",289),c.Uc(13,"*"),c.Xb(),c.Xb(),c.Yb(14,"div",288),c.Yb(15,"input",299),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CARDHOLDERNAME=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(16,"div",287),c.Yb(17,"div",288),c.Uc(18,"Received Date "),c.Yb(19,"span",289),c.Uc(20,"*"),c.Xb(),c.Xb(),c.Yb(21,"div",290),c.Yb(22,"p-calendar",295,300),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CardRecdDate=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(24,"div",287),c.Yb(25,"div",288),c.Uc(26,"Amount "),c.Yb(27,"span",289),c.Uc(28,"*"),c.Xb(),c.Xb(),c.Yb(29,"div",290),c.Yb(30,"p-inputNumber",301),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CARDAMT=e}),c.Xb(),c.Xb(),c.Xb(),c.Tb(31,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(9),c.Pc(c.yc(21,Q)),c.tc("ngModel",t.TenderObj.CARDNO),c.Fb(6),c.Pc(c.yc(22,Q)),c.tc("ngModel",t.TenderObj.CARDHOLDERNAME),c.Fb(7),c.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.TenderObj.CardRecdDate)("ngModelOptions",c.yc(23,Ii))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1),c.Fb(8),c.Pc(c.yc(24,Q)),c.tc("ngModel",t.TenderObj.CARDAMT)("min",0)("max",t.NetPaybleTotal)}}function Ci(t,e){if(1&t){const t=c.Zb();c.Yb(0,"a",124),c.ic("click",function(){return c.Lc(t),c.mc(4).AddBankTransactionDetails()}),c.Tb(1,"i",88),c.Xb()}}function Si(t,e){if(1&t){const t=c.Zb();c.Yb(0,"a",124),c.ic("click",function(){c.Lc(t);const e=c.mc().index,i=c.mc(3);return i.RemoveBankTransactionDetails(i.lstBankDepositTransactionDetails[e].Sequence)}),c.Tb(1,"i",92),c.Xb()}}function Ti(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2),c.Xb(),c.Yb(3,"td"),c.Yb(4,"input",304),c.ic("ngModelChange",function(t){return e.$implicit.BankName=t}),c.Xb(),c.Xb(),c.Yb(5,"td"),c.Yb(6,"input",304),c.ic("ngModelChange",function(t){return e.$implicit.TransactionId=t}),c.Xb(),c.Xb(),c.Yb(7,"td"),c.Yb(8,"p-calendar",295,305),c.ic("ngModelChange",function(t){return e.$implicit.RecdDate=t}),c.Xb(),c.Xb(),c.Yb(10,"td"),c.Yb(11,"p-inputNumber",306),c.ic("onInput",function(i){c.Lc(t);const n=e.$implicit;return c.mc(3).CalculateTotalBankTransaction(i,n.Sequence)})("onBlur",function(){return c.Lc(t),c.mc(3).CalculateTotalBankTransactionrev()})("ngModelChange",function(t){return e.$implicit.Amount=t}),c.Xb(),c.Xb(),c.Yb(12,"td"),c.Sc(13,Ci,2,0,"a",125),c.Sc(14,Si,2,0,"a",125),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit,i=e.index,n=c.mc(3);c.Fb(2),c.Vc(i+1),c.Fb(2),c.Pc(c.yc(27,Q)),c.vc("name","txtTransactionBankDepoName_",i,""),c.tc("ngModel",t.BankName),c.Fb(2),c.Pc(c.yc(28,Q)),c.vc("name","txtTransactionIdBankDepo_",i,""),c.tc("ngModel",t.TransactionId),c.Fb(2),c.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",t.RecdDate)("ngModelOptions",c.yc(29,Ii))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!1),c.Fb(3),c.Pc(c.yc(30,Q)),c.vc("name","txtBankTFAmountTran_",i,""),c.tc("ngModel",t.Amount)("min",0)("max",n.NetPaybleTotal),c.Fb(2),c.tc("ngIf",(null==n.lstBankDepositTransactionDetails?null:n.lstBankDepositTransactionDetails.length)<10),c.Fb(1),c.tc("ngIf",1!==n.lstBankDepositTransactionDetails[i].Sequence)}}function yi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",302),c.Yb(1,"h3"),c.Uc(2,"Bank Deposit Details"),c.Xb(),c.Tb(3,"hr"),c.Yb(4,"div",287),c.Yb(5,"table",229),c.Yb(6,"thead"),c.Yb(7,"tr"),c.Yb(8,"th"),c.Uc(9,"S.No"),c.Xb(),c.Yb(10,"th"),c.Uc(11,"Bank Name "),c.Yb(12,"span",289),c.Uc(13,"*"),c.Xb(),c.Xb(),c.Yb(14,"th"),c.Uc(15,"Transaction Id "),c.Yb(16,"span",289),c.Uc(17,"*"),c.Xb(),c.Xb(),c.Yb(18,"th"),c.Uc(19,"Received Date "),c.Yb(20,"span",289),c.Uc(21,"*"),c.Xb(),c.Xb(),c.Yb(22,"th"),c.Uc(23,"Amount "),c.Yb(24,"span",289),c.Uc(25,"*"),c.Xb(),c.Xb(),c.Yb(26,"th"),c.Uc(27,"Action"),c.Xb(),c.Xb(),c.Xb(),c.Yb(28,"tbody"),c.Sc(29,Ti,15,31,"tr",231),c.Xb(),c.Xb(),c.Xb(),c.Tb(30,"hr"),c.Yb(31,"div",287),c.Yb(32,"div",288),c.Uc(33,"Amount"),c.Xb(),c.Yb(34,"div",290),c.Yb(35,"p-inputNumber",303),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.BANKTFAMOUNT=e}),c.Xb(),c.Xb(),c.Xb(),c.Tb(36,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(29),c.tc("ngForOf",t.lstBankDepositTransactionDetails),c.Fb(6),c.Pc(c.yc(6,Q)),c.tc("ngModel",t.TenderObj.BANKTFAMOUNT)("min",0)("max",t.NetPaybleTotal)}}function Mi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",307),c.Yb(1,"h3"),c.Uc(2,"Cheque Details"),c.Xb(),c.Yb(3,"div",287),c.Yb(4,"div",288),c.Uc(5,"Cheque Number "),c.Yb(6,"span",289),c.Uc(7,"*"),c.Xb(),c.Xb(),c.Yb(8,"div",288),c.Yb(9,"input",298),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CHEQUENO=e}),c.Xb(),c.Xb(),c.Yb(10,"div",288),c.Uc(11,"Bank Name "),c.Yb(12,"span",289),c.Uc(13,"*"),c.Xb(),c.Xb(),c.Yb(14,"div",288),c.Yb(15,"input",308),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.BANK=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(16,"div",287),c.Yb(17,"div",288),c.Uc(18,"Issue Date "),c.Yb(19,"span",289),c.Uc(20,"*"),c.Xb(),c.Xb(),c.Yb(21,"div",290),c.Yb(22,"p-calendar",309),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.ChequeIssueDate=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(23,"div",287),c.Yb(24,"div",288),c.Uc(25,"Amount "),c.Yb(26,"span",289),c.Uc(27,"*"),c.Xb(),c.Xb(),c.Yb(28,"div",288),c.Yb(29,"p-inputNumber",310),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CHEQUEAMT=e}),c.Xb(),c.Xb(),c.Yb(30,"div",288),c.Uc(31,"Holder Name"),c.Xb(),c.Yb(32,"div",288),c.Yb(33,"input",311),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.ChequeHolderName=e}),c.Xb(),c.Xb(),c.Xb(),c.Tb(34,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(9),c.Pc(c.yc(24,Q)),c.tc("ngModel",t.TenderObj.CHEQUENO),c.Fb(6),c.Pc(c.yc(25,Q)),c.tc("ngModel",t.TenderObj.BANK),c.Fb(7),c.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.TenderObj.ChequeIssueDate)("ngModelOptions",c.yc(26,Ii))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),c.Fb(7),c.Pc(c.yc(27,Q)),c.tc("ngModel",t.TenderObj.CHEQUEAMT)("min",0)("max",t.NetPaybleTotal),c.Fb(4),c.Pc(c.yc(28,Q)),c.tc("ngModel",t.TenderObj.ChequeHolderName)}}function Ai(t,e){if(1&t&&(c.Yb(0,"label"),c.Uc(1),c.Xb()),2&t){const t=c.mc(3);c.Fb(1),c.Vc(t.fileInputLabelAttBankslip1)}}function Ri(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",312),c.Yb(1,"div",313),c.Uc(2,"Attach Supported Doc (max size - 5MB) (PDF, JPG, PNG)"),c.Xb(),c.Yb(3,"div",290),c.Yb(4,"input",314,315),c.ic("change",function(e){return c.Lc(t),c.mc(2).onFileSelectBankDepositSlip(e,"AttBankslip1")}),c.Xb(),c.Tb(6,"br"),c.Sc(7,Ai,2,1,"label",1),c.Xb(),c.Tb(8,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(7),c.tc("ngIf",t.fileInputLabelAttBankslip1)}}function Di(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",146),c.Yb(1,"div",288),c.Uc(2,"Remarks"),c.Xb(),c.Yb(3,"div",290),c.Yb(4,"input",316),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.REMARKS=e}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(4),c.Pc(c.yc(3,Q)),c.tc("ngModel",t.TenderObj.REMARKS)}}function Pi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",223),c.Yb(1,"h4",224),c.Uc(2,"Select Payment Method"),c.Xb(),c.Yb(3,"button",275),c.ic("click",function(){return(0,e.dismiss)("Cross click")}),c.Yb(4,"span",226),c.Uc(5,"\xd7"),c.Xb(),c.Xb(),c.Xb(),c.Yb(6,"div",227),c.Yb(7,"div",130),c.Yb(8,"div",228),c.Yb(9,"p-multiSelect",276),c.ic("onChange",function(){return c.Lc(t),c.mc().ShowSelectedItem()})("ngModelChange",function(e){return c.Lc(t),c.mc().selectedPaymodeCodes=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(10,"div",130),c.Yb(11,"div",228),c.Yb(12,"div",146),c.Yb(13,"div",277),c.Uc(14),c.nc(15,"number"),c.Xb(),c.Xb(),c.Sc(16,gi,11,6,"div",278),c.Sc(17,fi,21,17,"div",279),c.Sc(18,vi,32,25,"div",280),c.Sc(19,yi,37,7,"div",281),c.Sc(20,Mi,35,29,"div",282),c.Sc(21,Ri,9,1,"div",283),c.Yb(22,"div",284),c.Sc(23,Di,5,4,"div",285),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Yb(24,"div",240),c.Yb(25,"button",241),c.ic("click",function(){return(0,e.close)("Close click")}),c.Uc(26,"Close"),c.Xb(),c.Yb(27,"button",104),c.ic("click",function(){return c.Lc(t),c.mc().FireforPayment()}),c.Uc(28,"Pay"),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(9),c.Pc(c.yc(15,Q)),c.tc("options",t.lstPayMode)("ngModel",t.selectedPaymodeCodes),c.Fb(5),c.Wc(" Total Amount: ",c.pc(15,12,t.NetPaybleTotal,"1.0-0")," "),c.Fb(2),c.tc("ngIf",t.SelectPaymodeArray.includes("LB1199")),c.Fb(1),c.tc("ngIf",t.SelectPaymodeArray.includes("AT01002")),c.Fb(1),c.tc("ngIf",t.SelectPaymodeArray.includes("AT999999")),c.Fb(1),c.tc("ngIf",t.SelectPaymodeArray.includes("BT01001")),c.Fb(1),c.tc("ngIf",t.SelectPaymodeArray.includes("DI01001")),c.Fb(1),c.tc("ngIf",t.SelectPaymodeArray.includes("AT01002")||t.SelectPaymodeArray.includes("AT999999")||t.SelectPaymodeArray.includes("BT01001")||t.SelectPaymodeArray.includes("DI01001")),c.Fb(2),c.tc("ngIf",(null==t.SelectPaymodeArray?null:t.SelectPaymodeArray.length)>0&&!t.SelectPaymodeArray.includes("ATONLN"))}}function Yi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",292),c.Tb(1,"hr",293),c.Yb(2,"h6",293),c.Yb(3,"strong"),c.Uc(4,"Cash Details"),c.Xb(),c.Xb(),c.Yb(5,"div",287),c.Yb(6,"div",320),c.Yb(7,"label"),c.Yb(8,"strong"),c.Uc(9,"Amount "),c.Yb(10,"span",289),c.Uc(11,"*"),c.Xb(),c.Xb(),c.Xb(),c.Yb(12,"p-inputNumber",294),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CASH=e}),c.Xb(),c.Xb(),c.Yb(13,"div",320),c.Yb(14,"label"),c.Yb(15,"strong"),c.Uc(16," Received Date"),c.Xb(),c.Yb(17,"span",289),c.Uc(18,"*"),c.Xb(),c.Xb(),c.Yb(19,"p-calendar",295,296),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CashRecdDate=e}),c.Xb(),c.Xb(),c.Xb(),c.Tb(21,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(12),c.Pc(c.yc(15,Q)),c.tc("ngModel",t.TenderObj.CASH)("min",0)("max",t.CreditNoteAmount),c.Fb(7),c.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.TenderObj.CashRecdDate)("ngModelOptions",c.yc(16,Ii))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1)}}function Xi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"a",124),c.ic("click",function(){return c.Lc(t),c.mc(4).AddCardPaymentDetails()}),c.Tb(1,"i",88),c.Xb()}}function Ui(t,e){if(1&t){const t=c.Zb();c.Yb(0,"a",124),c.ic("click",function(){c.Lc(t);const e=c.mc().index,i=c.mc(3);return i.RemoveCardPaymentDetails(i.lstCardPaymentTransactionDetails[e].Sequence)}),c.Tb(1,"i",92),c.Xb()}}function Ni(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2),c.Xb(),c.Yb(3,"td"),c.Yb(4,"input",304),c.ic("ngModelChange",function(t){return e.$implicit.CardNumber=t}),c.Xb(),c.Xb(),c.Yb(5,"td"),c.Yb(6,"input",304),c.ic("ngModelChange",function(t){return e.$implicit.CardHolderName=t}),c.Xb(),c.Xb(),c.Yb(7,"td"),c.Yb(8,"input",304),c.ic("ngModelChange",function(t){return e.$implicit.TransactionId=t}),c.Xb(),c.Xb(),c.Yb(9,"td"),c.Yb(10,"p-calendar",295,305),c.ic("ngModelChange",function(t){return e.$implicit.RecdDate=t}),c.Xb(),c.Xb(),c.Yb(12,"td"),c.Yb(13,"p-inputNumber",306),c.ic("onInput",function(i){c.Lc(t);const n=e.$implicit;return c.mc(3).CalculateTotalCardPayment(i,n.Sequence)})("onBlur",function(){return c.Lc(t),c.mc(3).CalculateTotalCardPaymentrev()})("ngModelChange",function(t){return e.$implicit.Amount=t}),c.Xb(),c.Xb(),c.Yb(14,"td"),c.Sc(15,Xi,2,0,"a",125),c.Sc(16,Ui,2,0,"a",125),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit,i=e.index,n=c.mc(3);c.Fb(2),c.Vc(i+1),c.Fb(2),c.Pc(c.yc(31,Q)),c.vc("name","txtTransactionCardNumber_",i,""),c.tc("ngModel",t.CardNumber),c.Fb(2),c.Pc(c.yc(32,Q)),c.vc("name","txtTransactionCardHolderName_",i,""),c.tc("ngModel",t.CardHolderName),c.Fb(2),c.Pc(c.yc(33,Q)),c.vc("name","txtTransactionIdCardPayment_",i,""),c.tc("ngModel",t.TransactionId),c.Fb(2),c.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",t.RecdDate)("ngModelOptions",c.yc(34,Ii))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!1),c.Fb(3),c.Pc(c.yc(35,Q)),c.vc("name","txtBankTFAmountTran_",i,""),c.tc("ngModel",t.Amount)("min",0)("max",n.NetPaybleTotal),c.Fb(2),c.tc("ngIf",(null==n.lstCardPaymentTransactionDetails?null:n.lstCardPaymentTransactionDetails.length)<10),c.Fb(1),c.tc("ngIf",1!==n.lstCardPaymentTransactionDetails[i].Sequence)}}function xi(t,e){if(1&t&&(c.Yb(0,"div",297),c.Yb(1,"h6",293),c.Yb(2,"strong"),c.Uc(3,"Card Details"),c.Xb(),c.Xb(),c.Yb(4,"div",325),c.Yb(5,"table",229),c.Yb(6,"thead"),c.Yb(7,"tr"),c.Yb(8,"th"),c.Uc(9,"S.No"),c.Xb(),c.Yb(10,"th"),c.Uc(11,"Card Number "),c.Xb(),c.Yb(12,"th"),c.Uc(13,"Card Holder Name"),c.Xb(),c.Yb(14,"th"),c.Uc(15,"Transaction Id "),c.Yb(16,"span",289),c.Uc(17,"*"),c.Xb(),c.Xb(),c.Yb(18,"th"),c.Uc(19,"Payment Rec. Date "),c.Yb(20,"span",289),c.Uc(21,"*"),c.Xb(),c.Xb(),c.Yb(22,"th"),c.Uc(23,"Amount "),c.Yb(24,"span",289),c.Uc(25,"*"),c.Xb(),c.Xb(),c.Yb(26,"th"),c.Uc(27,"Action"),c.Xb(),c.Xb(),c.Xb(),c.Yb(28,"tbody"),c.Sc(29,Ni,17,36,"tr",231),c.Xb(),c.Xb(),c.Xb(),c.Tb(30,"hr"),c.Xb()),2&t){const t=c.mc(2);c.Fb(29),c.tc("ngForOf",t.lstCardPaymentTransactionDetails)}}function Bi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"a",124),c.ic("click",function(){return c.Lc(t),c.mc(4).AddBankTransactionDetails()}),c.Tb(1,"i",88),c.Xb()}}function wi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"a",124),c.ic("click",function(){c.Lc(t);const e=c.mc().index,i=c.mc(3);return i.RemoveBankTransactionDetails(i.lstBankDepositTransactionDetails[e].Sequence)}),c.Tb(1,"i",92),c.Xb()}}function Ei(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2),c.Xb(),c.Yb(3,"td"),c.Yb(4,"input",304),c.ic("ngModelChange",function(t){return e.$implicit.BankName=t}),c.Xb(),c.Xb(),c.Yb(5,"td"),c.Yb(6,"input",304),c.ic("ngModelChange",function(t){return e.$implicit.TransactionId=t}),c.Xb(),c.Xb(),c.Yb(7,"td"),c.Yb(8,"p-calendar",295,328),c.ic("ngModelChange",function(t){return e.$implicit.RecdDate=t}),c.Xb(),c.Xb(),c.Yb(10,"td"),c.Yb(11,"p-inputNumber",306),c.ic("onInput",function(i){c.Lc(t);const n=e.$implicit;return c.mc(3).CalculateTotalBankTransaction(i,n.Sequence)})("onBlur",function(){return c.Lc(t),c.mc(3).CalculateTotalBankTransactionrev()})("ngModelChange",function(t){return e.$implicit.Amount=t}),c.Xb(),c.Xb(),c.Yb(12,"td"),c.Sc(13,Bi,2,0,"a",125),c.Sc(14,wi,2,0,"a",125),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit,i=e.index,n=c.mc(3);c.Fb(2),c.Vc(i+1),c.Fb(2),c.Pc(c.yc(27,Q)),c.vc("name","txtTransactionBankDepoNamecr_",i,""),c.tc("ngModel",t.BankName),c.Fb(2),c.Pc(c.yc(28,Q)),c.vc("name","txtTransactionIdBankDepo_",i,""),c.tc("ngModel",t.TransactionId),c.Fb(2),c.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",t.RecdDate)("ngModelOptions",c.yc(29,Ii))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!1),c.Fb(3),c.Pc(c.yc(30,Q)),c.vc("name","txtBankTFAmountTranCR_",i,""),c.tc("ngModel",t.Amount)("min",0)("max",n.CreditNoteAmount),c.Fb(2),c.tc("ngIf",(null==n.lstBankDepositTransactionDetails?null:n.lstBankDepositTransactionDetails.length)<10),c.Fb(1),c.tc("ngIf",1!==n.lstBankDepositTransactionDetails[i].Sequence)}}function ki(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",302),c.Yb(1,"div",287),c.Yb(2,"div",228),c.Yb(3,"h6",293),c.Yb(4,"strong"),c.Uc(5,"Bank Deposit Details"),c.Xb(),c.Xb(),c.Yb(6,"table",229),c.Yb(7,"thead"),c.Yb(8,"tr"),c.Yb(9,"th"),c.Uc(10,"S.No"),c.Xb(),c.Yb(11,"th"),c.Uc(12,"Bank Name "),c.Yb(13,"span",289),c.Uc(14,"*"),c.Xb(),c.Xb(),c.Yb(15,"th"),c.Uc(16,"Transaction Id "),c.Yb(17,"span",289),c.Uc(18,"*"),c.Xb(),c.Xb(),c.Yb(19,"th"),c.Uc(20,"Payment Rec. Date "),c.Yb(21,"span",289),c.Uc(22,"*"),c.Xb(),c.Xb(),c.Yb(23,"th"),c.Uc(24,"Amount "),c.Yb(25,"span",289),c.Uc(26,"*"),c.Xb(),c.Xb(),c.Yb(27,"th"),c.Uc(28,"Action"),c.Xb(),c.Xb(),c.Xb(),c.Yb(29,"tbody"),c.Sc(30,Ei,15,31,"tr",231),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Tb(31,"hr"),c.Yb(32,"div",326),c.Yb(33,"div",327),c.Uc(34,"Amount"),c.Xb(),c.Yb(35,"div",288),c.Yb(36,"p-inputNumber",303),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.BANKTFAMOUNT=e}),c.Xb(),c.Xb(),c.Xb(),c.Tb(37,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(30),c.tc("ngForOf",t.lstBankDepositTransactionDetails),c.Fb(6),c.Pc(c.yc(6,Q)),c.tc("ngModel",t.TenderObj.BANKTFAMOUNT)("min",0)("max",t.CreditNoteAmount)}}function Li(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",307),c.Yb(1,"h3"),c.Uc(2,"Cheque Details"),c.Xb(),c.Yb(3,"div",287),c.Yb(4,"div",288),c.Uc(5,"Cheque Number "),c.Yb(6,"span",289),c.Uc(7,"*"),c.Xb(),c.Xb(),c.Yb(8,"div",288),c.Yb(9,"input",298),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CHEQUENO=e}),c.Xb(),c.Xb(),c.Yb(10,"div",288),c.Uc(11,"Bank Name "),c.Yb(12,"span",289),c.Uc(13,"*"),c.Xb(),c.Xb(),c.Yb(14,"div",288),c.Yb(15,"input",308),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.BANK=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(16,"div",287),c.Yb(17,"div",288),c.Uc(18,"Received Date"),c.Yb(19,"span",289),c.Uc(20,"*"),c.Xb(),c.Xb(),c.Yb(21,"div",290),c.Yb(22,"p-calendar",329),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.ChequeRecdDate=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(23,"div",287),c.Yb(24,"div",288),c.Uc(25,"Cheque Date"),c.Yb(26,"span",289),c.Uc(27,"*"),c.Xb(),c.Xb(),c.Yb(28,"div",290),c.Yb(29,"p-calendar",329),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.ChequeIssueDate=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(30,"div",287),c.Yb(31,"div",288),c.Uc(32,"Amount "),c.Yb(33,"span",289),c.Uc(34,"*"),c.Xb(),c.Xb(),c.Yb(35,"div",288),c.Yb(36,"p-inputNumber",310),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.CHEQUEAMT=e}),c.Xb(),c.Xb(),c.Yb(37,"div",288),c.Uc(38,"Holder Name"),c.Xb(),c.Yb(39,"div",288),c.Yb(40,"input",311),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.ChequeHolderName=e}),c.Xb(),c.Xb(),c.Xb(),c.Tb(41,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(9),c.Pc(c.yc(34,Q)),c.tc("ngModel",t.TenderObj.CHEQUENO),c.Fb(6),c.Pc(c.yc(35,Q)),c.tc("ngModel",t.TenderObj.BANK),c.Fb(7),c.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.TenderObj.ChequeRecdDate)("ngModelOptions",c.yc(36,Ii))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),c.Fb(7),c.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.TenderObj.ChequeIssueDate)("ngModelOptions",c.yc(37,Ii))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),c.Fb(7),c.Pc(c.yc(38,Q)),c.tc("ngModel",t.TenderObj.CHEQUEAMT)("min",0)("max",t.NetPaybleTotal),c.Fb(4),c.Pc(c.yc(39,Q)),c.tc("ngModel",t.TenderObj.ChequeHolderName)}}function Fi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",330),c.Yb(1,"div",146),c.Yb(2,"div",288),c.Yb(3,"label"),c.Yb(4,"strong"),c.Uc(5," Select Trust"),c.Xb(),c.Xb(),c.Yb(6,"p-dropdown",331),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.TrustId=e}),c.Xb(),c.Xb(),c.Yb(7,"div",288),c.Yb(8,"label"),c.Yb(9,"strong"),c.Uc(10,"Select Member Type"),c.Xb(),c.Xb(),c.Yb(11,"p-dropdown",332),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.TMemberTypeId=e}),c.Xb(),c.Xb(),c.Yb(12,"div",288),c.Yb(13,"label"),c.Yb(14,"strong"),c.Uc(15,"Membership Number"),c.Xb(),c.Xb(),c.Yb(16,"input",333),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.MemberShipNumber=e}),c.Xb(),c.Xb(),c.Tb(17,"div",288),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(6),c.Pc(c.yc(15,Q)),c.tc("options",t.lstTrustMaster)("ngModel",t.TenderObj.TrustId)("filter",!0)("showClear",!0),c.Fb(5),c.Pc(c.yc(16,Q)),c.tc("options",t.lstTrustMemberTypeMaster)("ngModel",t.TenderObj.TMemberTypeId)("filter",!0)("showClear",!0),c.Fb(5),c.Pc(c.yc(17,Q)),c.tc("ngModel",t.TenderObj.MemberShipNumber)}}function Oi(t,e){if(1&t&&(c.Yb(0,"label"),c.Uc(1),c.Xb()),2&t){const t=c.mc(3);c.Fb(1),c.Vc(t.fileInputLabelAttBankslip1)}}function _i(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",312),c.Yb(1,"div",313),c.Uc(2,"Attach Supported Doc (max size - 5MB) (PDF, JPG, PNG)"),c.Xb(),c.Yb(3,"div",290),c.Yb(4,"input",314,315),c.ic("change",function(e){return c.Lc(t),c.mc(2).onFileSelectBankDepositSlip(e,"AttBankslip1")}),c.Xb(),c.Tb(6,"br"),c.Sc(7,Oi,2,1,"label",1),c.Xb(),c.Tb(8,"hr"),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(7),c.tc("ngIf",t.fileInputLabelAttBankslip1)}}function Wi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",146),c.Yb(1,"div",288),c.Yb(2,"label"),c.Yb(3,"strong"),c.Uc(4," Remarks"),c.Xb(),c.Xb(),c.Yb(5,"input",316),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).TenderObj.REMARKS=e}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(5),c.Pc(c.yc(3,Q)),c.tc("ngModel",t.TenderObj.REMARKS)}}function ji(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(2).SaveCreditNote()}),c.Uc(1,"Save"),c.Xb()}}function Vi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",223),c.Yb(1,"h4",224),c.Uc(2,"Receive Payment"),c.Xb(),c.Yb(3,"button",317),c.ic("click",function(){return(0,e.dismiss)("Cross click")}),c.Yb(4,"span",226),c.Uc(5,"\xd7"),c.Xb(),c.Xb(),c.Xb(),c.Yb(6,"div",318),c.Yb(7,"div",319),c.Yb(8,"div",320),c.Yb(9,"label"),c.Yb(10,"strong"),c.Uc(11," Receive Amount"),c.Xb(),c.Xb(),c.Yb(12,"p-inputNumber",321),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().CreditNoteAmount=e})("onInput",function(e){return c.Lc(t),c.mc().ReflectCreditBalance(e)}),c.Xb(),c.Xb(),c.Yb(13,"div",320),c.Yb(14,"label"),c.Yb(15,"strong"),c.Uc(16,"Receive Mode"),c.Xb(),c.Xb(),c.Yb(17,"p-multiSelect",276),c.ic("onChange",function(){return c.Lc(t),c.mc().ShowSelectedItem()})("ngModelChange",function(e){return c.Lc(t),c.mc().selectedPaymodeCodes=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(18,"div",322),c.Yb(19,"div",228),c.Sc(20,Yi,22,17,"div",279),c.Sc(21,xi,31,1,"div",280),c.Sc(22,ki,38,7,"div",281),c.Sc(23,Li,42,40,"div",282),c.Sc(24,Fi,18,18,"div",323),c.Sc(25,_i,9,1,"div",283),c.Yb(26,"div",284),c.Sc(27,Wi,6,4,"div",285),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Yb(28,"div",240),c.Sc(29,ji,2,0,"button",100),c.Yb(30,"button",324),c.ic("click",function(){return(0,e.close)("Close click")}),c.Uc(31,"Close"),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(12),c.Pc(c.yc(19,Q)),c.tc("ngModel",t.CreditNoteAmount)("min",0)("max",t.MaxRecAmount)("minFractionDigits",2)("maxFractionDigits",5),c.Fb(5),c.Pc(c.yc(20,Q)),c.tc("options",t.lstPayMode)("ngModel",t.selectedPaymodeCodes),c.Fb(3),c.tc("ngIf",t.SelectPaymodeArray.includes("AT01002")),c.Fb(1),c.tc("ngIf",t.SelectPaymodeArray.includes("AT999999")),c.Fb(1),c.tc("ngIf",t.SelectPaymodeArray.includes("BT01001")),c.Fb(1),c.tc("ngIf",t.SelectPaymodeArray.includes("DI01001")),c.Fb(1),c.tc("ngIf",!t.SelectPaymodeArray.includes("ATONLN")&&!t.SelectPaymodeArray.includes("ATWLONLN")),c.Fb(1),c.tc("ngIf",t.SelectPaymodeArray.includes("AT01002")||t.SelectPaymodeArray.includes("AT999999")||t.SelectPaymodeArray.includes("BT01001")||t.SelectPaymodeArray.includes("DI01001")),c.Fb(2),c.tc("ngIf",(null==t.SelectPaymodeArray?null:t.SelectPaymodeArray.length)>0&&!t.SelectPaymodeArray.includes("ATONLN")&&!t.SelectPaymodeArray.includes("ATWLONLN")),c.Fb(2),c.tc("ngIf",t.CreditNoteAmount>0&&(null==t.SelectPaymodeArray?null:t.SelectPaymodeArray.length)>0)}}function Zi(t,e){1&t&&c.Uc(0),2&t&&c.Wc(" ",e.$implicit.TenderName," ")}function Gi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",340),c.Yb(1,"div",228),c.Yb(2,"div",287),c.Yb(3,"div",288),c.Uc(4,"Account Number "),c.Yb(5,"span",289),c.Uc(6,"*"),c.Xb(),c.Xb(),c.Yb(7,"div",288),c.Yb(8,"input",341),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).RefundObj.AccNumber=e}),c.Xb(),c.Xb(),c.Yb(9,"div",288),c.Uc(10,"Account Holder Name "),c.Yb(11,"span",289),c.Uc(12,"*"),c.Xb(),c.Xb(),c.Yb(13,"div",288),c.Yb(14,"input",342),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).RefundObj.AccHolderName=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(15,"div",287),c.Yb(16,"div",288),c.Uc(17,"IFSC Code "),c.Yb(18,"span",289),c.Uc(19,"*"),c.Xb(),c.Xb(),c.Yb(20,"div",288),c.Yb(21,"input",343),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).RefundObj.IFSCCode=e}),c.Xb(),c.Xb(),c.Yb(22,"div",288),c.Uc(23,"Bank Name"),c.Xb(),c.Yb(24,"div",288),c.Yb(25,"input",344),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).RefundObj.BankName=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(26,"div",287),c.Yb(27,"div",288),c.Uc(28,"Transaction Id "),c.Yb(29,"span",289),c.Uc(30,"*"),c.Xb(),c.Xb(),c.Yb(31,"div",288),c.Yb(32,"input",345),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).RefundObj.TransactionId=e}),c.Xb(),c.Xb(),c.Yb(33,"div",288),c.Uc(34,"Purpose "),c.Yb(35,"span",289),c.Uc(36,"*"),c.Xb(),c.Xb(),c.Yb(37,"div",288),c.Yb(38,"input",338),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).RefundObj.Purpose=e}),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(8),c.Pc(c.yc(18,Q)),c.tc("ngModel",t.RefundObj.AccNumber),c.Fb(6),c.Pc(c.yc(19,Q)),c.tc("ngModel",t.RefundObj.AccHolderName),c.Fb(7),c.Pc(c.yc(20,Q)),c.tc("ngModel",t.RefundObj.IFSCCode),c.Fb(4),c.Pc(c.yc(21,Q)),c.tc("ngModel",t.RefundObj.BankName),c.Fb(7),c.Pc(c.yc(22,Q)),c.tc("ngModel",t.RefundObj.TransactionId),c.Fb(6),c.Pc(c.yc(23,Q)),c.tc("ngModel",t.RefundObj.Purpose)}}function qi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",346),c.Yb(1,"div",288),c.Uc(2,"Refund Date "),c.Yb(3,"span",289),c.Uc(4,"*"),c.Xb(),c.Xb(),c.Yb(5,"div",288),c.Yb(6,"p-calendar",347),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).RefundObj.RefundDate=e}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(6),c.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),c.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.RefundObj.RefundDate)("ngModelOptions",c.yc(9,Ii))("showIcon",!0)("readonlyInput",!0)}}function Hi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",287),c.Yb(1,"div",320),c.Yb(2,"h5"),c.Uc(3,"Refund Amount"),c.Xb(),c.Yb(4,"p-inputNumber",334),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().RefundCreditNoteAmount=e}),c.Xb(),c.Xb(),c.Yb(5,"div",320),c.Yb(6,"h5"),c.Uc(7,"Select Refund Mode"),c.Xb(),c.Yb(8,"p-dropdown",335),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().selectedPaymode=e}),c.Sc(9,Zi,1,1,"ng-template",57),c.Xb(),c.Xb(),c.Xb(),c.Sc(10,Gi,39,24,"div",336),c.Sc(11,qi,7,10,"div",337),c.Yb(12,"div",287),c.Yb(13,"div",288),c.Uc(14,"Purpose "),c.Yb(15,"span",289),c.Uc(16,"*"),c.Xb(),c.Xb(),c.Yb(17,"div",290),c.Yb(18,"input",338),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().RefundObj.Purpose=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(19,"div",287),c.Yb(20,"div",288),c.Uc(21,"Approved By "),c.Yb(22,"span",289),c.Uc(23,"*"),c.Xb(),c.Xb(),c.Yb(24,"div",290),c.Yb(25,"input",339),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().RefundObj.ApprovedBy=e}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(4),c.Pc(c.yc(21,Q)),c.tc("ngModel",t.RefundCreditNoteAmount)("min",0)("max",t.MaxRefundableAmount)("minFractionDigits",2)("maxFractionDigits",5),c.Fb(4),c.Pc(c.yc(22,Q)),c.tc("options",t.lstPayModeRefund)("ngModel",t.selectedPaymode)("filter",!0)("showClear",!0),c.Fb(2),c.tc("ngIf","AT999997"==t.selectedPaymode),c.Fb(1),c.tc("ngIf","AT01002"==t.selectedPaymode),c.Fb(7),c.Pc(c.yc(23,Q)),c.tc("ngModel",t.RefundObj.Purpose),c.Fb(7),c.Pc(c.yc(24,Q)),c.tc("ngModel",t.RefundObj.ApprovedBy)}}function Qi(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",104),c.ic("click",function(){return c.Lc(t),c.mc(2).SaveRefundCreditNote()}),c.Uc(1,"Submit"),c.Xb()}}function $i(t,e){if(1&t&&c.Sc(0,Qi,2,0,"button",100),2&t){const t=c.mc();c.tc("ngIf",t.RefundCreditNoteAmount>0)}}function zi(t,e){if(1&t&&(c.Yb(0,"div"),c.Tb(1,"app-colon-hydrotherapy",348),c.Xb()),2&t){const t=c.mc();c.Fb(1),c.tc("clinicId",t.ClinicIdSelected)}}function Ki(t,e){1&t&&(c.Yb(0,"h5"),c.Uc(1,"Select Room Type"),c.Xb())}function Ji(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2),c.Xb(),c.Yb(3,"td"),c.Uc(4),c.Xb(),c.Yb(5,"td"),c.Yb(6,"button",87),c.ic("click",function(){c.Lc(t);const i=e.$implicit;return c.mc(2).SelectParentMCode(i.MCODE)}),c.Uc(7," Select "),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit;c.Fb(2),c.Vc(t.MCODE),c.Fb(2),c.Vc(t.Description)}}function tn(t,e){if(1&t&&(c.Yb(0,"table",349),c.Yb(1,"thead"),c.Yb(2,"tr",350),c.Yb(3,"th"),c.Uc(4,"MCODE"),c.Xb(),c.Yb(5,"th"),c.Uc(6,"Description"),c.Xb(),c.Yb(7,"th"),c.Uc(8,"Action"),c.Xb(),c.Xb(),c.Xb(),c.Yb(9,"tbody"),c.Sc(10,Ji,8,2,"tr",231),c.Xb(),c.Xb()),2&t){const t=c.mc();c.Fb(10),c.tc("ngForOf",t.lstSelectedMCODERoom)}}function en(t,e){}function nn(t,e){1&t&&c.Ub(0)}function sn(t,e){if(1&t&&(c.Yb(0,"div"),c.Sc(1,nn,1,0,"ng-container",97),c.Xb()),2&t){c.mc();const t=c.Ic(65);c.Fb(1),c.tc("ngTemplateOutlet",t)}}function ln(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"td",363),c.Uc(2),c.Xb(),c.Yb(3,"td",364),c.Uc(4),c.nc(5,"number"),c.Xb(),c.Yb(6,"td",364),c.Uc(7),c.Xb(),c.Yb(8,"td",365),c.Uc(9),c.nc(10,"number"),c.Xb(),c.Yb(11,"td",366),c.Uc(12),c.nc(13,"date"),c.Xb(),c.Xb()),2&t){const t=e.$implicit,i=c.mc(2);c.Fb(2),c.Wc(" ",t.Description,""),c.Fb(2),c.Wc(" ",c.pc(5,5,t.MRP,"1.1-2"),""),c.Fb(3),c.Wc(" ",t.Qty,""),c.Fb(2),c.Wc(" ",c.pc(10,8,t.PriceWithGST,"1.1-2"),""),c.Fb(3),c.Wc(" ",c.pc(13,11,t.PurchaseDate,i.customDateFormat.DEF_DATE),"")}}function on(t,e){if(1&t){const t=c.Zb();c.Yb(0,"app-print-access-header",351),c.ic("onselectedLetterhead",function(e){return c.Lc(t),c.mc().onselectedLetterhead(e)}),c.Xb(),c.Yb(1,"div",352),c.Yb(2,"div",228),c.Tb(3,"app-print-header",353),c.Yb(4,"table",354),c.Yb(5,"tbody"),c.Yb(6,"tr"),c.Yb(7,"table",355),c.Yb(8,"thead",356),c.Yb(9,"tr",357),c.Yb(10,"th",358),c.Uc(11,"Item"),c.Xb(),c.Yb(12,"th",358),c.Uc(13,"Price"),c.Xb(),c.Yb(14,"th",358),c.Uc(15,"Qty"),c.Xb(),c.Yb(16,"th",359),c.Uc(17,"Total"),c.Xb(),c.Yb(18,"th",358),c.Uc(19,"Purchase Date"),c.Xb(),c.Xb(),c.Xb(),c.Yb(20,"tbody",356),c.Sc(21,ln,14,14,"tr",231),c.Yb(22,"tr"),c.Yb(23,"td",360),c.Yb(24,"b"),c.Uc(25,"Grand Total: "),c.Xb(),c.Uc(26),c.nc(27,"number"),c.Xb(),c.Xb(),c.Yb(28,"tr"),c.Yb(29,"td",361),c.Tb(30,"hr"),c.Xb(),c.Xb(),c.Yb(31,"tr"),c.Yb(32,"td",362),c.Uc(33,"Authorized Signature"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.tc("IsLetterhead",t.IsLetterhead)("IsNgxPrint",!0),c.Fb(3),c.tc("slotBookingId",t.SlotBookingIdSelected)("IsGST",!0)("IsLetterhead",t.IsLetterhead)("heading","Estimeted Bill"),c.Fb(18),c.tc("ngForOf",t.printBillItem),c.Fb(5),c.Wc(" \u20b9 ",c.pc(27,8,t.TotalGrandTotalAmount,"1.1-2"),"")}}function cn(t,e){1&t&&c.Ub(0)}function rn(t,e){if(1&t&&(c.Yb(0,"div"),c.Sc(1,cn,1,0,"ng-container",97),c.Xb()),2&t){c.mc();const t=c.Ic(69);c.Fb(1),c.tc("ngTemplateOutlet",t)}}function an(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"td",363),c.Uc(2),c.Xb(),c.Yb(3,"td",364),c.Uc(4),c.nc(5,"number"),c.Xb(),c.Yb(6,"td",364),c.Uc(7),c.Xb(),c.Yb(8,"td",365),c.Uc(9),c.nc(10,"number"),c.Xb(),c.Yb(11,"td",366),c.Uc(12),c.nc(13,"date"),c.Xb(),c.Xb()),2&t){const t=e.$implicit,i=c.mc(2);c.Fb(2),c.Wc(" ",t.Description,""),c.Fb(2),c.Wc(" ",c.pc(5,5,t.MRP,"1.1-2"),""),c.Fb(3),c.Wc(" ",t.Qty,""),c.Fb(2),c.Wc(" ",c.pc(10,8,t.PriceWithGST,"1.1-2"),""),c.Fb(3),c.Wc(" ",c.pc(13,11,t.PurchaseDate,i.customDateFormat.DEF_DATE),"")}}function dn(t,e){if(1&t){const t=c.Zb();c.Yb(0,"app-print-access-header",351),c.ic("onselectedLetterhead",function(e){return c.Lc(t),c.mc().onselectedLetterhead(e)}),c.Xb(),c.Yb(1,"div",352),c.Yb(2,"div",228),c.Tb(3,"app-print-header",367),c.Yb(4,"table",354),c.Yb(5,"tbody"),c.Yb(6,"tr"),c.Yb(7,"table",355),c.Yb(8,"thead",356),c.Yb(9,"tr",357),c.Yb(10,"th",358),c.Uc(11,"Item"),c.Xb(),c.Yb(12,"th",358),c.Uc(13,"Price"),c.Xb(),c.Yb(14,"th",358),c.Uc(15,"Qty"),c.Xb(),c.Yb(16,"th",359),c.Uc(17,"Total"),c.Xb(),c.Yb(18,"th",358),c.Uc(19,"Purchase Date"),c.Xb(),c.Xb(),c.Xb(),c.Yb(20,"tbody",356),c.Sc(21,an,14,14,"tr",231),c.Yb(22,"tr"),c.Yb(23,"td",360),c.Yb(24,"b"),c.Uc(25,"Grand Total: "),c.Xb(),c.Uc(26),c.nc(27,"number"),c.Xb(),c.Xb(),c.Yb(28,"tr"),c.Yb(29,"td",360),c.Yb(30,"b"),c.Uc(31,"Discount Amount: "),c.Xb(),c.Uc(32),c.nc(33,"number"),c.Xb(),c.Xb(),c.Yb(34,"tr"),c.Yb(35,"td",360),c.Yb(36,"b"),c.Uc(37,"Net Payable: "),c.Xb(),c.Uc(38),c.nc(39,"number"),c.Xb(),c.Xb(),c.Yb(40,"tr"),c.Yb(41,"td",360),c.Yb(42,"b"),c.Uc(43,"Received Amount: "),c.Xb(),c.Uc(44),c.nc(45,"number"),c.Xb(),c.Xb(),c.Yb(46,"tr"),c.Yb(47,"td",360),c.Yb(48,"b"),c.Uc(49,"Balance Amount: "),c.Xb(),c.Uc(50),c.nc(51,"number"),c.Xb(),c.Xb(),c.Yb(52,"tr"),c.Yb(53,"td",361),c.Tb(54,"hr"),c.Xb(),c.Xb(),c.Yb(55,"tr"),c.Yb(56,"td",362),c.Uc(57,"Authorized Signature"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.tc("IsLetterhead",t.IsLetterhead)("IsNgxPrint",!0),c.Fb(3),c.tc("slotBookingId",t.SlotBookingIdSelected)("IsGST",!0)("IsLetterhead",t.IsLetterhead),c.Fb(18),c.tc("ngForOf",t.printBillItem),c.Fb(5),c.Wc(" \u20b9 ",c.pc(27,11,t.TotalGrandTotalAmount,"1.1-2"),""),c.Fb(6),c.Wc(" \u20b9 ",c.pc(33,14,t.TotalDiscountAmount,"1.1-2"),""),c.Fb(6),c.Wc(" \u20b9 ",c.pc(39,17,t.TotalGrandTotalAmount-t.TotalDiscountAmount,"1.1-2"),""),c.Fb(6),c.Wc(" \u20b9 ",c.pc(45,20,t.TotalReceiveAmount,"1.1-2"),""),c.Fb(6),c.Wc(" \u20b9 ",c.pc(51,23,t.TotalGrandTotalAmount-t.TotalDiscountAmount-t.TotalReceiveAmount,"1.1-2"),"")}}function bn(t,e){if(1&t&&(c.Yb(0,"h5"),c.Uc(1),c.Xb()),2&t){const t=c.mc();c.Fb(1),c.Wc("Payment ","RefundPayment"==t.SelectedInvType?"Refund":"Receive"," Details")}}function un(t,e){if(1&t&&(c.Yb(0,"div"),c.Tb(1,"app-print-payment-voucher",368),c.Xb()),2&t){const t=c.mc();c.Fb(1),c.tc("SelectedSlotBookingId",t.SelectedSlotBookingId)("SelectedVCHRNO",t.SelectedVCHRNO)("SelectedPhiscalID",t.SelectedPhiscalID)("SelectedDivision",t.SelectedDivision)("InvType",t.SelectedInvType)}}function hn(t,e){if(1&t&&(c.Yb(0,"div"),c.Tb(1,"app-print-profile",369),c.Xb()),2&t){const t=c.mc();c.Fb(1),c.tc("SlotBookingIdSelected",t.SlotBookingIdSelected)("InvoiceNumberSelected",t.InvoiceNumberSelected)("PhiscalIdSelected",t.PhiscalIdSelected)("DivisionSelected",t.DivisionSelected)}}function mn(t,e){if(1&t&&(c.Yb(0,"div"),c.Tb(1,"app-individual-transaction-list",370),c.Xb()),2&t){const t=c.mc();c.Fb(1),c.tc("slotBookingId",t.SlotBookingIdSelected)("SelectedVCHRNO",t.InvoiceNumberSelected)("SelectedPhiscalID",t.PhiscalIdSelected)("SelectedDivision",t.DivisionSelected)}}function pn(t,e){if(1&t&&(c.Yb(0,"div"),c.Tb(1,"app-individual-invoice-list",371),c.Xb()),2&t){const t=c.mc();c.Fb(1),c.tc("slotBookingId",t.VisitorSelected)("IsVisitor",!0)}}function gn(t,e){if(1&t&&(c.Yb(0,"div"),c.Tb(1,"app-pre-invoice-print",372),c.Xb()),2&t){const t=c.mc();c.Fb(1),c.tc("SlotBookingIdSelected",t.userSelected)("TIProvisionalNo",t.TIProvisionalNo)("TIProvisionalDate",t.TIProvisionalDate)("RemainingAmount",t.RemainingAmount)}}const In=function(){return{width:"90vw"}},fn=function(){return{width:"70vw"}},vn=function(){return{width:"60% !important",height:"40% !important",top:"25% !important",left:"30% !important"}};let Cn=(()=>{class t extends l.a{constructor(t,e,i,n,s,l,c,r,a,d){var b,u;super(),this.cdRef=t,this.router=e,this.route=i,this.modalService=n,this._ConstantServices=s,this._MasterServices=l,this._PatientServices=c,this._UtilityService=r,this.formBuilder=a,this.confirmationService=d,this.lsobjClinicMaster=JSON.parse(localStorage.getItem("objClinicMaster"))||null,this.BankDepositSlip1Att=null,this.AttRefundSlip1Att=null,this.ClinicCurre=localStorage.getItem("ClinicId"),this.UserTypeCurre=localStorage.getItem("userTypeId"),this.loginId=localStorage.getItem("userId"),this.bookingStatus=o.d,this.customDateFormat=o.h,this.UserTypes=o.s,this.billTypeStatus=o.c,this.billItemStatus=o.b,this.invoiceStatus=o.l,this.defaultItemMCODE=o.i,this.PaymentMethodSelected="",this.SlotDetailsNew={},this.SlotBookingIdSelected=null,this.InvoiceNumberSelected=null,this.qrySlotId=null,this.ClinicIdSelected="",this.NewItemDetails=[],this.TenderModel={},this.TenderObj={},this.lstAuthorizedMaster=[],this.selectedNodesItem=[],this.IsListView=!1,this.itemMaster=[],this.lstExtraItemDetails=[],this.lstExtraListItemDetails=[],this.extraItemRowCounter=0,this.editing=!1,this.lstSelectedBillableItem=[],this.lstExtraItemEmpty=[],this.UserList=[],this.userSelected="",this.tableDataExtraItemAll=[],this.tableDataExtraItem=[],this.tableDataExtraItemCredit=[],this.DivisionSelected=null,this.PhiscalIdSelected=null,this.IsSelectedItem=!1,this.ItemCheckedTotal=0,this.ExtraItemList=[],this.slotBookingMaster={},this.bookingMainModel={},this.WLOrderRes={},this.OrderRes={},this.UserRes={},this.selectAllItem=!1,this.AllItemPriceRes=[],this.ItemPriceRes=[],this.ProdList=[],this.printBillItem=[],this.checked=!1,this.TotalGrandTotalAmount=0,this.lstPayMode=[],this.SelectPaymodeArray=[],this.lstTenderModel=[],this.BillWiseDiscountPer=0,this.BillWiseDiscountAmount=0,this.NetPaybleTotal=0,this.ReferredBy="",this.RequestedBy="",this.ItemTotalDiscount=0,this.selection={},this.PayRequestFrom="Frontdesk",this.CreditNoteAmount=0,this.CreditNoteBalanceAmount=0,this.CreditLimit=0,this.CustomerInfoDetails={},this.MaxCreditLimit=0,this.RefundCreditNoteAmount=0,this.MaxRefundAmount=0,this.todayDate=new Date,this.TrnMain=[],this.TotalAmount=0,this.ItemWiseTotalDisAmount=0,this.TotalFlatDiscount=0,this.lstBankDepositTransactionDetails=[],this.BankDepTrnCounter=1,this.CardTrnCounter=1,this.PaymentTransactionDetails=[],this.RecPayment=!0,this.lstReciveVoucher=[],this.RecWith="Single",this.PaymentReciveList=[],this.SelectedSlotBookingId=null,this.SelectedVCHRNO=null,this.SelectedPhiscalID=null,this.SelectedDivision=null,this.TrnMode="New",this.selectedPaymode=null,this.RefundObj={},this.lstPayModeRefund=[],this.SelectedInvType=null,this.MaxRecAmount=1e8,this.MaxRefundableAmount=1e8,this.PIString=null,this.PerformaItemList=[],this.InvMode="Performa",this.PerformaOrderIds=[],this.TotalReceiveAmount=0,this.TotalDiscountAmount=0,this.BalanceType=null,this.RemainingAmount=0,this.IsRefundVoucher=!1,this.ExtraRoomCount=0,this.lstSelectedMCODERoom=[],this.SelectedSequence=0,this.showModalRoomCategorySelect=!1,this.lstCardPaymentTransactionDetails=[],this.lstTrustMaster=[],this.lstTrustMemberTypeMaster=[],this.ShowExtraItemModel=!1,this.ShowEstimetedBillListModel=!1,this.ShowTransactionDetailsModel=!1,this.ShowPerformaInvoiceListModel=!1,this.ShowPrintPaymentVoucherModel=!1,this.ShowPrintProfileModel=!1,this.MaxCreditNoteAmount=0,this.CreditNoteTranAmount=0,this.CreditNoteNumber=null,this.CreditNoteBalance=0,this.ShowPaymentRefundMethodModel=!1,this.ShowColonHydroModel=!1,this.ActionList=o.a,this.lstIAccess=[],this.lstIAccessStr=[],this.ClinicDetails={},this.IsLetterhead="false",this.PIEditGenRemarks=null,this.clinicGroup=o.e,this.SelectedBookingTypeClinicType={},this.CheckIsCredit=!1,this.isGenerateTI=!1,this.IsVistorBilling=!1,this.CustomerType=null,this.VisitorUserMaster={},this.VisitorSelected=null,this.ShowInvoiceListModel=!1,this.isCGHS=!1,this.isCashless=!1,this.PrintCILabel="Print Pre Invoice",this.TIProvisionalNo=null,this.TIProvisionalDate=new Date,this.IsGroupedSelected=!1,this.bookingtypeSelected=null,this.MaxYear=(new Date).getFullYear()+2,this.showIndividualInvoiceList=!0,this.IsRefundforPI=!1,this.ShowPreInvoiceModel=!1,this.lstOnlinePayModAccess=[],this.selectedPatient="",this.suggestions=[],this.SearchByMrNo=!1,this.BookingStatus=0,this.slotBookingStatus=0,this._ConstantServices.ActiveMenuName="Billing Service",this.CustomerType="Patient",this.IsVistorBilling=1==(null===(b=this.lsobjClinicMaster)||void 0===b?void 0:b.IsVistorBilling),this.lstOnlinePayModAccess=(null===(u=this.lsobjClinicMaster)||void 0===u?void 0:u.lstOnlinePaymentModes)||[],o.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"))}ngOnInit(){var t;-330===this._ConstantServices.timeZoneOffset?(this.unsubscribe.add=this.route.queryParams.subscribe(t=>{this.userSelected=t.id,this.qrySlotId=t.id,this.onChangeHealthSeeker()}),this.fileUploadAttBankslip1=this.formBuilder.group({AttBankslip1:[""]}),this.fileUploadAttRefslip1=this.formBuilder.group({AttRefAppslip1:[""]}),this.loadTrusMaster(),this.loadTrusMemberTypeMaster(),this.ResetTenderList(),o.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.GetUserListForExtraItem(),this.LoadClinicMasterById()),0==(null===(t=this.lstExtraItemDetails)||void 0===t?void 0:t.length)&&null!=this.userSelected&&null!=this.userSelected&&""!=this.userSelected&&this.AddExtraItemDetails()):this._UtilityService.showWarningAlert("Your System's Time zone is incorrect. This can cause data discrepancy. Please go to Windows Setting and set it to (UTC+5:30).")}ngAfterViewChecked(){var t;0==(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)&&this.getPageLevelAccess()}getPageLevelAccess(){var t,e,i=this.getUrlWithoutParams();"/common-dashboard"==i&&(i="/payment/extra-item-entry");var n=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==n?void 0:n.find(t=>t.MenuItemURL===i))&&(this.lstIAccess=null===(t=n.find(t=>t.MenuItemURL===i))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}getUrlWithoutParams(){let t=this.router.parseUrl(this.router.url);return t.queryParams={},t.fragment=null,t.toString()}resetIndividualInvoiceList(){this.showIndividualInvoiceList=!1,setTimeout(()=>{this.showIndividualInvoiceList=!0},100)}onclinicSelect(t){this.ClinicIdSelected=t,this.GetUserListForExtraItem(),this.LoadClinicMasterById()}onselectedClinic(t){this.lstOnlinePayModAccess=(null==t?void 0:t.lstOnlinePaymentModes)||[]}searchHealthSeeker(t){let e=t.query;this.cdRef.detectChanges(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetUserListForExtraItemBySearch(this.ClinicIdSelected,e.trim()).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=[];e=JSON.parse(t.actionResult.result),this.suggestions=e=e||[],this.cdRef.detectChanges()}else this.suggestions=[]},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}onClear(){this.userSelected=null}onChangeHealthSeeker(){var t,e,i;this.SearchByMrNo&&(this.userSelected=this.selectedPatient.SlotBookingId,this.BookingStatus=this.selectedPatient.BookingStatus);var n=null===(t=this.UserList)||void 0===t?void 0:t.find(t=>t.SlotBookingId==this.userSelected),s=null===(e=this.suggestions)||void 0===e?void 0:e.find(t=>t.SlotBookingId==this.userSelected);this.IsGroupedSelected=null==n||null==n?null!=s&&null!=s&&s.IsGrouped:n.IsGrouped,this.bookingtypeSelected=null==n||null==n?null==s||null==s?"IPD":s.BookingType:n.BookingType,this.slotBookingStatus=null==n||null==n?null==s||null==s?0:s.BookingStatus:n.BookingStatus,this.isCGHS=null==n||null==n?null!=s&&null!=s&&s.IsCGHS:n.IsCGHS,this.isCashless=null==n||null==n?null!=s&&null!=s&&s.IsCashless:n.IsCashless,this.TIProvisionalNo=null==n||null==n?null==s||null==s?null:s.TIProvisionalNo:n.TIProvisionalNo,this.TIProvisionalDate=null==n||null==n?null==s||null==s?null:s.TIProvisionalDate:n.TIProvisionalDate,this.isCashless&&null!=this.TIProvisionalNo&&null!=this.TIProvisionalNo&&""!=(null===(i=this.TIProvisionalNo)||void 0===i?void 0:i.trim())&&(this.PrintCILabel="Print Provisional Invoice"),this.selectedTab=0,this.LoaditemMasterWithGrouping(),this.LoadConsumedItem(),this.LoadInvoiceData(),this.LoadCrediNoteBalance()}loadTrusMaster(){this.lstTrustMaster=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetTrustMasterActive().subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstTrustMaster=e=e||[]}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}),this.cdRef.detectChanges()}loadTrusMemberTypeMaster(){this.lstTrustMemberTypeMaster=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetTrustMemberTypeMasterActive().subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstTrustMemberTypeMaster=e=e||[]}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}),this.cdRef.detectChanges()}ResetTenderList(){var t;if(this.lstPayMode=s.a.filter(t=>"ATONLN"!==t.ACID&&"ATWLONLN"!==t.ACID),(null===(t=this.lstOnlinePayModAccess)||void 0===t?void 0:t.length)>0){const t=s.a.filter(t=>this.lstOnlinePayModAccess.includes(t.ACID));this.lstPayMode=[...t,...this.lstPayMode]}}GetUserListForExtraItem(){this.UserList=[],this.cdRef.detectChanges(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetUserListForExtraItem(this.ClinicIdSelected,this.qrySlotId).subscribe(t=>{var e,i;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var n=[];if(n=JSON.parse(t.actionResult.result),this.UserList=n=n||[],null!=this.qrySlotId||null!=this.qrySlotId){var s=null===(e=this.UserList)||void 0===e?void 0:e.find(t=>t.SlotBookingId==this.userSelected);this.IsGroupedSelected=null!=s&&null!=s&&s.IsGrouped,this.bookingtypeSelected=null==s||null==s?"IPD":s.BookingType,this.isCGHS=null!=s&&null!=s&&s.IsCGHS,this.isCashless=null!=s&&null!=s&&s.IsCashless,this.TIProvisionalNo=null==s||null==s?null:s.TIProvisionalNo,this.TIProvisionalDate=null==s||null==s?null:s.TIProvisionalDate,this.isCashless&&null!=this.TIProvisionalNo&&null!=this.TIProvisionalNo&&""!=(null===(i=this.TIProvisionalNo)||void 0===i?void 0:i.trim())&&(this.PrintCILabel="Print Provisional Invoice")}this.cdRef.detectChanges()}else this.UserList=[]},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}tabClick(t){0==t.index?(this.LoaditemMasterWithGrouping(),this.clear()):1==t.index&&(this.LoadPrescribeditems(),this.clear()),this.selectedTab=t.index}LoaditemMaster(){this.itemMaster=[],this.billType=this.billTypeStatus.OtherItem,this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetItemMaster().subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=[];e=JSON.parse(t.actionResult.result),this.itemMaster=e=e||[],this.cdRef.detectChanges()}else this.itemMaster=null},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoaditemMasterWithGrouping(){null!=this.userSelected&&null!=this.userSelected||(this.userSelected=""),this.ExtraRoomCount=0,this.SelectedBookingTypeClinicType={},this.isGenerateTI=!1,this.lstSelectedMCODERoom=[],this.itemMaster=[],this.billType=this.billTypeStatus.OtherItem,this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetItemMasterWithGrouping(this.ClinicIdSelected,this.userSelected,this.CustomerType).subscribe(t=>{var e,i,n,s;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var l=[];l=JSON.parse(t.actionResult.result),this.itemMaster=l=l||[],o.s.Therapist==localStorage.getItem("userTypeId")&&(this.itemMaster=this.itemMaster.filter(t=>"treatment"===t.label.toLowerCase())),null!=t.actionResult.result2&&null!=t.actionResult.result2&&(null===(e=t.actionResult.result2)||void 0===e?void 0:e.length)>0&&(this.ExtraRoomCount=parseInt(t.actionResult.stringVal),this.lstSelectedMCODERoom=JSON.parse(t.actionResult.result2)),null!=t.actionResult.result3&&null!=t.actionResult.result3&&(null===(i=t.actionResult.result3)||void 0===i?void 0:i.length)>0&&(this.SelectedBookingTypeClinicType=JSON.parse(t.actionResult.result3),"OPD"==(null===(n=this.SelectedBookingTypeClinicType)||void 0===n?void 0:n.BookingType)&&(null===(s=this.SelectedBookingTypeClinicType)||void 0===s?void 0:s.ClinicGroup)==this.clinicGroup.PAH&&(this.isGenerateTI=!0)),this.cdRef.detectChanges()}else this.itemMaster=null},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadPrescribeditems(){this.itemMaster=[],this.billType=this.billTypeStatus.Prescribed,null!=this.userSelected&&null!=this.userSelected&&""!=this.userSelected&&(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPatientPrescribedItems(this.userSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=[];e=JSON.parse(t.actionResult.result),this.itemMaster=e=e||[],o.s.Therapist==localStorage.getItem("userTypeId")&&(this.itemMaster=this.itemMaster.filter(t=>"treatment"===t.label.toLowerCase())),this.cdRef.detectChanges()}else this.itemMaster=null},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}nodeSelect(t,e){var i,n;if(0==this.IsListView)this.SelectedSequence=e,this.lstExtraItemDetails[e].MCODE=t.originalEvent.currentTarget.ariaLabel.split("~")[0],this.lstExtraItemDetails[e].Description=t.originalEvent.currentTarget.ariaLabel.split("~")[1],this.lstExtraItemDetails[e].Category=t.originalEvent.currentTarget.ariaLabel.split("~")[2],this.lstExtraItemDetails[e].MRP=t.originalEvent.currentTarget.ariaLabel.split("~")[3],this.lstExtraItemDetails[e].IsEditable=t.originalEvent.currentTarget.ariaLabel.split("~")[4],this.getUM(e,t.originalEvent.currentTarget.ariaLabel.split("~")[0]),this.cdRef.detectChanges(),"Room"==this.lstExtraItemDetails[e].Category?(this.lstExtraItemDetails[e].NightCount=1,this.lstExtraItemDetails[e].RoomCount=1,this.lstExtraItemDetails[e].MCODE==o.i.ExtraBed&&((null===(i=this.lstSelectedMCODERoom)||void 0===i?void 0:i.length)>0?this.showModalRoomCategorySelect=!0:this.lstExtraItemDetails[e].Parent=o.i.ExtraBed),this.cdRef.detectChanges()):(this.showModalRoomCategorySelect=!1,this.cdRef.detectChanges()),this.selection={},this.itemMaster.map(t=>{t.expanded=!1}),$("#btnCloseOverlayItem").click();else if(this.selectedNodesItem.length>0&&1==this.IsListView){this.lstExtraListItemDetails=[];for(var s=this.selectedNodesItem.filter(t=>1==t.selectable),l=0;l<(null==s?void 0:s.length);l++)this.AddExtraListItemDetails(),this.lstExtraListItemDetails[l].MCODE=s[l].label.split("~")[0],this.lstExtraListItemDetails[l].Description=s[l].label.split("~")[1],this.lstExtraListItemDetails[l].Category=s[l].label.split("~")[2],this.getListUM(l,s[l].label.split("~")[0]),this.cdRef.detectChanges(),"Room"==this.lstExtraListItemDetails[l].Category?(this.lstExtraListItemDetails[l].NightCount=1,this.lstExtraListItemDetails[l].RoomCount=1,this.lstExtraListItemDetails[l].MCODE==o.i.ExtraBed&&((null===(n=this.lstSelectedMCODERoom)||void 0===n?void 0:n.length)>0?this.showModalRoomCategorySelect=!0:this.lstExtraListItemDetails[l].Parent=o.i.ExtraBed),console.log(l),this.cdRef.detectChanges()):(this.showModalRoomCategorySelect=!1,this.cdRef.detectChanges());console.log(this.lstExtraListItemDetails)}}getUM(t,e){var i,n=[];if(""!=e&&null!=e&&null!=e){n=[];var s=!0;this.itemMaster.forEach(t=>{s&&t.items.forEach(t=>{s&&t.value==e&&(n=t.UOMS,s=!1)})}),this.lstExtraItemDetails[t].UMList=[],this.lstExtraItemDetails[t].UOMS="",this.lstExtraItemDetails[t].UMList=n,this.cdRef.detectChanges(),1==(null===(i=this.lstExtraItemDetails[t].UMList)||void 0===i?void 0:i.length)&&(this.lstExtraItemDetails[t].UOMS=this.lstExtraItemDetails[t].UMList[0].UOMName,this.cdRef.detectChanges())}}getListUM(t,e){var i,n=[];if(""!=e&&null!=e&&null!=e){n=[];var s=!0;this.itemMaster.forEach(t=>{s&&t.items.forEach(t=>{s&&t.value==e&&(n=t.UOMS,s=!1)})}),this.lstExtraListItemDetails[t].UMList=[],this.lstExtraListItemDetails[t].UOMS="",this.lstExtraListItemDetails[t].UMList=n,this.cdRef.detectChanges(),1==(null===(i=this.lstExtraListItemDetails[t].UMList)||void 0===i?void 0:i.length)&&(this.lstExtraListItemDetails[t].UOMS=this.lstExtraListItemDetails[t].UMList[0].UOMName,this.cdRef.detectChanges())}}ResetItem(t){this.lstExtraItemDetails[t-1].MCODE="",this.lstExtraItemDetails[t-1].Description="",this.lstExtraItemDetails[t-1].UMList=[],this.getUM(t,this.lstExtraItemDetails[t-1].MCODE),this.cdRef.detectChanges()}ResetExtraItemList(){this.extraItemRowCounter=0,this.lstExtraListItemDetails=[],this.lstExtraItemDetails=[],this.selectedNodesItem=[],this.itemMaster.map(t=>{t.expanded=!1}),this.AddExtraItemDetails(),this.AddExtraListItemDetails()}AddExtraItemDetails(){this.extraItemRowCounter=this.extraItemRowCounter+1,this.lstExtraItemDetails.push({Sequence:this.extraItemRowCounter,MCODE:"",UOMS:"",Qty:1,UMList:[],Description:""})}AddExtraListItemDetails(){this.extraItemRowCounter=this.extraItemRowCounter+1,this.lstExtraListItemDetails.push({Sequence:this.extraItemRowCounter,MCODE:"",UOMS:"",Qty:1,UMList:[],Description:""}),0==this.lstExtraItemEmpty.length&&this.lstExtraItemEmpty.push({Sequence:this.extraItemRowCounter,MCODE:"",UOMS:"",Qty:1,UMList:[],Description:""})}RemoveExtraItemDetails(t){1!=t&&(this.lstExtraItemDetails=this.lstExtraItemDetails.filter(e=>e.Sequence!==t))}LoadConsumedItem(){var t,e;this.extraItemRowCounter=0,this.lstExtraItemDetails=[],0==(null===(t=this.lstExtraItemDetails)||void 0===t?void 0:t.length)&&this.AddExtraItemDetails(),this.lstExtraListItemDetails=[],0==(null===(e=this.lstExtraListItemDetails)||void 0===e?void 0:e.length)&&this.AddExtraListItemDetails(),this.selectedNodesItem=[],this.tableDataExtraItemAll=[],this.tableDataExtraItem=[],this.tableDataExtraItemCredit=[],""!=this.userSelected&&null!=this.userSelected&&null!=this.userSelected?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetAllExtraItemBySlot(this.userSelected).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var i=[];i=JSON.parse(t.actionResult.result),this.tableDataExtraItemAll=i=i||[],this.tableDataExtraItem=this.tableDataExtraItemAll.filter(t=>t.Status==this.billItemStatus.Added),this.tableDataExtraItemCredit=this.tableDataExtraItemAll.filter(t=>t.Status==this.billItemStatus.Credit),(null===(e=this.tableDataExtraItemCredit)||void 0===e?void 0:e.length)>0&&this.tableDataExtraItemCredit.map(t=>{t.checkAccess=!1}),this.cdRef.detectChanges()}else this.tableDataExtraItemAll=[],this.tableDataExtraItem=[],this.tableDataExtraItemCredit=[]},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this.tableDataExtraItem=[]}saveExtraItem(){var t;if(this.IsListView&&(this.lstExtraItemDetails=[],this.itemMaster.map(t=>{t.expanded=!1,t.partialSelected=!1}),this.lstExtraItemDetails=this.lstExtraListItemDetails),null!=this.userSelected&&null!=this.userSelected&&""!=this.userSelected)if(0!=(null===(t=this.lstExtraItemDetails)||void 0===t?void 0:t.length)){var e=[],i=!0,n=this.UserList.filter(t=>t.SlotBookingId==this.userSelected)[0].UserId,s=this.UserList.filter(t=>t.SlotBookingId==this.userSelected)[0].BookingType;this.lstExtraItemDetails.forEach(t=>{if(t.MCODE==this.defaultItemMCODE.OtherCharge&&(null==t.MRP||null==t.MRP||t.MRP<=0||null==t.OtherPurpose||null==t.OtherPurpose||0==t.OtherPurpose.trim().length))i=!1;else if(""!=t.MCODE&&null!=t.MCODE&&""!=t.UOMS&&null!=t.UOMS&&0!=(null==t?void 0:t.Qty)&&null!=(null==t?void 0:t.Qty)&&0!=t.Sequence){var l={ClinicId:this.ClinicIdSelected,UserId:n,SlotBookingId:this.userSelected,BookingType:s,MCODE:t.MCODE,UOMS:t.UOMS,Qty:t.Qty,IsBilled:!1,BillTypeStatus:"IPD"!=s||"Room"!=t.Category&&t.MCODE!=o.i.TreatmentOtherCharge?this.billType:this.billTypeStatus.RoomBooking,CreatedBy:this.loginId,ModifiedBy:this.loginId,NightCount:this._ConstantServices.nullToZeroConverter(t.NightCount),RoomCount:this._ConstantServices.nullToZeroConverter(t.RoomCount),PMCODE:t.Parent,MRP:this._ConstantServices.nullToZeroConverter(t.MRP),OtherPurpose:t.OtherPurpose};e.push(l)}else i=!1}),i?Sn(e)?this._UtilityService.showWarningAlert("Item should not duplicate."):(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.SaveExtraItemArrayBySlotId(e).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this.LoadConsumedItem(),this._UtilityService.showSuccessAlert("Add successfully"),this.cdRef.detectChanges()):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this._UtilityService.showWarningAlert("Please select all Item Details")}else this._UtilityService.showWarningAlert("Please select Item Details");else this._UtilityService.showWarningAlert("Select User")}onItemEditInit(){this.editing=!0}onItemEditSave(){this.tableDataExtraItem=this.tableDataExtraItem.filter(t=>""!=t.MCODE&&null!=t.MCODE),this.tableDataExtraItem.filter(t=>(""==t.Qty||null==t.Qty||null==t.Qty)&&0!=t.Qty).length>0?this._UtilityService.showWarningAlert("Qty can not be empty"):(this.tableDataExtraItem.forEach(t=>t.ModifiedBy=this.loginId),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.EditExtraItemArrayBySlotId(this.tableDataExtraItem).subscribe({next:t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadConsumedItem(),this.editing=!1):(this.LoadConsumedItem(),this._UtilityService.showErrorAlert(t.Message),this.editing=!1)},error:t=>{this.LoadConsumedItem(),this.editing=!1,this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.Message)}}))}onItemEditCancel(){this.LoadConsumedItem(),this.editing=!1}onKeyPress(t){let e=String.fromCharCode(t.charCode);8!=t.keyCode&&!/[0-9\+\-\ ]/.test(e)||32==t.keyCode||45==t.keyCode?t.preventDefault():Number(t.target.value+t.key)<0&&(t.preventDefault(),this._UtilityService.showWarningAlert("Qty can not be 0"))}LoadInvoiceData(){this.IsRefundforPI=!1,this.PIString=null,this.PaymentReciveList=[],this.ProdList=[],this.PerformaItemList=[],""!=this.userSelected&&null!=this.userSelected&&null!=this.userSelected?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.getViewVoucherForHMSCombined(this.userSelected).subscribe(t=>{var e,i,n;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){if((null===(e=t.actionResult.result)||void 0===e?void 0:e.length)>0){var s=JSON.parse(t.actionResult.result);this.ProdList=s=s||[]}if((null===(i=t.actionResult.result3)||void 0===i?void 0:i.length)>0){var l=JSON.parse(t.actionResult.result3);this.PerformaItemList=l=l||[],this.LoaditemMasterWithGrouping()}if((null===(n=t.actionResult.result4)||void 0===n?void 0:n.length)>0){var o=JSON.parse(t.actionResult.result4);this.PaymentReciveList=o=o||[]}this.PIString=t.actionResult.stringVal}else this.PaymentReciveList=[],this.ProdList=[];this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this.ProdList=[]}CreateInvoice(){this.selectAllItem=!1,this.AllItemPriceRes=[],this.ItemPriceRes=[],this.TrnMode="New",this.lstReciveVoucher=[],this.ResetPriceDetails(),this.ResetTenderList(),0==this.MaxCreditLimit&&(this.lstPayMode=this.lstPayMode.filter(t=>"LB1199"!==t.ACID)),this.MaxCreditNoteAmount=0,this.CreditNoteNumber=null,this.CreditNoteTranAmount=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetUnbilledItemBySlot(this.userSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.ExtraItemList=e=e||[],this.AllItemPriceRes=e,this.InvMode="Performa",this.CheckIsCredit=!1,this.cdRef.detectChanges(),$("#btnShowExtraItemModel").click(),this.LoadAuthorizedMaster()}else this.ExtraItemList=[],this._UtilityService.showSuccessAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ResetPriceDetails(){this.ItemCheckedTotal=0,this.BillWiseDiscountPer=0,this.NetPaybleTotal=0,this.ReferredBy="",this.RequestedBy="",this.ItemTotalDiscount=0,this.BillWiseDiscountAmount=0}LoadAuthorizedMaster(){var t="";this.UserTypeCurre!==o.s.SuperAdmin&&(t=this.ClinicIdSelected),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetAuthorizedMaster(t,!0).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstAuthorizedMaster=e=e||[],this.cdRef.detectChanges()}else this.lstAuthorizedMaster=[]},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}CreateCompleteInvoice(){var t;(null===(t=this.tableDataExtraItem)||void 0===t?void 0:t.length)>0?this._UtilityService.showWarningAlert("Please Clear All Billable Item or Create Proforma Invoice"):(this.TrnMode="New",this.ResetPriceDetails(),this.AllItemPriceRes=[],this.PerformaOrderIds=[],this.MaxCreditNoteAmount=0,this.CreditNoteNumber=null,this.CreditNoteTranAmount=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.getViewPerformaForHMSCombinedGrouped(this.userSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.AllItemPriceRes=e=e||[],this.cdRef.detectChanges();var i=JSON.parse(t.actionResult.result2);this.PerformaOrderIds=i=i||[],this.CalculateTotalItemPrice(),this.InvMode="CompleteInvoice",this.CheckIsCredit=!1,this.lstReciveVoucher=[],this.cdRef.detectChanges(),$("#btnShowExtraItemModel").click(),this.LoadAuthorizedMaster()}},t=>{this._UtilityService.hideSpinner()}),this.cdRef.detectChanges())}GenerateCompleteInvoice(){var t,e;let i=!1;if("CompleteInvoice"!=this.InvMode||"Visitor"!=this.CustomerType&&1!=this.isGenerateTI||(i=!0),(null===(t=this.AllItemPriceRes.filter(t=>1==t.IsChecked))||void 0===t?void 0:t.length)>0){if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy))return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.RequestedBy||""==this.RequestedBy||null==this.RequestedBy))return void this._UtilityService.showWarningAlert("Please enter Requested By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.RequestedBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Requested By");if(Math.round(this.NetPaybleTotal)>0&&Math.round(this.NetPaybleTotal)>Math.round(this.MaxRefundAmount)&&"Visitor"!=this.CustomerType&&0==this.isGenerateTI&&0==this.CheckIsCredit&&0==i)return void this._UtilityService.showWarningAlert("Please Receive Amount from Customer. Customer Balance Amount is Less then Invoice Amount");if(Math.round(this.NetPaybleTotal)>0&&("Visitor"==this.CustomerType||1==this.isGenerateTI)&&0==(null===(e=this.lstReciveVoucher)||void 0===e?void 0:e.length)&&1!=this.CheckIsCredit&&0==i)return void this._UtilityService.showWarningAlert("Customer Amount Not Added");this.lstTenderModel=[],this.TenderObj.CREDITAMT=this.NetPaybleTotal;var n={ACCOUNT:"LB1199"};n.AMOUNT=this.TenderObj.CREDITAMT,n.APPROVALCODE="",n.TRNMODE="Credit",n.REMARKS=this.TenderObj.REMARKS,this.lstTenderModel.push(n);var s=[];this.PerformaOrderIds.map(t=>{s.push({OrderIds:t.InvOrderNumber})}),this.NewItemDetails=[],this.AllItemPriceRes.filter(t=>1==t.IsChecked).map(t=>{this.NewItemDetails.push({BillItemId:t.BillItemId,Description:t.Description,MCODE:t.MCODE,MRP:t.MRP,SELLINGPRICE:t.MRP,INDDISCOUNTRATE:this._ConstantServices.nullToZeroConverter(t.DiscountPer),DCRATE:this._ConstantServices.nullToZeroConverter(this.BillWiseDiscountPer),Qty:t.Qty,lstTenderModel:this.lstTenderModel,lstOrderDetails:s})});var l={};l.SlotBookingId="Patient"==this.CustomerType?this.userSelected:this.VisitorSelected,l.PayMode="Other",l.OnlineTranId="",l.TotalAmount=this.NetPaybleTotal,l.ReferredBy=this.ReferredBy,l.RequestedBy=this.RequestedBy,l.lstTender=this.NewItemDetails,l.PIString=this.PIString,l.IsVisitor="Visitor"==this.CustomerType,l.ModifiedBy=this.loginId,l.IsonCredit=this.CheckIsCredit,l.IsOPDDirectTI=this.isGenerateTI,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.CreateSalesInvoiceExtraItemRev(l).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success&&(this.VisitorUserMaster={},$("#btnExtraItemModel").click(),this.LoadConsumedItem(),this.LoadInvoiceData(),this.LoadCrediNoteBalance(),this.resetIndividualInvoiceList()),this._UtilityService.showSuccessAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}}DeleteExtraItem(t){this.confirmationService.confirm({header:"Confirmation",message:"Are sure you want to delete this item ?",icon:"pi pi-exclamation-triangle",accept:()=>{var e=[];null==t?this.lstSelectedBillableItem.filter(t=>!t.IsBilled).map(t=>{e.push({id:t.BillItemId})}):e.push({id:t}),this.unsubscribe.add=this._MasterServices.DeleteExtraItem(e).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadConsumedItem(),this.lstSelectedBillableItem=[],this.editing=!1,this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}})}UpdateExtraItemStatus(t,e){this.unsubscribe.add=this._MasterServices.UpdateExtraItemStatus(t,e).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadConsumedItem(),this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ShowRefundCreditNoteModel(){this.RefundCreditNoteAmount=0,this.MaxRefundableAmount=this.MaxRefundAmount,this.RefundObj={},this.selectedPaymode=null,this.lstPayModeRefund=[],this.lstPayModeRefund.push({TenderName:"Cash",ACID:"AT01002",disabled:!1}),this.ShowPaymentRefundMethodModel=!0}SaveRefundCreditNote(){null!=this.RefundCreditNoteAmount&&null!=this.RefundCreditNoteAmount?this.RefundCreditNoteAmount<=0?this._UtilityService.showWarningAlert("Please Enter Refund Amount"):null!=this.selectedPaymode&&null!=this.selectedPaymode?"AT01002"!=this.selectedPaymode||null!=this.RefundObj.RefundDate&&null!=this.RefundObj.RefundDate?null!=this.RefundObj.Purpose&&null!=this.RefundObj.Purpose&&0!=this.RefundObj.Purpose.trim().length?null!=this.RefundObj.ApprovedBy&&null!=this.RefundObj.ApprovedBy&&0!=this.RefundObj.ApprovedBy.trim().length?(this.RefundObj.Amount=this.RefundCreditNoteAmount,this.RefundObj.SlotBookingId=this.userSelected,this.RefundObj.CreatedBy=localStorage.getItem("userId"),this.RefundObj.ModifiedBy=localStorage.getItem("userId"),this.RefundObj.RefundMode=this.selectedPaymode,this.RefundObj.ClinicId=this.ClinicIdSelected,this.RefundObj.RequestType="Refund",this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.SaveRefundAmount(this.RefundObj).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.LoadCrediNoteBalance(),this.LoadInvoiceData(),this.resetIndividualInvoiceList(),this.ShowPaymentRefundMethodModel=!1)},t=>{this._UtilityService.hideSpinner()})):this._UtilityService.showWarningAlert("Please enter Approved By"):this._UtilityService.showWarningAlert("Please enter Purpose"):this._UtilityService.showWarningAlert("Please select Refund Date"):this._UtilityService.showWarningAlert("Please select refund Mode"):this._UtilityService.showWarningAlert("Please Enter Refund Amount")}onFileSelectBankDepositSlip(t,e){var i;if((null===(i=t.target.files)||void 0===i?void 0:i.length)>0){const i=t.target.files[0];[".jpg",".png",".jpeg",".pdf"].includes("."+i.type.split("/")[1])?i.size>5242880?($("#"+e).val(""),"AttBankslip1"==e&&(this.fileInputLabelAttBankslip1="",this.BankDepositSlip1Att=""),this._UtilityService.showWarningAlert("Maximum 5 MB file can be Uploaded")):"AttBankslip1"==e&&(this.fileInputLabelAttBankslip1=i.name,this.fileUploadAttBankslip1.get("AttBankslip1").setValue(i)):($("#"+e).val(""),"AttBankslip1"==e&&(this.fileInputLabelAttBankslip1="",this.BankDepositSlip1Att=""),this._UtilityService.showWarningAlert("Only jpg, png and pdf Allowed!")),this.cdRef.detectChanges()}}GetPaymentStatusEmit(t){this.lstReciveVoucher=[],t.includes("~")&&"Success"===t.split("~")[0]&&($("#btnRazorPayCloseModal").click(),$("#btnPaymentMethodModel").click(),this.lstReciveVoucher.push({VCHRNO:t.split("~")[1],TRNMODE:"Online"}),this.RecPayment=!1,$("#btnRecivePaymentClose").click(),"Performa"==this.InvMode&&this.GeneratePerforma(),this.LoadConsumedItem(),this.LoadInvoiceData(),this.LoadCrediNoteBalance(),this.resetIndividualInvoiceList())}LoadInvoiceDataIndividual(){this.TrnMain=[],this.ProdList=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.LoadInvoiceData(this.SlotBookingIdSelected,this.InvoiceNumberSelected,this.PhiscalIdSelected,this.DivisionSelected).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),1==t.actionResult.success&&(null===(e=t.actionResult.result)||void 0===e?void 0:e.length)>0){var i=t.actionResult.result;this.TrnMain=i=i||[],this.ProdList=this.TrnMain[0].ProdList,this.TotalAmount=0,this.ProdList.map(t=>{this.TotalAmount=this.TotalAmount+(t.MRP*t.AltQty-t.INDDISCOUNT),this.ItemWiseTotalDisAmount=this.ItemWiseTotalDisAmount+t.INDDISCOUNT,this.TotalFlatDiscount=this.TotalFlatDiscount+t.FLATDISCOUNT}),this.BillWiseDiscountPer=100*this.TotalFlatDiscount/this.TotalAmount}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}openCRNoteModel(t){this.modalService.open(t,{size:"xxl"})}ShowAddCreditNoteModel(){this.CreditNoteAmount=0,this.MaxRecAmount=1e9,this.selectedPaymodeCodes=[],this.SelectPaymodeArray=[],this.lstPayMode=this.lstPayMode.filter(t=>"LB1199"!==t.ACID),this.TenderObj={},this.TenderObj.CashRecdDate=new Date,this.TenderObj.CardRecdDate=new Date,this.lstBankDepositTransactionDetails=[],this.lstBankDepositTransactionDetails.push({Sequence:this.BankDepTrnCounter,BankName:"",TransactionId:"",RecdDate:new Date,Amount:0}),this.lstCardPaymentTransactionDetails=[],this.lstCardPaymentTransactionDetails.push({Sequence:this.CardTrnCounter,CardNumber:"",CardholderName:"",TransactionId:"",RecdDate:null,Amount:0}),this.TenderObj.TrustId=null,this.TenderObj.TMemberTypeId=null,this.TenderObj.MemberShipNumber=null,this.cdRef.detectChanges(),this.lstReciveVoucher=[],this.fileInputLabelAttBankslip1="",$("#btnShowCreditNoteModel").click()}LoadCrediNoteBalance(){if(this.RemainingAmount=0,this.BalanceType="",this.CreditNoteBalance=0,null!=this.userSelected&&""!=this.userSelected&&null!=this.userSelected||null!=this.VisitorSelected&&""!=this.VisitorSelected&&null!=this.VisitorSelected){var t=null,e="false";"Patient"==this.CustomerType?(t=this.userSelected,e="false"):(t=this.VisitorSelected,e="true"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetCreditNoteBalAmount(t,e).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){if(this.CreditNoteBalance=parseFloat(t.actionResult.stringVal2),this.CreditNoteBalanceAmount=+t.actionResult.stringVal,this.RemainingAmount=t.actionResult.totalAmount,t.actionResult.stringVal.includes("-")?(this.BalanceType="Advance",this.MaxCreditLimit=+t.actionResult.stringVal,this.MaxRefundAmount=Math.abs(+t.actionResult.stringVal)):(this.MaxCreditLimit=+("-"+t.actionResult.stringVal),this.MaxRefundAmount=0,this.CreditNoteBalanceAmount>0&&(this.BalanceType="Dues")),t.actionResult.result.length>0){var e=JSON.parse(t.actionResult.result);this.CustomerInfoDetails=e=e||[],this.MaxCreditLimit=this.MaxCreditLimit+ +this.CustomerInfoDetails.CRLIMIT}this.MaxCreditLimit=Math.abs(this.MaxCreditLimit),this.cdRef.detectChanges()}else this.CreditNoteBalanceAmount=0,this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner()})}else this.CreditNoteBalanceAmount=0,this.cdRef.detectChanges()}SaveCreditNote(){this._ConstantServices.nullToZeroConverter(this.CreditNoteAmount)<=0?this._UtilityService.showWarningAlert("Please enter Receive Amount"):(this.SelectPaymodeArray.includes("ATONLN")&&this.PayExtraItemNew(this.userSelected,this.SlotBookingIdSelected),this.SelectPaymodeArray.includes("ATWLONLN")?this.PayExtraItemNewWL(this.userSelected,this.SlotBookingIdSelected):this.SaveCreditNoteOther())}SaveCreditNoteOther(){var t,e,i,n,s,l,o,c,r,a,d;this.lstReciveVoucher=[],this.PaymentTransactionDetails=[];var b=0;if(this.lstTenderModel=[],null!=this.TenderObj.TrustId||null!=this.TenderObj.TrustId){if(null==this.TenderObj.TMemberTypeId||null==this.TenderObj.TMemberTypeId)return void this._UtilityService.showWarningAlert("Please select member type");if(null==this.TenderObj.MemberShipNumber||null==this.TenderObj.MemberShipNumber||""==this.TenderObj.MemberShipNumber)return void this._UtilityService.showWarningAlert("Please enter membership number")}if(null!=this.TenderObj.TMemberTypeId||null!=this.TenderObj.TMemberTypeId){if(null==this.TenderObj.TrustId||null==this.TenderObj.TrustId)return void this._UtilityService.showWarningAlert("Please select trust type");if(null==this.TenderObj.MemberShipNumber||null==this.TenderObj.MemberShipNumber||""==this.TenderObj.MemberShipNumber)return void this._UtilityService.showWarningAlert("Please enter membership number")}if(this.TenderObj.MemberShipNumber){if(null==this.TenderObj.TrustId||null==this.TenderObj.TrustId)return void this._UtilityService.showWarningAlert("Please select trust type");if(null==this.TenderObj.TMemberTypeId||null==this.TenderObj.TMemberTypeId)return void this._UtilityService.showWarningAlert("Please select member type")}if(this.SelectPaymodeArray.includes("AT01002")){if(null==this.TenderObj.CASH||null==this.TenderObj.CASH||this.TenderObj.CASH<=0)return void this._UtilityService.showWarningAlert("Please enter Cash Tender Amount");if(null==this.TenderObj.CashRecdDate||null==this.TenderObj.CashRecdDate)return void this._UtilityService.showWarningAlert("Please enter Cash Tender Amount Received Date");(f={ACCOUNT:"AT01002"}).AMOUNT=this.TenderObj.CASH,f.APPROVALCODE="",f.TRNMODE="Cash",f.REMARKS=this.TenderObj.REMARKS,this.lstTenderModel.push(f),this.PaymentTransactionDetails.push({TrnMode:"Cash",Remarks:this.TenderObj.REMARKS,ReceivedDate:this.TenderObj.CashRecdDate,Amount:this.TenderObj.CASH,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),b+=this.TenderObj.CASH}if(this.SelectPaymodeArray.includes("AT999999")){for(var u=!0,h=0;h<this.lstCardPaymentTransactionDetails.length;h++)(null==this.lstCardPaymentTransactionDetails[h].TransactionId||null==this.lstCardPaymentTransactionDetails[h].TransactionId||""==this.lstCardPaymentTransactionDetails[h].TransactionId||null==this.lstCardPaymentTransactionDetails[h].RecdDate||null==this.lstCardPaymentTransactionDetails[h].RecdDate||""==this.lstCardPaymentTransactionDetails[h].RecdDate||null==(null===(t=this.lstCardPaymentTransactionDetails[h])||void 0===t?void 0:t.Amount)||null==(null===(e=this.lstCardPaymentTransactionDetails[h])||void 0===e?void 0:e.Amount)||(null===(i=this.lstCardPaymentTransactionDetails[h])||void 0===i?void 0:i.Amount)<=0)&&1==u&&(u=!1);if(0==u)return void this._UtilityService.showWarningAlert("Please enter Transaction Details Properly");if(null==this.TenderObj.CARDAMT||null==this.TenderObj.CARDAMT||this.TenderObj.CARDAMT<=0)return void this._UtilityService.showWarningAlert("Please enter Card tender Amount");var m="",p="",g="";this.lstCardPaymentTransactionDetails.map(t=>{this.PaymentTransactionDetails.push({TrnMode:"Card",Remarks:this.TenderObj.REMARKS,CardNo:t.CardNumber,CardHolderName:t.CardHolderName,TransactionId:t.TransactionId,ReceivedDate:t.RecdDate,Amount:t.Amount,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),m=m+t.TransactionId+",",g=g+t.CardHolderName+",",p=p+t.CardNumber+","}),(f={ACCOUNT:"AT999999"}).AMOUNT=this.TenderObj.CARDAMT,f.APPROVALCODE="",f.TRNMODE="Card",f.REMARKS=this.TenderObj.REMARKS,f.CARDNO=null==p?void 0:p.trimEnd(),f.CARDHOLDERNAME=null==g?void 0:g.trimEnd(),f.TRANSACTIONID=null==m?void 0:m.trimEnd(),this.lstTenderModel.push(f),b+=this.TenderObj.CARDAMT}if(this.SelectPaymodeArray.includes("LB1199")){if(null==this.TenderObj.CREDITAMT||null==this.TenderObj.CREDITAMT||this.TenderObj.CREDITAMT<=0)return void this._UtilityService.showWarningAlert("Please enter Credit Amount");(f={ACCOUNT:"LB1199"}).AMOUNT=this.TenderObj.CREDITAMT,f.APPROVALCODE="",f.TRNMODE="Credit",f.REMARKS=this.TenderObj.REMARKS,this.lstTenderModel.push(f),this.PaymentTransactionDetails.push({TrnMode:"Credit",Remarks:this.TenderObj.REMARKS,ReceivedDate:new Date,Amount:this.TenderObj.CREDITAMT,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),b+=this.TenderObj.CREDITAMT}if(this.SelectPaymodeArray.includes("BT01001")){for(u=!0,h=0;h<this.lstBankDepositTransactionDetails.length;h++)(null==this.lstBankDepositTransactionDetails[h].BankName||null==this.lstBankDepositTransactionDetails[h].BankName||""==this.lstBankDepositTransactionDetails[h].BankName||null==this.lstBankDepositTransactionDetails[h].TransactionId||null==this.lstBankDepositTransactionDetails[h].TransactionId||""==this.lstBankDepositTransactionDetails[h].TransactionId||null==this.lstBankDepositTransactionDetails[h].RecdDate||null==this.lstBankDepositTransactionDetails[h].RecdDate||""==this.lstBankDepositTransactionDetails[h].RecdDate||null==(null===(n=this.lstBankDepositTransactionDetails[h])||void 0===n?void 0:n.Amount)||null==(null===(s=this.lstBankDepositTransactionDetails[h])||void 0===s?void 0:s.Amount)||(null===(l=this.lstBankDepositTransactionDetails[h])||void 0===l?void 0:l.Amount)<=0)&&1==u&&(u=!1);if(0==u)return void this._UtilityService.showWarningAlert("Please enter Transaction Details Properly");if(null==this.TenderObj.BANKTFAMOUNT||null==this.TenderObj.BANKTFAMOUNT||this.TenderObj.BANKTFAMOUNT<=0)return void this._UtilityService.showWarningAlert("Please enter Bank Deposit Amount");m="";var I="";this.lstBankDepositTransactionDetails.map(t=>{this.PaymentTransactionDetails.push({TrnMode:"Bank Transfer",Remarks:this.TenderObj.REMARKS,BankName:t.BankName,TransactionId:t.TransactionId,ReceivedDate:t.RecdDate,Amount:t.Amount,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),m=m+t.TransactionId+",",I=I+t.BankName+","}),(f={ACCOUNT:"BT01001"}).AMOUNT=this.TenderObj.BANKTFAMOUNT,f.APPROVALCODE="",f.TRNMODE="Bank Transfer",f.REMARKS=this.TenderObj.REMARKS,f.TRANSACTIONID=m.trimEnd(),f.CARDHOLDERNAME=I.trimEnd(),this.lstTenderModel.push(f),b+=this.TenderObj.BANKTFAMOUNT}if(this.SelectPaymodeArray.includes("DI01001")){if(null==this.TenderObj.CHEQUEAMT||null==this.TenderObj.CHEQUEAMT||this.TenderObj.CHEQUEAMT<=0)return void this._UtilityService.showWarningAlert("Please enter Cheque tender Amount");if(null==this.TenderObj.CHEQUENO||null==this.TenderObj.CHEQUENO||(null===(o=this.TenderObj.CHEQUENO)||void 0===o?void 0:o.length)<=0)return void this._UtilityService.showWarningAlert("Please enter Cheque Number");if(null==this.TenderObj.BANK||null==this.TenderObj.BANK||(null===(c=this.TenderObj.BANK)||void 0===c?void 0:c.length)<=0)return void this._UtilityService.showWarningAlert("Please enter Cheque Issued Bank Name");if(null==this.TenderObj.ChequeRecdDate||null==this.TenderObj.ChequeRecdDate)return void this._UtilityService.showWarningAlert("Please enter Cheque Received Date");if(null==this.TenderObj.ChequeIssueDate||null==this.TenderObj.ChequeIssueDate)return void this._UtilityService.showWarningAlert("Please enter Cheque Issued Date");var f;this.PaymentTransactionDetails.push({TrnMode:"Cheque",Remarks:this.TenderObj.REMARKS,IssueDate:this.TenderObj.ChequeIssueDate,ReceivedDate:this.TenderObj.ChequeRecdDate,Amount:this.TenderObj.CHEQUEAMT,DepositedBy:this.TenderObj.DepositedBy,BankName:this.TenderObj.BANK,ChequeNumber:this.TenderObj.CHEQUENO,ChequeHolderName:this.TenderObj.ChequeHolderName}),(f={ACCOUNT:"DI01001"}).AMOUNT=this.TenderObj.CHEQUEAMT,f.APPROVALCODE="",f.TRNMODE="Cheque",f.REMARKS=this.TenderObj.REMARKS,f.CARDNO=null===(r=this.TenderObj.CHEQUENO)||void 0===r?void 0:r.trimEnd(),f.CARDHOLDERNAME=null===(a=this.TenderObj.BANK)||void 0===a?void 0:a.trimEnd(),this.lstTenderModel.push(f),b+=this.TenderObj.CHEQUEAMT}if((null===(d=this.lstTenderModel)||void 0===d?void 0:d.length)>0){if(Math.round(b)<Math.round(this.CreditNoteAmount))return void this._UtilityService.showWarningAlert("Input Amount not match with Total Amount");if(Math.round(b)>Math.round(this.CreditNoteAmount))return void this._UtilityService.showWarningAlert("Input Amount not match with Total Amount")}if(null!=this.CreditNoteAmount&&null!=this.CreditNoteAmount)if(this.CreditNoteAmount<0)this._UtilityService.showWarningAlert("Please Enter Credit Amount");else{var v={};v.CreditNoteAmount=this.CreditNoteAmount,v.SlotBookingId="Patient"==this.CustomerType?this.userSelected:this.VisitorSelected,v.lstTender=this.lstTenderModel,v.PaymentTransactionDetails=this.PaymentTransactionDetails,v.UpdatedBy=localStorage.getItem("userId"),v.InvoiceFor="Extra Item",v.CustomerType=this.CustomerType,v.ClinicId=this.ClinicIdSelected,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddCustomerCreditAmount(v).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){("CompleteInvoice"!=this.InvMode||"Visitor"!=this.CustomerType&&1!=this.isGenerateTI)&&this._UtilityService.showSuccessAlert(t.actionResult.errMsg);var i=JSON.parse(t.actionResult.result);if(this.lstReciveVoucher=i=i||[],(null===(e=this.lstReciveVoucher)||void 0===e?void 0:e.length)>0){var n=this.lstReciveVoucher.find(t=>"Bank Transfer"==t.TRNMODE||"Cheque"==t.TRNMODE||"Cash"==t.TRNMODE);null!=n&&this.UploadBankDepositSlip(n.VCHRNO,this.userSelected)}"Performa"==this.InvMode&&this.GeneratePerforma(),"CompleteInvoice"!=this.InvMode||"Visitor"!=this.CustomerType&&1!=this.isGenerateTI||this.GenerateCompleteInvoice(),this.LoadCrediNoteBalance(),this.LoadInvoiceData(),this.resetIndividualInvoiceList(),$("#btnCloseCreditModel").click()}else this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner()})}else this._UtilityService.showWarningAlert("Please Enter Credit Amount")}CalculateNetPaybleAfterDiscountNew(){if(this.ItemCheckedTotal>0)if(this.BillWiseDiscountPer>0){var t=this.ItemCheckedTotal*this.BillWiseDiscountPer/100;this.BillWiseDiscountAmount=t,this.NetPaybleTotal=this.ItemCheckedTotal-t}else this.BillWiseDiscountAmount=0,this.NetPaybleTotal=this.ItemCheckedTotal;else this.NetPaybleTotal=0}CalculateNetPaybleAfterDiscount(t){if(this.ItemCheckedTotal>0)if(t.value>0){var e=this.ItemCheckedTotal*t.value/100;this.BillWiseDiscountAmount=e,this.NetPaybleTotal=this.ItemCheckedTotal-e}else this.BillWiseDiscountAmount=0,this.NetPaybleTotal=this.ItemCheckedTotal;else this.NetPaybleTotal=0}CalculateNetPaybleAfterDiscountReverse(t){this.ItemCheckedTotal>0?t.value>0?(this.BillWiseDiscountPer=100*t.value/this.ItemCheckedTotal,this.NetPaybleTotal=this.ItemCheckedTotal-t.value,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):(this.BillWiseDiscountPer=0,this.NetPaybleTotal=this.ItemCheckedTotal,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):this.NetPaybleTotal=0}CalculateNetPaybleAfterDiscountReverseNew(){this.ItemCheckedTotal>0?(this.BillWiseDiscountAmount>this.ItemCheckedTotal&&(this.BillWiseDiscountAmount=this.ItemCheckedTotal),this.BillWiseDiscountAmount>0?(this.BillWiseDiscountPer=100*this.BillWiseDiscountAmount/this.ItemCheckedTotal,this.NetPaybleTotal=this.ItemCheckedTotal-this.BillWiseDiscountAmount,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):(this.BillWiseDiscountPer=0,this.NetPaybleTotal=this.ItemCheckedTotal,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0))):this.NetPaybleTotal=0}openNew(t){this.modalService.open(t,{backdrop:"static",keyboard:!1}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}CalculateDiscount(t,e){var i,n,s=this.AllItemPriceRes[e];this.AllItemPriceRes[e].DiscountAmount=n=(i=s.MRP*s.Qty)*t.value/100,this.AllItemPriceRes[e].PriceWithGST=i-n,this.ItemTotalDiscount=0,this.AllItemPriceRes.map(t=>{this.ItemTotalDiscount=this.ItemTotalDiscount+t.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscountReverseNew()}CalculateDiscountNew(t){var e,i,n=this.AllItemPriceRes[t];this.AllItemPriceRes[t].DiscountAmount=i=(e=n.MRP*n.Qty)*n.DiscountPer/100,this.AllItemPriceRes[t].PriceWithGST=e-i,this.ItemTotalDiscount=0,this.AllItemPriceRes.map(t=>{this.ItemTotalDiscount=this.ItemTotalDiscount+t.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscountReverseNew()}CalculateDiscountRev(t,e){var i,n,s,l=this.AllItemPriceRes[e];n=(s=t.value)/(i=l.MRP*l.Qty)*100,this.AllItemPriceRes[e].DiscountAmount=s,this.AllItemPriceRes[e].DiscountPer=n,this.AllItemPriceRes[e].DiscountPerUI=Math.round(n),this.AllItemPriceRes[e].PriceWithGST=i-s,this.ItemTotalDiscount=0,this.AllItemPriceRes.map(t=>{this.ItemTotalDiscount=this.ItemTotalDiscount+t.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscountReverseNew()}CalculateDiscountBlur(t){var e,i,n,s=this.AllItemPriceRes[t];i=(n=s.DiscountAmount)/(e=s.MRP*s.Qty)*100,this.AllItemPriceRes[t].DiscountAmount=n,this.AllItemPriceRes[t].DiscountPer=i,this.AllItemPriceRes[t].PriceWithGST=e-n,this.ItemTotalDiscount=0,this.AllItemPriceRes.map(t=>{this.ItemTotalDiscount=this.ItemTotalDiscount+t.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscountReverseNew(),this.cdRef.detectChanges()}CalculateTotalItemPrice(){if(null!=this.AllItemPriceRes.filter(t=>1==t.IsChecked)){var t=this.AllItemPriceRes.filter(t=>1==t.IsChecked),e=0;t.length>0&&(e=t.map(t=>t.PriceWithGST).reduce((t,e)=>t+e,0)),this.ItemCheckedTotal=e,this.cdRef.detectChanges()}this.CalculateNetPaybleAfterDiscountReverseNew()}openPaymentMethod(t){this.TenderObj={},this.TenderModel={},this.SelectPaymodeArray=[],this.selectedPaymodeCodes=null,this.modalService.open(t,{size:"lg",backdrop:"static",keyboard:!1})}ShowSelectedItem(){var t;if((null===(t=this.selectedPaymodeCodes)||void 0===t?void 0:t.length)>0){const t=this.selectedPaymodeCodes.indexOf("ATONLN"),e=this.selectedPaymodeCodes.indexOf("ATWLONLN");t>-1?this.selectedPaymodeCodes=this.selectedPaymodeCodes.filter(function(t){return"ATONLN"==t}):e>-1&&(this.selectedPaymodeCodes=this.selectedPaymodeCodes.filter(function(t){return"ATWLONLN"==t})),this.SelectPaymodeArray=this.selectedPaymodeCodes.toString().split(",")}else this.SelectPaymodeArray=[]}FireforPayment(){var t;0!=(null===(t=this.SelectPaymodeArray)||void 0===t?void 0:t.length)?this.SelectPaymodeArray.includes("ATONLN")&&(this.ItemPriceRes=this.AllItemPriceRes.filter(t=>1==t.IsChecked),this.PayExtraItemNew(this.userSelected,this.CreditNoteAmount)):this._UtilityService.showWarningAlert("Please select payment mode")}GeneratePerforma(){var t,e,i;if((null===(t=this.AllItemPriceRes.filter(t=>1==t.IsChecked))||void 0===t?void 0:t.length)>0){if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy))return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.RequestedBy||""==this.RequestedBy||null==this.RequestedBy))return void this._UtilityService.showWarningAlert("Please enter Requested By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.RequestedBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Requested By");if("Performa"==this.InvMode&&"Edit"==this.TrnMode&&(null==this.PIEditGenRemarks||null==this.PIEditGenRemarks||0==this.PIEditGenRemarks.trim().length))return void this._UtilityService.showWarningAlert("Please enter General Remarks for Edit Proforma");this.NewItemDetails=[],this.AllItemPriceRes.filter(t=>1==t.IsChecked).map(t=>{this.NewItemDetails.push({BillItemId:t.BillItemId,Qty:t.Qty,MCODE:t.MCODE,MRP:t.MRP,SELLINGPRICE:t.MRP,INDDISCOUNTRATE:this._ConstantServices.nullToZeroConverter(t.DiscountPer),DCRATE:this._ConstantServices.nullToZeroConverter(this.BillWiseDiscountPer),NightCount:this._ConstantServices.nullToZeroConverter(t.NightCount),RoomCount:this._ConstantServices.nullToZeroConverter(t.RoomCount),lstTenderModel:[]})});var n={};n.NewItem=this.NewItemDetails,n.SlotBookingId=this.userSelected,n.PayMode="Other",n.OnlineTranId="",n.TotalAmount=this.NetPaybleTotal,n.ReferredBy=this.ReferredBy,n.RequestedBy=this.RequestedBy,n.TrnMode=this.TrnMode,n.InvoiceFor="Extra Item",n.GeneralRemarks=null===(e=this.PIEditGenRemarks)||void 0===e?void 0:e.trim(),n.ModifiedBy=localStorage.getItem("userId"),null!=this.CreditNoteNumber&&null!=this.CreditNoteNumber&&this.CreditNoteTranAmount>0&&(n.CreditNoteNumber=this.CreditNoteNumber,n.CreditNoteTranAmount=this.CreditNoteTranAmount),"Performa"==this.RecWith&&(null===(i=this.lstReciveVoucher)||void 0===i?void 0:i.length)>0&&(n.VourcherList=this.lstReciveVoucher),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.CreatePerformaInvoiceExtraItemRev(n).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success&&(this.InvMode=null,$("#btnExtraItemModel").click(),this.LoadConsumedItem(),this.LoadInvoiceData(),this.LoadCrediNoteBalance(),this.resetIndividualInvoiceList()),this._UtilityService.showSuccessAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.error.message)})}}UpdateTransactionDetails(t,e){var i;(null===(i=this.PaymentTransactionDetails)||void 0===i?void 0:i.length)>0&&(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UpdateTransactionDetails(this.PaymentTransactionDetails,e,t).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}ShowReceivePaymentModel(){this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy)||this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0?this._UtilityService.showWarningAlert("Please enter Authorized By"):this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.RequestedBy||""==this.RequestedBy||null==this.RequestedBy)||this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.RequestedBy.trim().length<=0?this._UtilityService.showWarningAlert("Please enter Requested By"):"Performa"!=this.InvMode||"Edit"!=this.TrnMode||null!=this.PIEditGenRemarks&&null!=this.PIEditGenRemarks&&0!=this.PIEditGenRemarks.trim().length?Math.round(this.NetPaybleTotal)<1?this._UtilityService.showWarningAlert("Net Payable Should be Greater than Zero"):(this.ShowAddCreditNoteModel(),this.RecWith="Performa",this.CreditNoteAmount=this.NetPaybleTotal,this.MaxRecAmount=this.NetPaybleTotal,this.lstReciveVoucher=[],this.RecPayment=!1):this._UtilityService.showWarningAlert("Please enter General Remarks for Edit Proforma")}UpdateTransactionDetailsPaymentReceive(t,e=[]){var i;(null===(i=this.PaymentTransactionDetails)||void 0===i?void 0:i.length)>0&&(null==e?void 0:e.length)>0&&e.map(e=>{this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UpdateTransactionDetails(this.PaymentTransactionDetails.filter(t=>t.TrnMode==e.TRNMODE),t,e.VCHRNO).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})})}UploadBankDepositSlip(t,e){const i=new FormData;this.fileUploadAttBankslip1.get("AttBankslip1").value&&(i.append(this.BankDepositSlip1Att,this.fileUploadAttBankslip1.get("AttBankslip1").value),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UploadBankDepositSlip(i,t,e).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success&&(this.fileUploadAttBankslip1=this.formBuilder.group({AttBankslip1:[""]}),this.cdRef.detectChanges())},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}PayExtraItem(){var t;this.BankDepTrnCounter=1,this.lstBankDepositTransactionDetails=[],(null===(t=this.AllItemPriceRes.filter(t=>1==t.IsChecked))||void 0===t?void 0:t.length)>0?this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy)||this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0?this._UtilityService.showWarningAlert("Please enter Authorized By"):Math.round(this.NetPaybleTotal)<1?this._UtilityService.showWarningAlert("Net Payable Should be Greater than Zero"):(this.lstBankDepositTransactionDetails.push({Sequence:this.BankDepTrnCounter,BankName:"",TransactionId:"",RecdDate:null,Amount:0}),this.cdRef.detectChanges(),$("#btnShowPaymentMethodModel").click()):this._UtilityService.showWarningAlert("Please select Item for Bill")}CalculateTotalBankTransaction(t,e){if(t.value>0){null!=this.TenderObj.BANKTFAMOUNT&&null!=this.TenderObj.BANKTFAMOUNT||(this.TenderObj.BANKTFAMOUNT=0);var i=0;(null==(n=this.lstBankDepositTransactionDetails.filter(t=>t.Sequence!=e))?void 0:n.length)>0&&n.map(t=>{i+=t.Amount}),this.TenderObj.BANKTFAMOUNT=i+t.value,this.cdRef.detectChanges()}else{var n;null!=this.TenderObj.BANKTFAMOUNT&&null!=this.TenderObj.BANKTFAMOUNT||(this.TenderObj.BANKTFAMOUNT=0),i=0,(null==(n=this.lstBankDepositTransactionDetails.filter(t=>t.Sequence!=e))?void 0:n.length)>0&&n.map(t=>{i+=t.Amount}),this.TenderObj.BANKTFAMOUNT=i,this.cdRef.detectChanges()}}CalculateTotalBankTransactionrev(){var t=0;this.lstBankDepositTransactionDetails.map(e=>{t+=e.Amount}),this.TenderObj.BANKTFAMOUNT=t,this.cdRef.detectChanges()}AddBankTransactionDetails(){this.BankDepTrnCounter++,this.lstBankDepositTransactionDetails.push({Sequence:this.BankDepTrnCounter,BankName:"",TransactionId:"",RecdDate:null,Amount:0}),this.cdRef.detectChanges()}RemoveBankTransactionDetails(t){this.lstBankDepositTransactionDetails=this.lstBankDepositTransactionDetails.filter(e=>e.Sequence!==t),this.CalculateTotalBankTransactionrev(),this.cdRef.detectChanges()}PayExtraItemNewWL(t,e){this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddWordLineOrderDetailsWellnessSelectedItem(t,Math.round(this.CreditNoteAmount).toString()).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.WLOrderRes=e=e||[];var i=JSON.parse(t.actionResult.result2);this.UserRes=i=i||[],this.IsSelectedItem=!0,this.SlotBookingIdSelected=this.userSelected,this.HitforWLPayment()}else this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}HitforWLPayment(){$("#btnShowWLPayModel").click()}GetWLPaymentStatusEmit(t){this.lstReciveVoucher=[],t.includes("~")&&"Success"===t.split("~")[0]&&($("#btnWLPayCloseModal").click(),$("#btnPaymentMethodModel").click(),this.lstReciveVoucher.push({VCHRNO:t.split("~")[1],TRNMODE:"Online"}),this.RecPayment=!1,$("#btnRecivePaymentClose").click(),"Performa"==this.InvMode&&this.GeneratePerforma(),this.LoadConsumedItem(),this.LoadInvoiceData(),this.LoadCrediNoteBalance(),this.resetIndividualInvoiceList())}PayExtraItemNew(t,e){this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddRazorOrderDetailsWellnessSelectedItem(t,Math.round(this.CreditNoteAmount).toString()).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.OrderRes=e=e||[];var i=JSON.parse(t.actionResult.result2);this.UserRes=i=i||[],this.IsSelectedItem=!0,this.SlotBookingIdSelected=this.userSelected,this.HitforPayment()}else this._UtilityService.showSuccessAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}HitforPayment(){$("#btnShowRazorPayModel").click()}openNewExtraItem(t){this.modalService.open(t,{size:"xxl"})}getDismissReason(t){return t===n.a.ESC?"by pressing ESC":t===n.a.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}clear(){this.lstExtraItemDetails=[],this.extraItemRowCounter=0,this.AddExtraItemDetails()}PrintCreditInvoice(){for(var t=[],e=0;e<this.tableDataExtraItemCredit.length;e++)1==this.tableDataExtraItemCredit[e].checkAccess&&t.push({id:this.tableDataExtraItemCredit[e].BillItemId});0!=t.length?this.GetCreditBillItemBySlotBookingId(t):this._UtilityService.showWarningAlert("Please Select any one record")}getSelectAllRecord(){if(1==this.checked)for(var t=0;t<this.tableDataExtraItemCredit.length;t++)this.tableDataExtraItemCredit[t].checkAccess=!0;else for(t=0;t<this.tableDataExtraItemCredit.length;t++)this.tableDataExtraItemCredit[t].checkAccess=!1;this.cdRef.detectChanges()}GetCreditBillItemBySlotBookingId(t){this.TotalGrandTotalAmount=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetCreditBillItemBySlotBookingId(t,this.userSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.printBillItem=e=e||[],this.TotalGrandTotalAmount=this.printBillItem.map(t=>t.PriceWithGST).reduce(function(t,e){return t+e}),this.cdRef.detectChanges(),this.ShowPerformaInvoiceListModel=!0}else this.printBillItem=[],this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ReflectCreditBalance(t){var e;(e=null==t?void 0:t.value)>0?(this.CreditNoteAmount=e,this.NetPaybleTotal=e):(this.CreditNoteAmount=0,this.NetPaybleTotal=0),this.cdRef.detectChanges()}EditPInvoice(t,e,i,n){this.ResetPriceDetails(),this.ResetTenderList(),this.ExtraItemList=[],this.AllItemPriceRes=[],this.ItemPriceRes=[],this.TrnMode="Edit",this.lstReciveVoucher=[],this.PIEditGenRemarks=null,0==this.MaxCreditLimit&&(this.lstPayMode=this.lstPayMode.filter(t=>"LB1199"!==t.ACID)),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetItemByPerforma(t,e).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);this.ExtraItemList=i=i||[],this.AllItemPriceRes=i,this.ReferredBy=null!=this.AllItemPriceRes[0].ReferredBy&&null!=this.AllItemPriceRes[0].ReferredBy?this.AllItemPriceRes[0].ReferredBy:"",this.RequestedBy=null!=this.AllItemPriceRes[0].RequestedBy&&null!=this.AllItemPriceRes[0].RequestedBy?this.AllItemPriceRes[0].RequestedBy:"";var n=0,s=0;if(this.AllItemPriceRes.map(t=>{n+=this._ConstantServices.nullToZeroConverter(t.IDiscountAmount),s+=this._ConstantServices.nullToZeroConverter(t.IDiscountPercentage)}),this._ConstantServices.nullToZeroConverter(s)>0&&(s/=null===(e=this.AllItemPriceRes)||void 0===e?void 0:e.length),this.BillWiseDiscountAmount=this._ConstantServices.nullToZeroConverter(n),this.BillWiseDiscountPer=this._ConstantServices.nullToZeroConverter(s),t.actionResult.result2)this.CreditNoteNumber="",this.CreditNoteTranAmount=0,this.MaxCreditNoteAmount=0;else{var l=JSON.parse(t.actionResult.result2);this.CreditNoteNumber=(l=l||[]).CreditNoteNumber,this.CreditNoteTranAmount=l.DebitAmount,this.MaxCreditNoteAmount=l.DebitAmount}this.CalculateTotalItemPrice(),this.InvMode="Performa",this.CheckIsCredit=!1,this.cdRef.detectChanges(),$("#btnShowExtraItemModel").click(),this.LoadAuthorizedMaster()}else this.ExtraItemList=[],this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}CancelPInvoice(t,e,i,n){this.confirmationService.confirm({header:"Confirmation",message:"Are sure you want to Cancel this Proforma ?",icon:"pi pi-exclamation-triangle",accept:()=>{this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.CancelPerforMaInvoice(t,e,this.IsRefundforPI).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this.LoadInvoiceData(),this.LoadCrediNoteBalance(),this.resetIndividualInvoiceList(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg)):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}})}CancelPInvoiceWithRefund(t,e,i,n){this.IsRefundforPI=!1,this.CancelPInvoice(t,e,i,n)}CancelPInvoiceWithNoRefund(t,e,i,n){this.IsRefundforPI=!0,this.CancelPInvoice(t,e,i,n)}CalculateItemTotal(t,e){if(this._ConstantServices.nullToZeroConverter(t.value)>0){let i=this._ConstantServices.nullToZeroConverter(t.value);this.AllItemPriceRes[e].PriceWithGST=parseFloat(this.AllItemPriceRes[e].MRP)*i,this.AllItemPriceRes[e].NETAMOUNT=parseFloat(this.AllItemPriceRes[e].MRP)*i,this.AllItemPriceRes[e].Qty=i}else this.AllItemPriceRes[e].PriceWithGST=0,this.AllItemPriceRes[e].NETAMOUNT=0;this.CalculateDiscountNew(e)}CalculateItemTotalNew(t){var e=this.AllItemPriceRes[t];if(this._ConstantServices.nullToZeroConverter(e.Qty)>0){let i=this._ConstantServices.nullToZeroConverter(e.Qty);this.AllItemPriceRes[t].PriceWithGST=parseFloat(this.AllItemPriceRes[t].MRP)*i,this.AllItemPriceRes[t].NETAMOUNT=parseFloat(this.AllItemPriceRes[t].MRP)*i,this.AllItemPriceRes[t].Qty=i}else this.AllItemPriceRes[t].PriceWithGST=0,this.AllItemPriceRes[t].NETAMOUNT=0;this.CalculateDiscountNew(t)}CalculateITotalNRev(t,e){var i=this.AllItemPriceRes[e],n=t.key,s=0;if(null!=n&&null!=n&&""!=n&&"0"!=n&&(s=parseInt(n)),this._ConstantServices.nullToZeroConverter(s)>0&&i.RoomCount>0)this.AllItemPriceRes[e].Qty=this._ConstantServices.nullToZeroConverter(s)*this._ConstantServices.nullToZeroConverter(i.RoomCount),this.CalculateItemTotalNew(e);else{this.AllItemPriceRes[e].Qty=(this._ConstantServices.nullToZeroConverter(s)>0?this._ConstantServices.nullToZeroConverter(s):1)*(this._ConstantServices.nullToZeroConverter(i.RoomCount)>0?this._ConstantServices.nullToZeroConverter(i.RoomCount):1);var l=this._ConstantServices.nullToZeroConverter(s)>0?this._ConstantServices.nullToZeroConverter(s):1;this.AllItemPriceRes[e].NightCount=this._ConstantServices.nullToZeroConverter(l),this.CalculateItemTotalNew(e),this._ConstantServices.nullToZeroConverter(s)}this.cdRef.detectChanges()}CalculateITotalNRevWE(t){var e=this.AllItemPriceRes[t],i=0;if(e.NightCount>0&&(i=parseInt(e.NightCount)),this._ConstantServices.nullToZeroConverter(i)>0&&e.RoomCount)this.AllItemPriceRes[t].Qty=this._ConstantServices.nullToZeroConverter(i)*this._ConstantServices.nullToZeroConverter(e.RoomCount),this.CalculateItemTotalNew(t);else{this.AllItemPriceRes[t].Qty=(this._ConstantServices.nullToZeroConverter(i)>0?this._ConstantServices.nullToZeroConverter(i):1)*(this._ConstantServices.nullToZeroConverter(e.RoomCount)>0?this._ConstantServices.nullToZeroConverter(e.RoomCount):1);var n=this._ConstantServices.nullToZeroConverter(i)>0?this._ConstantServices.nullToZeroConverter(i):1;this.AllItemPriceRes[t].NightCount=this._ConstantServices.nullToZeroConverter(n),this.CalculateItemTotalNew(t),this._ConstantServices.nullToZeroConverter(i)}this.cdRef.detectChanges()}CalculateITotalNightRev(t,e){var i=this.lstExtraItemDetails.find(t=>t.Sequence==e),n=this.lstExtraItemDetails.findIndex(t=>t.Sequence==e),s=t.value,l=0;null!=s&&null!=s&&""!=s&&"0"!=s&&(l=parseInt(s)),this._ConstantServices.nullToZeroConverter(l)>0&&i.RoomCount>0?this.lstExtraItemDetails[n].Qty=this._ConstantServices.nullToZeroConverter(l)*this._ConstantServices.nullToZeroConverter(i.RoomCount):(this.lstExtraItemDetails[n].Qty=(this._ConstantServices.nullToZeroConverter(l)>0?this._ConstantServices.nullToZeroConverter(l):1)*(this._ConstantServices.nullToZeroConverter(i.RoomCount)>0?this._ConstantServices.nullToZeroConverter(i.RoomCount):1),this.lstExtraItemDetails[n].NightCount=this._ConstantServices.nullToZeroConverter(l)>0?this._ConstantServices.nullToZeroConverter(l):1,this.lstExtraItemDetails[n].RoomCount=1,this._ConstantServices.nullToZeroConverter(l)),this.cdRef.detectChanges()}CalculateITotalRRev(t,e){var i=this.AllItemPriceRes[e],n=t.key,s=0;if(null!=n&&null!=n&&""!=n&&"0"!=n&&(s=parseInt(n)),this._ConstantServices.nullToZeroConverter(s)>0&&i.NightCount)this.AllItemPriceRes[e].Qty=this._ConstantServices.nullToZeroConverter(s)*this._ConstantServices.nullToZeroConverter(i.NightCount),this.CalculateItemTotalNew(e);else{this.AllItemPriceRes[e].Qty=(this._ConstantServices.nullToZeroConverter(s)>0?this._ConstantServices.nullToZeroConverter(s):1)*(this._ConstantServices.nullToZeroConverter(i.NightCount)>0?this._ConstantServices.nullToZeroConverter(i.NightCount):1);var l=this._ConstantServices.nullToZeroConverter(s)>0?this._ConstantServices.nullToZeroConverter(s):1;this.AllItemPriceRes[e].RoomCount=this._ConstantServices.nullToZeroConverter(l),this.CalculateItemTotalNew(e),this._ConstantServices.nullToZeroConverter(s)}this.cdRef.detectChanges()}CalculateITotalRRevWE(t){var e=this.AllItemPriceRes[t],i=0;if(e.RoomCount>0&&(i=parseInt(e.RoomCount)),this._ConstantServices.nullToZeroConverter(i)>0&&e.NightCount)this.AllItemPriceRes[t].Qty=this._ConstantServices.nullToZeroConverter(i)*this._ConstantServices.nullToZeroConverter(e.NightCount),this.CalculateItemTotalNew(t);else{this.AllItemPriceRes[t].Qty=(this._ConstantServices.nullToZeroConverter(i)>0?this._ConstantServices.nullToZeroConverter(i):1)*(this._ConstantServices.nullToZeroConverter(e.NightCount)>0?this._ConstantServices.nullToZeroConverter(e.NightCount):1);var n=this._ConstantServices.nullToZeroConverter(i)>0?this._ConstantServices.nullToZeroConverter(i):1;this.AllItemPriceRes[t].RoomCount=this._ConstantServices.nullToZeroConverter(n),this.CalculateItemTotalNew(t),this._ConstantServices.nullToZeroConverter(i)}this.cdRef.detectChanges()}CalculateITotalDaysRev(t,e){var i=this.lstExtraItemDetails.find(t=>t.Sequence==e),n=this.lstExtraItemDetails.findIndex(t=>t.Sequence==e),s=t.value,l=0;null!=s&&null!=s&&""!=s&&"0"!=s&&(l=parseInt(s)),this._ConstantServices.nullToZeroConverter(l)>0&&i.NightCount>0?this.lstExtraItemDetails[n].Qty=this._ConstantServices.nullToZeroConverter(l)*this._ConstantServices.nullToZeroConverter(i.NightCount):(this.lstExtraItemDetails[n].Qty=(this._ConstantServices.nullToZeroConverter(l)>0?this._ConstantServices.nullToZeroConverter(l):1)*(this._ConstantServices.nullToZeroConverter(i.NightCount)>0?this._ConstantServices.nullToZeroConverter(i.NightCount):1),this.lstExtraItemDetails[n].RoomCount=this._ConstantServices.nullToZeroConverter(l)>0?this._ConstantServices.nullToZeroConverter(l):1,0==this._ConstantServices.nullToZeroConverter(l)&&this._UtilityService.showWarningAlert("Bed Count Shouldn't be zero")),this.cdRef.detectChanges()}PrintPInvoice(t,e,i,n){this.SlotBookingIdSelected=t,this.TotalDiscountAmount=0,this.TotalReceiveAmount=0,this.printBillItem=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetItemByPerforma(t,e).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.printBillItem=e=e||[],this._ConstantServices.nullToZeroConverter(t.actionResult.totalAmount)>0&&(this.TotalReceiveAmount=this._ConstantServices.nullToZeroConverter(t.actionResult.totalAmount)),this.TotalGrandTotalAmount=this.printBillItem.map(t=>t.PriceWithGST).reduce(function(t,e){return t+e}),this.printBillItem.map(t=>{this.TotalDiscountAmount=this.TotalDiscountAmount+this._ConstantServices.nullToZeroConverter(t.IDiscountAmount)}),this.cdRef.detectChanges(),this.ShowPerformaInvoiceListModel=!0}else this.printBillItem=[],this._UtilityService.showSuccessAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ShowAddCreditNoteModelCI(){if("Visitor"==this.CustomerType){if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy))return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.RequestedBy||""==this.RequestedBy||null==this.RequestedBy))return void this._UtilityService.showWarningAlert("Please enter Requested By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.RequestedBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Requested By")}this.ShowAddCreditNoteModel(),this.NetPaybleTotal-this.MaxCreditLimit>0&&(this.CreditNoteAmount=Math.round(this._ConstantServices.nullToZeroConverter(this.NetPaybleTotal-this.MaxCreditLimit)),this.MaxRecAmount=this.CreditNoteAmount),this.cdRef.detectChanges()}ShowRefundCreditNoteModelCI(){this.ShowRefundCreditNoteModel(),this.MaxRefundAmount-this.NetPaybleTotal>0&&(this.RefundCreditNoteAmount=this._ConstantServices.nullToZeroConverter(this.MaxRefundAmount-this.NetPaybleTotal),this.MaxRefundableAmount=this.RefundCreditNoteAmount),this.cdRef.detectChanges()}getSelectAllItem(){var t;if(1==this.selectAllItem)for(var e=0;e<(null===(t=this.AllItemPriceRes)||void 0===t?void 0:t.length);e++)this.AllItemPriceRes[e].IsChecked=!0;else for(e=0;e<this.AllItemPriceRes.length;e++)(0==this.AllItemPriceRes[e].IsDisabledCheckBox||this.AllItemPriceRes[e].CanEditQty)&&(this.AllItemPriceRes[e].IsChecked=!1);this.CalculateTotalItemPrice()}validateZero(t){const e=t.keyCode;t.key.match(/[1-9]/g)&&![8,37,39,46].includes(e)||t.preventDefault()}onFileSelectRefundAppSlip(t,e){var i;if((null===(i=t.target.files)||void 0===i?void 0:i.length)>0){const i=t.target.files[0];[".jpg",".png",".jpeg",".pdf"].includes("."+i.type.split("/")[1])?i.size>5242880?($("#"+e).val(""),"AttRefAppslip1"==e&&(this.fileInputLabelAttRefAppslip1="",this.AttRefundSlip1Att=""),this._UtilityService.showWarningAlert("Maximum 5 MB file can be Uploaded")):"AttRefAppslip1"==e&&(this.fileInputLabelAttRefAppslip1=i.name,this.fileUploadAttRefslip1.get("AttRefAppslip1").setValue(i)):($("#"+e).val(""),"AttRefAppslip1"==e&&(this.fileInputLabelAttRefAppslip1="",this.AttRefundSlip1Att=""),this._UtilityService.showWarningAlert("Only jpg, png and pdf Allowed!")),this.cdRef.detectChanges()}}UploadRefundApprovalSlip(t,e){const i=new FormData;this.fileUploadAttRefslip1.get("AttRefAppslip1").value&&(i.append(this.AttRefundSlip1Att,this.fileUploadAttRefslip1.get("AttRefAppslip1").value),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UploadBankDepositSlip(i,t,e,"Refund").subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success&&this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}SelectParentMCode(t){this.lstExtraItemDetails[this.SelectedSequence].Parent=t,this.showModalRoomCategorySelect=!1,this.cdRef.detectChanges()}CalculateTotalCardPayment(t,e){if(t.value>0){null!=this.TenderObj.CARDAMT&&null!=this.TenderObj.CARDAMT||(this.TenderObj.CARDAMT=0);var i=0;(null==(n=this.lstCardPaymentTransactionDetails.filter(t=>t.Sequence!=e))?void 0:n.length)>0&&n.map(t=>{i+=t.Amount}),this.TenderObj.CARDAMT=i+t.value,this.cdRef.detectChanges()}else{var n;null!=this.TenderObj.CARDAMT&&null!=this.TenderObj.CARDAMT||(this.TenderObj.CARDAMT=0),i=0,(null==(n=this.lstCardPaymentTransactionDetails.filter(t=>t.Sequence!=e))?void 0:n.length)>0&&n.map(t=>{i+=t.Amount}),this.TenderObj.CARDAMT=i,this.cdRef.detectChanges()}}CalculateTotalCardPaymentrev(){var t=0;this.lstCardPaymentTransactionDetails.map(e=>{t+=e.Amount}),this.TenderObj.CARDAMT=t,this.cdRef.detectChanges()}AddCardPaymentDetails(){this.CardTrnCounter++,this.lstCardPaymentTransactionDetails.push({Sequence:this.CardTrnCounter,CardNumber:"",CardHolderName:"",TransactionId:"",RecdDate:null,Amount:0}),this.cdRef.detectChanges()}RemoveCardPaymentDetails(t){this.lstCardPaymentTransactionDetails=this.lstCardPaymentTransactionDetails.filter(e=>e.Sequence!==t),this.CalculateTotalCardPaymentrev(),this.cdRef.detectChanges()}ShowTransactionDetails(t,e,i,n){this.SlotBookingIdSelected=t,this.InvoiceNumberSelected=e,this.PhiscalIdSelected=i,this.DivisionSelected=n,this.ShowTransactionDetailsModel=!0}CheckCreditNote(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetNetBalanceCreditNote(this.ClinicIdSelected,this.userSelected,this.CreditNoteNumber).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?this.MaxCreditNoteAmount=t.actionResult.totalAmount:(this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.MaxCreditNoteAmount=0)},t=>{this._UtilityService.hideSpinner(),this.MaxCreditNoteAmount=0}),this.cdRef.detectChanges()}LoadClinicMasterById(){this.ClinicDetails={},this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetClinicMasterById(this.ClinicIdSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.ClinicDetails=e=e||[],this.ResetTenderList(),this.cdRef.detectChanges()}else this.cdRef.detectChanges()})}onselectedLetterhead(t){this.IsLetterhead=t}PrintPaymentVoucher(t,e,i,n,s){this.SelectedSlotBookingId=t,this.SelectedVCHRNO=e,this.SelectedPhiscalID=i,this.SelectedDivision=n,this.SelectedInvType=s,this.ShowPrintPaymentVoucherModel=!0}PrintInvoice(t,e,i,n){this.SlotBookingIdSelected=t,this.InvoiceNumberSelected=e,this.PhiscalIdSelected=i,this.DivisionSelected=n,this.ShowPrintProfileModel=!0}PrintCombinedInvoice(){window.open("#/print/combined-invoice-print?SlotBookingId="+this.userSelected+"&UserId="+this.UserList.filter(t=>t.SlotBookingId==this.userSelected)[0].UserId)}PrintBankDepositSlip(t,e,i){var n=this._ConstantServices.BaseURIFileServer+"FolderTransaction/"+this.ProdList.find(t=>t.VCHRNO==e).BankDSlip;window.open(n)}ShowEstimetedBill(){this.SlotBookingIdSelected=this.userSelected,this.TotalGrandTotalAmount=0,this.printBillItem=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetUnbilledItemBySlot(this.userSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.printBillItem=e=e||[],this.TotalGrandTotalAmount=this.printBillItem.map(t=>t.PriceWithGST).reduce(function(t,e){return t+e}),this.cdRef.detectChanges(),this.ShowEstimetedBillListModel=!0}else this.printBillItem=[],this._UtilityService.showSuccessAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}GenerateTIProvisionalNo(){this.confirmationService.confirm({header:"Confirmation",message:"Are you sure to Generate Provisonal Number?",icon:"pi pi-exclamation-triangle",accept:()=>{this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GenerateTIProvisionalNo(this.userSelected).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?this._UtilityService.showSuccessAlert(t.actionResult.errMsg):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}})}GetColonhydrothrapyCount(){this.ShowColonHydroModel=!0}OnChangeOption(){"Visitor"==this.CustomerType&&(this.VisitorUserMaster={},this.userSelected=null,this.lstExtraItemDetails=[],this.extraItemRowCounter=0,this.AddExtraItemDetails(),this.LoaditemMasterWithGrouping(),this.cdRef.detectChanges())}saveExtraItemVisitor(){var t,e,i,n,s,l,o,c,r,a,d,b,u;if(this.IsListView&&(this.lstExtraItemDetails=[],this.itemMaster.map(t=>{t.expanded=!1}),this.lstExtraItemDetails=this.lstExtraListItemDetails),this.ResetPriceDetails(),this.AllItemPriceRes=[],this.MaxCreditNoteAmount=0,this.CreditNoteNumber=null,this.CreditNoteTranAmount=0,this.VisitorSelected=null,""!=(null===(t=this.VisitorUserMaster)||void 0===t?void 0:t.FirstName)&&null!=(null===(e=this.VisitorUserMaster)||void 0===e?void 0:e.FirstName)&&null!=(null===(i=this.VisitorUserMaster)||void 0===i?void 0:i.FirstName)&&""!=(null===(s=null===(n=this.VisitorUserMaster)||void 0===n?void 0:n.FirstName)||void 0===s?void 0:s.trim()))if(!(null===(l=this.VisitorUserMaster)||void 0===l?void 0:l.IsStaff)||""!=(null===(o=this.VisitorUserMaster)||void 0===o?void 0:o.EmpCode)&&null!=(null===(c=this.VisitorUserMaster)||void 0===c?void 0:c.EmpCode)&&null!=(null===(r=this.VisitorUserMaster)||void 0===r?void 0:r.EmpCode)&&""!=(null===(d=null===(a=this.VisitorUserMaster)||void 0===a?void 0:a.EmpCode)||void 0===d?void 0:d.trim()))if((null===(b=this.VisitorUserMaster)||void 0===b?void 0:b.IsStaff)||(this.VisitorUserMaster.EmpCode="",this.VisitorUserMaster.Department=""),0!=(null===(u=this.lstExtraItemDetails)||void 0===u?void 0:u.length)){var h=[],m=!0;if(this.lstExtraItemDetails.forEach(t=>{if(t.MCODE==this.defaultItemMCODE.OtherCharge&&(null==t.MRP||null==t.MRP||t.MRP<=0||null==t.OtherPurpose||null==t.OtherPurpose||0==t.OtherPurpose.trim().length))m=!1;else if(""!=t.MCODE&&null!=t.MCODE&&""!=t.UOMS&&null!=t.UOMS&&0!=(null==t?void 0:t.Qty)&&null!=(null==t?void 0:t.Qty)&&0!=t.Sequence){var e={ClinicId:this.ClinicIdSelected,MCODE:t.MCODE,UOMS:t.UOMS,Qty:t.Qty,IsBilled:!1,BillTypeStatus:this.billType,CreatedBy:this.loginId,ModifiedBy:this.loginId,NightCount:this._ConstantServices.nullToZeroConverter(t.NightCount),RoomCount:this._ConstantServices.nullToZeroConverter(t.RoomCount),PMCODE:t.Parent,MRP:this._ConstantServices.nullToZeroConverter(t.MRP),OtherPurpose:t.OtherPurpose};h.push(e)}else m=!1}),m)if(Sn(h))this._UtilityService.showWarningAlert("Item should not duplicate.");else{var p={};this.VisitorUserMaster.CreatedBy=localStorage.getItem("userId"),this.VisitorUserMaster.CreatedBy=localStorage.getItem("userId"),this.VisitorUserMaster.ClinicId=this.ClinicIdSelected,p.VUMaster=this.VisitorUserMaster,p.lstBillItem=h,this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.SaveVisitorDetailsExtraItemArray(p).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){this._UtilityService.showSuccessAlert(t.actionResult.errMsg);var e=JSON.parse(t.actionResult.result);this.AllItemPriceRes=e=e||[],this.VisitorSelected=t.actionResult.stringVal,this.CalculateTotalItemPrice(),this.InvMode="CompleteInvoice",this.lstReciveVoucher=[],this.cdRef.detectChanges(),$("#btnShowExtraItemModel").click(),this.LoadAuthorizedMaster(),this.cdRef.detectChanges()}else this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}else this._UtilityService.showWarningAlert("Please select all Item Details")}else this._UtilityService.showWarningAlert("Please select Item Details");else this._UtilityService.showWarningAlert("Please enter employee Code");else this._UtilityService.showWarningAlert("Please enter first name")}ShowInvoiceList(){""!=this.VisitorSelected&&null!=this.VisitorSelected&&null!=this.VisitorSelected&&(this.ShowInvoiceListModel=!0)}PrintPreInvoice(){this.ShowPreInvoiceModel=!0}}return t.\u0275fac=function(e){return new(e||t)(c.Sb(c.h),c.Sb(r.i),c.Sb(r.a),c.Sb(n.j),c.Sb(o.f),c.Sb(a.a),c.Sb(d.a),c.Sb(b.a),c.Sb(u.d),c.Sb(h.a))},t.\u0275cmp=c.Mb({type:t,selectors:[["app-extra-item-consumption"]],viewQuery:function(t,e){if(1&t&&(c.cd(O,1),c.cd(_,1)),2&t){let t;c.Hc(t=c.jc())&&(e.AttBankslip1=t.first),c.Hc(t=c.jc())&&(e.AttRefAppslip1=t.first)}},features:[c.Cb],decls:81,vars:79,consts:[["class","row mt25",4,"ngIf"],[4,"ngIf"],[1,"row","mt25","mb-4"],["class","col-auto",4,"ngIf"],["class","col-auto mt-2",4,"ngIf"],["class","col-md-4",4,"ngIf"],["class","row mt25 mb-4",4,"ngIf"],["class","row mt-4 balance",4,"ngIf"],["class","row  mt-2",4,"ngIf"],["tabContent",""],["class","row  mt-3",4,"ngIf"],["tabBillable",""],["tabCreditItem",""],["tabBilledItem",""],["tabPerformaInvItem",""],["tabPaymentReceiveVoucher",""],["type","button","id","btnShowExtraItemModel","name","btnShowExtraItemModel",2,"display","none",3,"click"],[1,"example-preview"],["contentExtraItem",""],["type","button","id","btnShowRazorPayModel","name","btnShowRazorPayModel",2,"display","none",3,"click"],["contentGen",""],["type","button","id","btnShowWLPayModel","name","btnShowWLPayModel",2,"display","none",3,"click"],["contentGenWL",""],["type","button","id","btnShowPaymentMethodModel","name","btnShowPaymentMethodModel",2,"display","none",3,"click"],["contentPaymentMethod",""],["type","button","id","btnShowCreditNoteModel","name","btnShowCreditNoteModel",2,"display","none",3,"click"],["contentCRNote",""],["header","Refund Customer Balance",3,"modal","visible","visibleChange"],["pTemplate","body"],["pTemplate","footer"],["header","Colon Hydrotherapy Count",3,"visible","modal","closeOnEscape","closable","draggable","resizable","visibleChange"],[3,"visible","modal","closeOnEscape","closable","draggable","visibleChange"],["pTemplate","header"],[1,"m-0"],["header","Estimeted Bill",3,"modal","visible","visibleChange"],["printEstimetedBill",""],["header","Print Voucher",3,"modal","visible","visibleChange"],["printDiv",""],[3,"modal","visible","visibleChange"],["header","Transaction Details",3,"modal","visible","baseZIndex","visibleChange"],["header","Voucher List",3,"modal","visible","visibleChange"],["header","Pre Invoice Print",3,"modal","visible","visibleChange"],[1,"row","mt25"],[1,"col","col-md-1","pr-0"],["for","",1,"pt-2"],[1,"required"],[1,"col","col-md-3"],[3,"isCenterLabel","mode","onclinicSelect","onselectedClinic"],[1,"col-auto"],[1,"field-radiobutton"],["name","rdPatient","value","Patient",3,"ngModel","ngModelChange","onClick"],[1,"pl-2","mr-2","radiolabel"],["name","rdPatient","value","Visitor",3,"ngModel","ngModelChange","onClick"],["type","button",1,"btn-new-primary","mr-2",3,"click"],[1,"col-auto","mt-2"],[1,"col-md-4"],["optionLabel","name","optionValue","SlotBookingId","placeholder","Select Health Seeker",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],["placeholder","Select Health Seeker","optionLabel","name","optionValue","SlotBookingId","field","name",3,"ngModel","minLength","suggestions","inputStyle","ngModelChange","onClear","onSelect","completeMethod"],["type","checkbox","checked","checked","name","select",3,"ngModel","ngModelChange","change"],[1,"col","col-md-3","col-12"],[1,"form-group"],["for",""],["required","","type","text","name","txtFName","placeholder","First Name",1,"form-control",3,"ngModel","ngModelChange","keypress"],["fNameref","ngModel"],["type","text","name","txtLname","placeholder","Last Name",1,"form-control",3,"ngModel","ngModelChange","keypress"],["type","text","name","txtMobile","placeholder","Enter Phone Number","pattern","[0-9]{10}$","minlength","10","maxlength","10",1,"form-control",3,"ngModel","ngModelChange","keypress"],["mobileref","ngModel"],[1,"form-group","tow-col"],["type","text","placeholder","AddressLine 1","name","AddressLine1",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","col-md-3","col-12","mt-7"],[1,"input-group"],[1,"mr-2"],["type","checkbox","name","chkIsStaff",3,"ngModel","ngModelChange"],["class","col col-md-3 col-12",4,"ngIf"],["type","text","placeholder","Employee Code","name","EmpCode",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Department","name","Department",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","mt-4","balance"],[1,"pt-1"],[1,"material-icons"],[1,"col-auto","balance-btn"],["type","button","class","btn btn-new-primary mr-2",3,"click",4,"ngIf"],["title","Colon Hydrotherpy Count",1,"btn","btn-new-secondary",3,"click"],[1,"fa","fa-info-circle",2,"font-size","20px"],["class","col-md-2 balance-btn",4,"ngIf"],[1,"material-icons",2,"top","2px"],["type","button",1,"btn","btn-new-primary","mr-2",3,"click"],[1,"fa","fa-plus"],[1,"col-md-2","balance-btn"],["type","button","class","btn btn-new-secondary w-100",3,"click",4,"ngIf"],["type","button",1,"btn","btn-new-secondary","w-100",3,"click"],[1,"fa","fa-minus"],[1,"row","mt-2"],[1,"col","col-md-12"],[3,"activeIndex","activeIndexChange","onChange"],[3,"header"],[4,"ngTemplateOutlet"],["header","Prescribed",4,"ngIf"],[1,"col","col-auto"],["type","button","class","btn btn-new-primary",3,"click",4,"ngIf"],[1,"mr-2","ml-2"],["type","checkbox","name","chkIsListView",1,"mt-2",3,"ngModel","ngModelChange","click"],["header","Prescribed"],["type","button",1,"btn","btn-new-primary",3,"click"],[1,"extmt"],["responsiveLayout","scroll","scrollHeight","250px",3,"value","rowHover","scrollable",4,"ngIf"],["responsiveLayout","scroll","scrollHeight","250px",3,"value","rowHover","scrollable"],["dt11",""],["pTemplate","colgroup"],[2,"width","250px"],[2,"width","100px"],[2,"width","150px"],[2,"text-align","center"],["id","btnCloseOverlayItem","name","btnCloseOverlayItem",2,"display","none",3,"click"],["appendTo","body","icon","pi pi-list",1,"ov-button",3,"id","label","click"],["appendTo","body",3,"id","showCloseIcon"],["op",""],["pTemplate",""],["appendTo","body","optionLabel","UOMName","optionValue","UOMName","placeholder","Select Unit",3,"name","options","ngModel","filter","showClear","ngModelChange"],[2,"display","flex","justify-content","center"],["styleClass","input30px",3,"name","ngModel","useGrouping","min","maxlength","ngModelChange",4,"ngIf"],["class","row",4,"ngIf"],["pInputText","","type","text",3,"name","ngModel","ngModelChange",4,"ngIf"],["href","javascript: void(0);",1,"add-btn","mr-2",3,"click"],["class","add-btn mr-2","href","javascript: void(0);",3,"click",4,"ngIf"],["class","pi pi-refresh","title","Reset Item",3,"click",4,"ngIf"],["selectionMode","single",3,"id","value","filter","selection","styleClass","onNodeSelect","selectionChange",4,"ngIf"],["selectionMode","single",3,"id","value","filter","selection","styleClass","onNodeSelect","selectionChange"],["styleClass","input30px",3,"name","ngModel","useGrouping","min","maxlength","ngModelChange"],[1,"row"],[1,"col-auto","pt-2"],[1,"col-auto","p-0"],["styleClass","input30px",3,"name","ngModel","useGrouping","min","maxlength","onInput","ngModelChange"],[3,"name","ngModel","useGrouping","min","maxlength","ngModelChange"],["pInputText","","type","text",3,"name","ngModel","ngModelChange"],["title","Reset Item",1,"pi","pi-refresh",3,"click"],[2,"width","350px"],[2,"width","650px"],["id","btnCloseOverlayItem1","name","btnCloseOverlayItem1",2,"display","none",3,"click"],["appendTo","body","id","btn_op_lstExtraItemDetails","icon","pi pi-list",1,"ov-button",3,"label","click"],["appendTo","body","id","op_lstExtraItemDetails",3,"showCloseIcon"],["op1",""],["styleClass","input35px",3,"name","ngModel","useGrouping","min","maxlength","ngModelChange",4,"ngIf"],["id","tree_lstExtraItemDetails","selectionMode","checkbox",3,"filter","value","selection","styleClass","onNodeSelect","onNodeUnselect","selectionChange"],["styleClass","input35px",3,"name","ngModel","useGrouping","min","maxlength","ngModelChange"],[1,"row","mt-3"],["header","Billable Item"],["header","Proforma Item List"],["header","Voucher list"],["header","Billed Item List"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","200px",3,"value","rowHover","globalFilterFields","scrollable","selection","selectionChange"],["dt1",""],["pTemplate","caption"],["pTemplate","emptymessage"],[1,"p-d-flex"],["pButton","","pRipple","","title","Estimeted Bill","label","Estimeted Bill","icon","","class","mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","title","Edit Item","label","Edit Item","icon","fa fa-edit",3,"click",4,"ngIf"],["pButton","","pRipple","","title","Save Item","label","Save","icon","",3,"click",4,"ngIf"],["pButton","","pRipple","","title","Cancel Item","label","Cancel","icon","","class","ml-2",3,"click",4,"ngIf"],["pButton","","pRipple","","title","Delete Item","label","Delete Item","icon","","class","ml-2",3,"click",4,"ngIf"],["pButton","","title","Create Proforma Invoice","label","Create Proforma Invoice","class","btn btn-new-primary ml-2","icon","pi pi-file-o",3,"click",4,"ngIf"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pButton","","pRipple","","title","Estimeted Bill","label","Estimeted Bill","icon","",1,"mr-2",3,"click"],["pButton","","pRipple","","title","Edit Item","label","Edit Item","icon","fa fa-edit",3,"click"],["pButton","","pRipple","","title","Save Item","label","Save","icon","",3,"click"],["pButton","","pRipple","","title","Cancel Item","label","Cancel","icon","",1,"ml-2",3,"click"],["pButton","","pRipple","","title","Delete Item","label","Delete Item","icon","",1,"ml-2",3,"click"],["pButton","","title","Create Proforma Invoice","label","Create Proforma Invoice","icon","pi pi-file-o",1,"btn","btn-new-primary","ml-2",3,"click"],[2,"width","70px"],[2,"width","120px"],[2,"width","190px"],[2,"width","80px"],[2,"width","90px"],[2,"width","130px"],["pFrozenColumn",""],[3,"value"],["matTooltip","Delete",3,"click",4,"ngIf"],["pInputText","","type","text","required","",2,"width","100%",3,"name","ngModel","keypress","ngModelChange"],["matTooltip","Delete",3,"click"],["src","./assets/custom-icons/no.svg",1,"custom-ico"],["styleClass","p-datatable-striped","scrollHeight","150px","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable"],["pButton","","title","All Invoice Print","label","Print","class","p-button-outlined","icon","pi pi-print",3,"click",4,"ngIf"],["pButton","","title","All Invoice Print","label","Print","icon","pi pi-print",1,"p-button-outlined",3,"click"],[2,"width","60px"],["binary","true","inputId","binary",3,"ngModel","ngModelChange","onChange"],["binary","true",3,"ngModel","ngModelChange"],["matTooltip","Cancel",3,"click",4,"ngIf"],["matTooltip","Cancel",3,"click"],["styleClass","p-datatable-striped","scrollHeight","250px","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable",4,"ngIf"],["styleClass","p-datatable-striped","scrollHeight","250px","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable"],["dt2",""],[1,"p-d-flex","bills"],["pButton","","title","Complete Invoice","label","Complete Invoice","class","btn btn-new-primary","icon","pi pi-print",3,"click",4,"ngIf"],["pButton","","title","Complete Invoice","label","Complete Invoice","icon","pi pi-print",1,"btn","btn-new-primary",3,"click"],[2,"width","105px"],[2,"width","95px"],["class","material-icons mr-3","matTooltip","Print Voucher",3,"click",4,"ngIf"],["class","material-icons mr-3","matTooltip","Download Bank Deposit Slip",3,"click",4,"ngIf"],["matTooltip","Transaction Details",1,"material-icons","mr-3",3,"click"],["matTooltip","Print Voucher",1,"material-icons","mr-3",3,"click"],["matTooltip","Download Bank Deposit Slip",1,"material-icons","mr-3",3,"click"],["dt33",""],["pButton","","title","Create Complete Invoice","label","Create Complete Invoice","class","btn btn-new-primary mr-2","icon","pi pi-print",3,"click",4,"ngIf"],["pButton","","title","Print Invoice","class","btn btn-new-primary","icon","pi pi-print",3,"label","click",4,"ngIf"],["pButton","","title","Generate Provisional Number","label","Generate Provisional Number","class","ml-2 btn btn-new-primary","icon","pi pi-user-plus",3,"click",4,"ngIf"],["pButton","","title","Create Complete Invoice","label","Create Complete Invoice","icon","pi pi-print",1,"btn","btn-new-primary","mr-2",3,"click"],["pButton","","title","Print Invoice","icon","pi pi-print",1,"btn","btn-new-primary",3,"label","click"],["pButton","","title","Generate Provisional Number","label","Generate Provisional Number","icon","pi pi-user-plus",1,"ml-2","btn","btn-new-primary",3,"click"],[2,"width","125px"],["class","fas fa-print mr-3","title","Print",3,"click",4,"ngIf"],["class","fas fa-edit mr-3","title","Edit Proforma Invoice",3,"click",4,"ngIf"],["class","fas fa-plane-slash mr-3","title","Cancel Proforma Invoice With No Refund",3,"click",4,"ngIf"],["class","fas fa-window-close","title","Cancel Proforma Invoice",3,"click",4,"ngIf"],["title","Print",1,"fas","fa-print","mr-3",3,"click"],["title","Edit Proforma Invoice",1,"fas","fa-edit","mr-3",3,"click"],["title","Cancel Proforma Invoice With No Refund",1,"fas","fa-plane-slash","mr-3",3,"click"],["title","Cancel Proforma Invoice",1,"fas","fa-window-close",3,"click"],[1,"row","mt-5"],["class","col col-md-12",4,"ngIf"],[3,"showIndividualInvoiceList","slotBookingId","IsGrouped","BookingType"],[1,"modal-header"],[1,"modal-title"],["type","button","id","btnExtraItemModel","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"table","table-striped","table-bordered",2,"width","100%"],["type","checkbox",3,"ngModel","ngModelChange","change",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],["name","txtBillWiseDiscountPer","mode","decimal",3,"disabled","ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onInput","onBlur"],["name","txtBillWiseDiscountAmount","mode","decimal",3,"disabled","ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onInput","onBlur"],["style","display: none;",4,"ngIf"],["colspan","1"],["colspan","1",1,"text-center"],["type","text","class","ref-input","pInputText","","name","txtRequestedBy","minlength","3","maxlength","150",3,"ngModel","ngModelChange",4,"ngIf"],["required","true","name","txtReferredBy","optionLabel","Name","optionValue","Name","placeholder","Select Authorized Name",3,"options","ngModel","showClear","filter","style","ngModelChange",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-new-secondary",3,"click"],[1,"col-md-3","balance"],["class","col-md-3 balance",4,"ngIf"],["class","col-md-3 balance-btn",4,"ngIf"],[1,"col-md-3","balance-btn"],["type","button",1,"btn","btn-new-primary","w-100",3,"click"],["type","checkbox",3,"ngModel","ngModelChange","change"],["type","checkbox","name","chkExtraItem",3,"disabled","ngModel","change","ngModelChange"],["mode","decimal",3,"name","ngModel","min","max","maxlength","style","ngModelChange","onInput","onBlur",4,"ngIf"],["name","txtItemWiseDiscountPer","mode","decimal",3,"ngModel","min","max","maxlength","disabled","ngModelChange","onInput","onBlur"],["name","txtItemWiseDiscountAmount","mode","decimal",3,"ngModel","disabled","min","max","maxlength","ngModelChange","onInput","onBlur"],[1,"col-md-5"],["type","number","name","txtItemWiseNightCount","min","1","max","col.NightCount",2,"text-align","center","width","40px",3,"ngModel","ngModelChange","keypress","change"],[1,"col-md-2"],["type","number","name","txtItemWiseRoomCount","min","1","max","col.RoomCount",2,"text-align","center","width","40px",3,"ngModel","ngModelChange","keypress","change"],["mode","decimal",3,"name","ngModel","min","max","maxlength","ngModelChange","onInput","onBlur"],[2,"display","none"],[1,"bold"],["colspan","2"],["type","text","name","txtCreditNoteNumber","pInputText","",3,"disabled","ngModel","ngModelChange"],["class","text-center",4,"ngIf"],["colspan","2",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[1,"text-center"],["name","txtCreditNoteTranAmount","mode","decimal",3,"ngModel","min","max","ngModelChange","onBlur"],["type","text","pInputText","","name","txtRequestedBy","minlength","3","maxlength","150",1,"ref-input",3,"ngModel","ngModelChange"],["required","true","name","txtReferredBy","optionLabel","Name","optionValue","Name","placeholder","Select Authorized Name",3,"options","ngModel","showClear","filter","ngModelChange"],["colspan","2",1,"text-left"],["colspan","6",1,"text-center"],["type","text","pInputText","","name","txtPIEditGenRemarks","minlength","3","maxlength","150",1,"ref-input",3,"ngModel","ngModelChange"],["type","button","id","btnRazorPayCloseModal","aria-label","Close",1,"close",3,"click"],[3,"OrderRes","ItemPriceRes","SlotBookingIdSelected","IsSelectedItem","UserRes","BillWiseDiscountPer","ReferredBy","PayRequestFrom","GetPaymentStatusEmit"],["type","button","id","btnWLPayCloseModal","aria-label","Close",1,"close",3,"click"],[3,"WLOrderRes","ItemPriceRes","SlotBookingIdSelected","IsSelectedItem","UserRes","BillWiseDiscountPer","ReferredBy","PayRequestFrom","GetPaymentStatusEmit"],["type","button","id","btnPaymentMethodModel","aria-label","Close",1,"close",3,"click"],["optionLabel","TenderName","optionValue","ACID","placeholder","Please select payment option",3,"options","ngModel","onChange","ngModelChange"],[1,"col-md-12","text-right","bold"],["id","dvCreditTender",4,"ngIf"],["id","dvCashTender",4,"ngIf"],["id","dvCardTender",4,"ngIf"],["id","dvBankTfTender",4,"ngIf"],["id","dvChequeTender",4,"ngIf"],["class","row mb-3 m-2",4,"ngIf"],["id","dvRemarks"],["class","row mt-3",4,"ngIf"],["id","dvCreditTender"],[1,"row","mb-3"],[1,"col-md-3"],[1,"required",2,"color","red"],[1,"col-md-9"],["name","txtCreditAmount","mode","decimal",3,"ngModel","min","max","ngModelChange"],["id","dvCashTender"],[1,"mt-2","mb-2"],["name","txtCashAmount","mode","decimal",3,"ngModel","min","max","ngModelChange"],["inputId","icon",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange"],["CashRecdDate",""],["id","dvCardTender"],["type","text","name","txtCardNumber","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtCardHolderName","pInputText","",3,"ngModel","ngModelChange"],["CardRecdDate",""],["name","txtCardAmount","mode","decimal",3,"ngModel","min","max","ngModelChange"],["id","dvBankTfTender"],["name","txtBankTFAmount","disabled","","mode","decimal",3,"ngModel","min","max","ngModelChange"],["type","text","pInputText","",3,"name","ngModel","ngModelChange"],["BankDepRecdDate",""],["mode","decimal",3,"name","ngModel","min","max","onInput","onBlur","ngModelChange"],["id","dvChequeTender"],["type","text","name","txtChequeBankName","pInputText","",3,"ngModel","ngModelChange"],["appendTo","body","inputId","icon",1,"iconcal",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange"],["name","txtChequeAmount","mode","decimal",3,"ngModel","min","max","ngModelChange"],["type","text","name","txtChequeHolderName","pInputText","",3,"ngModel","ngModelChange"],[1,"row","mb-3","m-2"],[1,"col-md-3","bold"],["type","file","id","AttBankslip1","name","AttMedicalTest1","accept",".JPEG,.JPG,.PNG,.PDF",1,"custom-file-upload","mr-2",3,"change"],["AttMedicalTest1",""],["type","text","name","txtRemarks","pInputText","",3,"ngModel","ngModelChange"],["id","btnRecivePaymentClose","type","button","matTooltip","close","aria-label","Close",1,"close-btn",3,"click"],[1,"modal-body","p-1"],[1,"row","m-0"],[1,"col-md-6"],["name","txtCreditAmount","mode","decimal",3,"ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onInput"],[1,"row","m-0","mb-2"],["id","dvTrustDetails",4,"ngIf"],["type","button","id","btnCloseCreditModel","name","btnCloseCreditModel",1,"btn","btn-new-secondary",3,"click"],[1,"row","m-0","mb-3"],[1,"row","mt-3","mb-3"],[1,"col-md-1","mt-1","pt-2","bold"],["BankDepRecdDatecr",""],["inputId","icon",1,"iconcal",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange"],["id","dvTrustDetails"],["optionLabel","TrustName","optionValue","TrustMasterId","placeholder","Select Trust",3,"options","ngModel","filter","showClear","ngModelChange"],["optionLabel","MemberTypeName","optionValue","TrustMemberTypeMasterId","placeholder","Select Trust Member Type",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","MemberShip Number",3,"ngModel","ngModelChange"],["name","txtRefundCreditAmount","mode","decimal",3,"ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange"],["optionLabel","TenderName","optionValue","ACID","placeholder","Please select Refund Mode",3,"options","ngModel","filter","showClear","ngModelChange"],["class","row mb-3","id","dvBankTransferRefund",4,"ngIf"],["class","row mb-3","id","dvCashRefund",4,"ngIf"],["type","text","name","txtRemarksRefund","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtApprovedByRefund","pInputText","",3,"ngModel","ngModelChange"],["id","dvBankTransferRefund",1,"row","mb-3"],["type","text","name","txtAccNumber","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtAccHolderName","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtIFSCCode","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtBankName","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtTransactionIdRefund","pInputText","",3,"ngModel","ngModelChange"],["id","dvCashRefund",1,"row","mb-3"],["appendTo","body","inputId","icon","dateFormat","dd-mm-yy",1,"iconcal",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","readonlyInput","ngModelChange"],[3,"clinicId"],[2,"width","100%","overflow-x","auto","overflow-y","auto"],[2,"width","100%"],[3,"IsLetterhead","IsNgxPrint","onselectedLetterhead"],["id","print-section",1,"row"],[3,"slotBookingId","IsGST","IsLetterhead","heading"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","font-size","15px"],["cellpadding","0","cellspacing","3",2,"width","100%","margin","0 auto","box-sizing","border-box","border","1px solid #d3d3d3","margin-top","10px"],["align","Center"],[2,"background","#d3d3d3"],["align","Center",2,"padding","6px"],[2,"padding","6px","text-align","right"],["colspan","5","align","right",2,"padding","2px"],["colspan","5"],["colspan","5","align","right",2,"padding","20px 4px","border-top","1px solid #f1f1f1"],["align","center",2,"text-align","center","padding","6px 0","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],["align","center",2,"text-align","center","padding","6px  0px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],["align","right",2,"text-align","right","padding","6px 0px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],["align","right",2,"text-align","center","padding","6px 0px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],[3,"slotBookingId","IsGST","IsLetterhead"],[3,"SelectedSlotBookingId","SelectedVCHRNO","SelectedPhiscalID","SelectedDivision","InvType"],[3,"SlotBookingIdSelected","InvoiceNumberSelected","PhiscalIdSelected","DivisionSelected"],[3,"slotBookingId","SelectedVCHRNO","SelectedPhiscalID","SelectedDivision"],[3,"slotBookingId","IsVisitor"],[3,"SlotBookingIdSelected","TIProvisionalNo","TIProvisionalDate","RemainingAmount"]],template:function(t,e){if(1&t){const t=c.Zb();c.Sc(0,W,8,2,"div",0),c.Sc(1,j,1,0,"hr",1),c.Yb(2,"div",2),c.Sc(3,V,8,2,"div",3),c.Sc(4,Z,3,0,"div",3),c.Sc(5,G,3,0,"div",4),c.Sc(6,z,4,7,"div",5),c.Sc(7,tt,3,8,"div",5),c.Sc(8,et,2,1,"div",4),c.Sc(9,it,3,0,"div",4),c.Xb(),c.Sc(10,lt,33,7,"div",6),c.Sc(11,bt,20,12,"div",7),c.Sc(12,It,16,7,"div",8),c.Sc(13,Ft,3,2,"ng-template",null,9,c.Tc),c.Sc(15,Vt,11,4,"div",10),c.Sc(16,oe,9,6,"ng-template",null,11,c.Tc),c.Sc(18,me,9,5,"ng-template",null,12,c.Tc),c.Sc(20,Ae,3,1,"ng-template",null,13,c.Tc),c.Sc(22,Oe,3,1,"ng-template",null,14,c.Tc),c.Sc(24,We,2,1,"ng-template",null,15,c.Tc),c.Yb(26,"button",16),c.ic("click",function(){c.Lc(t);const i=c.Ic(30);return e.openNewExtraItem(i)}),c.Xb(),c.Yb(27,"div",17),c.Yb(28,"div"),c.Sc(29,hi,105,38,"ng-template",null,18,c.Tc),c.Xb(),c.Xb(),c.Yb(31,"button",19),c.ic("click",function(){c.Lc(t);const i=c.Ic(35);return e.openNew(i)}),c.Xb(),c.Yb(32,"div",17),c.Yb(33,"div"),c.Sc(34,mi,13,8,"ng-template",null,20,c.Tc),c.Xb(),c.Xb(),c.Yb(36,"button",21),c.ic("click",function(){c.Lc(t);const i=c.Ic(40);return e.openNew(i)}),c.Xb(),c.Yb(37,"div",17),c.Yb(38,"div"),c.Sc(39,pi,13,8,"ng-template",null,22,c.Tc),c.Xb(),c.Xb(),c.Yb(41,"button",23),c.ic("click",function(){c.Lc(t);const i=c.Ic(45);return e.openPaymentMethod(i)}),c.Xb(),c.Yb(42,"div",17),c.Yb(43,"div"),c.Sc(44,Pi,29,16,"ng-template",null,24,c.Tc),c.Xb(),c.Xb(),c.Yb(46,"button",25),c.ic("click",function(){c.Lc(t);const i=c.Ic(50);return e.openCRNoteModel(i)}),c.Xb(),c.Yb(47,"div",17),c.Yb(48,"div"),c.Sc(49,Vi,32,21,"ng-template",null,26,c.Tc),c.Xb(),c.Xb(),c.Yb(51,"p-dialog",27),c.ic("visibleChange",function(t){return e.ShowPaymentRefundMethodModel=t}),c.Sc(52,Hi,26,25,"ng-template",28),c.Sc(53,$i,1,1,"ng-template",29),c.Xb(),c.Yb(54,"p-dialog",30),c.ic("visibleChange",function(t){return e.ShowColonHydroModel=t}),c.Sc(55,zi,2,1,"div",1),c.Xb(),c.Yb(56,"p-dialog",31),c.ic("visibleChange",function(t){return e.showModalRoomCategorySelect=t}),c.Sc(57,Ki,2,0,"ng-template",32),c.Tb(58,"hr",33),c.Sc(59,tn,11,1,"ng-template",28),c.Tb(60,"hr",33),c.Sc(61,en,0,0,"ng-template",29),c.Xb(),c.Yb(62,"p-dialog",34),c.ic("visibleChange",function(t){return e.ShowEstimetedBillListModel=t}),c.Sc(63,sn,2,1,"div",1),c.Xb(),c.Sc(64,on,34,11,"ng-template",null,35,c.Tc),c.Yb(66,"p-dialog",36),c.ic("visibleChange",function(t){return e.ShowPerformaInvoiceListModel=t}),c.Sc(67,rn,2,1,"div",1),c.Xb(),c.Sc(68,dn,58,26,"ng-template",null,37,c.Tc),c.Yb(70,"p-dialog",38),c.ic("visibleChange",function(t){return e.ShowPrintPaymentVoucherModel=t}),c.Sc(71,bn,2,1,"ng-template",32),c.Sc(72,un,2,5,"div",1),c.Xb(),c.Yb(73,"p-dialog",36),c.ic("visibleChange",function(t){return e.ShowPrintProfileModel=t}),c.Sc(74,hn,2,4,"div",1),c.Xb(),c.Yb(75,"p-dialog",39),c.ic("visibleChange",function(t){return e.ShowTransactionDetailsModel=t}),c.Sc(76,mn,2,4,"div",1),c.Xb(),c.Yb(77,"p-dialog",40),c.ic("visibleChange",function(t){return e.ShowInvoiceListModel=t}),c.Sc(78,pn,2,2,"div",1),c.Xb(),c.Yb(79,"p-dialog",41),c.ic("visibleChange",function(t){return e.ShowPreInvoiceModel=t}),c.Sc(80,gn,2,4,"div",1),c.Xb()}2&t&&(c.tc("ngIf",e.UserTypeCurre===e.UserTypes.SuperAdmin),c.Fb(1),c.tc("ngIf",e.UserTypeCurre===e.UserTypes.SuperAdmin),c.Fb(2),c.tc("ngIf",e.IsVistorBilling),c.Fb(1),c.tc("ngIf","Visitor"==e.CustomerType&&""!=e.VisitorSelected&&null!=e.VisitorSelected&&null!=e.VisitorSelected),c.Fb(1),c.tc("ngIf","Patient"==e.CustomerType),c.Fb(1),c.tc("ngIf","Patient"==e.CustomerType&&!e.SearchByMrNo),c.Fb(1),c.tc("ngIf","Patient"==e.CustomerType&&e.SearchByMrNo),c.Fb(1),c.tc("ngIf","Patient"==e.CustomerType),c.Fb(1),c.tc("ngIf","Patient"==e.CustomerType),c.Fb(1),c.tc("ngIf","Visitor"==e.CustomerType),c.Fb(1),c.tc("ngIf",null!=e.userSelected&&""!=e.userSelected&&"Patient"==e.CustomerType),c.Fb(1),c.tc("ngIf",""!==e.userSelected&&null!=e.userSelected||"Visitor"==e.CustomerType),c.Fb(3),c.tc("ngIf",""!==e.userSelected&&null!=e.userSelected&&"Patient"==e.CustomerType),c.Fb(36),c.Pc(c.yc(69,In)),c.tc("modal",!0)("visible",e.ShowPaymentRefundMethodModel),c.Fb(3),c.Pc(c.yc(70,fn)),c.tc("visible",e.ShowColonHydroModel)("modal",!0)("closeOnEscape",!1)("closable",!0)("draggable",!0)("resizable",!0),c.Fb(1),c.tc("ngIf",e.ShowColonHydroModel),c.Fb(1),c.Pc(c.yc(71,vn)),c.tc("visible",e.showModalRoomCategorySelect)("modal",!0)("closeOnEscape",!1)("closable",!1)("draggable",!1),c.Fb(6),c.Pc(c.yc(72,In)),c.tc("modal",!0)("visible",e.ShowEstimetedBillListModel),c.Fb(1),c.tc("ngIf",e.ShowEstimetedBillListModel),c.Fb(3),c.Pc(c.yc(73,In)),c.tc("modal",!0)("visible",e.ShowPerformaInvoiceListModel),c.Fb(1),c.tc("ngIf",e.ShowPerformaInvoiceListModel),c.Fb(3),c.Pc(c.yc(74,In)),c.tc("modal",!0)("visible",e.ShowPrintPaymentVoucherModel),c.Fb(2),c.tc("ngIf",e.ShowPrintPaymentVoucherModel),c.Fb(1),c.Pc(c.yc(75,In)),c.tc("modal",!0)("visible",e.ShowPrintProfileModel),c.Fb(1),c.tc("ngIf",e.ShowPrintProfileModel),c.Fb(1),c.Pc(c.yc(76,In)),c.tc("modal",!0)("visible",e.ShowTransactionDetailsModel)("baseZIndex",1e4),c.Fb(1),c.tc("ngIf",e.ShowTransactionDetailsModel),c.Fb(1),c.Pc(c.yc(77,In)),c.tc("modal",!0)("visible",e.ShowInvoiceListModel),c.Fb(1),c.tc("ngIf",e.ShowInvoiceListModel),c.Fb(1),c.Pc(c.yc(78,In)),c.tc("modal",!0)("visible",e.ShowPreInvoiceModel),c.Fb(1),c.tc("ngIf",e.ShowPreInvoiceModel))},directives:[m.p,p.a,h.i,g.a,I.a,u.o,u.r,f.a,v.a,u.a,u.b,u.w,u.u,u.k,u.j,C.b,C.a,m.t,S.c,T.a,y.a,M.a,A.a,R.a,T.b,D.a,S.e,S.d,P.a,m.o,u.t,Y.a,X.a,U.a,N.a,x.a,B.a,w.a,E.a,k.a,L.a,F.a],pipes:[m.g,m.f],styles:[""]}),t})();function Sn(t){var e=t.reduce((t,e)=>(t[e.MCODE]=(t[e.MCODE]||0)+1,t),{});return Object.values(e).some(t=>t>1)}}}]);