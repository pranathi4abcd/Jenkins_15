!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=r(e);if(t){var l=r(this).constructor;i=Reflect.construct(n,arguments,l)}else i=n.apply(this,arguments);return o(this,i)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20,150],{dPl2:function(e,t,i){"use strict";i.d(t,"a",function(){return R}),i.d(t,"b",function(){return D}),i.d(t,"c",function(){return P});var n=i("fXoL"),l=i("ofXK"),o=i("xlun"),r=i("Q4Mo"),c=i("7zfz"),d=i("YyRF");function u(e,t){1&e&&n.Ub(0)}function b(e,t){if(1&e&&(n.Wb(0),n.Sc(1,u,1,0,"ng-container",3),n.Vb()),2&e){var i=n.mc(2);n.Fb(1),n.tc("ngTemplateOutlet",i.contentTemplate)}}function h(e,t){if(1&e&&(n.Yb(0,"div",1),n.rc(1),n.Sc(2,b,2,1,"ng-container",2),n.Xb()),2&e){var i=n.mc();n.tc("hidden",!i.selected),n.Gb("id",i.id)("aria-hidden",!i.selected)("aria-labelledby",i.id+"-label"),n.Fb(2),n.tc("ngIf",i.contentTemplate&&(i.cache?i.loaded:i.selected))}}var m=["*"],v=["navbar"],f=["inkbar"];function p(e,t){if(1&e&&n.Tb(0,"span",16),2&e){var i=n.mc(3).$implicit;n.tc("ngClass",i.leftIcon)}}function g(e,t){if(1&e&&n.Tb(0,"span",17),2&e){var i=n.mc(3).$implicit;n.tc("ngClass",i.rightIcon)}}function I(e,t){if(1&e&&(n.Wb(0),n.Sc(1,p,1,1,"span",13),n.Yb(2,"span",14),n.Uc(3),n.Xb(),n.Sc(4,g,1,1,"span",15),n.Vb()),2&e){var i=n.mc(2).$implicit;n.Fb(1),n.tc("ngIf",i.leftIcon),n.Fb(2),n.Vc(i.header),n.Fb(1),n.tc("ngIf",i.rightIcon)}}function C(e,t){1&e&&n.Ub(0)}function S(e,t){if(1&e){var i=n.Zb();n.Yb(0,"span",18),n.ic("click",function(e){n.Lc(i);var t=n.mc(2).$implicit;return n.mc().close(e,t)}),n.Xb()}}var y=function(e,t){return{"p-highlight":e,"p-disabled":t}};function T(e,t){if(1&e){var i=n.Zb();n.Yb(0,"li",8),n.Yb(1,"a",9),n.ic("click",function(e){n.Lc(i);var t=n.mc().$implicit;return n.mc().open(e,t)})("keydown.enter",function(e){n.Lc(i);var t=n.mc().$implicit;return n.mc().open(e,t)}),n.Sc(2,I,5,3,"ng-container",10),n.Sc(3,C,1,0,"ng-container",11),n.Sc(4,S,1,0,"span",12),n.Xb(),n.Xb()}if(2&e){var l=n.mc().$implicit;n.Hb(l.headerStyleClass),n.tc("ngClass",n.Ac(16,y,l.selected,l.disabled))("ngStyle",l.headerStyle),n.Fb(1),n.tc("pTooltip",l.tooltip)("tooltipPosition",l.tooltipPosition)("positionStyle",l.tooltipPositionStyle)("tooltipStyleClass",l.tooltipStyleClass),n.Gb("id",l.id+"-label")("aria-selected",l.selected)("aria-controls",l.id)("aria-selected",l.selected)("tabindex",l.disabled?null:"0"),n.Fb(1),n.tc("ngIf",!l.headerTemplate),n.Fb(1),n.tc("ngTemplateOutlet",l.headerTemplate),n.Fb(1),n.tc("ngIf",l.closable)}}function M(e,t){1&e&&n.Sc(0,T,5,19,"li",7),2&e&&n.tc("ngIf",!t.$implicit.closed)}var A=0,R=function(){var e=function(){function e(t,i,n){a(this,e),this.viewContainer=i,this.cd=n,this.cache=!0,this.tooltipPosition="top",this.tooltipPositionStyle="absolute",this.id="p-tabpanel-"+A++,this.tabView=t}return s(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.templates.forEach(function(t){switch(t.getType()){case"header":e.headerTemplate=t.template;break;case"content":default:e.contentTemplate=t.template}})}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e,this.loaded||this.cd.detectChanges(),e&&(this.loaded=!0)}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this.tabView.cd.markForCheck()}},{key:"header",get:function(){return this._header},set:function(e){this._header=e,this.tabView.cd.markForCheck()}},{key:"ngOnDestroy",value:function(){this.view=null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Sb(Object(n.X)(function(){return D})),n.Sb(n.S),n.Sb(n.h))},e.\u0275cmp=n.Mb({type:e,selectors:[["p-tabPanel"]],contentQueries:function(e,t,i){var l;(1&e&&n.Lb(i,c.i,0),2&e)&&(n.Hc(l=n.jc())&&(t.templates=l))},inputs:{cache:"cache",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",selected:"selected",disabled:"disabled",header:"header",closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",leftIcon:"leftIcon",rightIcon:"rightIcon",tooltip:"tooltip",tooltipStyleClass:"tooltipStyleClass"},ngContentSelectors:m,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(e,t){1&e&&(n.sc(),n.Sc(0,h,3,5,"div",0)),2&e&&n.tc("ngIf",!t.closed)},directives:[l.p,l.t],encapsulation:2}),e}(),D=function(){var e=function(){function e(t,i){a(this,e),this.el=t,this.cd=i,this.orientation="top",this.onChange=new n.o,this.onClose=new n.o,this.activeIndexChange=new n.o}return s(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.initTabs(),this.tabPanels.changes.subscribe(function(t){e.initTabs()})}},{key:"ngAfterViewChecked",value:function(){this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}},{key:"initTabs",value:function(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}},{key:"open",value:function(e,t){if(t.disabled)e&&e.preventDefault();else{if(!t.selected){var i=this.findSelectedTab();i&&(i.selected=!1),this.tabChanged=!0,t.selected=!0;var n=this.findTabIndex(t);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(n),this.onChange.emit({originalEvent:e,index:n})}e&&e.preventDefault()}}},{key:"close",value:function(e,t){var i=this;this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(t),close:function(){i.closeTab(t)}}):(this.closeTab(t),this.onClose.emit({originalEvent:e,index:this.findTabIndex(t)})),e.stopPropagation()}},{key:"closeTab",value:function(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(var t=0;t<this.tabs.length;t++){var i=this.tabs[t];if(!i.closed&&!e.disabled){i.selected=!0;break}}}e.closed=!0}}},{key:"findSelectedTab",value:function(){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}},{key:"findTabIndex",value:function(e){for(var t=-1,i=0;i<this.tabs.length;i++)if(this.tabs[i]==e){t=i;break}return t}},{key:"getBlockableElement",value:function(){return this.el.nativeElement.children[0]}},{key:"activeIndex",get:function(){return this._activeIndex},set:function(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0)}},{key:"updateInkBar",value:function(){var e=d.b.findSingle(this.navbar.nativeElement,"li.p-highlight");this.inkbar.nativeElement.style.width=d.b.getWidth(e)+"px",this.inkbar.nativeElement.style.left=d.b.getOffset(e).left-d.b.getOffset(this.navbar.nativeElement).left+"px"}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Sb(n.m),n.Sb(n.h))},e.\u0275cmp=n.Mb({type:e,selectors:[["p-tabView"]],contentQueries:function(e,t,i){var l;(1&e&&n.Lb(i,R,0),2&e)&&(n.Hc(l=n.jc())&&(t.tabPanels=l))},viewQuery:function(e,t){var i;(1&e&&(n.cd(v,1),n.cd(f,1)),2&e)&&(n.Hc(i=n.jc())&&(t.navbar=i.first),n.Hc(i=n.jc())&&(t.inkbar=i.first))},inputs:{orientation:"orientation",activeIndex:"activeIndex",style:"style",styleClass:"styleClass",controlClose:"controlClose"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:m,decls:8,vars:5,consts:[[3,"ngClass","ngStyle"],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],[1,"p-tabview-panels"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown.enter"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tabview-close pi pi-times",3,"click",4,"ngIf"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-close","pi","pi-times",3,"click"]],template:function(e,t){1&e&&(n.sc(),n.Yb(0,"div",0),n.Yb(1,"ul",1,2),n.Sc(3,M,1,1,"ng-template",3),n.Tb(4,"li",4,5),n.Xb(),n.Yb(6,"div",6),n.rc(7),n.Xb(),n.Xb()),2&e&&(n.Hb(t.styleClass),n.tc("ngClass","p-tabview p-component")("ngStyle",t.style),n.Fb(3),n.tc("ngForOf",t.tabs))},directives:[l.n,l.q,l.o,l.p,r.a,o.a,l.t],styles:[".p-tabview-nav{display:flex;flex-wrap:wrap;list-style-type:none;margin:0;padding:0}.p-tabview-nav-link{-ms-user-select:none;-webkit-user-select:none;align-items:center;cursor:pointer;display:flex;overflow:hidden;position:relative;text-decoration:none;user-select:none}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1}.p-tabview-close{z-index:1}"],encapsulation:2,changeDetection:0}),e}(),P=function(){var e=function e(){a(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Qb({type:e}),e.\u0275inj=n.Pb({imports:[[l.c,c.j,o.b,r.b],c.j]}),e}()},hQ1B:function(e,t,i){"use strict";i.r(t),i.d(t,"ExtraItemConsumptionModule",function(){return Z});var n,l,o,r,c=i("ofXK"),s=i("tyNb"),d=i("zXHC"),u=i("fXoL"),b=[{path:"",component:d.a}],h=((n=function e(){a(this,e)}).\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.Qb({type:n}),n.\u0275inj=u.Pb({imports:[[s.l.forChild(b)],s.l]}),n),m=i("3Pt+"),v=i("rEr+"),f=i("jIHw"),p=i("Q4Mo"),g=i("arFO"),I=i("7kUa"),C=i("eO1q"),S=i("/RsI"),y=i("Nf9I"),T=i("Ks7X"),M=i("LuMj"),A=i("z8Lm"),R=i("1SLH"),D=i("lVkt"),P=i("ELi9"),Y=i("Qcri"),X=i("QbTu"),U=i("fCr0"),N=i("g9iH"),x=i("BpGo"),k=i("T2Aj"),B=i("dPl2"),w=i("9XlL"),E=i("ycwT"),L=i("kcK2"),O=[{path:"",component:i("t9DX").a}],F=((l=function e(){a(this,e)}).\u0275fac=function(e){return new(e||l)},l.\u0275mod=u.Qb({type:l}),l.\u0275inj=u.Pb({imports:[[s.l.forChild(O)],s.l]}),l),_=i("m1XX"),W=i("QoE7"),j=((o=function e(){a(this,e)}).\u0275fac=function(e){return new(e||o)},o.\u0275mod=u.Qb({type:o}),o.\u0275inj=u.Pb({imports:[[c.c,F,_.b,w.a,E.a,W.a]]}),o),V=i("V5BG"),Z=((r=function e(){a(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275mod=u.Qb({type:r}),r.\u0275inj=u.Pb({imports:[[c.c,h,m.i,m.v,v.f,f.c,p.b,g.b,I.b,C.b,S.b,y.b,T.b,M.b,A.b,R.b,D.b,P.a,Y.a,X.a,U.CommonModuleModule,N.b,x.a,k.a,B.c,w.a,E.a,L.a,j,V.b]]}),r)},t9DX:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var o=n("Nach"),r=n("CwUn"),c=n("fXoL"),d=n("dcBc"),u=n("G+wY"),b=n("NLkC"),h=n("Q8Cd"),m=n("sCq/"),v=n("ofXK"),f=n("Yh3i");function p(e,t){if(1&e&&(c.Yb(0,"table",22),c.Yb(1,"tbody"),c.Yb(2,"tr",8),c.Yb(3,"td",27),c.Yb(4,"strong"),c.Uc(5," Bill of Provisional No: "),c.Yb(6,"span"),c.Uc(7),c.Xb(),c.Xb(),c.Xb(),c.Yb(8,"td",28),c.Yb(9,"b"),c.Uc(10,"Bill of Provisional Date: "),c.Xb(),c.Yb(11,"span"),c.Uc(12),c.nc(13,"date"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb()),2&e){var i=c.mc();c.Fb(7),c.Vc(i.TIProvisionalNo),c.Fb(5),c.Vc(c.pc(13,2,i.TIProvisionalDate,i.customDateFormat.DEF_DATE))}}function g(e,t){1&e&&(c.Yb(0,"th",9),c.Uc(1,"Dis %"),c.Xb())}function I(e,t){1&e&&(c.Yb(0,"th",9),c.Uc(1," Dis Amount"),c.Xb())}function C(e,t){if(1&e&&(c.Yb(0,"td",29),c.Uc(1),c.nc(2,"number"),c.Xb()),2&e){var i=c.mc().$implicit;c.Fb(1),c.Wc(" ",c.pc(2,1,i.IDiscountPercentage,"1.1-2"),"")}}function S(e,t){if(1&e&&(c.Yb(0,"td",29),c.Uc(1),c.nc(2,"number"),c.Xb()),2&e){var i=c.mc().$implicit;c.Fb(1),c.Wc(" ",c.pc(2,1,i.IDiscountAmount,"1.1-2")," ")}}function y(e,t){if(1&e&&(c.Yb(0,"tr"),c.Yb(1,"td",29),c.Uc(2),c.Xb(),c.Yb(3,"td",29),c.Uc(4),c.Xb(),c.Yb(5,"td",29),c.Uc(6),c.Xb(),c.Yb(7,"td",29),c.Uc(8),c.Xb(),c.Yb(9,"td",29),c.Uc(10),c.nc(11,"number"),c.Xb(),c.Sc(12,C,3,4,"td",30),c.Sc(13,S,3,4,"td",30),c.Yb(14,"td",29),c.Uc(15),c.nc(16,"number"),c.Xb(),c.Xb()),2&e){var i=t.$implicit,n=t.index,l=c.mc();c.Fb(2),c.Wc(" ",n+1,""),c.Fb(2),c.Wc(" ",i.HSNCODE,""),c.Fb(2),c.Wc(" ",null==i.FGENERIC||null==i.FGENERIC||"0 x 0"==i.FGENERIC||0==l.IsRoomDesc?i.Description:"Treatment ("+i.Description+")",""),c.Fb(2),c.Wc(" ",i.Qty,""),c.Fb(2),c.Wc(" ",c.pc(11,8,i.MRP,"1.1-2"),""),c.Fb(2),c.tc("ngIf",l.ItemWiseTotalDisAmount>0),c.Fb(1),c.tc("ngIf",l.ItemWiseTotalDisAmount>0),c.Fb(2),c.Wc(" ",c.pc(16,11,i.MRP*i.Qty-i.IDiscountAmount,"1.1-2"),"")}}function T(e,t){1&e&&c.Tb(0,"td",31)}function M(e,t){1&e&&c.Tb(0,"td",31)}function A(e,t){1&e&&(c.Yb(0,"th",35),c.Uc(1,"Transaction By"),c.Xb())}function R(e,t){if(1&e&&(c.Yb(0,"td",40),c.Uc(1),c.Xb()),2&e){var i=c.mc().$implicit;c.Fb(1),c.Wc(" ",i.DepositPatient," ")}}function D(e,t){if(1&e&&(c.Yb(0,"tr"),c.Yb(1,"td",40),c.Uc(2),c.nc(3,"titlecase"),c.Xb(),c.Yb(4,"td",40),c.Uc(5),c.nc(6,"titlecase"),c.Xb(),c.Sc(7,R,2,1,"td",41),c.Yb(8,"td",40),c.Uc(9),c.Xb(),c.Yb(10,"td",40),c.Uc(11),c.nc(12,"date"),c.Xb(),c.Yb(13,"td",40),c.Uc(14),c.nc(15,"date"),c.Xb(),c.Yb(16,"td",40),c.Uc(17),c.nc(18,"number"),c.Xb(),c.Xb()),2&e){var i=t.$implicit,n=c.mc(3);c.Fb(2),c.Xc(" ",c.oc(3,8,i.TrnMode)," ","Bank Transfer"==i.TrnMode&&null!=i.BankName?" - "+i.BankName:""," "),c.Fb(3),c.Wc(" ",c.oc(6,10,i.InvType)," "),c.Fb(2),c.tc("ngIf",1==n.lsobjClinicMaster.IsShowTranPatient),c.Fb(2),c.Wc(" ",i.TransactionId," "),c.Fb(2),c.Wc(" ",c.pc(12,12,i.TrnDate,n.customDateFormat.DEF_DATE)," "),c.Fb(3),c.Wc(" ",c.pc(15,15,i.CreatedOn,n.customDateFormat.DEF_DATE)," "),c.Fb(3),c.Wc(" ",c.pc(18,18,"Refund"==i.InvType?-i.Amount:i.Amount,"1.1-2")," ")}}function P(e,t){if(1&e&&(c.Yb(0,"tr"),c.Yb(1,"th",42),c.Uc(2," Total Refund"),c.Xb(),c.Yb(3,"th",39),c.Uc(4),c.nc(5,"number"),c.Xb(),c.Xb()),2&e){var i=c.mc(3);c.Fb(1),c.tc("colSpan",1==i.lsobjClinicMaster.IsShowTranPatient?6:5),c.Fb(3),c.Wc(" ",c.pc(5,2,i.TotalRefund,"1.1-2"),"")}}function Y(e,t){if(1&e&&(c.Yb(0,"tr"),c.Yb(1,"th",42),c.Uc(2," Total Balance"),c.Xb(),c.Yb(3,"th",39),c.Uc(4),c.nc(5,"number"),c.Xb(),c.Xb()),2&e){var i=c.mc(3);c.Fb(1),c.tc("colSpan",1==i.lsobjClinicMaster.IsShowTranPatient?6:5),c.Fb(3),c.Wc(" ",c.pc(5,2,i.TotalReceive-(i.TotalReceive-(null==i.TrnMain[0]?null:i.TrnMain[0].NETAMNT)+(null==i.TrnMain[0]?null:i.TrnMain[0].NETAMNT)),"1.1-2"),"")}}function X(e,t){if(1&e&&(c.Yb(0,"table",33),c.Yb(1,"thead",7),c.Yb(2,"tr",34),c.Yb(3,"th",35),c.Uc(4,"Payment Mode"),c.Xb(),c.Yb(5,"th",35),c.Uc(6,"Type"),c.Xb(),c.Sc(7,A,2,0,"th",36),c.Yb(8,"th",35),c.Uc(9,"TransactionId"),c.Xb(),c.Yb(10,"th",35),c.Uc(11,"Transaction Date"),c.Xb(),c.Yb(12,"th",35),c.Uc(13,"Receipt Date"),c.Xb(),c.Yb(14,"th",35),c.Uc(15,"Amount"),c.Xb(),c.Xb(),c.Xb(),c.Yb(16,"tbody",7),c.Sc(17,D,19,21,"tr",12),c.Yb(18,"tr"),c.Yb(19,"th",37),c.Uc(20,"\xa0"),c.Xb(),c.Xb(),c.Yb(21,"tr"),c.Yb(22,"th",38),c.Uc(23," Total Receive"),c.Xb(),c.Yb(24,"th",39),c.Uc(25),c.nc(26,"number"),c.Xb(),c.Xb(),c.Sc(27,P,6,5,"tr",20),c.Sc(28,Y,6,5,"tr",20),c.Xb(),c.Xb()),2&e){var i=c.mc(2);c.Fb(7),c.tc("ngIf",1==i.lsobjClinicMaster.IsShowTranPatient),c.Fb(10),c.tc("ngForOf",i.TenderInfo),c.Fb(2),c.tc("colSpan",1==i.lsobjClinicMaster.IsShowTranPatient?7:6),c.Fb(3),c.tc("colSpan",1==i.lsobjClinicMaster.IsShowTranPatient?6:5),c.Fb(3),c.Wc(" ",c.pc(26,7,i.TotalReceive,"1.1-2"),""),c.Fb(2),c.tc("ngIf",i.TotalRefund>0&&!i.lsobjClinicMaster.IsTIBriefSummary),c.Fb(1),c.tc("ngIf",i.TenderInfo.length>0&&i.lsobjClinicMaster.IsTIBriefSummary)}}function U(e,t){if(1&e&&(c.Yb(0,"tr"),c.Yb(1,"td",32),c.Sc(2,X,29,10,"table",21),c.Xb(),c.Xb()),2&e){var i=c.mc();c.Fb(2),c.tc("ngIf",i.TenderInfo.length>0)}}function N(e,t){1&e&&(c.Yb(0,"table",22),c.Yb(1,"tbody"),c.Yb(2,"tr"),c.Yb(3,"td",35),c.Yb(4,"strong"),c.Uc(5,"Brief Summary"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb())}function x(e,t){if(1&e&&(c.Yb(0,"table",33),c.Yb(1,"thead",7),c.Yb(2,"tr",34),c.Yb(3,"th",35),c.Uc(4,"Added Rs"),c.Xb(),c.Yb(5,"th",35),c.Uc(6,"Concession Rs"),c.Xb(),c.Yb(7,"th",35),c.Uc(8,"Total Due Rs"),c.Xb(),c.Yb(9,"th",35),c.Uc(10,"Deposited Rs"),c.Xb(),c.Yb(11,"th",35),c.Uc(12,"Refund Rs"),c.Xb(),c.Yb(13,"th",35),c.Uc(14,"Balance Rs"),c.Xb(),c.Xb(),c.Xb(),c.Yb(15,"tbody",7),c.Yb(16,"tr"),c.Yb(17,"td",40),c.Uc(18),c.nc(19,"number"),c.Xb(),c.Yb(20,"td",40),c.Uc(21),c.nc(22,"number"),c.Xb(),c.Yb(23,"td",40),c.Uc(24),c.nc(25,"number"),c.Xb(),c.Yb(26,"td",40),c.Uc(27),c.nc(28,"number"),c.Xb(),c.Yb(29,"td",40),c.Uc(30," 0.0 "),c.Xb(),c.Yb(31,"td",40),c.Uc(32),c.nc(33,"number"),c.Xb(),c.Xb(),c.Xb(),c.Xb()),2&e){var i=c.mc();c.Fb(18),c.Wc(" ",c.pc(19,5,i.TotalAmount+i.TotalDiscount,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(22,8,i.TotalDiscount,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(25,11,i.TotalAmount,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(28,14,i.TotalReceive,"1.1-2")," "),c.Fb(5),c.Wc(" ",c.pc(33,17,i.TotalReceive-(i.TotalReceive-i.TotalAmount+i.TotalAmount),"1.1-2")," ")}}function k(e,t){1&e&&(c.Yb(0,"table",22),c.Yb(1,"tbody"),c.Yb(2,"tr"),c.Yb(3,"td",43),c.Yb(4,"strong"),c.Uc(5,"Bill Is Provisional"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb())}var B=function(){var e=function(e){i(n,e);var t=l(n);function n(e,i,l,r){var c;return a(this,n),(c=t.call(this)).cdRef=e,c._MasterServices=i,c._PatientServices=l,c._UtilityService=r,c.lsobjClinicMaster=JSON.parse(localStorage.getItem("objClinicMaster"))||null,c.TIProvisionalNo=null,c.TIProvisionalDate=new Date,c.customDateFormat=o.h,c.IsVisitor=!1,c.RemainingAmount=0,c.TrnMain=[],c.ProdList=[],c.ShowBatchExpiry=!1,c.lstItem=[],c.TotalAmount=0,c.ItemWiseTotalDisAmount=0,c.BillWiseDiscountPer=0,c.TenderInfo=[],c.TotalFlatDiscount=0,c.TotalDiscount=0,c.RoomNumber=0,c.LstRoomCountByMCode=[],c.IsRoomDesc=!0,c.TotalReceive=0,c.TotalRefund=0,c.IsLetterhead="false",c.TotalQuantity=0,c}return s(n,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.LoadInvoiceData()}},{key:"onselectedLetterhead",value:function(e){this.IsLetterhead=e}},{key:"LoadInvoiceData",value:function(){var e=this;this.TotalReceive=0,this.TotalRefund=0,this.TenderInfo=[],this.TrnMain=[],this.ProdList=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.getViewPerformaForHMSCombinedGrouped(this.SlotBookingIdSelected).subscribe(function(t){var i,n,l;if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var o=JSON.parse(t.actionResult.result);if(e.ProdList=o=o||[],(null===(i=e.ProdList.filter(function(e){return"Treatment/Medicated food charges"==e.DESCRIPTION||"Treatment Charges"==e.DESCRIPTION}))||void 0===i?void 0:i.length)>0&&(e.IsRoomDesc=!1),e.TotalAmount=0,e.cdRef.detectChanges(),e.ProdList.map(function(t){e.TotalQuantity=e.TotalQuantity+t.Qty,e.TotalAmount=e.TotalAmount+(t.MRP*t.Qty-t.IDiscountAmount),e.ItemWiseTotalDisAmount=e.ItemWiseTotalDisAmount+t.IDiscountAmount}),e.BillWiseDiscountPer=100*e.TotalFlatDiscount/e.TotalAmount,e.TotalDiscount=e.ItemWiseTotalDisAmount+e.TotalFlatDiscount,null!=t.actionResult.result3&&null!=t.actionResult.result3&&(null===(n=t.actionResult.result3)||void 0===n?void 0:n.length)>0){var r=JSON.parse(t.actionResult.result3);e.TenderInfo=r=r||[],(null===(l=e.TenderInfo)||void 0===l?void 0:l.length)>0&&(e.TenderInfo.map(function(t){"Receive"==t.InvType&&(e.TotalReceive=e.TotalReceive+parseFloat(t.Amount)),"Refund"==t.InvType&&(e.TotalRefund=e.TotalRefund+parseFloat(t.Amount))}),e.cdRef.detectChanges())}}e.cdRef.detectChanges()},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}}]),n}(r.a);return e.\u0275fac=function(t){return new(t||e)(c.Sb(c.h),c.Sb(d.a),c.Sb(u.a),c.Sb(b.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["app-pre-invoice-print"]],inputs:{SlotBookingIdSelected:"SlotBookingIdSelected",TIProvisionalNo:"TIProvisionalNo",TIProvisionalDate:"TIProvisionalDate",RemainingAmount:"RemainingAmount"},features:[c.Cb,c.Db],decls:77,vars:34,consts:[[3,"IsLetterhead","IsNgxPrint","onselectedLetterhead"],["id","print-section",1,"row"],[1,"col-md-12"],[3,"IsVisitor","slotBookingId","IsGroup","IsGST","IsLetterhead"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","font-size","15px"],["style","width: 100%; margin: 0 auto; box-sizing: border-box;","cellpadding","0","cellspacing","0",4,"ngIf"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","border","1px solid #d3d3d3","margin-top","10px","overflow-x","scroll"],["align","Center"],[2,"background-color","#d3d3d3"],[2,"padding","6px","border-left","1px solid #d3d3d3"],["style","padding: 6px;border-left: 1px solid #d3d3d3;",4,"ngIf"],[2,"padding","6px","border-left","1px solid #d3d3d3","border-right","1px solid #d3d3d3"],[4,"ngFor","ngForOf"],["colspan","3","align","right",2,"padding","2px"],[2,"padding","2px"],["colspan","2",4,"ngIf"],["align","right",2,"padding","2px"],["colspan","4","align","left",2,"padding","2px"],["align","right",2,"padding","2px","font-size","medium"],[2,"font-size","medium"],[4,"ngIf"],["style","width: 100%; margin: 0 auto; box-sizing: border-box; border: 1px solid #d3d3d3; margin-top: 5px;","cellpadding","0","cellspacing","0",4,"ngIf"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box"],[2,"width","100%","line-height","80px"],[2,"width","60%"],[2,"width","40%"],[1,"mt-3"],[2,"padding","5px"],[2,"text-align","right","padding","5px"],[2,"padding","6px 0","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3"],["style","padding: 6px 0; border-left: 1px solid #d3d3d3; border-bottom: 1px solid #d3d3d3;border-top: 1px solid #d3d3d3;",4,"ngIf"],["colspan","2"],["colspan","8"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","border","1px solid #d3d3d3","margin-top","5px"],[2,"background","#d3d3d3"],[2,"padding","6px"],["style","padding: 6px;",4,"ngIf"],[3,"colSpan"],[2,"padding","6px 10px","border-left","1px solid #d5d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3","text-align","right",3,"colSpan"],[2,"padding","6px 10px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3"],[2,"padding","6px 0","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],["style","padding: 6px 0; border-left: 1px solid #d3d3d3; border-bottom: 1px solid #d3d3d3;",4,"ngIf"],[2,"padding","6px 10px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3","text-align","right",3,"colSpan"],["align","Center",2,"padding","6px"]],template:function(e,t){1&e&&(c.Yb(0,"app-print-access-header",0),c.ic("onselectedLetterhead",function(e){return t.onselectedLetterhead(e)}),c.Xb(),c.Yb(1,"div",1),c.Yb(2,"div",2),c.Tb(3,"app-print-header",3),c.Yb(4,"table",4),c.Yb(5,"tbody"),c.Yb(6,"tr"),c.Sc(7,p,14,5,"table",5),c.Yb(8,"table",6),c.Yb(9,"thead",7),c.Yb(10,"tr",8),c.Yb(11,"th",9),c.Uc(12,"S.No"),c.Xb(),c.Yb(13,"th",9),c.Uc(14,"HSN/SAC"),c.Xb(),c.Yb(15,"th",9),c.Uc(16,"Description"),c.Xb(),c.Yb(17,"th",9),c.Uc(18,"QTY"),c.Xb(),c.Yb(19,"th",9),c.Uc(20,"MRP"),c.Xb(),c.Sc(21,g,2,0,"th",10),c.Sc(22,I,2,0,"th",10),c.Yb(23,"th",11),c.Uc(24," Amount"),c.Xb(),c.Xb(),c.Xb(),c.Yb(25,"tbody",7),c.Sc(26,y,17,14,"tr",12),c.Yb(27,"tr"),c.Yb(28,"td",13),c.Yb(29,"b"),c.Uc(30,"No of item:"),c.Xb(),c.Xb(),c.Yb(31,"td",14),c.Uc(32),c.nc(33,"number"),c.Xb(),c.Sc(34,T,1,0,"td",15),c.Yb(35,"td",16),c.Yb(36,"b"),c.Uc(37,"Total Amount:"),c.Xb(),c.Xb(),c.Yb(38,"td"),c.Uc(39),c.nc(40,"number"),c.Xb(),c.Xb(),c.Yb(41,"tr"),c.Yb(42,"td",17),c.Yb(43,"b"),c.Uc(44,"Amount in words:"),c.Xb(),c.Uc(45),c.nc(46,"amountToWord"),c.Xb(),c.Sc(47,M,1,0,"td",15),c.Yb(48,"td",18),c.Yb(49,"b"),c.Uc(50,"Total Remaining:"),c.Xb(),c.Xb(),c.Yb(51,"td",19),c.Yb(52,"b"),c.Uc(53),c.nc(54,"number"),c.Xb(),c.Xb(),c.Xb(),c.Sc(55,U,3,1,"tr",20),c.Xb(),c.Xb(),c.Sc(56,N,6,0,"table",5),c.Sc(57,x,34,20,"table",21),c.Sc(58,k,6,0,"table",5),c.Yb(59,"table",22),c.Yb(60,"tbody"),c.Yb(61,"tr",23),c.Yb(62,"td",24),c.Yb(63,"b"),c.Uc(64,"Health Seeker's Signature: ................................"),c.Xb(),c.Xb(),c.Yb(65,"td",25),c.Yb(66,"b"),c.Uc(67,"Authorised Signatory: ................................"),c.Xb(),c.Xb(),c.Xb(),c.Yb(68,"tr"),c.Yb(69,"td",24),c.Yb(70,"b"),c.Uc(71,"Prepared By: .........................................................."),c.Xb(),c.Xb(),c.Yb(72,"td",25),c.Yb(73,"b"),c.Uc(74,"Checked By: ...................................................."),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Yb(75,"div",26),c.Yb(76,"app-print-access-header",0),c.ic("onselectedLetterhead",function(e){return t.onselectedLetterhead(e)}),c.Xb(),c.Xb()),2&e&&(c.tc("IsLetterhead",t.IsLetterhead)("IsNgxPrint",!0),c.Fb(3),c.tc("IsVisitor",t.IsVisitor)("slotBookingId",t.SlotBookingIdSelected)("IsGroup",!0)("IsGST",!0)("IsLetterhead",t.IsLetterhead),c.Fb(4),c.tc("ngIf",null!=t.TIProvisionalNo&&null!=t.TIProvisionalNo&&""!=t.TIProvisionalNo),c.Fb(14),c.tc("ngIf",t.ItemWiseTotalDisAmount>0),c.Fb(1),c.tc("ngIf",t.ItemWiseTotalDisAmount>0),c.Fb(4),c.tc("ngForOf",t.ProdList),c.Fb(6),c.Vc(c.pc(33,23,t.TotalQuantity,"1.0-0")),c.Fb(2),c.tc("ngIf",t.ItemWiseTotalDisAmount>0),c.Fb(5),c.Wc("",c.pc(40,26,t.TotalAmount,"1.1-2")," "),c.Fb(6),c.Wc(" ",c.oc(46,29,t.TotalAmount),""),c.Fb(2),c.tc("ngIf",t.ItemWiseTotalDisAmount>0),c.Fb(6),c.Vc(c.pc(54,31,t.RemainingAmount,"1.1-2")),c.Fb(2),c.tc("ngIf",t.TenderInfo.length>0),c.Fb(1),c.tc("ngIf",t.TenderInfo.length>0&&t.lsobjClinicMaster.IsTIBriefSummary),c.Fb(1),c.tc("ngIf",t.TenderInfo.length>0&&t.lsobjClinicMaster.IsTIBriefSummary),c.Fb(1),c.tc("ngIf",t.TenderInfo.length>0&&t.lsobjClinicMaster.IsTIBriefSummary),c.Fb(18),c.tc("IsLetterhead",t.IsLetterhead)("IsNgxPrint",!0))},directives:[h.a,m.a,v.p,v.o],pipes:[v.g,f.a,v.f,v.y],styles:[""]}),e}()},zXHC:function(t,n,o){"use strict";o.d(n,"a",function(){return An});var r=o("1kSV"),c=o("aeiD"),d=o("CwUn"),u=o("Nach"),b=o("fXoL"),h=o("tyNb"),m=o("dcBc"),v=o("G+wY"),f=o("NLkC"),p=o("3Pt+"),g=o("7zfz"),I=o("ofXK"),C=o("/RsI"),S=o("AAHA"),y=o("LuMj"),T=o("arFO"),M=o("V5BG"),A=o("dPl2"),R=o("rEr+"),D=o("jIHw"),P=o("z8Lm"),Y=o("g9iH"),X=o("Ks7X"),U=o("7kUa"),N=o("Q4Mo"),x=o("btFH"),k=o("Rtg/"),B=o("MHjV"),w=o("lVkt"),E=o("eO1q"),L=o("+Lcm"),O=o("Q8Cd"),F=o("sCq/"),_=o("KkSF"),W=o("jhiP"),j=o("9b74"),V=o("t9DX"),Z=["AttBankslip1"],G=["AttRefAppslip1"];function q(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",42),b.Yb(1,"div",43),b.Yb(2,"label",44),b.Uc(3,"Center "),b.Yb(4,"span",45),b.Uc(5,"*"),b.Xb(),b.Xb(),b.Xb(),b.Yb(6,"div",46),b.Yb(7,"app-center-dropdown",47),b.ic("onclinicSelect",function(e){return b.Lc(i),b.mc().onclinicSelect(e)})("onselectedClinic",function(e){return b.Lc(i),b.mc().onselectedClinic(e)}),b.Xb(),b.Xb(),b.Xb()}2&e&&(b.Fb(7),b.tc("isCenterLabel",!1)("mode","get"))}function H(e,t){1&e&&b.Tb(0,"hr")}function Q(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",48),b.Yb(1,"div",49),b.Yb(2,"p-radioButton",50),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().CustomerType=e})("onClick",function(){return b.Lc(i),b.mc().OnChangeOption()}),b.Xb(),b.Yb(3,"label",51),b.Uc(4,"Patient"),b.Xb(),b.Yb(5,"p-radioButton",52),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().CustomerType=e})("onClick",function(){return b.Lc(i),b.mc().OnChangeOption()}),b.Xb(),b.Yb(6,"label",51),b.Uc(7,"Visitor"),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(2),b.tc("ngModel",n.CustomerType),b.Fb(3),b.tc("ngModel",n.CustomerType)}}function z(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",48),b.Yb(1,"button",53),b.ic("click",function(){return b.Lc(i),b.mc().ShowInvoiceList()}),b.Uc(2,"Voucher List"),b.Xb(),b.Xb()}}function K(e,t){1&e&&(b.Yb(0,"div",54),b.Yb(1,"label"),b.Uc(2,"Select Health Seeker "),b.Xb(),b.Xb())}function J(e,t){1&e&&b.Uc(0),2&e&&b.Wc(" ",t.$implicit.name," ")}function ee(e,t){if(1&e&&b.Uc(0),2&e){var i=t.$implicit;b.Xc(" ",i.FullName,"-",i.BookingNumber," ")}}var te=function(){return{width:"100%"}};function ie(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",55),b.Yb(1,"p-dropdown",56),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().userSelected=e})("onChange",function(){return b.Lc(i),b.mc().onChangeHealthSeeker()}),b.Sc(2,J,1,1,"ng-template",57),b.Sc(3,ee,1,2,"ng-template",58),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(1),b.Pc(b.yc(6,te)),b.tc("options",n.UserList)("ngModel",n.userSelected)("filter",!0)("showClear",!0)}}function ne(e,t){1&e&&b.Uc(0),2&e&&b.Wc(" ",t.$implicit.name," ")}var le=function(){return{width:"100%"}};function oe(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",55),b.Yb(1,"p-autoComplete",59),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().selectedPatient=e})("onClear",function(){return b.Lc(i),b.mc().onClear()})("onSelect",function(){return b.Lc(i),b.mc().onChangeHealthSeeker()})("completeMethod",function(e){return b.Lc(i),b.mc().searchHealthSeeker(e)}),b.Sc(2,ne,1,1,"ng-template",57),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(1),b.Pc(b.yc(6,le)),b.tc("ngModel",n.selectedPatient)("minLength",2)("suggestions",n.suggestions)("inputStyle",b.yc(7,le))}}function re(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",54),b.Yb(1,"input",60),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().SearchByMrNo=e})("change",function(){b.Lc(i);var e=b.mc();return e.userSelected=null,e.selectedPatient=null}),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(1),b.tc("ngModel",n.SearchByMrNo)}}function ae(e,t){1&e&&(b.Yb(0,"div",54),b.Yb(1,"label"),b.Uc(2,"Disc. Patient"),b.Xb(),b.Xb())}function ce(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",61),b.Yb(1,"div",69),b.Yb(2,"label"),b.Uc(3,"Emp. Code "),b.Yb(4,"span",45),b.Uc(5,"*"),b.Xb(),b.Xb(),b.Yb(6,"input",76),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).VisitorUserMaster.EmpCode=e}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(6),b.tc("ngModel",n.VisitorUserMaster.EmpCode)}}function se(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",61),b.Yb(1,"div",69),b.Yb(2,"label"),b.Uc(3,"Department"),b.Xb(),b.Yb(4,"input",77),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).VisitorUserMaster.Department=e}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(4),b.tc("ngModel",n.VisitorUserMaster.Department)}}function de(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",2),b.Yb(1,"div",61),b.Yb(2,"div",62),b.Yb(3,"label",63),b.Uc(4,"First Name "),b.Yb(5,"span",45),b.Uc(6,"*"),b.Xb(),b.Xb(),b.Yb(7,"input",64,65),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().VisitorUserMaster.FirstName=e})("keypress",function(e){return b.Lc(i),b.mc().validateText(e)}),b.Xb(),b.Xb(),b.Xb(),b.Yb(9,"div",61),b.Yb(10,"div",62),b.Yb(11,"label",63),b.Uc(12,"Last Name"),b.Xb(),b.Yb(13,"input",66),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().VisitorUserMaster.LastName=e})("keypress",function(e){return b.Lc(i),b.mc().validateText(e)}),b.Xb(),b.Xb(),b.Xb(),b.Yb(14,"div",61),b.Yb(15,"div",62),b.Yb(16,"label",63),b.Uc(17,"Mobile"),b.Xb(),b.Yb(18,"input",67,68),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().VisitorUserMaster.ContactNumber=e})("keypress",function(e){return b.Lc(i),b.mc().validateNumber(e)}),b.Xb(),b.Xb(),b.Xb(),b.Yb(20,"div",61),b.Yb(21,"div",69),b.Yb(22,"label"),b.Uc(23,"AddressLine 1"),b.Xb(),b.Yb(24,"input",70),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().VisitorUserMaster.ADDRESS=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(25,"div",71),b.Yb(26,"div",62),b.Yb(27,"div",72),b.Yb(28,"label",73),b.Uc(29,"Is Staff"),b.Xb(),b.Yb(30,"input",74),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().VisitorUserMaster.IsStaff=e}),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Sc(31,ce,7,1,"div",75),b.Sc(32,se,5,1,"div",75),b.Xb()}if(2&e){var n=b.mc();b.Fb(7),b.tc("ngModel",n.VisitorUserMaster.FirstName),b.Fb(6),b.tc("ngModel",n.VisitorUserMaster.LastName),b.Fb(5),b.tc("ngModel",n.VisitorUserMaster.ContactNumber),b.Fb(6),b.tc("ngModel",n.VisitorUserMaster.ADDRESS),b.Fb(6),b.tc("ngModel",n.VisitorUserMaster.IsStaff),b.Fb(1),b.tc("ngIf",n.VisitorUserMaster.IsStaff),b.Fb(1),b.tc("ngIf",n.VisitorUserMaster.IsStaff)}}function ue(e,t){if(1&e&&(b.Yb(0,"label"),b.Uc(1),b.Xb()),2&e){var i=b.mc(2);b.Fb(1),b.Wc("(",i.BalanceType,")")}}function be(e,t){if(1&e&&(b.Yb(0,"div",48),b.Yb(1,"h5",79),b.Yb(2,"span",86),b.Uc(3," \u20b9 "),b.Xb(),b.Uc(4),b.nc(5,"number"),b.Xb(),b.Xb()),2&e){var i=b.mc(2);b.Fb(4),b.Wc("Remaining Amount: ",b.pc(5,1,i.RemainingAmount,"1.1-2")," ")}}function he(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",87),b.ic("click",function(){return b.Lc(i),b.mc(2).ShowAddCreditNoteModel()}),b.Tb(1,"i",88),b.Uc(2," Add"),b.Xb()}}function me(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",91),b.ic("click",function(){return b.Lc(i),b.mc(3).ShowRefundCreditNoteModel()}),b.Tb(1,"i",92),b.Uc(2," Refund"),b.Xb()}}function ve(e,t){if(1&e&&(b.Yb(0,"div",89),b.Sc(1,me,3,0,"button",90),b.Xb()),2&e){var i=b.mc(2);b.Fb(1),b.tc("ngIf",!i.isCashless&&i.CreditNoteBalanceAmount<0)}}function fe(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",78),b.Yb(1,"div",48),b.Yb(2,"h5",79),b.Yb(3,"span",80),b.Uc(4," account_balance_wallet "),b.Xb(),b.Uc(5),b.nc(6,"number"),b.Sc(7,ue,2,1,"label",1),b.Xb(),b.Xb(),b.Yb(8,"div",48),b.Yb(9,"h5",79),b.Yb(10,"span",80),b.Uc(11," account_balance_wallet\n"),b.Xb(),b.Uc(12),b.nc(13,"number"),b.Xb(),b.Xb(),b.Sc(14,be,6,4,"div",3),b.Yb(15,"div",81),b.Sc(16,he,3,0,"button",82),b.Yb(17,"button",83),b.ic("click",function(){return b.Lc(i),b.mc().GetColonhydrothrapyCount()}),b.Tb(18,"i",84),b.Xb(),b.Xb(),b.Sc(19,ve,2,1,"div",85),b.Xb()}if(2&e){var n=b.mc();b.Fb(5),b.Wc("Account Balance : ",b.pc(6,6,n.CreditNoteBalanceAmount,"1.1-2")," "),b.Fb(2),b.tc("ngIf",n.BalanceType),b.Fb(5),b.Wc(" Credit Balance : ",b.pc(13,9,n.CreditNoteBalance,"1.1-2"),""),b.Fb(2),b.tc("ngIf",n.RemainingAmount>0||n.RemainingAmount<0),b.Fb(2),b.tc("ngIf",!n.isCashless&&(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))),b.Fb(3),b.tc("ngIf",1==(null==n.ClinicDetails?null:n.ClinicDetails.IsShowRefundonBilling))}}function pe(e,t){1&e&&b.Ub(0)}function ge(e,t){1&e&&b.Ub(0)}function Ie(e,t){if(1&e&&(b.Yb(0,"p-tabPanel",103),b.Sc(1,ge,1,0,"ng-container",97),b.Xb()),2&e){b.mc(2);var i=b.Ic(14);b.Fb(1),b.tc("ngTemplateOutlet",i)}}function Ce(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(2).saveExtraItem()}),b.Uc(1,"Save Item"),b.Xb()}}function Se(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(2).saveExtraItemVisitor()}),b.Uc(1,"Save Item"),b.Xb()}}function ye(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",93),b.Yb(1,"div",94),b.Yb(2,"p-tabView",95),b.ic("activeIndexChange",function(e){return b.Lc(i),b.mc().selectedTab=e})("onChange",function(e){return b.Lc(i),b.mc().tabClick(e)}),b.Yb(3,"p-tabPanel",96),b.Sc(4,pe,1,0,"ng-container",97),b.Xb(),b.Sc(5,Ie,2,1,"p-tabPanel",98),b.Yb(6,"div",93),b.Yb(7,"div",99),b.Yb(8,"div",62),b.Sc(9,Ce,2,0,"button",100),b.Sc(10,Se,2,0,"button",100),b.Xb(),b.Xb(),b.Yb(11,"div",99),b.Yb(12,"label",101),b.Yb(13,"strong"),b.Uc(14,"Multi Select"),b.Xb(),b.Xb(),b.Yb(15,"input",102),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().IsListView=e})("click",function(){return b.Lc(i),b.mc().ResetExtraItemList()}),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(),l=b.Ic(14);b.Fb(2),b.tc("activeIndex",n.selectedTab),b.Fb(1),b.uc("header","Patient"==n.CustomerType?"Non-Prescribed":"Billable Item"),b.Fb(1),b.tc("ngTemplateOutlet",l),b.Fb(1),b.tc("ngIf","Patient"==n.CustomerType),b.Fb(4),b.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))&&n.slotBookingStatus!=n.bookingStatus.Discharged&&"Patient"==n.CustomerType),b.Fb(1),b.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))&&"Visitor"==n.CustomerType),b.Fb(5),b.tc("ngModel",n.IsListView)}}function Te(e,t){1&e&&(b.Yb(0,"colgroup"),b.Tb(1,"col",110),b.Tb(2,"col",111),b.Tb(3,"col",112),b.Tb(4,"col",112),b.Tb(5,"col",112),b.Tb(6,"col",111),b.Xb())}function Me(e,t){1&e&&(b.Yb(0,"tr"),b.Yb(1,"th"),b.Uc(2,"Item"),b.Xb(),b.Yb(3,"th"),b.Uc(4,"Unit"),b.Xb(),b.Yb(5,"th",113),b.Uc(6,"Quantity"),b.Xb(),b.Yb(7,"th",113),b.Uc(8,"MRP"),b.Xb(),b.Yb(9,"th",113),b.Uc(10,"Purpose"),b.Xb(),b.Yb(11,"th",113),b.Uc(12,"Action"),b.Xb(),b.Xb())}function Ae(e,t){if(1&e){var i=b.Zb();b.Yb(0,"p-tree",128),b.ic("onNodeSelect",function(e){b.Lc(i);var t=b.mc(2).rowIndex;return b.mc(3).nodeSelect(e,t)})("selectionChange",function(e){return b.Lc(i),b.mc(5).selection=e}),b.Xb()}if(2&e){var n=b.mc(2).rowIndex,l=b.mc(3);b.vc("id","tree_",l.lstExtraItemDetails[n].Sequence,""),b.tc("value",l.itemMaster)("filter",!0)("selection",l.selection)("styleClass","custom-ui-tree")}}function Re(e,t){if(1&e&&(b.Sc(0,Ae,1,5,"p-tree",127),b.Tb(1,"br")),2&e){var i=b.mc(4);b.tc("ngIf",0==i.IsListView)}}function De(e,t){1&e&&b.Uc(0),2&e&&b.Wc(" ",t.$implicit.UOMName," ")}function Pe(e,t){if(1&e){var i=b.Zb();b.Yb(0,"p-inputNumber",129),b.ic("ngModelChange",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).lstExtraItemDetails[t].Qty=e}),b.Xb()}if(2&e){var n=b.mc().rowIndex,l=b.mc(3);b.vc("name","Qty_",l.lstExtraItemDetails[n].Sequence,""),b.tc("ngModel",l.lstExtraItemDetails[n].Qty)("useGrouping",!1)("min",0)("maxlength",5)}}function Ye(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",130),b.Yb(1,"div",131),b.Yb(2,"span"),b.Uc(3,"Night"),b.Xb(),b.Xb(),b.Yb(4,"div",132),b.Yb(5,"p-inputNumber",133),b.ic("onInput",function(e){b.Lc(i);var t=b.mc().rowIndex,n=b.mc(3);return n.CalculateITotalNightRev(e,n.lstExtraItemDetails[t].Sequence)})("ngModelChange",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).lstExtraItemDetails[t].NightCount=e}),b.Xb(),b.Xb(),b.Yb(6,"div",131),b.Yb(7,"span"),b.Uc(8," X Bed"),b.Xb(),b.Xb(),b.Yb(9,"div",132),b.Yb(10,"p-inputNumber",133),b.ic("onInput",function(e){b.Lc(i);var t=b.mc().rowIndex,n=b.mc(3);return n.CalculateITotalDaysRev(e,n.lstExtraItemDetails[t].Sequence)})("ngModelChange",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).lstExtraItemDetails[t].RoomCount=e}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc().rowIndex,l=b.mc(3);b.Fb(5),b.Pc(b.yc(14,te)),b.vc("name","QtyNight_",l.lstExtraItemDetails[n].Sequence,""),b.tc("ngModel",l.lstExtraItemDetails[n].NightCount)("useGrouping",!1)("min",1)("maxlength",5),b.Fb(5),b.Pc(b.yc(15,te)),b.vc("name","QtyRoom_",l.lstExtraItemDetails[n].Sequence,""),b.tc("ngModel",l.lstExtraItemDetails[n].RoomCount)("useGrouping",!1)("min",1)("maxlength",5)}}function Xe(e,t){if(1&e){var i=b.Zb();b.Yb(0,"p"),b.Yb(1,"p-inputNumber",134),b.ic("ngModelChange",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).lstExtraItemDetails[t].MRP=e}),b.Xb(),b.Xb()}if(2&e){var n=b.mc().rowIndex,l=b.mc(3);b.Fb(1),b.Pc(b.yc(7,te)),b.vc("name","MRPDetails_",l.lstExtraItemDetails[n].Sequence,""),b.tc("ngModel",l.lstExtraItemDetails[n].MRP)("useGrouping",!1)("min",1)("maxlength",5)}}function Ue(e,t){if(1&e&&(b.Yb(0,"p"),b.Uc(1),b.nc(2,"number"),b.Xb()),2&e){var i=b.mc().rowIndex,n=b.mc(3);b.Fb(1),b.Wc(" ",b.pc(2,1,n.lstExtraItemDetails[i].MRP,"1.1-2")," ")}}function Ne(e,t){if(1&e){var i=b.Zb();b.Yb(0,"input",135),b.ic("ngModelChange",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).lstExtraItemDetails[t].OtherPurpose=e}),b.Xb()}if(2&e){var n=b.mc().rowIndex,l=b.mc(3);b.vc("name","ItemDesc_",l.lstExtraItemDetails[n].Sequence,""),b.tc("ngModel",l.lstExtraItemDetails[n].OtherPurpose)}}function xe(e,t){if(1&e){var i=b.Zb();b.Yb(0,"a",124),b.ic("click",function(){b.Lc(i);var e=b.mc().rowIndex,t=b.mc(3);return t.RemoveExtraItemDetails(t.lstExtraItemDetails[e].Sequence)}),b.Tb(1,"i",92),b.Xb()}}function ke(e,t){if(1&e){var i=b.Zb();b.Yb(0,"i",136),b.ic("click",function(){b.Lc(i);var e=b.mc().rowIndex,t=b.mc(3);return t.ResetItem(t.lstExtraItemDetails[e].Sequence)}),b.Xb()}}function Be(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Yb(1,"td"),b.Yb(2,"button",114),b.ic("click",function(){return b.Lc(i),b.Ic(6).hide()}),b.Uc(3," Cancel "),b.Xb(),b.Yb(4,"p-button",115),b.ic("click",function(e){return b.Lc(i),b.Ic(6).toggle(e)}),b.Xb(),b.Yb(5,"p-overlayPanel",116,117),b.Sc(7,Re,2,1,"ng-template",118),b.Xb(),b.Xb(),b.Yb(8,"td"),b.Yb(9,"p-dropdown",119),b.ic("ngModelChange",function(e){b.Lc(i);var n=t.rowIndex;return b.mc(3).lstExtraItemDetails[n].UOMS=e}),b.Sc(10,De,1,1,"ng-template",57),b.Xb(),b.Xb(),b.Yb(11,"td",120),b.Sc(12,Pe,1,5,"p-inputNumber",121),b.Sc(13,Ye,11,16,"div",122),b.Xb(),b.Yb(14,"td",113),b.Sc(15,Xe,2,8,"p",1),b.Sc(16,Ue,3,4,"p",1),b.Xb(),b.Yb(17,"td",113),b.Sc(18,Ne,1,2,"input",123),b.Xb(),b.Yb(19,"td",113),b.Yb(20,"a",124),b.ic("click",function(){return b.Lc(i),b.mc(3).AddExtraItemDetails()}),b.Tb(21,"i",88),b.Xb(),b.Sc(22,xe,2,0,"a",125),b.Sc(23,ke,1,0,"i",126),b.Xb(),b.Xb()}if(2&e){var n=t.rowIndex,l=b.mc(3);b.Fb(4),b.vc("id","btn_op_",l.lstExtraItemDetails[n].Sequence,""),b.tc("label",""!=l.lstExtraItemDetails[n].Description?l.lstExtraItemDetails[n].Description:"Select Fee Head"),b.Fb(1),b.vc("id","op_",l.lstExtraItemDetails[n].Sequence,""),b.tc("showCloseIcon",!1),b.Fb(4),b.Pc(b.yc(18,te)),b.vc("name","ddlUM_",l.lstExtraItemDetails[n].Sequence,""),b.tc("options",l.lstExtraItemDetails[n].UMList)("ngModel",l.lstExtraItemDetails[n].UOMS)("filter",!0)("showClear",!0),b.Fb(3),b.tc("ngIf","Room"!=l.lstExtraItemDetails[n].Category),b.Fb(1),b.tc("ngIf","Room"==l.lstExtraItemDetails[n].Category),b.Fb(2),b.tc("ngIf",l.lstExtraItemDetails[n].MCODE==l.defaultItemMCODE.OtherCharge||1==l.lstExtraItemDetails[n].IsEditable),b.Fb(1),b.tc("ngIf",l.lstExtraItemDetails[n].MCODE!=l.defaultItemMCODE.OtherCharge&&0==l.lstExtraItemDetails[n].IsEditable),b.Fb(2),b.tc("ngIf",l.lstExtraItemDetails[n].MCODE==l.defaultItemMCODE.OtherCharge||1==l.lstExtraItemDetails[n].IsEditable),b.Fb(4),b.tc("ngIf",1!==l.lstExtraItemDetails[n].Sequence),b.Fb(1),b.tc("ngIf",""!=l.lstExtraItemDetails[n].Description)}}function we(e,t){if(1&e&&(b.Yb(0,"p-table",107,108),b.Sc(2,Te,7,0,"ng-template",109),b.Sc(3,Me,13,0,"ng-template",32),b.Sc(4,Be,24,19,"ng-template",28),b.Xb()),2&e){var i=b.mc(2);b.tc("value",i.lstExtraItemDetails)("rowHover",!0)("scrollable",!0)}}function Ee(e,t){1&e&&(b.Yb(0,"colgroup"),b.Tb(1,"col",137),b.Tb(2,"col",138),b.Xb())}function Le(e,t){1&e&&(b.Yb(0,"tr"),b.Yb(1,"th"),b.Uc(2,"Item"),b.Xb(),b.Yb(3,"th",113),b.Uc(4,"Quantity"),b.Xb(),b.Xb())}function Oe(e,t){if(1&e){var i=b.Zb();b.Yb(0,"p-tree",144),b.ic("onNodeSelect",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).nodeSelect(e,t)})("onNodeUnselect",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).nodeSelect(e,t)})("selectionChange",function(e){return b.Lc(i),b.mc(4).selectedNodesItem=e}),b.Xb(),b.Tb(1,"br")}if(2&e){var n=b.mc(4);b.tc("filter",!0)("value",n.itemMaster)("filter",!0)("selection",n.selectedNodesItem)("styleClass","custom-ui-tree")}}function Fe(e,t){if(1&e){var i=b.Zb();b.Yb(0,"p-inputNumber",145),b.ic("ngModelChange",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).lstExtraItemDetails[t].Qty=e}),b.Xb()}if(2&e){var n=b.mc().rowIndex,l=b.mc(3);b.vc("name","Qty_",l.lstExtraItemDetails[n].Sequence,""),b.tc("ngModel",l.lstExtraItemDetails[n].Qty)("useGrouping",!1)("min",0)("maxlength",5)}}function _e(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",130),b.Yb(1,"div",131),b.Yb(2,"span"),b.Uc(3,"Night"),b.Xb(),b.Xb(),b.Yb(4,"div",132),b.Yb(5,"p-inputNumber",133),b.ic("onInput",function(e){b.Lc(i);var t=b.mc().rowIndex,n=b.mc(3);return n.CalculateITotalNightRev(e,n.lstExtraItemDetails[t].Sequence)})("ngModelChange",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).lstExtraItemDetails[t].NightCount=e}),b.Xb(),b.Xb(),b.Yb(6,"div",131),b.Yb(7,"span"),b.Uc(8," X Bed"),b.Xb(),b.Xb(),b.Yb(9,"div",132),b.Yb(10,"p-inputNumber",133),b.ic("onInput",function(e){b.Lc(i);var t=b.mc().rowIndex,n=b.mc(3);return n.CalculateITotalDaysRev(e,n.lstExtraItemDetails[t].Sequence)})("ngModelChange",function(e){b.Lc(i);var t=b.mc().rowIndex;return b.mc(3).lstExtraItemDetails[t].RoomCount=e}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc().rowIndex,l=b.mc(3);b.Fb(5),b.Pc(b.yc(14,te)),b.vc("name","QtyNight_",l.lstExtraItemDetails[n].Sequence,""),b.tc("ngModel",l.lstExtraItemDetails[n].NightCount)("useGrouping",!1)("min",1)("maxlength",5),b.Fb(5),b.Pc(b.yc(15,te)),b.vc("name","QtyRoom_",l.lstExtraItemDetails[n].Sequence,""),b.tc("ngModel",l.lstExtraItemDetails[n].RoomCount)("useGrouping",!1)("min",1)("maxlength",5)}}function We(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Yb(1,"td"),b.Yb(2,"button",139),b.ic("click",function(){return b.Lc(i),b.Ic(6).hide()}),b.Uc(3," Cancel "),b.Xb(),b.Yb(4,"p-button",140),b.ic("click",function(e){return b.Lc(i),b.Ic(6).toggle(e)}),b.Xb(),b.Yb(5,"p-overlayPanel",141,142),b.Sc(7,Oe,2,5,"ng-template",118),b.Xb(),b.Xb(),b.Yb(8,"td",120),b.Sc(9,Fe,1,5,"p-inputNumber",143),b.Sc(10,_e,11,16,"div",122),b.Xb(),b.Xb()}if(2&e){var n=t.rowIndex,l=b.mc(3);b.Fb(4),b.tc("label",(null==l.selectedNodesItem?null:l.selectedNodesItem.length)>0?(null==l.lstExtraListItemDetails?null:l.lstExtraListItemDetails.length)+" Item Selected":"Select Fee Head"),b.Fb(1),b.tc("showCloseIcon",!1),b.Fb(4),b.tc("ngIf","Room"!=l.lstExtraItemDetails[n].Category),b.Fb(1),b.tc("ngIf","Room"==l.lstExtraItemDetails[n].Category)}}function je(e,t){if(1&e&&(b.Yb(0,"p-table",107,108),b.Sc(2,Ee,3,0,"ng-template",109),b.Sc(3,Le,5,0,"ng-template",32),b.Sc(4,We,11,4,"ng-template",28),b.Xb()),2&e){var i=b.mc(2);b.tc("value",i.lstExtraItemEmpty)("rowHover",!0)("scrollable",!0)}}function Ve(e,t){if(1&e&&(b.Yb(0,"div",105),b.Sc(1,we,5,3,"p-table",106),b.Sc(2,je,5,3,"p-table",106),b.Xb()),2&e){var i=b.mc();b.Fb(1),b.tc("ngIf",0==i.IsListView),b.Fb(1),b.tc("ngIf",1==i.IsListView)}}function Ze(e,t){1&e&&b.Ub(0)}function Ge(e,t){1&e&&b.Ub(0)}function qe(e,t){1&e&&b.Ub(0)}function He(e,t){1&e&&b.Ub(0)}function Qe(e,t){if(1&e&&(b.Yb(0,"div",146),b.Yb(1,"div",94),b.Yb(2,"p-tabView"),b.Yb(3,"p-tabPanel",147),b.Sc(4,Ze,1,0,"ng-container",97),b.Xb(),b.Yb(5,"p-tabPanel",148),b.Sc(6,Ge,1,0,"ng-container",97),b.Xb(),b.Yb(7,"p-tabPanel",149),b.Sc(8,qe,1,0,"ng-container",97),b.Xb(),b.Yb(9,"p-tabPanel",150),b.Sc(10,He,1,0,"ng-container",97),b.Xb(),b.Xb(),b.Xb(),b.Xb()),2&e){b.mc();var i=b.Ic(17),n=b.Ic(23),l=b.Ic(25),o=b.Ic(21);b.Fb(4),b.tc("ngTemplateOutlet",i),b.Fb(2),b.tc("ngTemplateOutlet",n),b.Fb(2),b.tc("ngTemplateOutlet",l),b.Fb(2),b.tc("ngTemplateOutlet",o)}}function $e(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",165),b.ic("click",function(){return b.Lc(i),b.mc(3).ShowEstimetedBill()}),b.Xb()}}function ze(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",166),b.ic("click",function(){return b.Lc(i),b.mc(3).onItemEditInit()}),b.Xb()}}function Ke(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",167),b.ic("click",function(){return b.Lc(i),b.mc(3).onItemEditSave()}),b.Xb()}}function Je(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",168),b.ic("click",function(){return b.Lc(i),b.mc(3).onItemEditCancel()}),b.Xb()}}function et(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",169),b.ic("click",function(){return b.Lc(i),b.mc(3).DeleteExtraItem(null)}),b.Xb()}}function tt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",170),b.ic("click",function(){return b.Lc(i),b.mc(3).CreateInvoice()}),b.Xb()}}function it(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",155),b.Sc(1,$e,1,0,"button",156),b.Sc(2,ze,1,0,"button",157),b.Sc(3,Ke,1,0,"button",158),b.Sc(4,Je,1,0,"button",159),b.Sc(5,et,1,0,"button",160),b.Sc(6,tt,1,0,"button",161),b.Yb(7,"span",162),b.Tb(8,"i",163),b.Yb(9,"input",164),b.ic("input",function(e){return b.Lc(i),b.mc(),b.Ic(3).filterGlobal(e.target.value,"contains")}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(1),b.tc("ngIf",(null==n.tableDataExtraItem?null:n.tableDataExtraItem.length)>0),b.Fb(1),b.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))&&(null==n.tableDataExtraItem?null:n.tableDataExtraItem.length)>0&&!n.editing),b.Fb(1),b.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))&&(null==n.tableDataExtraItem?null:n.tableDataExtraItem.length)>0&&n.editing),b.Fb(1),b.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))&&(null==n.tableDataExtraItem?null:n.tableDataExtraItem.length)>0&&n.editing),b.Fb(1),b.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Delete.toString()))&&(null==n.tableDataExtraItem?null:n.tableDataExtraItem.length)>0&&(null==n.lstSelectedBillableItem?null:n.lstSelectedBillableItem.length)>0),b.Fb(1),b.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))&&((null==n.tableDataExtraItem?null:n.tableDataExtraItem.length)>0||(null==n.tableDataExtraItemCredit?null:n.tableDataExtraItemCredit.length)>0))}}function nt(e,t){1&e&&(b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2," No records found "),b.Xb(),b.Xb()),2&e&&(b.Fb(1),b.Gb("colspan",6))}function lt(e,t){1&e&&(b.Yb(0,"colgroup"),b.Tb(1,"col",171),b.Tb(2,"col",172),b.Tb(3,"col",173),b.Tb(4,"col",174),b.Tb(5,"col",175),b.Tb(6,"col",175),b.Tb(7,"col",176),b.Tb(8,"col",172),b.Tb(9,"col",174),b.Xb())}function ot(e,t){1&e&&(b.Yb(0,"tr"),b.Yb(1,"th",177),b.Tb(2,"p-tableHeaderCheckbox"),b.Xb(),b.Yb(3,"th"),b.Uc(4,"Item Code"),b.Xb(),b.Yb(5,"th"),b.Uc(6,"Item Description"),b.Xb(),b.Yb(7,"th"),b.Uc(8,"Unit"),b.Xb(),b.Yb(9,"th"),b.Uc(10,"Quantity"),b.Xb(),b.Yb(11,"th"),b.Uc(12,"MRP"),b.Xb(),b.Yb(13,"th"),b.Uc(14,"Purchase Date"),b.Xb(),b.Yb(15,"th"),b.Uc(16,"Created By"),b.Xb(),b.Yb(17,"th"),b.Uc(18,"Action"),b.Xb(),b.Xb())}function rt(e,t){if(1&e&&(b.Yb(0,"td"),b.Uc(1),b.Xb()),2&e){var i=b.mc().$implicit;b.Fb(1),b.Vc(i.Qty)}}function at(e,t){if(1&e){var i=b.Zb();b.Yb(0,"td"),b.Yb(1,"input",180),b.ic("keypress",function(e){return b.Lc(i),b.mc(3).onKeyPress(e)})("ngModelChange",function(e){return b.Lc(i),b.mc().$implicit.Qty=e}),b.Xb(),b.Xb()}if(2&e){var n=b.mc(),l=n.rowIndex,o=n.$implicit;b.Fb(1),b.vc("name","Qty",l,""),b.tc("ngModel",o.Qty)}}function ct(e,t){if(1&e){var i=b.Zb();b.Yb(0,"a",181),b.ic("click",function(){b.Lc(i);var e=b.mc().$implicit;return b.mc(2).DeleteExtraItem(e.BillItemId)}),b.Tb(1,"img",182),b.Xb()}}function st(e,t){if(1&e&&(b.Yb(0,"tr"),b.Yb(1,"td",177),b.Tb(2,"p-tableCheckbox",178),b.Xb(),b.Yb(3,"td"),b.Uc(4),b.Xb(),b.Yb(5,"td"),b.Uc(6),b.Xb(),b.Yb(7,"td"),b.Uc(8),b.Xb(),b.Sc(9,rt,2,1,"td",1),b.Sc(10,at,2,2,"td",1),b.Yb(11,"td"),b.Uc(12),b.Xb(),b.Yb(13,"td"),b.Uc(14),b.nc(15,"date"),b.Xb(),b.Yb(16,"td"),b.Uc(17),b.Xb(),b.Yb(18,"td"),b.Sc(19,ct,2,0,"a",179),b.Xb(),b.Xb()),2&e){var i=t.$implicit,n=b.mc(2);b.Fb(2),b.tc("value",i),b.Fb(2),b.Vc(i.MCODE),b.Fb(2),b.Vc(i.Description),b.Fb(2),b.Vc(i.UOMS),b.Fb(1),b.tc("ngIf",!n.editing),b.Fb(1),b.tc("ngIf",n.editing),b.Fb(2),b.Vc(i.MRP),b.Fb(2),b.Vc(b.pc(15,10,i.PurchaseDate,n.customDateFormat.DEF_DATE)),b.Fb(3),b.Vc(i.CreatedBy),b.Fb(2),b.tc("ngIf",!i.IsBilled)}}var dt=function(){return["MCODE","Description","UOMS","Qty"]};function ut(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",130),b.Yb(1,"div",94),b.Yb(2,"p-table",151,152),b.ic("selectionChange",function(e){return b.Lc(i),b.mc().lstSelectedBillableItem=e}),b.Sc(4,it,10,6,"ng-template",153),b.Sc(5,nt,3,1,"ng-template",154),b.Sc(6,lt,10,0,"ng-template",109),b.Sc(7,ot,19,0,"ng-template",32),b.Sc(8,st,20,13,"ng-template",28),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(2),b.tc("value",n.tableDataExtraItem)("rowHover",!0)("globalFilterFields",b.yc(5,dt))("scrollable",!0)("selection",n.lstSelectedBillableItem)}}function bt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",185),b.ic("click",function(){return b.Lc(i),b.mc(3).PrintCreditInvoice()}),b.Xb()}}function ht(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",155),b.Sc(1,bt,1,0,"button",184),b.Yb(2,"span",162),b.Tb(3,"i",163),b.Yb(4,"input",164),b.ic("input",function(e){return b.Lc(i),b.mc(),b.Ic(3).filterGlobal(e.target.value,"contains")}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(1),b.tc("ngIf",(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Print.toString()))&&(null==n.tableDataExtraItemCredit?null:n.tableDataExtraItemCredit.length)>0)}}function mt(e,t){1&e&&(b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2," No records found "),b.Xb(),b.Xb()),2&e&&(b.Fb(1),b.Gb("colspan",7))}function vt(e,t){1&e&&(b.Yb(0,"colgroup"),b.Tb(1,"col",186),b.Tb(2,"col",172),b.Tb(3,"col",176),b.Tb(4,"col",174),b.Tb(5,"col",175),b.Tb(6,"col",176),b.Tb(7,"col",175),b.Xb())}function ft(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Yb(1,"th"),b.Yb(2,"p-checkbox",187),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).checked=e})("onChange",function(){return b.Lc(i),b.mc(2).getSelectAllRecord()}),b.Xb(),b.Xb(),b.Yb(3,"th"),b.Uc(4,"Item Code"),b.Xb(),b.Yb(5,"th"),b.Uc(6,"Item Description"),b.Xb(),b.Yb(7,"th"),b.Uc(8,"Unit"),b.Xb(),b.Yb(9,"th"),b.Uc(10,"Quantity"),b.Xb(),b.Yb(11,"th"),b.Uc(12,"Purchase Date"),b.Xb(),b.Yb(13,"th"),b.Uc(14,"Action"),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(2),b.tc("ngModel",n.checked)}}function pt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"a",190),b.ic("click",function(){b.Lc(i);var e=b.mc().$implicit,t=b.mc(2);return t.UpdateExtraItemStatus(e.BillItemId,t.billItemStatus.Cancelled)}),b.Tb(1,"img",182),b.Xb()}}function gt(e,t){if(1&e&&(b.Yb(0,"tr"),b.Yb(1,"td"),b.Yb(2,"p-checkbox",188),b.ic("ngModelChange",function(e){return t.$implicit.checkAccess=e}),b.Xb(),b.Xb(),b.Yb(3,"td"),b.Uc(4),b.Xb(),b.Yb(5,"td"),b.Uc(6),b.Xb(),b.Yb(7,"td"),b.Uc(8),b.Xb(),b.Yb(9,"td"),b.Uc(10),b.Xb(),b.Yb(11,"td"),b.Uc(12),b.nc(13,"date"),b.Xb(),b.Yb(14,"td"),b.Sc(15,pt,2,0,"a",189),b.Xb(),b.Xb()),2&e){var i=t.$implicit,n=b.mc(2);b.Fb(2),b.tc("ngModel",i.checkAccess),b.Fb(2),b.Vc(i.MCODE),b.Fb(2),b.Vc(i.Description),b.Fb(2),b.Vc(i.UOMS),b.Fb(2),b.Vc(i.Qty),b.Fb(2),b.Vc(b.pc(13,7,i.PurchaseDate,n.customDateFormat.DEF_DATE)),b.Fb(3),b.tc("ngIf",!i.IsBilled)}}function It(e,t){if(1&e&&(b.Yb(0,"div",130),b.Yb(1,"div",94),b.Yb(2,"p-table",183,152),b.Sc(4,ht,5,1,"ng-template",153),b.Sc(5,mt,3,1,"ng-template",154),b.Sc(6,vt,8,0,"ng-template",109),b.Sc(7,ft,15,1,"ng-template",32),b.Sc(8,gt,16,10,"ng-template",28),b.Xb(),b.Xb(),b.Xb()),2&e){var i=b.mc();b.Fb(2),b.tc("value",i.tableDataExtraItemCredit)("rowHover",!0)("globalFilterFields",b.yc(4,dt))("scrollable",!0)}}function Ct(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",196),b.ic("click",function(){return b.Lc(i),b.mc(4).PrintCombinedInvoice()}),b.Xb()}}function St(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",194),b.Sc(1,Ct,1,0,"button",195),b.Yb(2,"span",162),b.Tb(3,"i",163),b.Yb(4,"input",164),b.ic("input",function(e){return b.Lc(i),b.mc(),b.Ic(1).filterGlobal(e.target.value,"contains")}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(3);b.Fb(1),b.tc("ngIf",null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Print.toString()))}}function yt(e,t){1&e&&(b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2," No records found "),b.Xb(),b.Xb()),2&e&&(b.Fb(1),b.Gb("colspan",10))}function Tt(e,t){1&e&&(b.Yb(0,"colgroup"),b.Tb(1,"col",186),b.Tb(2,"col",172),b.Tb(3,"col",176),b.Tb(4,"col",174),b.Tb(5,"col",197),b.Tb(6,"col",175),b.Tb(7,"col",176),b.Tb(8,"col",198),b.Tb(9,"col",172),b.Tb(10,"col",175),b.Xb())}function Mt(e,t){1&e&&(b.Yb(0,"tr"),b.Yb(1,"th"),b.Uc(2,"S.No"),b.Xb(),b.Yb(3,"th"),b.Uc(4,"Item Code"),b.Xb(),b.Yb(5,"th"),b.Uc(6,"Item Desc"),b.Xb(),b.Yb(7,"th"),b.Uc(8,"Unit"),b.Xb(),b.Yb(9,"th"),b.Uc(10,"Quantity"),b.Xb(),b.Yb(11,"th"),b.Uc(12,"Rate"),b.Xb(),b.Yb(13,"th"),b.Uc(14,"Purchase Date"),b.Xb(),b.Yb(15,"th"),b.Uc(16,"Bill Date"),b.Xb(),b.Yb(17,"th"),b.Uc(18,"Voucher No"),b.Xb(),b.Yb(19,"th"),b.Uc(20,"Action"),b.Xb(),b.Xb())}function At(e,t){if(1&e){var i=b.Zb();b.Yb(0,"span",202),b.ic("click",function(){b.Lc(i);var e=b.mc().$implicit;return b.mc(3).PrintInvoice(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),b.Uc(1," print "),b.Xb()}}function Rt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"span",203),b.ic("click",function(){b.Lc(i);var e=b.mc().$implicit;return b.mc(3).PrintBankDepositSlip(e.SlotBookingId,e.VCHRNO,e.PhiscalID)}),b.Uc(1," receipt_long "),b.Xb()}}function Dt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2),b.Xb(),b.Yb(3,"td"),b.Uc(4),b.Xb(),b.Yb(5,"td"),b.Uc(6),b.Xb(),b.Yb(7,"td"),b.Uc(8),b.Xb(),b.Yb(9,"td"),b.Uc(10),b.Xb(),b.Yb(11,"td"),b.Uc(12),b.nc(13,"number"),b.Xb(),b.Yb(14,"td"),b.Uc(15),b.nc(16,"date"),b.Xb(),b.Yb(17,"td"),b.Uc(18),b.nc(19,"date"),b.Xb(),b.Yb(20,"td"),b.Uc(21),b.Xb(),b.Yb(22,"td"),b.Sc(23,At,2,0,"span",199),b.Sc(24,Rt,2,0,"span",200),b.Yb(25,"span",201),b.ic("click",function(){b.Lc(i);var e=t.$implicit;return b.mc(3).ShowTransactionDetails(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),b.Uc(26," view_list "),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=t.$implicit,l=t.rowIndex,o=b.mc(3);b.Fb(2),b.Vc(l+1),b.Fb(2),b.Vc(n.MCODE),b.Fb(2),b.Vc(n.ITEMDESC),b.Fb(2),b.Vc(n.UNIT),b.Fb(2),b.Vc(n.RealQty),b.Fb(2),b.Vc(b.pc(13,11,n.MRP,"1.1-2")),b.Fb(3),b.Vc(b.pc(16,14,n.PurchaseDate,o.customDateFormat.DEF_DATE)),b.Fb(3),b.Vc(b.pc(19,17,n.BillDate,o.customDateFormat.DEF_DATE)),b.Fb(3),b.Vc(n.VCHRNO),b.Fb(2),b.tc("ngIf",null==o.lstIAccessStr?null:o.lstIAccessStr.includes(o.ActionList.Print.toString())),b.Fb(1),b.tc("ngIf",(null==o.lstIAccessStr?null:o.lstIAccessStr.includes(o.ActionList.Download.toString()))&&null!=n.BankDSlip)}}var Pt=function(){return["MCODE","ITEMDESC","UNIT","RealQty","MRP","VCHRNO"]};function Yt(e,t){if(1&e&&(b.Yb(0,"p-table",192,193),b.Sc(2,St,5,1,"ng-template",153),b.Sc(3,yt,3,1,"ng-template",154),b.Sc(4,Tt,11,0,"ng-template",109),b.Sc(5,Mt,21,0,"ng-template",32),b.Sc(6,Dt,27,20,"ng-template",28),b.Xb()),2&e){var i=b.mc(2);b.tc("value",i.ProdList)("rowHover",!0)("globalFilterFields",b.yc(4,Pt))("scrollable",!0)}}function Xt(e,t){if(1&e&&(b.Yb(0,"div",130),b.Yb(1,"div",94),b.Sc(2,Yt,7,5,"p-table",191),b.Xb(),b.Xb()),2&e){var i=b.mc();b.Fb(2),b.tc("ngIf",(null==i.ProdList?null:i.ProdList.length)>0)}}function Ut(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",208),b.ic("click",function(){return b.Lc(i),b.mc(4).CreateCompleteInvoice()}),b.Xb()}}function Nt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",209),b.ic("click",function(){return b.Lc(i),b.mc(4).PrintPreInvoice()}),b.Xb()}if(2&e){var n=b.mc(4);b.tc("label",n.PrintCILabel)}}function xt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",210),b.ic("click",function(){return b.Lc(i),b.mc(4).GenerateTIProvisionalNo()}),b.Xb()}}function kt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",194),b.Sc(1,Ut,1,0,"button",205),b.Sc(2,Nt,1,1,"button",206),b.Sc(3,xt,1,0,"button",207),b.Yb(4,"span",162),b.Tb(5,"i",163),b.Yb(6,"input",164),b.ic("input",function(e){return b.Lc(i),b.mc(),b.Ic(1).filterGlobal(e.target.value,"contains")}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(3);b.Fb(1),b.tc("ngIf",("OPD"==n.PerformaItemList[0].BookingType||"IPD"==n.PerformaItemList[0].BookingType&&n.PerformaItemList[0].BookingStatus!==n.bookingStatus.Confirmed)&&(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Print.toString()))),b.Fb(1),b.tc("ngIf",("OPD"==n.PerformaItemList[0].BookingType||"IPD"==n.PerformaItemList[0].BookingType&&n.PerformaItemList[0].BookingStatus!==n.bookingStatus.Confirmed)&&(null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.Print.toString()))),b.Fb(1),b.tc("ngIf","IPD"==n.PerformaItemList[0].BookingType&&n.PerformaItemList[0].BookingStatus!==n.bookingStatus.Confirmed&&(null==n.TIProvisionalNo||null==n.TIProvisionalNo||""==n.TIProvisionalNo)&&n.isCashless)}}function Bt(e,t){1&e&&(b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2," No records found "),b.Xb(),b.Xb()),2&e&&(b.Fb(1),b.Gb("colspan",10))}function wt(e,t){1&e&&(b.Yb(0,"colgroup"),b.Tb(1,"col",186),b.Tb(2,"col",174),b.Tb(3,"col",172),b.Tb(4,"col",186),b.Tb(5,"col",174),b.Tb(6,"col",211),b.Tb(7,"col",211),b.Tb(8,"col",172),b.Tb(9,"col",172),b.Tb(10,"col",111),b.Tb(11,"col",172),b.Xb())}function Et(e,t){1&e&&(b.Yb(0,"tr"),b.Yb(1,"th"),b.Uc(2,"S.No"),b.Xb(),b.Yb(3,"th"),b.Uc(4,"Item Code"),b.Xb(),b.Yb(5,"th"),b.Uc(6,"Item Desc"),b.Xb(),b.Yb(7,"th"),b.Uc(8,"Unit"),b.Xb(),b.Yb(9,"th"),b.Uc(10,"Quantity"),b.Xb(),b.Yb(11,"th"),b.Uc(12,"Purchase Date"),b.Xb(),b.Yb(13,"th"),b.Uc(14,"Bill Date"),b.Xb(),b.Yb(15,"th"),b.Uc(16,"Voucher No"),b.Xb(),b.Yb(17,"th"),b.Uc(18,"Status"),b.Xb(),b.Yb(19,"th"),b.Uc(20,"Modified By"),b.Xb(),b.Yb(21,"th"),b.Uc(22,"Action"),b.Xb(),b.Xb())}function Lt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"i",216),b.ic("click",function(){b.Lc(i);var e=b.mc().$implicit;return b.mc(3).PrintPInvoice(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),b.Xb()}}function Ot(e,t){if(1&e){var i=b.Zb();b.Yb(0,"i",217),b.ic("click",function(){b.Lc(i);var e=b.mc().$implicit;return b.mc(3).EditPInvoice(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),b.Xb()}}function Ft(e,t){if(1&e){var i=b.Zb();b.Yb(0,"i",218),b.ic("click",function(){b.Lc(i);var e=b.mc().$implicit;return b.mc(3).CancelPInvoiceWithNoRefund(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),b.Xb()}}function _t(e,t){if(1&e){var i=b.Zb();b.Yb(0,"i",219),b.ic("click",function(){b.Lc(i);var e=b.mc().$implicit;return b.mc(3).CancelPInvoiceWithRefund(e.SlotBookingId,e.VCHRNO,e.PhiscalID,e.Division)}),b.Xb()}}function Wt(e,t){if(1&e&&(b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2),b.Xb(),b.Yb(3,"td"),b.Uc(4),b.Xb(),b.Yb(5,"td"),b.Uc(6),b.Xb(),b.Yb(7,"td"),b.Uc(8),b.Xb(),b.Yb(9,"td"),b.Uc(10),b.Xb(),b.Yb(11,"td"),b.Uc(12),b.nc(13,"date"),b.Xb(),b.Yb(14,"td"),b.Uc(15),b.nc(16,"date"),b.Xb(),b.Yb(17,"td"),b.Uc(18),b.Xb(),b.Yb(19,"td"),b.Uc(20),b.Xb(),b.Yb(21,"td"),b.Uc(22),b.Xb(),b.Yb(23,"td"),b.Sc(24,Lt,1,0,"i",212),b.Sc(25,Ot,1,0,"i",213),b.Sc(26,Ft,1,0,"i",214),b.Sc(27,_t,1,0,"i",215),b.Xb(),b.Xb()),2&e){var i=t.$implicit,n=t.rowIndex,l=b.mc(3);b.Fb(2),b.Vc(n+1),b.Fb(2),b.Vc(i.MCODE),b.Fb(2),b.Vc(i.ITEMDESC),b.Fb(2),b.Vc(i.UNIT),b.Fb(2),b.Vc(i.RealQty),b.Fb(2),b.Vc(b.pc(13,14,i.PurchaseDate,l.customDateFormat.DEF_DATE_TIME)),b.Fb(3),b.Vc(b.pc(16,17,i.BillDate,l.customDateFormat.DEF_DATE_TIME)),b.Fb(3),b.Vc(i.VCHRNO),b.Fb(2),b.Vc(l.billItemStatus[i.Status]),b.Fb(2),b.Vc(i.ModifiedBy),b.Fb(2),b.tc("ngIf",(null==l.lstIAccessStr?null:l.lstIAccessStr.includes(l.ActionList.Print.toString()))&&i.Status==l.billItemStatus.ProformaRaised),b.Fb(1),b.tc("ngIf",(null==l.lstIAccessStr?null:l.lstIAccessStr.includes(l.ActionList.ReadWrite.toString()))&&i.Status==l.billItemStatus.ProformaRaised),b.Fb(1),b.tc("ngIf",(null==l.lstIAccessStr?null:l.lstIAccessStr.includes(l.ActionList.Cancel.toString()))&&i.Status==l.billItemStatus.ProformaRaised&&1==i.TherapyStatus&&1==i.SequentialNumber),b.Fb(1),b.tc("ngIf",(null==l.lstIAccessStr?null:l.lstIAccessStr.includes(l.ActionList.Cancel.toString()))&&i.Status==l.billItemStatus.ProformaRaised&&1==i.TherapyStatus&&1==i.SequentialNumber)}}var jt=function(){return["MCODE","ITEMDESC","UNIT","RealQty","VCHRNO"]};function Vt(e,t){if(1&e&&(b.Yb(0,"p-table",192,204),b.Sc(2,kt,7,3,"ng-template",153),b.Sc(3,Bt,3,1,"ng-template",154),b.Sc(4,wt,12,0,"ng-template",109),b.Sc(5,Et,23,0,"ng-template",32),b.Sc(6,Wt,28,20,"ng-template",28),b.Xb()),2&e){var i=b.mc(2);b.tc("value",i.PerformaItemList)("rowHover",!0)("globalFilterFields",b.yc(4,jt))("scrollable",!0)}}function Zt(e,t){if(1&e&&(b.Yb(0,"div",130),b.Yb(1,"div",94),b.Sc(2,Vt,7,5,"p-table",191),b.Xb(),b.Xb()),2&e){var i=b.mc();b.Fb(2),b.tc("ngIf",(null==i.PerformaItemList?null:i.PerformaItemList.length)>0)}}function Gt(e,t){if(1&e&&(b.Yb(0,"div",94),b.Tb(1,"app-individual-invoice-list",222),b.Xb()),2&e){var i=b.mc(2);b.Fb(1),b.tc("showIndividualInvoiceList",i.showIndividualInvoiceList)("slotBookingId",i.userSelected)("IsGrouped",i.IsGroupedSelected)("BookingType",i.bookingtypeSelected)}}function qt(e,t){if(1&e&&(b.Yb(0,"div",220),b.Sc(1,Gt,2,4,"div",221),b.Xb()),2&e){var i=b.mc();b.Fb(1),b.tc("ngIf",""!==i.userSelected&&null!=i.userSelected)}}function Ht(e,t){if(1&e&&(b.Yb(0,"div",242),b.Yb(1,"h5",79),b.Yb(2,"span",86),b.Uc(3," \u20b9 "),b.Xb(),b.Uc(4),b.nc(5,"number"),b.Xb(),b.Xb()),2&e){var i=b.mc(3);b.Fb(4),b.Wc(" Remaining Amount : ",b.pc(5,1,i.NetPaybleTotal-i.MaxCreditLimit,"1.1-2"),"")}}function Qt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",245),b.Yb(1,"button",246),b.ic("click",function(){return b.Lc(i),b.mc(3).ShowAddCreditNoteModelCI()}),b.Tb(2,"i",88),b.Uc(3," Receive Amount"),b.Xb(),b.Xb()}}function $t(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",89),b.Yb(1,"button",91),b.ic("click",function(){return b.Lc(i),b.mc(3).ShowRefundCreditNoteModelCI()}),b.Tb(2,"i",92),b.Uc(3," Refund Amount"),b.Xb(),b.Xb()}}function zt(e,t){if(1&e&&(b.Yb(0,"div",130),b.Yb(1,"div",242),b.Yb(2,"h5",79),b.Yb(3,"span",80),b.Uc(4," account_balance_wallet "),b.Xb(),b.Uc(5),b.nc(6,"number"),b.Xb(),b.Xb(),b.Yb(7,"div",242),b.Yb(8,"h5",79),b.Yb(9,"span",80),b.Uc(10," account_balance_wallet "),b.Xb(),b.Uc(11),b.nc(12,"number"),b.Xb(),b.Xb(),b.Sc(13,Ht,6,4,"div",243),b.Sc(14,Qt,4,0,"div",244),b.Sc(15,$t,4,0,"div",85),b.Xb()),2&e){var i=b.mc(2);b.Fb(5),b.Wc(" Account Balance : ",b.pc(6,5,i.CreditNoteBalanceAmount,"1.1-2"),""),b.Fb(6),b.Wc(" Credit Balance : ",b.pc(12,8,i.CreditNoteBalance,"1.1-2"),""),b.Fb(2),b.tc("ngIf",i.NetPaybleTotal-i.MaxCreditLimit>0),b.Fb(1),b.tc("ngIf",!i.isCashless&&i.NetPaybleTotal-i.MaxCreditLimit>0),b.Fb(1),b.tc("ngIf",!i.isCashless&&i.CreditNoteBalanceAmount<0&&i.NetPaybleTotal-i.MaxCreditLimit<0&&1==(null==i.ClinicDetails?null:i.ClinicDetails.IsShowRefundonBilling))}}function Kt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"input",247),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).selectAllItem=e})("change",function(){return b.Lc(i),b.mc(2).getSelectAllItem()}),b.Xb()}if(2&e){var n=b.mc(2);b.tc("ngModel",n.selectAllItem)}}function Jt(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",130),b.Yb(1,"div",252),b.Uc(2," Nt"),b.Tb(3,"br"),b.Yb(4,"input",253),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().$implicit.NightCount=e})("keypress",function(e){b.Lc(i);var t=b.mc().index,n=b.mc(2);return n.validateNumber(e),n.CalculateITotalNRev(e,t)})("change",function(){b.Lc(i);var e=b.mc().index;return b.mc(2).CalculateITotalNRevWE(e)}),b.Xb(),b.Xb(),b.Yb(5,"div",254),b.Uc(6," X "),b.Xb(),b.Yb(7,"div",252),b.Uc(8," Bed"),b.Tb(9,"br"),b.Yb(10,"input",255),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().$implicit.RoomCount=e})("keypress",function(e){b.Lc(i);var t=b.mc().index,n=b.mc(2);return n.validateNumber(e),n.CalculateITotalRRev(e,t)})("change",function(){b.Lc(i);var e=b.mc().index;return b.mc(2).CalculateITotalRRevWE(e)}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc().$implicit;b.Fb(4),b.tc("ngModel",n.NightCount),b.Fb(6),b.tc("ngModel",n.RoomCount)}}function ei(e,t){if(1&e){var i=b.Zb();b.Yb(0,"p-inputNumber",256),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().$implicit.Qty=e})("onInput",function(e){b.Lc(i);var t=b.mc().index;return b.mc(2).CalculateItemTotal(e,t)})("onBlur",function(){b.Lc(i);var e=b.mc().index;return b.mc(2).CalculateItemTotalNew(e)}),b.Xb()}if(2&e){var n=b.mc(),l=n.index,o=n.$implicit;b.Pc(b.yc(7,te)),b.vc("name","txtItemWiseQty_",l+1,""),b.tc("ngModel",o.Qty)("min",1)("max",o.Qty)("maxlength",10)}}function ti(e,t){if(1&e&&(b.Yb(0,"label"),b.Uc(1),b.Xb()),2&e){var i=b.mc().$implicit;b.Fb(1),b.Vc(i.Qty)}}function ii(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Yb(1,"td"),b.Yb(2,"input",248),b.ic("change",function(){return b.Lc(i),b.mc(2).CalculateTotalItemPrice()})("ngModelChange",function(e){return t.$implicit.IsChecked=e}),b.Xb(),b.Xb(),b.Yb(3,"td"),b.Uc(4),b.Xb(),b.Yb(5,"td"),b.Uc(6),b.Xb(),b.Yb(7,"td"),b.Uc(8),b.Xb(),b.Yb(9,"td"),b.Uc(10),b.Xb(),b.Yb(11,"td"),b.Sc(12,Jt,11,2,"div",122),b.Sc(13,ei,1,8,"p-inputNumber",249),b.Sc(14,ti,2,1,"label",1),b.Xb(),b.Yb(15,"td"),b.Uc(16),b.Xb(),b.Yb(17,"td"),b.Yb(18,"p-inputNumber",250),b.ic("ngModelChange",function(e){return t.$implicit.DiscountPer=e})("onInput",function(e){b.Lc(i);var n=t.index;return b.mc(2).CalculateDiscount(e,n)})("onBlur",function(){b.Lc(i);var e=t.index;return b.mc(2).CalculateDiscountNew(e)}),b.Xb(),b.Xb(),b.Yb(19,"td"),b.Yb(20,"p-inputNumber",251),b.ic("ngModelChange",function(e){return t.$implicit.DiscountAmount=e})("onInput",function(e){b.Lc(i);var n=t.index;return b.mc(2).CalculateDiscountRev(e,n)})("onBlur",function(){b.Lc(i);var e=t.index;return b.mc(2).CalculateDiscountBlur(e)}),b.Xb(),b.Xb(),b.Yb(21,"td"),b.Uc(22),b.Xb(),b.Xb()}if(2&e){var n=t.$implicit,l=b.mc(2);b.Fb(2),b.tc("disabled",n.IsDisabledCheckBox||0==n.CanEditQty)("ngModel",n.IsChecked),b.Fb(2),b.Wc(" ",n.MCODE," "),b.Fb(2),b.Wc(" ",n.Description," "),b.Fb(2),b.Wc(" ",n.UNIT," "),b.Fb(2),b.Vc(n.MRP),b.Fb(2),b.tc("ngIf",("Edit"==l.TrnMode||"New"==l.TrnMode)&&"Performa"==l.InvMode&&n.CanEditQty&&(n.MCODE==l.defaultItemMCODE.TreatmentOtherCharge||"Room"==n.Category)),b.Fb(1),b.tc("ngIf","Edit"==l.TrnMode&&"Performa"==l.InvMode&&n.CanEditQty&&n.MCODE!=l.defaultItemMCODE.TreatmentOtherCharge&&"Room"!=n.Category),b.Fb(1),b.tc("ngIf","New"==l.TrnMode||0==n.CanEditQty),b.Fb(2),b.Vc(n.GST),b.Fb(2),b.Pc(b.yc(25,te)),b.tc("ngModel",n.DiscountPer)("min",0)("max",100)("maxlength",3)("disabled","CompleteInvoice"==l.InvMode&&"Visitor"!=l.CustomerType||!n.IsChecked),b.Fb(2),b.Pc(b.yc(26,te)),b.tc("ngModel",n.DiscountAmount)("disabled","CompleteInvoice"==l.InvMode&&"Visitor"!=l.CustomerType||!n.IsChecked)("min",0)("max",n.Qty*n.MRP)("maxlength",5),b.Fb(2),b.Wc(" ",n.PriceWithGST," ")}}function ni(e,t){if(1&e){var i=b.Zb();b.Yb(0,"td",264),b.Yb(1,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(3).CheckCreditNote()}),b.Uc(2,"Check Balance"),b.Xb(),b.Xb()}}function li(e,t){if(1&e&&(b.Yb(0,"td"),b.Yb(1,"label",258),b.Uc(2,"Balance"),b.Xb(),b.Uc(3),b.Xb()),2&e){var i=b.mc(3);b.Fb(3),b.Wc(" ",i.MaxCreditNoteAmount," ")}}function oi(e,t){1&e&&(b.Yb(0,"td",259),b.Yb(1,"label",258),b.Uc(2,"Credit Note Amount"),b.Xb(),b.Xb())}function ri(e,t){if(1&e){var i=b.Zb();b.Yb(0,"td",113),b.Yb(1,"p-inputNumber",265),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(3).CreditNoteTranAmount=e})("onBlur",function(){return b.Lc(i),b.mc(3).CalculateNetPaybleAfterDiscountReverseNew()}),b.Xb(),b.Xb()}if(2&e){var n=b.mc(3);b.Fb(1),b.Pc(b.yc(5,te)),b.tc("ngModel",n.CreditNoteTranAmount)("min",0)("max",n.MaxCreditNoteAmount)}}function ai(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr",257),b.Yb(1,"td",232),b.Yb(2,"label",258),b.Uc(3,"Credit Note Number"),b.Xb(),b.Xb(),b.Yb(4,"td",259),b.Yb(5,"input",260),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).CreditNoteNumber=e}),b.Xb(),b.Xb(),b.Sc(6,ni,3,0,"td",261),b.Sc(7,li,4,1,"td",1),b.Sc(8,oi,3,0,"td",262),b.Sc(9,ri,2,6,"td",263),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(5),b.Pc(b.yc(8,te)),b.tc("disabled",n.MaxCreditNoteAmount>0||"Edit"==n.TrnMode)("ngModel",n.CreditNoteNumber),b.Fb(1),b.tc("ngIf",0==n.MaxCreditNoteAmount),b.Fb(1),b.tc("ngIf",n.MaxCreditNoteAmount>0&&"Edit"!=n.TrnMode),b.Fb(1),b.tc("ngIf",n.MaxCreditNoteAmount>0||"Edit"==n.TrnMode),b.Fb(1),b.tc("ngIf",n.MaxCreditNoteAmount>0||"Edit"==n.TrnMode)}}function ci(e,t){1&e&&(b.Yb(0,"p"),b.Yb(1,"b"),b.Uc(2,"Requested By"),b.Xb(),b.Xb())}function si(e,t){if(1&e){var i=b.Zb();b.Yb(0,"input",266),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).RequestedBy=e}),b.Xb()}if(2&e){var n=b.mc(2);b.tc("ngModel",n.RequestedBy)}}function di(e,t){1&e&&(b.Yb(0,"p"),b.Yb(1,"b"),b.Uc(2,"Authorized By"),b.Xb(),b.Xb())}function ui(e,t){if(1&e){var i=b.Zb();b.Yb(0,"p-dropdown",267),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).ReferredBy=e}),b.Xb()}if(2&e){var n=b.mc(2);b.Pc(b.yc(6,te)),b.tc("options",n.lstAuthorizedMaster)("ngModel",n.ReferredBy)("showClear",!0)("filter",!0)}}function bi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Tb(1,"td"),b.Tb(2,"td"),b.Yb(3,"td",268),b.Yb(4,"p"),b.Yb(5,"b"),b.Uc(6,"General Remarks"),b.Yb(7,"span",45),b.Uc(8,"*"),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Yb(9,"td",269),b.Yb(10,"input",270),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).PIEditGenRemarks=e}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(10),b.tc("ngModel",n.PIEditGenRemarks)}}function hi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(2).ShowReceivePaymentModel()}),b.Uc(1,"Generate Proforma and Receive Payment"),b.Xb()}}function mi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(2).GeneratePerforma()}),b.Uc(1,"Generate Proforma Only"),b.Xb()}}function vi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(2).GenerateCompleteInvoice()}),b.Uc(1,"Generate Complete Invoice"),b.Xb()}}function fi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(2).ShowAddCreditNoteModelCI()}),b.Uc(1,"Generate Complete Invoice and Received Payment"),b.Xb()}}function pi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(2).GenerateCompleteInvoice()}),b.Uc(1,"Generate Complete Invoice"),b.Xb()}}function gi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",223),b.Yb(1,"h4",224),b.Uc(2),b.Xb(),b.Yb(3,"button",225),b.ic("click",function(){return(0,t.dismiss)("Cross click")}),b.Yb(4,"span",226),b.Uc(5,"\xd7"),b.Xb(),b.Xb(),b.Xb(),b.Yb(6,"div",227),b.Sc(7,zt,16,11,"div",122),b.Tb(8,"hr"),b.Yb(9,"div",130),b.Yb(10,"div",228),b.Yb(11,"table",229),b.Yb(12,"thead"),b.Yb(13,"tr"),b.Yb(14,"th"),b.Sc(15,Kt,1,1,"input",230),b.Xb(),b.Yb(16,"th"),b.Uc(17,"Item Code"),b.Xb(),b.Yb(18,"th"),b.Uc(19,"Item Details"),b.Xb(),b.Yb(20,"th"),b.Uc(21,"UM"),b.Xb(),b.Yb(22,"th"),b.Uc(23,"Price"),b.Xb(),b.Yb(24,"th"),b.Uc(25,"Quantity"),b.Xb(),b.Yb(26,"th"),b.Uc(27,"GST"),b.Xb(),b.Yb(28,"th"),b.Uc(29,"Discount %"),b.Xb(),b.Yb(30,"th"),b.Uc(31,"Discount Amount"),b.Xb(),b.Yb(32,"th"),b.Uc(33,"Net Amount"),b.Xb(),b.Xb(),b.Xb(),b.Yb(34,"tbody"),b.Sc(35,ii,23,27,"tr",231),b.Yb(36,"tr"),b.Tb(37,"td"),b.Tb(38,"td"),b.Tb(39,"td"),b.Tb(40,"td"),b.Tb(41,"td"),b.Tb(42,"td"),b.Tb(43,"td"),b.Tb(44,"td"),b.Yb(45,"td"),b.Yb(46,"b"),b.Uc(47,"Total"),b.Xb(),b.Xb(),b.Yb(48,"td"),b.Uc(49),b.Xb(),b.Xb(),b.Yb(50,"tr"),b.Tb(51,"td"),b.Tb(52,"td"),b.Tb(53,"td"),b.Tb(54,"td"),b.Yb(55,"td",232),b.Yb(56,"b"),b.Uc(57,"Bill wise Discount %"),b.Xb(),b.Xb(),b.Yb(58,"td"),b.Yb(59,"p-inputNumber",233),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().BillWiseDiscountPer=e})("onInput",function(e){return b.Lc(i),b.mc().CalculateNetPaybleAfterDiscount(e)})("onBlur",function(){return b.Lc(i),b.mc().CalculateNetPaybleAfterDiscountNew()}),b.Xb(),b.Xb(),b.Yb(60,"td"),b.Yb(61,"b"),b.Uc(62,"Discount Amount"),b.Xb(),b.Xb(),b.Yb(63,"td"),b.Yb(64,"p-inputNumber",234),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().BillWiseDiscountAmount=e})("onInput",function(e){return b.Lc(i),b.mc().CalculateNetPaybleAfterDiscountReverse(e)})("onBlur",function(){return b.Lc(i),b.mc().CalculateNetPaybleAfterDiscountReverseNew()}),b.Xb(),b.Xb(),b.Xb(),b.Sc(65,ai,10,9,"tr",235),b.Yb(66,"tr"),b.Tb(67,"td"),b.Tb(68,"td"),b.Tb(69,"td"),b.Tb(70,"td"),b.Tb(71,"td"),b.Tb(72,"td"),b.Tb(73,"td"),b.Tb(74,"td"),b.Yb(75,"td"),b.Yb(76,"b"),b.Uc(77,"Net Payable"),b.Xb(),b.Xb(),b.Yb(78,"td"),b.Uc(79),b.nc(80,"number"),b.Xb(),b.Xb(),b.Yb(81,"tr"),b.Tb(82,"td"),b.Tb(83,"td"),b.Tb(84,"td"),b.Tb(85,"td"),b.Tb(86,"td"),b.Tb(87,"td",236),b.Yb(88,"td",237),b.Sc(89,ci,3,0,"p",1),b.Xb(),b.Yb(90,"td",237),b.Sc(91,si,1,1,"input",238),b.Xb(),b.Yb(92,"td",237),b.Sc(93,di,3,0,"p",1),b.Xb(),b.Yb(94,"td",237),b.Sc(95,ui,1,7,"p-dropdown",239),b.Xb(),b.Xb(),b.Sc(96,bi,11,1,"tr",1),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Yb(97,"div",240),b.Yb(98,"button",241),b.ic("click",function(){return(0,t.close)("Close click")}),b.Uc(99,"Close"),b.Xb(),b.Sc(100,hi,2,0,"button",100),b.Sc(101,mi,2,0,"button",100),b.Sc(102,vi,2,0,"button",100),b.Sc(103,fi,2,0,"button",100),b.Sc(104,pi,2,0,"button",100),b.Xb()}if(2&e){var n=b.mc();b.Fb(2),b.Vc("Performa"==n.InvMode?"Generate Proforma Invoice For Item":"Generate Complete Invoice For Item"),b.Fb(5),b.tc("ngIf","CompleteInvoice"==n.InvMode&&"Patient"==n.CustomerType),b.Fb(8),b.tc("ngIf","CompleteInvoice"!=n.InvMode),b.Fb(20),b.tc("ngForOf",n.AllItemPriceRes),b.Fb(14),b.Wc(" ",n.ItemCheckedTotal," "),b.Fb(10),b.Pc(b.yc(36,te)),b.tc("disabled",(0==n.ItemCheckedTotal||"CompleteInvoice"==n.InvMode)&&"Visitor"!=n.CustomerType)("ngModel",n.BillWiseDiscountPer)("min",0)("max",100)("minFractionDigits",0)("maxFractionDigits",5),b.Fb(5),b.Pc(b.yc(37,te)),b.tc("disabled",(0==n.ItemCheckedTotal||"CompleteInvoice"==n.InvMode)&&"Visitor"!=n.CustomerType)("ngModel",n.BillWiseDiscountAmount)("min",0)("max",n.ItemCheckedTotal)("minFractionDigits",0)("maxFractionDigits",5),b.Fb(1),b.tc("ngIf","CompleteInvoice"!=n.InvMode),b.Fb(14),b.Wc(" ",b.pc(80,33,n.NetPaybleTotal,"1.0-0")," "),b.Fb(10),b.tc("ngIf",n.ItemTotalDiscount+n.BillWiseDiscountAmount>0),b.Fb(2),b.tc("ngIf",n.ItemTotalDiscount+n.BillWiseDiscountAmount>0),b.Fb(2),b.tc("ngIf",n.ItemTotalDiscount+n.BillWiseDiscountAmount>0),b.Fb(2),b.tc("ngIf",n.ItemTotalDiscount+n.BillWiseDiscountAmount>0),b.Fb(1),b.tc("ngIf","Performa"==n.InvMode&&"Edit"==n.TrnMode),b.Fb(4),b.tc("ngIf","Performa"===n.InvMode&&n.ItemCheckedTotal>0&&1!=n.isCashless),b.Fb(1),b.tc("ngIf","Performa"===n.InvMode&&n.ItemCheckedTotal>0),b.Fb(1),b.tc("ngIf","CompleteInvoice"==n.InvMode&&"Patient"==n.CustomerType&&0==n.isGenerateTI),b.Fb(1),b.tc("ngIf","CompleteInvoice"==n.InvMode&&(1==n.isGenerateTI||"Visitor"==n.CustomerType)&&1!=n.CheckIsCredit&&n.NetPaybleTotal>0),b.Fb(1),b.tc("ngIf","CompleteInvoice"==n.InvMode&&("Visitor"==n.CustomerType||"Patient"==n.CustomerType&&"OPD"==n.bookingtypeSelected)&&(1==n.CheckIsCredit||0==n.NetPaybleTotal))}}function Ii(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",223),b.Yb(1,"h4",224),b.Uc(2,"Initiate Payment RazorPay"),b.Xb(),b.Yb(3,"button",271),b.ic("click",function(){return(0,t.dismiss)("Cross click")}),b.Yb(4,"span",226),b.Uc(5,"\xd7"),b.Xb(),b.Xb(),b.Xb(),b.Yb(6,"div",227),b.Yb(7,"div",130),b.Yb(8,"div",228),b.Yb(9,"app-razorpay",272),b.ic("GetPaymentStatusEmit",function(e){return b.Lc(i),b.mc().GetPaymentStatusEmit(e)}),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Yb(10,"div",240),b.Yb(11,"button",241),b.ic("click",function(){return(0,t.close)("Close click")}),b.Uc(12,"Close"),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(9),b.tc("OrderRes",n.OrderRes)("ItemPriceRes",n.ItemPriceRes)("SlotBookingIdSelected",n.SlotBookingIdSelected)("IsSelectedItem",n.IsSelectedItem)("UserRes",n.UserRes)("BillWiseDiscountPer",n.BillWiseDiscountPer)("ReferredBy",n.ReferredBy)("PayRequestFrom",n.PayRequestFrom)}}function Ci(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",223),b.Yb(1,"h4",224),b.Uc(2,"Initiate Payment WordLine"),b.Xb(),b.Yb(3,"button",273),b.ic("click",function(){return(0,t.dismiss)("Cross click")}),b.Yb(4,"span",226),b.Uc(5,"\xd7"),b.Xb(),b.Xb(),b.Xb(),b.Yb(6,"div",227),b.Yb(7,"div",130),b.Yb(8,"div",228),b.Yb(9,"app-worldline",274),b.ic("GetPaymentStatusEmit",function(e){return b.Lc(i),b.mc().GetWLPaymentStatusEmit(e)}),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Yb(10,"div",240),b.Yb(11,"button",241),b.ic("click",function(){return(0,t.close)("Close click")}),b.Uc(12,"Close"),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(9),b.tc("WLOrderRes",n.WLOrderRes)("ItemPriceRes",n.ItemPriceRes)("SlotBookingIdSelected",n.SlotBookingIdSelected)("IsSelectedItem",n.IsSelectedItem)("UserRes",n.UserRes)("BillWiseDiscountPer",n.BillWiseDiscountPer)("ReferredBy",n.ReferredBy)("PayRequestFrom",n.PayRequestFrom)}}function Si(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",286),b.Yb(1,"h3"),b.Uc(2,"Credit Details"),b.Xb(),b.Yb(3,"div",287),b.Yb(4,"div",288),b.Uc(5,"Amount "),b.Yb(6,"span",289),b.Uc(7,"*"),b.Xb(),b.Xb(),b.Yb(8,"div",290),b.Yb(9,"p-inputNumber",291),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CREDITAMT=e}),b.Xb(),b.Xb(),b.Xb(),b.Tb(10,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(9),b.Pc(b.yc(5,te)),b.tc("ngModel",n.TenderObj.CREDITAMT)("min",0)("max",n.MaxCreditLimit)}}var yi=function(){return{standalone:!0}};function Ti(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",292),b.Yb(1,"h6",293),b.Yb(2,"strong"),b.Uc(3,"Cash Details"),b.Xb(),b.Xb(),b.Yb(4,"div",287),b.Yb(5,"div",288),b.Yb(6,"label"),b.Yb(7,"strong"),b.Uc(8," Amount "),b.Yb(9,"span",289),b.Uc(10,"*"),b.Xb(),b.Xb(),b.Xb(),b.Yb(11,"p-inputNumber",294),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CASH=e}),b.Xb(),b.Xb(),b.Yb(12,"div",288),b.Yb(13,"label"),b.Yb(14,"strong"),b.Uc(15,"Received Date"),b.Xb(),b.Yb(16,"span",289),b.Uc(17,"*"),b.Xb(),b.Xb(),b.Yb(18,"p-calendar",295,296),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CashRecdDate=e}),b.Xb(),b.Xb(),b.Xb(),b.Tb(20,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(11),b.Pc(b.yc(15,te)),b.tc("ngModel",n.TenderObj.CASH)("min",0)("max",n.NetPaybleTotal),b.Fb(7),b.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",n.TenderObj.CashRecdDate)("ngModelOptions",b.yc(16,yi))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!1)}}function Mi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",297),b.Yb(1,"h3"),b.Uc(2,"Card Details"),b.Xb(),b.Yb(3,"div",287),b.Yb(4,"div",288),b.Uc(5,"Card Number "),b.Yb(6,"span",289),b.Uc(7,"*"),b.Xb(),b.Xb(),b.Yb(8,"div",288),b.Yb(9,"input",298),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CARDNO=e}),b.Xb(),b.Xb(),b.Yb(10,"div",288),b.Uc(11,"Card Holder Name "),b.Yb(12,"span",289),b.Uc(13,"*"),b.Xb(),b.Xb(),b.Yb(14,"div",288),b.Yb(15,"input",299),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CARDHOLDERNAME=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(16,"div",287),b.Yb(17,"div",288),b.Uc(18,"Received Date "),b.Yb(19,"span",289),b.Uc(20,"*"),b.Xb(),b.Xb(),b.Yb(21,"div",290),b.Yb(22,"p-calendar",295,300),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CardRecdDate=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(24,"div",287),b.Yb(25,"div",288),b.Uc(26,"Amount "),b.Yb(27,"span",289),b.Uc(28,"*"),b.Xb(),b.Xb(),b.Yb(29,"div",290),b.Yb(30,"p-inputNumber",301),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CARDAMT=e}),b.Xb(),b.Xb(),b.Xb(),b.Tb(31,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(9),b.Pc(b.yc(21,te)),b.tc("ngModel",n.TenderObj.CARDNO),b.Fb(6),b.Pc(b.yc(22,te)),b.tc("ngModel",n.TenderObj.CARDHOLDERNAME),b.Fb(7),b.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",n.TenderObj.CardRecdDate)("ngModelOptions",b.yc(23,yi))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!1),b.Fb(8),b.Pc(b.yc(24,te)),b.tc("ngModel",n.TenderObj.CARDAMT)("min",0)("max",n.NetPaybleTotal)}}function Ai(e,t){if(1&e){var i=b.Zb();b.Yb(0,"a",124),b.ic("click",function(){return b.Lc(i),b.mc(4).AddBankTransactionDetails()}),b.Tb(1,"i",88),b.Xb()}}function Ri(e,t){if(1&e){var i=b.Zb();b.Yb(0,"a",124),b.ic("click",function(){b.Lc(i);var e=b.mc().index,t=b.mc(3);return t.RemoveBankTransactionDetails(t.lstBankDepositTransactionDetails[e].Sequence)}),b.Tb(1,"i",92),b.Xb()}}function Di(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2),b.Xb(),b.Yb(3,"td"),b.Yb(4,"input",304),b.ic("ngModelChange",function(e){return t.$implicit.BankName=e}),b.Xb(),b.Xb(),b.Yb(5,"td"),b.Yb(6,"input",304),b.ic("ngModelChange",function(e){return t.$implicit.TransactionId=e}),b.Xb(),b.Xb(),b.Yb(7,"td"),b.Yb(8,"p-calendar",295,305),b.ic("ngModelChange",function(e){return t.$implicit.RecdDate=e}),b.Xb(),b.Xb(),b.Yb(10,"td"),b.Yb(11,"p-inputNumber",306),b.ic("onInput",function(e){b.Lc(i);var n=t.$implicit;return b.mc(3).CalculateTotalBankTransaction(e,n.Sequence)})("onBlur",function(){return b.Lc(i),b.mc(3).CalculateTotalBankTransactionrev()})("ngModelChange",function(e){return t.$implicit.Amount=e}),b.Xb(),b.Xb(),b.Yb(12,"td"),b.Sc(13,Ai,2,0,"a",125),b.Sc(14,Ri,2,0,"a",125),b.Xb(),b.Xb()}if(2&e){var n=t.$implicit,l=t.index,o=b.mc(3);b.Fb(2),b.Vc(l+1),b.Fb(2),b.Pc(b.yc(27,te)),b.vc("name","txtTransactionBankDepoName_",l,""),b.tc("ngModel",n.BankName),b.Fb(2),b.Pc(b.yc(28,te)),b.vc("name","txtTransactionIdBankDepo_",l,""),b.tc("ngModel",n.TransactionId),b.Fb(2),b.wc("yearRange","",o.customDateFormat.MinYear,":",o.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",o.todayDate)("ngModel",n.RecdDate)("ngModelOptions",b.yc(29,yi))("showIcon",!0)("dateFormat",o.customDateFormat.CalendarFormat)("readonlyInput",!1),b.Fb(3),b.Pc(b.yc(30,te)),b.vc("name","txtBankTFAmountTran_",l,""),b.tc("ngModel",n.Amount)("min",0)("max",o.NetPaybleTotal),b.Fb(2),b.tc("ngIf",(null==o.lstBankDepositTransactionDetails?null:o.lstBankDepositTransactionDetails.length)<10),b.Fb(1),b.tc("ngIf",1!==o.lstBankDepositTransactionDetails[l].Sequence)}}function Pi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",302),b.Yb(1,"h3"),b.Uc(2,"Bank Deposit Details"),b.Xb(),b.Tb(3,"hr"),b.Yb(4,"div",287),b.Yb(5,"table",229),b.Yb(6,"thead"),b.Yb(7,"tr"),b.Yb(8,"th"),b.Uc(9,"S.No"),b.Xb(),b.Yb(10,"th"),b.Uc(11,"Bank Name "),b.Yb(12,"span",289),b.Uc(13,"*"),b.Xb(),b.Xb(),b.Yb(14,"th"),b.Uc(15,"Transaction Id "),b.Yb(16,"span",289),b.Uc(17,"*"),b.Xb(),b.Xb(),b.Yb(18,"th"),b.Uc(19,"Received Date "),b.Yb(20,"span",289),b.Uc(21,"*"),b.Xb(),b.Xb(),b.Yb(22,"th"),b.Uc(23,"Amount "),b.Yb(24,"span",289),b.Uc(25,"*"),b.Xb(),b.Xb(),b.Yb(26,"th"),b.Uc(27,"Action"),b.Xb(),b.Xb(),b.Xb(),b.Yb(28,"tbody"),b.Sc(29,Di,15,31,"tr",231),b.Xb(),b.Xb(),b.Xb(),b.Tb(30,"hr"),b.Yb(31,"div",287),b.Yb(32,"div",288),b.Uc(33,"Amount"),b.Xb(),b.Yb(34,"div",290),b.Yb(35,"p-inputNumber",303),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.BANKTFAMOUNT=e}),b.Xb(),b.Xb(),b.Xb(),b.Tb(36,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(29),b.tc("ngForOf",n.lstBankDepositTransactionDetails),b.Fb(6),b.Pc(b.yc(6,te)),b.tc("ngModel",n.TenderObj.BANKTFAMOUNT)("min",0)("max",n.NetPaybleTotal)}}function Yi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",307),b.Yb(1,"h3"),b.Uc(2,"Cheque Details"),b.Xb(),b.Yb(3,"div",287),b.Yb(4,"div",288),b.Uc(5,"Cheque Number "),b.Yb(6,"span",289),b.Uc(7,"*"),b.Xb(),b.Xb(),b.Yb(8,"div",288),b.Yb(9,"input",298),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CHEQUENO=e}),b.Xb(),b.Xb(),b.Yb(10,"div",288),b.Uc(11,"Bank Name "),b.Yb(12,"span",289),b.Uc(13,"*"),b.Xb(),b.Xb(),b.Yb(14,"div",288),b.Yb(15,"input",308),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.BANK=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(16,"div",287),b.Yb(17,"div",288),b.Uc(18,"Issue Date "),b.Yb(19,"span",289),b.Uc(20,"*"),b.Xb(),b.Xb(),b.Yb(21,"div",290),b.Yb(22,"p-calendar",309),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.ChequeIssueDate=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(23,"div",287),b.Yb(24,"div",288),b.Uc(25,"Amount "),b.Yb(26,"span",289),b.Uc(27,"*"),b.Xb(),b.Xb(),b.Yb(28,"div",288),b.Yb(29,"p-inputNumber",310),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CHEQUEAMT=e}),b.Xb(),b.Xb(),b.Yb(30,"div",288),b.Uc(31,"Holder Name"),b.Xb(),b.Yb(32,"div",288),b.Yb(33,"input",311),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.ChequeHolderName=e}),b.Xb(),b.Xb(),b.Xb(),b.Tb(34,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(9),b.Pc(b.yc(24,te)),b.tc("ngModel",n.TenderObj.CHEQUENO),b.Fb(6),b.Pc(b.yc(25,te)),b.tc("ngModel",n.TenderObj.BANK),b.Fb(7),b.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",n.TenderObj.ChequeIssueDate)("ngModelOptions",b.yc(26,yi))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!0),b.Fb(7),b.Pc(b.yc(27,te)),b.tc("ngModel",n.TenderObj.CHEQUEAMT)("min",0)("max",n.NetPaybleTotal),b.Fb(4),b.Pc(b.yc(28,te)),b.tc("ngModel",n.TenderObj.ChequeHolderName)}}function Xi(e,t){if(1&e&&(b.Yb(0,"label"),b.Uc(1),b.Xb()),2&e){var i=b.mc(3);b.Fb(1),b.Vc(i.fileInputLabelAttBankslip1)}}function Ui(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",312),b.Yb(1,"div",313),b.Uc(2,"Attach Supported Doc (max size - 5MB) (PDF, JPG, PNG)"),b.Xb(),b.Yb(3,"div",290),b.Yb(4,"input",314,315),b.ic("change",function(e){return b.Lc(i),b.mc(2).onFileSelectBankDepositSlip(e,"AttBankslip1")}),b.Xb(),b.Tb(6,"br"),b.Sc(7,Xi,2,1,"label",1),b.Xb(),b.Tb(8,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(7),b.tc("ngIf",n.fileInputLabelAttBankslip1)}}function Ni(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",146),b.Yb(1,"div",288),b.Uc(2,"Remarks"),b.Xb(),b.Yb(3,"div",290),b.Yb(4,"input",316),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.REMARKS=e}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(4),b.Pc(b.yc(3,te)),b.tc("ngModel",n.TenderObj.REMARKS)}}function xi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",223),b.Yb(1,"h4",224),b.Uc(2,"Select Payment Method"),b.Xb(),b.Yb(3,"button",275),b.ic("click",function(){return(0,t.dismiss)("Cross click")}),b.Yb(4,"span",226),b.Uc(5,"\xd7"),b.Xb(),b.Xb(),b.Xb(),b.Yb(6,"div",227),b.Yb(7,"div",130),b.Yb(8,"div",228),b.Yb(9,"p-multiSelect",276),b.ic("onChange",function(){return b.Lc(i),b.mc().ShowSelectedItem()})("ngModelChange",function(e){return b.Lc(i),b.mc().selectedPaymodeCodes=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(10,"div",130),b.Yb(11,"div",228),b.Yb(12,"div",146),b.Yb(13,"div",277),b.Uc(14),b.nc(15,"number"),b.Xb(),b.Xb(),b.Sc(16,Si,11,6,"div",278),b.Sc(17,Ti,21,17,"div",279),b.Sc(18,Mi,32,25,"div",280),b.Sc(19,Pi,37,7,"div",281),b.Sc(20,Yi,35,29,"div",282),b.Sc(21,Ui,9,1,"div",283),b.Yb(22,"div",284),b.Sc(23,Ni,5,4,"div",285),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Yb(24,"div",240),b.Yb(25,"button",241),b.ic("click",function(){return(0,t.close)("Close click")}),b.Uc(26,"Close"),b.Xb(),b.Yb(27,"button",104),b.ic("click",function(){return b.Lc(i),b.mc().FireforPayment()}),b.Uc(28,"Pay"),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(9),b.Pc(b.yc(15,te)),b.tc("options",n.lstPayMode)("ngModel",n.selectedPaymodeCodes),b.Fb(5),b.Wc(" Total Amount: ",b.pc(15,12,n.NetPaybleTotal,"1.0-0")," "),b.Fb(2),b.tc("ngIf",n.SelectPaymodeArray.includes("LB1199")),b.Fb(1),b.tc("ngIf",n.SelectPaymodeArray.includes("AT01002")),b.Fb(1),b.tc("ngIf",n.SelectPaymodeArray.includes("AT999999")),b.Fb(1),b.tc("ngIf",n.SelectPaymodeArray.includes("BT01001")),b.Fb(1),b.tc("ngIf",n.SelectPaymodeArray.includes("DI01001")),b.Fb(1),b.tc("ngIf",n.SelectPaymodeArray.includes("AT01002")||n.SelectPaymodeArray.includes("AT999999")||n.SelectPaymodeArray.includes("BT01001")||n.SelectPaymodeArray.includes("DI01001")),b.Fb(2),b.tc("ngIf",(null==n.SelectPaymodeArray?null:n.SelectPaymodeArray.length)>0&&!n.SelectPaymodeArray.includes("ATONLN"))}}function ki(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",292),b.Tb(1,"hr",293),b.Yb(2,"h6",293),b.Yb(3,"strong"),b.Uc(4,"Cash Details"),b.Xb(),b.Xb(),b.Yb(5,"div",287),b.Yb(6,"div",320),b.Yb(7,"label"),b.Yb(8,"strong"),b.Uc(9,"Amount "),b.Yb(10,"span",289),b.Uc(11,"*"),b.Xb(),b.Xb(),b.Xb(),b.Yb(12,"p-inputNumber",294),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CASH=e}),b.Xb(),b.Xb(),b.Yb(13,"div",320),b.Yb(14,"label"),b.Yb(15,"strong"),b.Uc(16," Received Date"),b.Xb(),b.Yb(17,"span",289),b.Uc(18,"*"),b.Xb(),b.Xb(),b.Yb(19,"p-calendar",295,296),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CashRecdDate=e}),b.Xb(),b.Xb(),b.Xb(),b.Tb(21,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(12),b.Pc(b.yc(15,te)),b.tc("ngModel",n.TenderObj.CASH)("min",0)("max",n.CreditNoteAmount),b.Fb(7),b.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",n.TenderObj.CashRecdDate)("ngModelOptions",b.yc(16,yi))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!1)}}function Bi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"a",124),b.ic("click",function(){return b.Lc(i),b.mc(4).AddCardPaymentDetails()}),b.Tb(1,"i",88),b.Xb()}}function wi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"a",124),b.ic("click",function(){b.Lc(i);var e=b.mc().index,t=b.mc(3);return t.RemoveCardPaymentDetails(t.lstCardPaymentTransactionDetails[e].Sequence)}),b.Tb(1,"i",92),b.Xb()}}function Ei(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2),b.Xb(),b.Yb(3,"td"),b.Yb(4,"input",304),b.ic("ngModelChange",function(e){return t.$implicit.CardNumber=e}),b.Xb(),b.Xb(),b.Yb(5,"td"),b.Yb(6,"input",304),b.ic("ngModelChange",function(e){return t.$implicit.CardHolderName=e}),b.Xb(),b.Xb(),b.Yb(7,"td"),b.Yb(8,"input",304),b.ic("ngModelChange",function(e){return t.$implicit.TransactionId=e}),b.Xb(),b.Xb(),b.Yb(9,"td"),b.Yb(10,"p-calendar",295,305),b.ic("ngModelChange",function(e){return t.$implicit.RecdDate=e}),b.Xb(),b.Xb(),b.Yb(12,"td"),b.Yb(13,"p-inputNumber",306),b.ic("onInput",function(e){b.Lc(i);var n=t.$implicit;return b.mc(3).CalculateTotalCardPayment(e,n.Sequence)})("onBlur",function(){return b.Lc(i),b.mc(3).CalculateTotalCardPaymentrev()})("ngModelChange",function(e){return t.$implicit.Amount=e}),b.Xb(),b.Xb(),b.Yb(14,"td"),b.Sc(15,Bi,2,0,"a",125),b.Sc(16,wi,2,0,"a",125),b.Xb(),b.Xb()}if(2&e){var n=t.$implicit,l=t.index,o=b.mc(3);b.Fb(2),b.Vc(l+1),b.Fb(2),b.Pc(b.yc(31,te)),b.vc("name","txtTransactionCardNumber_",l,""),b.tc("ngModel",n.CardNumber),b.Fb(2),b.Pc(b.yc(32,te)),b.vc("name","txtTransactionCardHolderName_",l,""),b.tc("ngModel",n.CardHolderName),b.Fb(2),b.Pc(b.yc(33,te)),b.vc("name","txtTransactionIdCardPayment_",l,""),b.tc("ngModel",n.TransactionId),b.Fb(2),b.wc("yearRange","",o.customDateFormat.MinYear,":",o.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",o.todayDate)("ngModel",n.RecdDate)("ngModelOptions",b.yc(34,yi))("showIcon",!0)("dateFormat",o.customDateFormat.CalendarFormat)("readonlyInput",!1),b.Fb(3),b.Pc(b.yc(35,te)),b.vc("name","txtBankTFAmountTran_",l,""),b.tc("ngModel",n.Amount)("min",0)("max",o.NetPaybleTotal),b.Fb(2),b.tc("ngIf",(null==o.lstCardPaymentTransactionDetails?null:o.lstCardPaymentTransactionDetails.length)<10),b.Fb(1),b.tc("ngIf",1!==o.lstCardPaymentTransactionDetails[l].Sequence)}}function Li(e,t){if(1&e&&(b.Yb(0,"div",297),b.Yb(1,"h6",293),b.Yb(2,"strong"),b.Uc(3,"Card Details"),b.Xb(),b.Xb(),b.Yb(4,"div",325),b.Yb(5,"table",229),b.Yb(6,"thead"),b.Yb(7,"tr"),b.Yb(8,"th"),b.Uc(9,"S.No"),b.Xb(),b.Yb(10,"th"),b.Uc(11,"Card Number "),b.Xb(),b.Yb(12,"th"),b.Uc(13,"Card Holder Name"),b.Xb(),b.Yb(14,"th"),b.Uc(15,"Transaction Id "),b.Yb(16,"span",289),b.Uc(17,"*"),b.Xb(),b.Xb(),b.Yb(18,"th"),b.Uc(19,"Payment Rec. Date "),b.Yb(20,"span",289),b.Uc(21,"*"),b.Xb(),b.Xb(),b.Yb(22,"th"),b.Uc(23,"Amount "),b.Yb(24,"span",289),b.Uc(25,"*"),b.Xb(),b.Xb(),b.Yb(26,"th"),b.Uc(27,"Action"),b.Xb(),b.Xb(),b.Xb(),b.Yb(28,"tbody"),b.Sc(29,Ei,17,36,"tr",231),b.Xb(),b.Xb(),b.Xb(),b.Tb(30,"hr"),b.Xb()),2&e){var i=b.mc(2);b.Fb(29),b.tc("ngForOf",i.lstCardPaymentTransactionDetails)}}function Oi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"a",124),b.ic("click",function(){return b.Lc(i),b.mc(4).AddBankTransactionDetails()}),b.Tb(1,"i",88),b.Xb()}}function Fi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"a",124),b.ic("click",function(){b.Lc(i);var e=b.mc().index,t=b.mc(3);return t.RemoveBankTransactionDetails(t.lstBankDepositTransactionDetails[e].Sequence)}),b.Tb(1,"i",92),b.Xb()}}function _i(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2),b.Xb(),b.Yb(3,"td"),b.Yb(4,"input",304),b.ic("ngModelChange",function(e){return t.$implicit.BankName=e}),b.Xb(),b.Xb(),b.Yb(5,"td"),b.Yb(6,"input",304),b.ic("ngModelChange",function(e){return t.$implicit.TransactionId=e}),b.Xb(),b.Xb(),b.Yb(7,"td"),b.Yb(8,"p-calendar",295,328),b.ic("ngModelChange",function(e){return t.$implicit.RecdDate=e}),b.Xb(),b.Xb(),b.Yb(10,"td"),b.Yb(11,"p-inputNumber",306),b.ic("onInput",function(e){b.Lc(i);var n=t.$implicit;return b.mc(3).CalculateTotalBankTransaction(e,n.Sequence)})("onBlur",function(){return b.Lc(i),b.mc(3).CalculateTotalBankTransactionrev()})("ngModelChange",function(e){return t.$implicit.Amount=e}),b.Xb(),b.Xb(),b.Yb(12,"td"),b.Sc(13,Oi,2,0,"a",125),b.Sc(14,Fi,2,0,"a",125),b.Xb(),b.Xb()}if(2&e){var n=t.$implicit,l=t.index,o=b.mc(3);b.Fb(2),b.Vc(l+1),b.Fb(2),b.Pc(b.yc(27,te)),b.vc("name","txtTransactionBankDepoNamecr_",l,""),b.tc("ngModel",n.BankName),b.Fb(2),b.Pc(b.yc(28,te)),b.vc("name","txtTransactionIdBankDepo_",l,""),b.tc("ngModel",n.TransactionId),b.Fb(2),b.wc("yearRange","",o.customDateFormat.MinYear,":",o.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",o.todayDate)("ngModel",n.RecdDate)("ngModelOptions",b.yc(29,yi))("showIcon",!0)("dateFormat",o.customDateFormat.CalendarFormat)("readonlyInput",!1),b.Fb(3),b.Pc(b.yc(30,te)),b.vc("name","txtBankTFAmountTranCR_",l,""),b.tc("ngModel",n.Amount)("min",0)("max",o.CreditNoteAmount),b.Fb(2),b.tc("ngIf",(null==o.lstBankDepositTransactionDetails?null:o.lstBankDepositTransactionDetails.length)<10),b.Fb(1),b.tc("ngIf",1!==o.lstBankDepositTransactionDetails[l].Sequence)}}function Wi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",302),b.Yb(1,"div",287),b.Yb(2,"div",228),b.Yb(3,"h6",293),b.Yb(4,"strong"),b.Uc(5,"Bank Deposit Details"),b.Xb(),b.Xb(),b.Yb(6,"table",229),b.Yb(7,"thead"),b.Yb(8,"tr"),b.Yb(9,"th"),b.Uc(10,"S.No"),b.Xb(),b.Yb(11,"th"),b.Uc(12,"Bank Name "),b.Yb(13,"span",289),b.Uc(14,"*"),b.Xb(),b.Xb(),b.Yb(15,"th"),b.Uc(16,"Transaction Id "),b.Yb(17,"span",289),b.Uc(18,"*"),b.Xb(),b.Xb(),b.Yb(19,"th"),b.Uc(20,"Payment Rec. Date "),b.Yb(21,"span",289),b.Uc(22,"*"),b.Xb(),b.Xb(),b.Yb(23,"th"),b.Uc(24,"Amount "),b.Yb(25,"span",289),b.Uc(26,"*"),b.Xb(),b.Xb(),b.Yb(27,"th"),b.Uc(28,"Action"),b.Xb(),b.Xb(),b.Xb(),b.Yb(29,"tbody"),b.Sc(30,_i,15,31,"tr",231),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Tb(31,"hr"),b.Yb(32,"div",326),b.Yb(33,"div",327),b.Uc(34,"Amount"),b.Xb(),b.Yb(35,"div",288),b.Yb(36,"p-inputNumber",303),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.BANKTFAMOUNT=e}),b.Xb(),b.Xb(),b.Xb(),b.Tb(37,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(30),b.tc("ngForOf",n.lstBankDepositTransactionDetails),b.Fb(6),b.Pc(b.yc(6,te)),b.tc("ngModel",n.TenderObj.BANKTFAMOUNT)("min",0)("max",n.CreditNoteAmount)}}function ji(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",307),b.Yb(1,"h3"),b.Uc(2,"Cheque Details"),b.Xb(),b.Yb(3,"div",287),b.Yb(4,"div",288),b.Uc(5,"Cheque Number "),b.Yb(6,"span",289),b.Uc(7,"*"),b.Xb(),b.Xb(),b.Yb(8,"div",288),b.Yb(9,"input",298),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CHEQUENO=e}),b.Xb(),b.Xb(),b.Yb(10,"div",288),b.Uc(11,"Bank Name "),b.Yb(12,"span",289),b.Uc(13,"*"),b.Xb(),b.Xb(),b.Yb(14,"div",288),b.Yb(15,"input",308),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.BANK=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(16,"div",287),b.Yb(17,"div",288),b.Uc(18,"Received Date"),b.Yb(19,"span",289),b.Uc(20,"*"),b.Xb(),b.Xb(),b.Yb(21,"div",290),b.Yb(22,"p-calendar",329),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.ChequeRecdDate=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(23,"div",287),b.Yb(24,"div",288),b.Uc(25,"Cheque Date"),b.Yb(26,"span",289),b.Uc(27,"*"),b.Xb(),b.Xb(),b.Yb(28,"div",290),b.Yb(29,"p-calendar",329),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.ChequeIssueDate=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(30,"div",287),b.Yb(31,"div",288),b.Uc(32,"Amount "),b.Yb(33,"span",289),b.Uc(34,"*"),b.Xb(),b.Xb(),b.Yb(35,"div",288),b.Yb(36,"p-inputNumber",310),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.CHEQUEAMT=e}),b.Xb(),b.Xb(),b.Yb(37,"div",288),b.Uc(38,"Holder Name"),b.Xb(),b.Yb(39,"div",288),b.Yb(40,"input",311),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.ChequeHolderName=e}),b.Xb(),b.Xb(),b.Xb(),b.Tb(41,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(9),b.Pc(b.yc(34,te)),b.tc("ngModel",n.TenderObj.CHEQUENO),b.Fb(6),b.Pc(b.yc(35,te)),b.tc("ngModel",n.TenderObj.BANK),b.Fb(7),b.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",n.TenderObj.ChequeRecdDate)("ngModelOptions",b.yc(36,yi))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!0),b.Fb(7),b.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",n.TenderObj.ChequeIssueDate)("ngModelOptions",b.yc(37,yi))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!0),b.Fb(7),b.Pc(b.yc(38,te)),b.tc("ngModel",n.TenderObj.CHEQUEAMT)("min",0)("max",n.NetPaybleTotal),b.Fb(4),b.Pc(b.yc(39,te)),b.tc("ngModel",n.TenderObj.ChequeHolderName)}}function Vi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",330),b.Yb(1,"div",146),b.Yb(2,"div",288),b.Yb(3,"label"),b.Yb(4,"strong"),b.Uc(5," Select Trust"),b.Xb(),b.Xb(),b.Yb(6,"p-dropdown",331),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.TrustId=e}),b.Xb(),b.Xb(),b.Yb(7,"div",288),b.Yb(8,"label"),b.Yb(9,"strong"),b.Uc(10,"Select Member Type"),b.Xb(),b.Xb(),b.Yb(11,"p-dropdown",332),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.TMemberTypeId=e}),b.Xb(),b.Xb(),b.Yb(12,"div",288),b.Yb(13,"label"),b.Yb(14,"strong"),b.Uc(15,"Membership Number"),b.Xb(),b.Xb(),b.Yb(16,"input",333),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.MemberShipNumber=e}),b.Xb(),b.Xb(),b.Tb(17,"div",288),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(6),b.Pc(b.yc(15,te)),b.tc("options",n.lstTrustMaster)("ngModel",n.TenderObj.TrustId)("filter",!0)("showClear",!0),b.Fb(5),b.Pc(b.yc(16,te)),b.tc("options",n.lstTrustMemberTypeMaster)("ngModel",n.TenderObj.TMemberTypeId)("filter",!0)("showClear",!0),b.Fb(5),b.Pc(b.yc(17,te)),b.tc("ngModel",n.TenderObj.MemberShipNumber)}}function Zi(e,t){if(1&e&&(b.Yb(0,"label"),b.Uc(1),b.Xb()),2&e){var i=b.mc(3);b.Fb(1),b.Vc(i.fileInputLabelAttBankslip1)}}function Gi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",312),b.Yb(1,"div",313),b.Uc(2,"Attach Supported Doc (max size - 5MB) (PDF, JPG, PNG)"),b.Xb(),b.Yb(3,"div",290),b.Yb(4,"input",314,315),b.ic("change",function(e){return b.Lc(i),b.mc(2).onFileSelectBankDepositSlip(e,"AttBankslip1")}),b.Xb(),b.Tb(6,"br"),b.Sc(7,Zi,2,1,"label",1),b.Xb(),b.Tb(8,"hr"),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(7),b.tc("ngIf",n.fileInputLabelAttBankslip1)}}function qi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",146),b.Yb(1,"div",288),b.Yb(2,"label"),b.Yb(3,"strong"),b.Uc(4," Remarks"),b.Xb(),b.Xb(),b.Yb(5,"input",316),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).TenderObj.REMARKS=e}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(5),b.Pc(b.yc(3,te)),b.tc("ngModel",n.TenderObj.REMARKS)}}function Hi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(2).SaveCreditNote()}),b.Uc(1,"Save"),b.Xb()}}function Qi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",223),b.Yb(1,"h4",224),b.Uc(2,"Receive Payment"),b.Xb(),b.Yb(3,"button",317),b.ic("click",function(){return(0,t.dismiss)("Cross click")}),b.Yb(4,"span",226),b.Uc(5,"\xd7"),b.Xb(),b.Xb(),b.Xb(),b.Yb(6,"div",318),b.Yb(7,"div",319),b.Yb(8,"div",320),b.Yb(9,"label"),b.Yb(10,"strong"),b.Uc(11," Receive Amount"),b.Xb(),b.Xb(),b.Yb(12,"p-inputNumber",321),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().CreditNoteAmount=e})("onInput",function(e){return b.Lc(i),b.mc().ReflectCreditBalance(e)}),b.Xb(),b.Xb(),b.Yb(13,"div",320),b.Yb(14,"label"),b.Yb(15,"strong"),b.Uc(16,"Receive Mode"),b.Xb(),b.Xb(),b.Yb(17,"p-multiSelect",276),b.ic("onChange",function(){return b.Lc(i),b.mc().ShowSelectedItem()})("ngModelChange",function(e){return b.Lc(i),b.mc().selectedPaymodeCodes=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(18,"div",322),b.Yb(19,"div",228),b.Sc(20,ki,22,17,"div",279),b.Sc(21,Li,31,1,"div",280),b.Sc(22,Wi,38,7,"div",281),b.Sc(23,ji,42,40,"div",282),b.Sc(24,Vi,18,18,"div",323),b.Sc(25,Gi,9,1,"div",283),b.Yb(26,"div",284),b.Sc(27,qi,6,4,"div",285),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Yb(28,"div",240),b.Sc(29,Hi,2,0,"button",100),b.Yb(30,"button",324),b.ic("click",function(){return(0,t.close)("Close click")}),b.Uc(31,"Close"),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(12),b.Pc(b.yc(19,te)),b.tc("ngModel",n.CreditNoteAmount)("min",0)("max",n.MaxRecAmount)("minFractionDigits",2)("maxFractionDigits",5),b.Fb(5),b.Pc(b.yc(20,te)),b.tc("options",n.lstPayMode)("ngModel",n.selectedPaymodeCodes),b.Fb(3),b.tc("ngIf",n.SelectPaymodeArray.includes("AT01002")),b.Fb(1),b.tc("ngIf",n.SelectPaymodeArray.includes("AT999999")),b.Fb(1),b.tc("ngIf",n.SelectPaymodeArray.includes("BT01001")),b.Fb(1),b.tc("ngIf",n.SelectPaymodeArray.includes("DI01001")),b.Fb(1),b.tc("ngIf",!n.SelectPaymodeArray.includes("ATONLN")&&!n.SelectPaymodeArray.includes("ATWLONLN")),b.Fb(1),b.tc("ngIf",n.SelectPaymodeArray.includes("AT01002")||n.SelectPaymodeArray.includes("AT999999")||n.SelectPaymodeArray.includes("BT01001")||n.SelectPaymodeArray.includes("DI01001")),b.Fb(2),b.tc("ngIf",(null==n.SelectPaymodeArray?null:n.SelectPaymodeArray.length)>0&&!n.SelectPaymodeArray.includes("ATONLN")&&!n.SelectPaymodeArray.includes("ATWLONLN")),b.Fb(2),b.tc("ngIf",n.CreditNoteAmount>0&&(null==n.SelectPaymodeArray?null:n.SelectPaymodeArray.length)>0)}}function $i(e,t){1&e&&b.Uc(0),2&e&&b.Wc(" ",t.$implicit.TenderName," ")}function zi(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",340),b.Yb(1,"div",228),b.Yb(2,"div",287),b.Yb(3,"div",288),b.Uc(4,"Account Number "),b.Yb(5,"span",289),b.Uc(6,"*"),b.Xb(),b.Xb(),b.Yb(7,"div",288),b.Yb(8,"input",341),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).RefundObj.AccNumber=e}),b.Xb(),b.Xb(),b.Yb(9,"div",288),b.Uc(10,"Account Holder Name "),b.Yb(11,"span",289),b.Uc(12,"*"),b.Xb(),b.Xb(),b.Yb(13,"div",288),b.Yb(14,"input",342),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).RefundObj.AccHolderName=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(15,"div",287),b.Yb(16,"div",288),b.Uc(17,"IFSC Code "),b.Yb(18,"span",289),b.Uc(19,"*"),b.Xb(),b.Xb(),b.Yb(20,"div",288),b.Yb(21,"input",343),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).RefundObj.IFSCCode=e}),b.Xb(),b.Xb(),b.Yb(22,"div",288),b.Uc(23,"Bank Name"),b.Xb(),b.Yb(24,"div",288),b.Yb(25,"input",344),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).RefundObj.BankName=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(26,"div",287),b.Yb(27,"div",288),b.Uc(28,"Transaction Id "),b.Yb(29,"span",289),b.Uc(30,"*"),b.Xb(),b.Xb(),b.Yb(31,"div",288),b.Yb(32,"input",345),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).RefundObj.TransactionId=e}),b.Xb(),b.Xb(),b.Yb(33,"div",288),b.Uc(34,"Purpose "),b.Yb(35,"span",289),b.Uc(36,"*"),b.Xb(),b.Xb(),b.Yb(37,"div",288),b.Yb(38,"input",338),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).RefundObj.Purpose=e}),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(8),b.Pc(b.yc(18,te)),b.tc("ngModel",n.RefundObj.AccNumber),b.Fb(6),b.Pc(b.yc(19,te)),b.tc("ngModel",n.RefundObj.AccHolderName),b.Fb(7),b.Pc(b.yc(20,te)),b.tc("ngModel",n.RefundObj.IFSCCode),b.Fb(4),b.Pc(b.yc(21,te)),b.tc("ngModel",n.RefundObj.BankName),b.Fb(7),b.Pc(b.yc(22,te)),b.tc("ngModel",n.RefundObj.TransactionId),b.Fb(6),b.Pc(b.yc(23,te)),b.tc("ngModel",n.RefundObj.Purpose)}}function Ki(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",346),b.Yb(1,"div",288),b.Uc(2,"Refund Date "),b.Yb(3,"span",289),b.Uc(4,"*"),b.Xb(),b.Xb(),b.Yb(5,"div",288),b.Yb(6,"p-calendar",347),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc(2).RefundObj.RefundDate=e}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(6),b.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),b.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",n.RefundObj.RefundDate)("ngModelOptions",b.yc(9,yi))("showIcon",!0)("readonlyInput",!0)}}function Ji(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",287),b.Yb(1,"div",320),b.Yb(2,"h5"),b.Uc(3,"Refund Amount"),b.Xb(),b.Yb(4,"p-inputNumber",334),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().RefundCreditNoteAmount=e}),b.Xb(),b.Xb(),b.Yb(5,"div",320),b.Yb(6,"h5"),b.Uc(7,"Select Refund Mode"),b.Xb(),b.Yb(8,"p-dropdown",335),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().selectedPaymode=e}),b.Sc(9,$i,1,1,"ng-template",57),b.Xb(),b.Xb(),b.Xb(),b.Sc(10,zi,39,24,"div",336),b.Sc(11,Ki,7,10,"div",337),b.Yb(12,"div",287),b.Yb(13,"div",288),b.Uc(14,"Purpose "),b.Yb(15,"span",289),b.Uc(16,"*"),b.Xb(),b.Xb(),b.Yb(17,"div",290),b.Yb(18,"input",338),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().RefundObj.Purpose=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(19,"div",287),b.Yb(20,"div",288),b.Uc(21,"Approved By "),b.Yb(22,"span",289),b.Uc(23,"*"),b.Xb(),b.Xb(),b.Yb(24,"div",290),b.Yb(25,"input",339),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().RefundObj.ApprovedBy=e}),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(4),b.Pc(b.yc(21,te)),b.tc("ngModel",n.RefundCreditNoteAmount)("min",0)("max",n.MaxRefundableAmount)("minFractionDigits",2)("maxFractionDigits",5),b.Fb(4),b.Pc(b.yc(22,te)),b.tc("options",n.lstPayModeRefund)("ngModel",n.selectedPaymode)("filter",!0)("showClear",!0),b.Fb(2),b.tc("ngIf","AT999997"==n.selectedPaymode),b.Fb(1),b.tc("ngIf","AT01002"==n.selectedPaymode),b.Fb(7),b.Pc(b.yc(23,te)),b.tc("ngModel",n.RefundObj.Purpose),b.Fb(7),b.Pc(b.yc(24,te)),b.tc("ngModel",n.RefundObj.ApprovedBy)}}function en(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",104),b.ic("click",function(){return b.Lc(i),b.mc(2).SaveRefundCreditNote()}),b.Uc(1,"Submit"),b.Xb()}}function tn(e,t){if(1&e&&b.Sc(0,en,2,0,"button",100),2&e){var i=b.mc();b.tc("ngIf",i.RefundCreditNoteAmount>0)}}function nn(e,t){if(1&e&&(b.Yb(0,"div"),b.Tb(1,"app-colon-hydrotherapy",348),b.Xb()),2&e){var i=b.mc();b.Fb(1),b.tc("clinicId",i.ClinicIdSelected)}}function ln(e,t){1&e&&(b.Yb(0,"h5"),b.Uc(1,"Select Room Type"),b.Xb())}function on(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2),b.Xb(),b.Yb(3,"td"),b.Uc(4),b.Xb(),b.Yb(5,"td"),b.Yb(6,"button",87),b.ic("click",function(){b.Lc(i);var e=t.$implicit;return b.mc(2).SelectParentMCode(e.MCODE)}),b.Uc(7," Select "),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=t.$implicit;b.Fb(2),b.Vc(n.MCODE),b.Fb(2),b.Vc(n.Description)}}function rn(e,t){if(1&e&&(b.Yb(0,"table",349),b.Yb(1,"thead"),b.Yb(2,"tr",350),b.Yb(3,"th"),b.Uc(4,"MCODE"),b.Xb(),b.Yb(5,"th"),b.Uc(6,"Description"),b.Xb(),b.Yb(7,"th"),b.Uc(8,"Action"),b.Xb(),b.Xb(),b.Xb(),b.Yb(9,"tbody"),b.Sc(10,on,8,2,"tr",231),b.Xb(),b.Xb()),2&e){var i=b.mc();b.Fb(10),b.tc("ngForOf",i.lstSelectedMCODERoom)}}function an(e,t){}function cn(e,t){1&e&&b.Ub(0)}function sn(e,t){if(1&e&&(b.Yb(0,"div"),b.Sc(1,cn,1,0,"ng-container",97),b.Xb()),2&e){b.mc();var i=b.Ic(65);b.Fb(1),b.tc("ngTemplateOutlet",i)}}function dn(e,t){if(1&e&&(b.Yb(0,"tr"),b.Yb(1,"td",363),b.Uc(2),b.Xb(),b.Yb(3,"td",364),b.Uc(4),b.nc(5,"number"),b.Xb(),b.Yb(6,"td",364),b.Uc(7),b.Xb(),b.Yb(8,"td",365),b.Uc(9),b.nc(10,"number"),b.Xb(),b.Yb(11,"td",366),b.Uc(12),b.nc(13,"date"),b.Xb(),b.Xb()),2&e){var i=t.$implicit,n=b.mc(2);b.Fb(2),b.Wc(" ",i.Description,""),b.Fb(2),b.Wc(" ",b.pc(5,5,i.MRP,"1.1-2"),""),b.Fb(3),b.Wc(" ",i.Qty,""),b.Fb(2),b.Wc(" ",b.pc(10,8,i.PriceWithGST,"1.1-2"),""),b.Fb(3),b.Wc(" ",b.pc(13,11,i.PurchaseDate,n.customDateFormat.DEF_DATE),"")}}function un(e,t){if(1&e){var i=b.Zb();b.Yb(0,"app-print-access-header",351),b.ic("onselectedLetterhead",function(e){return b.Lc(i),b.mc().onselectedLetterhead(e)}),b.Xb(),b.Yb(1,"div",352),b.Yb(2,"div",228),b.Tb(3,"app-print-header",353),b.Yb(4,"table",354),b.Yb(5,"tbody"),b.Yb(6,"tr"),b.Yb(7,"table",355),b.Yb(8,"thead",356),b.Yb(9,"tr",357),b.Yb(10,"th",358),b.Uc(11,"Item"),b.Xb(),b.Yb(12,"th",358),b.Uc(13,"Price"),b.Xb(),b.Yb(14,"th",358),b.Uc(15,"Qty"),b.Xb(),b.Yb(16,"th",359),b.Uc(17,"Total"),b.Xb(),b.Yb(18,"th",358),b.Uc(19,"Purchase Date"),b.Xb(),b.Xb(),b.Xb(),b.Yb(20,"tbody",356),b.Sc(21,dn,14,14,"tr",231),b.Yb(22,"tr"),b.Yb(23,"td",360),b.Yb(24,"b"),b.Uc(25,"Grand Total: "),b.Xb(),b.Uc(26),b.nc(27,"number"),b.Xb(),b.Xb(),b.Yb(28,"tr"),b.Yb(29,"td",361),b.Tb(30,"hr"),b.Xb(),b.Xb(),b.Yb(31,"tr"),b.Yb(32,"td",362),b.Uc(33,"Authorized Signature"),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.tc("IsLetterhead",n.IsLetterhead)("IsNgxPrint",!0),b.Fb(3),b.tc("slotBookingId",n.SlotBookingIdSelected)("IsGST",!0)("IsLetterhead",n.IsLetterhead)("heading","Estimeted Bill"),b.Fb(18),b.tc("ngForOf",n.printBillItem),b.Fb(5),b.Wc(" \u20b9 ",b.pc(27,8,n.TotalGrandTotalAmount,"1.1-2"),"")}}function bn(e,t){1&e&&b.Ub(0)}function hn(e,t){if(1&e&&(b.Yb(0,"div"),b.Sc(1,bn,1,0,"ng-container",97),b.Xb()),2&e){b.mc();var i=b.Ic(69);b.Fb(1),b.tc("ngTemplateOutlet",i)}}function mn(e,t){if(1&e&&(b.Yb(0,"tr"),b.Yb(1,"td",363),b.Uc(2),b.Xb(),b.Yb(3,"td",364),b.Uc(4),b.nc(5,"number"),b.Xb(),b.Yb(6,"td",364),b.Uc(7),b.Xb(),b.Yb(8,"td",365),b.Uc(9),b.nc(10,"number"),b.Xb(),b.Yb(11,"td",366),b.Uc(12),b.nc(13,"date"),b.Xb(),b.Xb()),2&e){var i=t.$implicit,n=b.mc(2);b.Fb(2),b.Wc(" ",i.Description,""),b.Fb(2),b.Wc(" ",b.pc(5,5,i.MRP,"1.1-2"),""),b.Fb(3),b.Wc(" ",i.Qty,""),b.Fb(2),b.Wc(" ",b.pc(10,8,i.PriceWithGST,"1.1-2"),""),b.Fb(3),b.Wc(" ",b.pc(13,11,i.PurchaseDate,n.customDateFormat.DEF_DATE),"")}}function vn(e,t){if(1&e){var i=b.Zb();b.Yb(0,"app-print-access-header",351),b.ic("onselectedLetterhead",function(e){return b.Lc(i),b.mc().onselectedLetterhead(e)}),b.Xb(),b.Yb(1,"div",352),b.Yb(2,"div",228),b.Tb(3,"app-print-header",367),b.Yb(4,"table",354),b.Yb(5,"tbody"),b.Yb(6,"tr"),b.Yb(7,"table",355),b.Yb(8,"thead",356),b.Yb(9,"tr",357),b.Yb(10,"th",358),b.Uc(11,"Item"),b.Xb(),b.Yb(12,"th",358),b.Uc(13,"Price"),b.Xb(),b.Yb(14,"th",358),b.Uc(15,"Qty"),b.Xb(),b.Yb(16,"th",359),b.Uc(17,"Total"),b.Xb(),b.Yb(18,"th",358),b.Uc(19,"Purchase Date"),b.Xb(),b.Xb(),b.Xb(),b.Yb(20,"tbody",356),b.Sc(21,mn,14,14,"tr",231),b.Yb(22,"tr"),b.Yb(23,"td",360),b.Yb(24,"b"),b.Uc(25,"Grand Total: "),b.Xb(),b.Uc(26),b.nc(27,"number"),b.Xb(),b.Xb(),b.Yb(28,"tr"),b.Yb(29,"td",360),b.Yb(30,"b"),b.Uc(31,"Discount Amount: "),b.Xb(),b.Uc(32),b.nc(33,"number"),b.Xb(),b.Xb(),b.Yb(34,"tr"),b.Yb(35,"td",360),b.Yb(36,"b"),b.Uc(37,"Net Payable: "),b.Xb(),b.Uc(38),b.nc(39,"number"),b.Xb(),b.Xb(),b.Yb(40,"tr"),b.Yb(41,"td",360),b.Yb(42,"b"),b.Uc(43,"Received Amount: "),b.Xb(),b.Uc(44),b.nc(45,"number"),b.Xb(),b.Xb(),b.Yb(46,"tr"),b.Yb(47,"td",360),b.Yb(48,"b"),b.Uc(49,"Balance Amount: "),b.Xb(),b.Uc(50),b.nc(51,"number"),b.Xb(),b.Xb(),b.Yb(52,"tr"),b.Yb(53,"td",361),b.Tb(54,"hr"),b.Xb(),b.Xb(),b.Yb(55,"tr"),b.Yb(56,"td",362),b.Uc(57,"Authorized Signature"),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.tc("IsLetterhead",n.IsLetterhead)("IsNgxPrint",!0),b.Fb(3),b.tc("slotBookingId",n.SlotBookingIdSelected)("IsGST",!0)("IsLetterhead",n.IsLetterhead),b.Fb(18),b.tc("ngForOf",n.printBillItem),b.Fb(5),b.Wc(" \u20b9 ",b.pc(27,11,n.TotalGrandTotalAmount,"1.1-2"),""),b.Fb(6),b.Wc(" \u20b9 ",b.pc(33,14,n.TotalDiscountAmount,"1.1-2"),""),b.Fb(6),b.Wc(" \u20b9 ",b.pc(39,17,n.TotalGrandTotalAmount-n.TotalDiscountAmount,"1.1-2"),""),b.Fb(6),b.Wc(" \u20b9 ",b.pc(45,20,n.TotalReceiveAmount,"1.1-2"),""),b.Fb(6),b.Wc(" \u20b9 ",b.pc(51,23,n.TotalGrandTotalAmount-n.TotalDiscountAmount-n.TotalReceiveAmount,"1.1-2"),"")}}function fn(e,t){if(1&e&&(b.Yb(0,"h5"),b.Uc(1),b.Xb()),2&e){var i=b.mc();b.Fb(1),b.Wc("Payment ","RefundPayment"==i.SelectedInvType?"Refund":"Receive"," Details")}}function pn(e,t){if(1&e&&(b.Yb(0,"div"),b.Tb(1,"app-print-payment-voucher",368),b.Xb()),2&e){var i=b.mc();b.Fb(1),b.tc("SelectedSlotBookingId",i.SelectedSlotBookingId)("SelectedVCHRNO",i.SelectedVCHRNO)("SelectedPhiscalID",i.SelectedPhiscalID)("SelectedDivision",i.SelectedDivision)("InvType",i.SelectedInvType)}}function gn(e,t){if(1&e&&(b.Yb(0,"div"),b.Tb(1,"app-print-profile",369),b.Xb()),2&e){var i=b.mc();b.Fb(1),b.tc("SlotBookingIdSelected",i.SlotBookingIdSelected)("InvoiceNumberSelected",i.InvoiceNumberSelected)("PhiscalIdSelected",i.PhiscalIdSelected)("DivisionSelected",i.DivisionSelected)}}function In(e,t){if(1&e&&(b.Yb(0,"div"),b.Tb(1,"app-individual-transaction-list",370),b.Xb()),2&e){var i=b.mc();b.Fb(1),b.tc("slotBookingId",i.SlotBookingIdSelected)("SelectedVCHRNO",i.InvoiceNumberSelected)("SelectedPhiscalID",i.PhiscalIdSelected)("SelectedDivision",i.DivisionSelected)}}function Cn(e,t){if(1&e&&(b.Yb(0,"div"),b.Tb(1,"app-individual-invoice-list",371),b.Xb()),2&e){var i=b.mc();b.Fb(1),b.tc("slotBookingId",i.VisitorSelected)("IsVisitor",!0)}}function Sn(e,t){if(1&e&&(b.Yb(0,"div"),b.Tb(1,"app-pre-invoice-print",372),b.Xb()),2&e){var i=b.mc();b.Fb(1),b.tc("SlotBookingIdSelected",i.userSelected)("TIProvisionalNo",i.TIProvisionalNo)("TIProvisionalDate",i.TIProvisionalDate)("RemainingAmount",i.RemainingAmount)}}var yn=function(){return{width:"90vw"}},Tn=function(){return{width:"70vw"}},Mn=function(){return{width:"60% !important",height:"40% !important",top:"25% !important",left:"30% !important"}},An=function(){var t=function(t){i(o,t);var n=l(o);function o(e,t,i,l,r,c,s,d,b,h){var m,v,f;return a(this,o),(m=n.call(this)).cdRef=e,m.router=t,m.route=i,m.modalService=l,m._ConstantServices=r,m._MasterServices=c,m._PatientServices=s,m._UtilityService=d,m.formBuilder=b,m.confirmationService=h,m.lsobjClinicMaster=JSON.parse(localStorage.getItem("objClinicMaster"))||null,m.BankDepositSlip1Att=null,m.AttRefundSlip1Att=null,m.ClinicCurre=localStorage.getItem("ClinicId"),m.UserTypeCurre=localStorage.getItem("userTypeId"),m.loginId=localStorage.getItem("userId"),m.bookingStatus=u.d,m.customDateFormat=u.h,m.UserTypes=u.s,m.billTypeStatus=u.c,m.billItemStatus=u.b,m.invoiceStatus=u.l,m.defaultItemMCODE=u.i,m.PaymentMethodSelected="",m.SlotDetailsNew={},m.SlotBookingIdSelected=null,m.InvoiceNumberSelected=null,m.qrySlotId=null,m.ClinicIdSelected="",m.NewItemDetails=[],m.TenderModel={},m.TenderObj={},m.lstAuthorizedMaster=[],m.selectedNodesItem=[],m.IsListView=!1,m.itemMaster=[],m.lstExtraItemDetails=[],m.lstExtraListItemDetails=[],m.extraItemRowCounter=0,m.editing=!1,m.lstSelectedBillableItem=[],m.lstExtraItemEmpty=[],m.UserList=[],m.userSelected="",m.tableDataExtraItemAll=[],m.tableDataExtraItem=[],m.tableDataExtraItemCredit=[],m.DivisionSelected=null,m.PhiscalIdSelected=null,m.IsSelectedItem=!1,m.ItemCheckedTotal=0,m.ExtraItemList=[],m.slotBookingMaster={},m.bookingMainModel={},m.WLOrderRes={},m.OrderRes={},m.UserRes={},m.selectAllItem=!1,m.AllItemPriceRes=[],m.ItemPriceRes=[],m.ProdList=[],m.printBillItem=[],m.checked=!1,m.TotalGrandTotalAmount=0,m.lstPayMode=[],m.SelectPaymodeArray=[],m.lstTenderModel=[],m.BillWiseDiscountPer=0,m.BillWiseDiscountAmount=0,m.NetPaybleTotal=0,m.ReferredBy="",m.RequestedBy="",m.ItemTotalDiscount=0,m.selection={},m.PayRequestFrom="Frontdesk",m.CreditNoteAmount=0,m.CreditNoteBalanceAmount=0,m.CreditLimit=0,m.CustomerInfoDetails={},m.MaxCreditLimit=0,m.RefundCreditNoteAmount=0,m.MaxRefundAmount=0,m.todayDate=new Date,m.TrnMain=[],m.TotalAmount=0,m.ItemWiseTotalDisAmount=0,m.TotalFlatDiscount=0,m.lstBankDepositTransactionDetails=[],m.BankDepTrnCounter=1,m.CardTrnCounter=1,m.PaymentTransactionDetails=[],m.RecPayment=!0,m.lstReciveVoucher=[],m.RecWith="Single",m.PaymentReciveList=[],m.SelectedSlotBookingId=null,m.SelectedVCHRNO=null,m.SelectedPhiscalID=null,m.SelectedDivision=null,m.TrnMode="New",m.selectedPaymode=null,m.RefundObj={},m.lstPayModeRefund=[],m.SelectedInvType=null,m.MaxRecAmount=1e8,m.MaxRefundableAmount=1e8,m.PIString=null,m.PerformaItemList=[],m.InvMode="Performa",m.PerformaOrderIds=[],m.TotalReceiveAmount=0,m.TotalDiscountAmount=0,m.BalanceType=null,m.RemainingAmount=0,m.IsRefundVoucher=!1,m.ExtraRoomCount=0,m.lstSelectedMCODERoom=[],m.SelectedSequence=0,m.showModalRoomCategorySelect=!1,m.lstCardPaymentTransactionDetails=[],m.lstTrustMaster=[],m.lstTrustMemberTypeMaster=[],m.ShowExtraItemModel=!1,m.ShowEstimetedBillListModel=!1,m.ShowTransactionDetailsModel=!1,m.ShowPerformaInvoiceListModel=!1,m.ShowPrintPaymentVoucherModel=!1,m.ShowPrintProfileModel=!1,m.MaxCreditNoteAmount=0,m.CreditNoteTranAmount=0,m.CreditNoteNumber=null,m.CreditNoteBalance=0,m.ShowPaymentRefundMethodModel=!1,m.ShowColonHydroModel=!1,m.ActionList=u.a,m.lstIAccess=[],m.lstIAccessStr=[],m.ClinicDetails={},m.IsLetterhead="false",m.PIEditGenRemarks=null,m.clinicGroup=u.e,m.SelectedBookingTypeClinicType={},m.CheckIsCredit=!1,m.isGenerateTI=!1,m.IsVistorBilling=!1,m.CustomerType=null,m.VisitorUserMaster={},m.VisitorSelected=null,m.ShowInvoiceListModel=!1,m.isCGHS=!1,m.isCashless=!1,m.PrintCILabel="Print Pre Invoice",m.TIProvisionalNo=null,m.TIProvisionalDate=new Date,m.IsGroupedSelected=!1,m.bookingtypeSelected=null,m.MaxYear=(new Date).getFullYear()+2,m.showIndividualInvoiceList=!0,m.IsRefundforPI=!1,m.ShowPreInvoiceModel=!1,m.lstOnlinePayModAccess=[],m.selectedPatient="",m.suggestions=[],m.SearchByMrNo=!1,m.BookingStatus=0,m.slotBookingStatus=0,m._ConstantServices.ActiveMenuName="Billing Service",m.CustomerType="Patient",m.IsVistorBilling=1==(null===(v=m.lsobjClinicMaster)||void 0===v?void 0:v.IsVistorBilling),m.lstOnlinePayModAccess=(null===(f=m.lsobjClinicMaster)||void 0===f?void 0:f.lstOnlinePaymentModes)||[],u.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(m.ClinicIdSelected=localStorage.getItem("ClinicId")),m}return s(o,[{key:"ngOnInit",value:function(){var e,t=this;-330===this._ConstantServices.timeZoneOffset?(this.unsubscribe.add=this.route.queryParams.subscribe(function(e){t.userSelected=e.id,t.qrySlotId=e.id,t.onChangeHealthSeeker()}),this.fileUploadAttBankslip1=this.formBuilder.group({AttBankslip1:[""]}),this.fileUploadAttRefslip1=this.formBuilder.group({AttRefAppslip1:[""]}),this.loadTrusMaster(),this.loadTrusMemberTypeMaster(),this.ResetTenderList(),u.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.GetUserListForExtraItem(),this.LoadClinicMasterById()),0==(null===(e=this.lstExtraItemDetails)||void 0===e?void 0:e.length)&&null!=this.userSelected&&null!=this.userSelected&&""!=this.userSelected&&this.AddExtraItemDetails()):this._UtilityService.showWarningAlert("Your System's Time zone is incorrect. This can cause data discrepancy. Please go to Windows Setting and set it to (UTC+5:30).")}},{key:"ngAfterViewChecked",value:function(){var e;0==(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)&&this.getPageLevelAccess()}},{key:"getPageLevelAccess",value:function(){var e,t,i=this,n=this.getUrlWithoutParams();"/common-dashboard"==n&&(n="/payment/extra-item-entry");var l=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==l?void 0:l.find(function(e){return e.MenuItemURL===n}))&&(this.lstIAccess=null===(e=l.find(function(e){return e.MenuItemURL===n}))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(function(e){i.lstIAccessStr.push(e.ActionId.toString())}))}},{key:"getUrlWithoutParams",value:function(){var e=this.router.parseUrl(this.router.url);return e.queryParams={},e.fragment=null,e.toString()}},{key:"resetIndividualInvoiceList",value:function(){var e=this;this.showIndividualInvoiceList=!1,setTimeout(function(){e.showIndividualInvoiceList=!0},100)}},{key:"onclinicSelect",value:function(e){this.ClinicIdSelected=e,this.GetUserListForExtraItem(),this.LoadClinicMasterById()}},{key:"onselectedClinic",value:function(e){this.lstOnlinePayModAccess=(null==e?void 0:e.lstOnlinePaymentModes)||[]}},{key:"searchHealthSeeker",value:function(e){var t=this,i=e.query;this.cdRef.detectChanges(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetUserListForExtraItemBySearch(this.ClinicIdSelected,i.trim()).subscribe(function(e){if(t._UtilityService.hideSpinner(),1==e.actionResult.success){var i=[];i=JSON.parse(e.actionResult.result),t.suggestions=i=i||[],t.cdRef.detectChanges()}else t.suggestions=[]},function(e){t._UtilityService.hideSpinner(),t._UtilityService.showErrorAlert(e.message)})}},{key:"onClear",value:function(){this.userSelected=null}},{key:"onChangeHealthSeeker",value:function(){var e,t,i,n=this;this.SearchByMrNo&&(this.userSelected=this.selectedPatient.SlotBookingId,this.BookingStatus=this.selectedPatient.BookingStatus);var l=null===(e=this.UserList)||void 0===e?void 0:e.find(function(e){return e.SlotBookingId==n.userSelected}),o=null===(t=this.suggestions)||void 0===t?void 0:t.find(function(e){return e.SlotBookingId==n.userSelected});this.IsGroupedSelected=null==l||null==l?null!=o&&null!=o&&o.IsGrouped:l.IsGrouped,this.bookingtypeSelected=null==l||null==l?null==o||null==o?"IPD":o.BookingType:l.BookingType,this.slotBookingStatus=null==l||null==l?null==o||null==o?0:o.BookingStatus:l.BookingStatus,this.isCGHS=null==l||null==l?null!=o&&null!=o&&o.IsCGHS:l.IsCGHS,this.isCashless=null==l||null==l?null!=o&&null!=o&&o.IsCashless:l.IsCashless,this.TIProvisionalNo=null==l||null==l?null==o||null==o?null:o.TIProvisionalNo:l.TIProvisionalNo,this.TIProvisionalDate=null==l||null==l?null==o||null==o?null:o.TIProvisionalDate:l.TIProvisionalDate,this.isCashless&&null!=this.TIProvisionalNo&&null!=this.TIProvisionalNo&&""!=(null===(i=this.TIProvisionalNo)||void 0===i?void 0:i.trim())&&(this.PrintCILabel="Print Provisional Invoice"),this.selectedTab=0,this.LoaditemMasterWithGrouping(),this.LoadConsumedItem(),this.LoadInvoiceData(),this.LoadCrediNoteBalance()}},{key:"loadTrusMaster",value:function(){var e=this;this.lstTrustMaster=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetTrustMasterActive().subscribe(function(t){if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.lstTrustMaster=i=i||[]}},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)}),this.cdRef.detectChanges()}},{key:"loadTrusMemberTypeMaster",value:function(){var e=this;this.lstTrustMemberTypeMaster=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetTrustMemberTypeMasterActive().subscribe(function(t){if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.lstTrustMemberTypeMaster=i=i||[]}},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)}),this.cdRef.detectChanges()}},{key:"ResetTenderList",value:function(){var t,i=this;if(this.lstPayMode=c.a.filter(function(e){return"ATONLN"!==e.ACID&&"ATWLONLN"!==e.ACID}),(null===(t=this.lstOnlinePayModAccess)||void 0===t?void 0:t.length)>0){var n=c.a.filter(function(e){return i.lstOnlinePayModAccess.includes(e.ACID)});this.lstPayMode=[].concat(e(n),e(this.lstPayMode))}}},{key:"GetUserListForExtraItem",value:function(){var e=this;this.UserList=[],this.cdRef.detectChanges(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetUserListForExtraItem(this.ClinicIdSelected,this.qrySlotId).subscribe(function(t){var i,n;if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var l=[];if(l=JSON.parse(t.actionResult.result),e.UserList=l=l||[],null!=e.qrySlotId||null!=e.qrySlotId){var o=null===(i=e.UserList)||void 0===i?void 0:i.find(function(t){return t.SlotBookingId==e.userSelected});e.IsGroupedSelected=null!=o&&null!=o&&o.IsGrouped,e.bookingtypeSelected=null==o||null==o?"IPD":o.BookingType,e.isCGHS=null!=o&&null!=o&&o.IsCGHS,e.isCashless=null!=o&&null!=o&&o.IsCashless,e.TIProvisionalNo=null==o||null==o?null:o.TIProvisionalNo,e.TIProvisionalDate=null==o||null==o?null:o.TIProvisionalDate,e.isCashless&&null!=e.TIProvisionalNo&&null!=e.TIProvisionalNo&&""!=(null===(n=e.TIProvisionalNo)||void 0===n?void 0:n.trim())&&(e.PrintCILabel="Print Provisional Invoice")}e.cdRef.detectChanges()}else e.UserList=[]},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"tabClick",value:function(e){0==e.index?(this.LoaditemMasterWithGrouping(),this.clear()):1==e.index&&(this.LoadPrescribeditems(),this.clear()),this.selectedTab=e.index}},{key:"LoaditemMaster",value:function(){var e=this;this.itemMaster=[],this.billType=this.billTypeStatus.OtherItem,this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetItemMaster().subscribe(function(t){if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var i=[];i=JSON.parse(t.actionResult.result),e.itemMaster=i=i||[],e.cdRef.detectChanges()}else e.itemMaster=null},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"LoaditemMasterWithGrouping",value:function(){var e=this;null!=this.userSelected&&null!=this.userSelected||(this.userSelected=""),this.ExtraRoomCount=0,this.SelectedBookingTypeClinicType={},this.isGenerateTI=!1,this.lstSelectedMCODERoom=[],this.itemMaster=[],this.billType=this.billTypeStatus.OtherItem,this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetItemMasterWithGrouping(this.ClinicIdSelected,this.userSelected,this.CustomerType).subscribe(function(t){var i,n,l,o;if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var r=[];r=JSON.parse(t.actionResult.result),e.itemMaster=r=r||[],u.s.Therapist==localStorage.getItem("userTypeId")&&(e.itemMaster=e.itemMaster.filter(function(e){return"treatment"===e.label.toLowerCase()})),null!=t.actionResult.result2&&null!=t.actionResult.result2&&(null===(i=t.actionResult.result2)||void 0===i?void 0:i.length)>0&&(e.ExtraRoomCount=parseInt(t.actionResult.stringVal),e.lstSelectedMCODERoom=JSON.parse(t.actionResult.result2)),null!=t.actionResult.result3&&null!=t.actionResult.result3&&(null===(n=t.actionResult.result3)||void 0===n?void 0:n.length)>0&&(e.SelectedBookingTypeClinicType=JSON.parse(t.actionResult.result3),"OPD"==(null===(l=e.SelectedBookingTypeClinicType)||void 0===l?void 0:l.BookingType)&&(null===(o=e.SelectedBookingTypeClinicType)||void 0===o?void 0:o.ClinicGroup)==e.clinicGroup.PAH&&(e.isGenerateTI=!0)),e.cdRef.detectChanges()}else e.itemMaster=null},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"LoadPrescribeditems",value:function(){var e=this;this.itemMaster=[],this.billType=this.billTypeStatus.Prescribed,null!=this.userSelected&&null!=this.userSelected&&""!=this.userSelected&&(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPatientPrescribedItems(this.userSelected).subscribe(function(t){if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var i=[];i=JSON.parse(t.actionResult.result),e.itemMaster=i=i||[],u.s.Therapist==localStorage.getItem("userTypeId")&&(e.itemMaster=e.itemMaster.filter(function(e){return"treatment"===e.label.toLowerCase()})),e.cdRef.detectChanges()}else e.itemMaster=null},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)}))}},{key:"nodeSelect",value:function(e,t){var i,n;if(0==this.IsListView)this.SelectedSequence=t,this.lstExtraItemDetails[t].MCODE=e.originalEvent.currentTarget.ariaLabel.split("~")[0],this.lstExtraItemDetails[t].Description=e.originalEvent.currentTarget.ariaLabel.split("~")[1],this.lstExtraItemDetails[t].Category=e.originalEvent.currentTarget.ariaLabel.split("~")[2],this.lstExtraItemDetails[t].MRP=e.originalEvent.currentTarget.ariaLabel.split("~")[3],this.lstExtraItemDetails[t].IsEditable=e.originalEvent.currentTarget.ariaLabel.split("~")[4],this.getUM(t,e.originalEvent.currentTarget.ariaLabel.split("~")[0]),this.cdRef.detectChanges(),"Room"==this.lstExtraItemDetails[t].Category?(this.lstExtraItemDetails[t].NightCount=1,this.lstExtraItemDetails[t].RoomCount=1,this.lstExtraItemDetails[t].MCODE==u.i.ExtraBed&&((null===(i=this.lstSelectedMCODERoom)||void 0===i?void 0:i.length)>0?this.showModalRoomCategorySelect=!0:this.lstExtraItemDetails[t].Parent=u.i.ExtraBed),this.cdRef.detectChanges()):(this.showModalRoomCategorySelect=!1,this.cdRef.detectChanges()),this.selection={},this.itemMaster.map(function(e){e.expanded=!1}),$("#btnCloseOverlayItem").click();else if(this.selectedNodesItem.length>0&&1==this.IsListView){this.lstExtraListItemDetails=[];for(var l=this.selectedNodesItem.filter(function(e){return 1==e.selectable}),o=0;o<(null==l?void 0:l.length);o++)this.AddExtraListItemDetails(),this.lstExtraListItemDetails[o].MCODE=l[o].label.split("~")[0],this.lstExtraListItemDetails[o].Description=l[o].label.split("~")[1],this.lstExtraListItemDetails[o].Category=l[o].label.split("~")[2],this.getListUM(o,l[o].label.split("~")[0]),this.cdRef.detectChanges(),"Room"==this.lstExtraListItemDetails[o].Category?(this.lstExtraListItemDetails[o].NightCount=1,this.lstExtraListItemDetails[o].RoomCount=1,this.lstExtraListItemDetails[o].MCODE==u.i.ExtraBed&&((null===(n=this.lstSelectedMCODERoom)||void 0===n?void 0:n.length)>0?this.showModalRoomCategorySelect=!0:this.lstExtraListItemDetails[o].Parent=u.i.ExtraBed),console.log(o),this.cdRef.detectChanges()):(this.showModalRoomCategorySelect=!1,this.cdRef.detectChanges());console.log(this.lstExtraListItemDetails)}}},{key:"getUM",value:function(e,t){var i,n=[];if(""!=t&&null!=t&&null!=t){n=[];var l=!0;this.itemMaster.forEach(function(e){l&&e.items.forEach(function(e){l&&e.value==t&&(n=e.UOMS,l=!1)})}),this.lstExtraItemDetails[e].UMList=[],this.lstExtraItemDetails[e].UOMS="",this.lstExtraItemDetails[e].UMList=n,this.cdRef.detectChanges(),1==(null===(i=this.lstExtraItemDetails[e].UMList)||void 0===i?void 0:i.length)&&(this.lstExtraItemDetails[e].UOMS=this.lstExtraItemDetails[e].UMList[0].UOMName,this.cdRef.detectChanges())}}},{key:"getListUM",value:function(e,t){var i,n=[];if(""!=t&&null!=t&&null!=t){n=[];var l=!0;this.itemMaster.forEach(function(e){l&&e.items.forEach(function(e){l&&e.value==t&&(n=e.UOMS,l=!1)})}),this.lstExtraListItemDetails[e].UMList=[],this.lstExtraListItemDetails[e].UOMS="",this.lstExtraListItemDetails[e].UMList=n,this.cdRef.detectChanges(),1==(null===(i=this.lstExtraListItemDetails[e].UMList)||void 0===i?void 0:i.length)&&(this.lstExtraListItemDetails[e].UOMS=this.lstExtraListItemDetails[e].UMList[0].UOMName,this.cdRef.detectChanges())}}},{key:"ResetItem",value:function(e){this.lstExtraItemDetails[e-1].MCODE="",this.lstExtraItemDetails[e-1].Description="",this.lstExtraItemDetails[e-1].UMList=[],this.getUM(e,this.lstExtraItemDetails[e-1].MCODE),this.cdRef.detectChanges()}},{key:"ResetExtraItemList",value:function(){this.extraItemRowCounter=0,this.lstExtraListItemDetails=[],this.lstExtraItemDetails=[],this.selectedNodesItem=[],this.itemMaster.map(function(e){e.expanded=!1}),this.AddExtraItemDetails(),this.AddExtraListItemDetails()}},{key:"AddExtraItemDetails",value:function(){this.extraItemRowCounter=this.extraItemRowCounter+1,this.lstExtraItemDetails.push({Sequence:this.extraItemRowCounter,MCODE:"",UOMS:"",Qty:1,UMList:[],Description:""})}},{key:"AddExtraListItemDetails",value:function(){this.extraItemRowCounter=this.extraItemRowCounter+1,this.lstExtraListItemDetails.push({Sequence:this.extraItemRowCounter,MCODE:"",UOMS:"",Qty:1,UMList:[],Description:""}),0==this.lstExtraItemEmpty.length&&this.lstExtraItemEmpty.push({Sequence:this.extraItemRowCounter,MCODE:"",UOMS:"",Qty:1,UMList:[],Description:""})}},{key:"RemoveExtraItemDetails",value:function(e){1!=e&&(this.lstExtraItemDetails=this.lstExtraItemDetails.filter(function(t){return t.Sequence!==e}))}},{key:"LoadConsumedItem",value:function(){var e,t,i=this;this.extraItemRowCounter=0,this.lstExtraItemDetails=[],0==(null===(e=this.lstExtraItemDetails)||void 0===e?void 0:e.length)&&this.AddExtraItemDetails(),this.lstExtraListItemDetails=[],0==(null===(t=this.lstExtraListItemDetails)||void 0===t?void 0:t.length)&&this.AddExtraListItemDetails(),this.selectedNodesItem=[],this.tableDataExtraItemAll=[],this.tableDataExtraItem=[],this.tableDataExtraItemCredit=[],""!=this.userSelected&&null!=this.userSelected&&null!=this.userSelected?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetAllExtraItemBySlot(this.userSelected).subscribe(function(e){var t;if(i._UtilityService.hideSpinner(),1==e.actionResult.success){var n=[];n=JSON.parse(e.actionResult.result),i.tableDataExtraItemAll=n=n||[],i.tableDataExtraItem=i.tableDataExtraItemAll.filter(function(e){return e.Status==i.billItemStatus.Added}),i.tableDataExtraItemCredit=i.tableDataExtraItemAll.filter(function(e){return e.Status==i.billItemStatus.Credit}),(null===(t=i.tableDataExtraItemCredit)||void 0===t?void 0:t.length)>0&&i.tableDataExtraItemCredit.map(function(e){e.checkAccess=!1}),i.cdRef.detectChanges()}else i.tableDataExtraItemAll=[],i.tableDataExtraItem=[],i.tableDataExtraItemCredit=[]},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})):this.tableDataExtraItem=[]}},{key:"saveExtraItem",value:function(){var e,t=this;if(this.IsListView&&(this.lstExtraItemDetails=[],this.itemMaster.map(function(e){e.expanded=!1,e.partialSelected=!1}),this.lstExtraItemDetails=this.lstExtraListItemDetails),null!=this.userSelected&&null!=this.userSelected&&""!=this.userSelected)if(0!=(null===(e=this.lstExtraItemDetails)||void 0===e?void 0:e.length)){var i=[],n=!0,l=this.UserList.filter(function(e){return e.SlotBookingId==t.userSelected})[0].UserId,o=this.UserList.filter(function(e){return e.SlotBookingId==t.userSelected})[0].BookingType;this.lstExtraItemDetails.forEach(function(e){if(e.MCODE==t.defaultItemMCODE.OtherCharge&&(null==e.MRP||null==e.MRP||e.MRP<=0||null==e.OtherPurpose||null==e.OtherPurpose||0==e.OtherPurpose.trim().length))n=!1;else if(""!=e.MCODE&&null!=e.MCODE&&""!=e.UOMS&&null!=e.UOMS&&0!=(null==e?void 0:e.Qty)&&null!=(null==e?void 0:e.Qty)&&0!=e.Sequence){var r={ClinicId:t.ClinicIdSelected,UserId:l,SlotBookingId:t.userSelected,BookingType:o,MCODE:e.MCODE,UOMS:e.UOMS,Qty:e.Qty,IsBilled:!1,BillTypeStatus:"IPD"!=o||"Room"!=e.Category&&e.MCODE!=u.i.TreatmentOtherCharge?t.billType:t.billTypeStatus.RoomBooking,CreatedBy:t.loginId,ModifiedBy:t.loginId,NightCount:t._ConstantServices.nullToZeroConverter(e.NightCount),RoomCount:t._ConstantServices.nullToZeroConverter(e.RoomCount),PMCODE:e.Parent,MRP:t._ConstantServices.nullToZeroConverter(e.MRP),OtherPurpose:e.OtherPurpose};i.push(r)}else n=!1}),n?Rn(i)?this._UtilityService.showWarningAlert("Item should not duplicate."):(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.SaveExtraItemArrayBySlotId(i).subscribe(function(e){t._UtilityService.hideSpinner(),1==e.actionResult.success?(t.LoadConsumedItem(),t._UtilityService.showSuccessAlert("Add successfully"),t.cdRef.detectChanges()):t._UtilityService.showWarningAlert(e.actionResult.errMsg)},function(e){t._UtilityService.hideSpinner(),t._UtilityService.showErrorAlert(e.message)})):this._UtilityService.showWarningAlert("Please select all Item Details")}else this._UtilityService.showWarningAlert("Please select Item Details");else this._UtilityService.showWarningAlert("Select User")}},{key:"onItemEditInit",value:function(){this.editing=!0}},{key:"onItemEditSave",value:function(){var e=this;this.tableDataExtraItem=this.tableDataExtraItem.filter(function(e){return""!=e.MCODE&&null!=e.MCODE}),this.tableDataExtraItem.filter(function(e){return(""==e.Qty||null==e.Qty||null==e.Qty)&&0!=e.Qty}).length>0?this._UtilityService.showWarningAlert("Qty can not be empty"):(this.tableDataExtraItem.forEach(function(t){return t.ModifiedBy=e.loginId}),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.EditExtraItemArrayBySlotId(this.tableDataExtraItem).subscribe({next:function(t){e._UtilityService.hideSpinner(),1==t.actionResult.success?(e._UtilityService.showSuccessAlert(t.actionResult.errMsg),e.LoadConsumedItem(),e.editing=!1):(e.LoadConsumedItem(),e._UtilityService.showErrorAlert(t.Message),e.editing=!1)},error:function(t){e.LoadConsumedItem(),e.editing=!1,e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.Message)}}))}},{key:"onItemEditCancel",value:function(){this.LoadConsumedItem(),this.editing=!1}},{key:"onKeyPress",value:function(e){var t=String.fromCharCode(e.charCode);8!=e.keyCode&&!/[0-9\+\-\ ]/.test(t)||32==e.keyCode||45==e.keyCode?e.preventDefault():Number(e.target.value+e.key)<0&&(e.preventDefault(),this._UtilityService.showWarningAlert("Qty can not be 0"))}},{key:"LoadInvoiceData",value:function(){var e=this;this.IsRefundforPI=!1,this.PIString=null,this.PaymentReciveList=[],this.ProdList=[],this.PerformaItemList=[],""!=this.userSelected&&null!=this.userSelected&&null!=this.userSelected?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.getViewVoucherForHMSCombined(this.userSelected).subscribe(function(t){var i,n,l;if(e._UtilityService.hideSpinner(),1==t.actionResult.success){if((null===(i=t.actionResult.result)||void 0===i?void 0:i.length)>0){var o=JSON.parse(t.actionResult.result);e.ProdList=o=o||[]}if((null===(n=t.actionResult.result3)||void 0===n?void 0:n.length)>0){var r=JSON.parse(t.actionResult.result3);e.PerformaItemList=r=r||[],e.LoaditemMasterWithGrouping()}if((null===(l=t.actionResult.result4)||void 0===l?void 0:l.length)>0){var a=JSON.parse(t.actionResult.result4);e.PaymentReciveList=a=a||[]}e.PIString=t.actionResult.stringVal}else e.PaymentReciveList=[],e.ProdList=[];e.cdRef.detectChanges()},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})):this.ProdList=[]}},{key:"CreateInvoice",value:function(){var e=this;this.selectAllItem=!1,this.AllItemPriceRes=[],this.ItemPriceRes=[],this.TrnMode="New",this.lstReciveVoucher=[],this.ResetPriceDetails(),this.ResetTenderList(),0==this.MaxCreditLimit&&(this.lstPayMode=this.lstPayMode.filter(function(e){return"LB1199"!==e.ACID})),this.MaxCreditNoteAmount=0,this.CreditNoteNumber=null,this.CreditNoteTranAmount=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetUnbilledItemBySlot(this.userSelected).subscribe(function(t){if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.ExtraItemList=i=i||[],e.AllItemPriceRes=i,e.InvMode="Performa",e.CheckIsCredit=!1,e.cdRef.detectChanges(),$("#btnShowExtraItemModel").click(),e.LoadAuthorizedMaster()}else e.ExtraItemList=[],e._UtilityService.showSuccessAlert(t.actionResult.errMsg)},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"ResetPriceDetails",value:function(){this.ItemCheckedTotal=0,this.BillWiseDiscountPer=0,this.NetPaybleTotal=0,this.ReferredBy="",this.RequestedBy="",this.ItemTotalDiscount=0,this.BillWiseDiscountAmount=0}},{key:"LoadAuthorizedMaster",value:function(){var e=this,t="";this.UserTypeCurre!==u.s.SuperAdmin&&(t=this.ClinicIdSelected),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetAuthorizedMaster(t,!0).subscribe(function(t){if(e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.lstAuthorizedMaster=i=i||[],e.cdRef.detectChanges()}else e.lstAuthorizedMaster=[]},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"CreateCompleteInvoice",value:function(){var e,t=this;(null===(e=this.tableDataExtraItem)||void 0===e?void 0:e.length)>0?this._UtilityService.showWarningAlert("Please Clear All Billable Item or Create Proforma Invoice"):(this.TrnMode="New",this.ResetPriceDetails(),this.AllItemPriceRes=[],this.PerformaOrderIds=[],this.MaxCreditNoteAmount=0,this.CreditNoteNumber=null,this.CreditNoteTranAmount=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.getViewPerformaForHMSCombinedGrouped(this.userSelected).subscribe(function(e){if(t._UtilityService.hideSpinner(),1==e.actionResult.success){var i=JSON.parse(e.actionResult.result);t.AllItemPriceRes=i=i||[],t.cdRef.detectChanges();var n=JSON.parse(e.actionResult.result2);t.PerformaOrderIds=n=n||[],t.CalculateTotalItemPrice(),t.InvMode="CompleteInvoice",t.CheckIsCredit=!1,t.lstReciveVoucher=[],t.cdRef.detectChanges(),$("#btnShowExtraItemModel").click(),t.LoadAuthorizedMaster()}},function(e){t._UtilityService.hideSpinner()}),this.cdRef.detectChanges())}},{key:"GenerateCompleteInvoice",value:function(){var e,t,i=this,n=!1;if("CompleteInvoice"!=this.InvMode||"Visitor"!=this.CustomerType&&1!=this.isGenerateTI||(n=!0),(null===(e=this.AllItemPriceRes.filter(function(e){return 1==e.IsChecked}))||void 0===e?void 0:e.length)>0){if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy))return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.RequestedBy||""==this.RequestedBy||null==this.RequestedBy))return void this._UtilityService.showWarningAlert("Please enter Requested By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.RequestedBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Requested By");if(Math.round(this.NetPaybleTotal)>0&&Math.round(this.NetPaybleTotal)>Math.round(this.MaxRefundAmount)&&"Visitor"!=this.CustomerType&&0==this.isGenerateTI&&0==this.CheckIsCredit&&0==n)return void this._UtilityService.showWarningAlert("Please Receive Amount from Customer. Customer Balance Amount is Less then Invoice Amount");if(Math.round(this.NetPaybleTotal)>0&&("Visitor"==this.CustomerType||1==this.isGenerateTI)&&0==(null===(t=this.lstReciveVoucher)||void 0===t?void 0:t.length)&&1!=this.CheckIsCredit&&0==n)return void this._UtilityService.showWarningAlert("Customer Amount Not Added");this.lstTenderModel=[],this.TenderObj.CREDITAMT=this.NetPaybleTotal;var l={ACCOUNT:"LB1199"};l.AMOUNT=this.TenderObj.CREDITAMT,l.APPROVALCODE="",l.TRNMODE="Credit",l.REMARKS=this.TenderObj.REMARKS,this.lstTenderModel.push(l);var o=[];this.PerformaOrderIds.map(function(e){o.push({OrderIds:e.InvOrderNumber})}),this.NewItemDetails=[],this.AllItemPriceRes.filter(function(e){return 1==e.IsChecked}).map(function(e){i.NewItemDetails.push({BillItemId:e.BillItemId,Description:e.Description,MCODE:e.MCODE,MRP:e.MRP,SELLINGPRICE:e.MRP,INDDISCOUNTRATE:i._ConstantServices.nullToZeroConverter(e.DiscountPer),DCRATE:i._ConstantServices.nullToZeroConverter(i.BillWiseDiscountPer),Qty:e.Qty,lstTenderModel:i.lstTenderModel,lstOrderDetails:o})});var r={};r.SlotBookingId="Patient"==this.CustomerType?this.userSelected:this.VisitorSelected,r.PayMode="Other",r.OnlineTranId="",r.TotalAmount=this.NetPaybleTotal,r.ReferredBy=this.ReferredBy,r.RequestedBy=this.RequestedBy,r.lstTender=this.NewItemDetails,r.PIString=this.PIString,r.IsVisitor="Visitor"==this.CustomerType,r.ModifiedBy=this.loginId,r.IsonCredit=this.CheckIsCredit,r.IsOPDDirectTI=this.isGenerateTI,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.CreateSalesInvoiceExtraItemRev(r).subscribe(function(e){i._UtilityService.hideSpinner(),1==e.actionResult.success&&(i.VisitorUserMaster={},$("#btnExtraItemModel").click(),i.LoadConsumedItem(),i.LoadInvoiceData(),i.LoadCrediNoteBalance(),i.resetIndividualInvoiceList()),i._UtilityService.showSuccessAlert(e.actionResult.errMsg)},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})}}},{key:"DeleteExtraItem",value:function(e){var t=this;this.confirmationService.confirm({header:"Confirmation",message:"Are sure you want to delete this item ?",icon:"pi pi-exclamation-triangle",accept:function(){var i=[];null==e?t.lstSelectedBillableItem.filter(function(e){return!e.IsBilled}).map(function(e){i.push({id:e.BillItemId})}):i.push({id:e}),t.unsubscribe.add=t._MasterServices.DeleteExtraItem(i).subscribe(function(e){t._UtilityService.hideSpinner(),t._UtilityService.showSuccessAlert(e.actionResult.errMsg),t.LoadConsumedItem(),t.lstSelectedBillableItem=[],t.editing=!1,t.cdRef.detectChanges()},function(e){t._UtilityService.hideSpinner(),t._UtilityService.showErrorAlert(e.message)})}})}},{key:"UpdateExtraItemStatus",value:function(e,t){var i=this;this.unsubscribe.add=this._MasterServices.UpdateExtraItemStatus(e,t).subscribe(function(e){i._UtilityService.hideSpinner(),i._UtilityService.showSuccessAlert(e.actionResult.errMsg),i.LoadConsumedItem(),i.cdRef.detectChanges()},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})}},{key:"ShowRefundCreditNoteModel",value:function(){this.RefundCreditNoteAmount=0,this.MaxRefundableAmount=this.MaxRefundAmount,this.RefundObj={},this.selectedPaymode=null,this.lstPayModeRefund=[],this.lstPayModeRefund.push({TenderName:"Cash",ACID:"AT01002",disabled:!1}),this.ShowPaymentRefundMethodModel=!0}},{key:"SaveRefundCreditNote",value:function(){var e=this;null!=this.RefundCreditNoteAmount&&null!=this.RefundCreditNoteAmount?this.RefundCreditNoteAmount<=0?this._UtilityService.showWarningAlert("Please Enter Refund Amount"):null!=this.selectedPaymode&&null!=this.selectedPaymode?"AT01002"!=this.selectedPaymode||null!=this.RefundObj.RefundDate&&null!=this.RefundObj.RefundDate?null!=this.RefundObj.Purpose&&null!=this.RefundObj.Purpose&&0!=this.RefundObj.Purpose.trim().length?null!=this.RefundObj.ApprovedBy&&null!=this.RefundObj.ApprovedBy&&0!=this.RefundObj.ApprovedBy.trim().length?(this.RefundObj.Amount=this.RefundCreditNoteAmount,this.RefundObj.SlotBookingId=this.userSelected,this.RefundObj.CreatedBy=localStorage.getItem("userId"),this.RefundObj.ModifiedBy=localStorage.getItem("userId"),this.RefundObj.RefundMode=this.selectedPaymode,this.RefundObj.ClinicId=this.ClinicIdSelected,this.RefundObj.RequestType="Refund",this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.SaveRefundAmount(this.RefundObj).subscribe(function(t){e._UtilityService.hideSpinner(),e._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(e.LoadCrediNoteBalance(),e.LoadInvoiceData(),e.resetIndividualInvoiceList(),e.ShowPaymentRefundMethodModel=!1)},function(t){e._UtilityService.hideSpinner()})):this._UtilityService.showWarningAlert("Please enter Approved By"):this._UtilityService.showWarningAlert("Please enter Purpose"):this._UtilityService.showWarningAlert("Please select Refund Date"):this._UtilityService.showWarningAlert("Please select refund Mode"):this._UtilityService.showWarningAlert("Please Enter Refund Amount")}},{key:"onFileSelectBankDepositSlip",value:function(e,t){var i;if((null===(i=e.target.files)||void 0===i?void 0:i.length)>0){var n=e.target.files[0];[".jpg",".png",".jpeg",".pdf"].includes("."+n.type.split("/")[1])?n.size>5242880?($("#"+t).val(""),"AttBankslip1"==t&&(this.fileInputLabelAttBankslip1="",this.BankDepositSlip1Att=""),this._UtilityService.showWarningAlert("Maximum 5 MB file can be Uploaded")):"AttBankslip1"==t&&(this.fileInputLabelAttBankslip1=n.name,this.fileUploadAttBankslip1.get("AttBankslip1").setValue(n)):($("#"+t).val(""),"AttBankslip1"==t&&(this.fileInputLabelAttBankslip1="",this.BankDepositSlip1Att=""),this._UtilityService.showWarningAlert("Only jpg, png and pdf Allowed!")),this.cdRef.detectChanges()}}},{key:"GetPaymentStatusEmit",value:function(e){this.lstReciveVoucher=[],e.includes("~")&&"Success"===e.split("~")[0]&&($("#btnRazorPayCloseModal").click(),$("#btnPaymentMethodModel").click(),this.lstReciveVoucher.push({VCHRNO:e.split("~")[1],TRNMODE:"Online"}),this.RecPayment=!1,$("#btnRecivePaymentClose").click(),"Performa"==this.InvMode&&this.GeneratePerforma(),this.LoadConsumedItem(),this.LoadInvoiceData(),this.LoadCrediNoteBalance(),this.resetIndividualInvoiceList())}},{key:"LoadInvoiceDataIndividual",value:function(){var e=this;this.TrnMain=[],this.ProdList=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.LoadInvoiceData(this.SlotBookingIdSelected,this.InvoiceNumberSelected,this.PhiscalIdSelected,this.DivisionSelected).subscribe(function(t){var i;if(e._UtilityService.hideSpinner(),1==t.actionResult.success&&(null===(i=t.actionResult.result)||void 0===i?void 0:i.length)>0){var n=t.actionResult.result;e.TrnMain=n=n||[],e.ProdList=e.TrnMain[0].ProdList,e.TotalAmount=0,e.ProdList.map(function(t){e.TotalAmount=e.TotalAmount+(t.MRP*t.AltQty-t.INDDISCOUNT),e.ItemWiseTotalDisAmount=e.ItemWiseTotalDisAmount+t.INDDISCOUNT,e.TotalFlatDiscount=e.TotalFlatDiscount+t.FLATDISCOUNT}),e.BillWiseDiscountPer=100*e.TotalFlatDiscount/e.TotalAmount}},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"openCRNoteModel",value:function(e){this.modalService.open(e,{size:"xxl"})}},{key:"ShowAddCreditNoteModel",value:function(){this.CreditNoteAmount=0,this.MaxRecAmount=1e9,this.selectedPaymodeCodes=[],this.SelectPaymodeArray=[],this.lstPayMode=this.lstPayMode.filter(function(e){return"LB1199"!==e.ACID}),this.TenderObj={},this.TenderObj.CashRecdDate=new Date,this.TenderObj.CardRecdDate=new Date,this.lstBankDepositTransactionDetails=[],this.lstBankDepositTransactionDetails.push({Sequence:this.BankDepTrnCounter,BankName:"",TransactionId:"",RecdDate:new Date,Amount:0}),this.lstCardPaymentTransactionDetails=[],this.lstCardPaymentTransactionDetails.push({Sequence:this.CardTrnCounter,CardNumber:"",CardholderName:"",TransactionId:"",RecdDate:null,Amount:0}),this.TenderObj.TrustId=null,this.TenderObj.TMemberTypeId=null,this.TenderObj.MemberShipNumber=null,this.cdRef.detectChanges(),this.lstReciveVoucher=[],this.fileInputLabelAttBankslip1="",$("#btnShowCreditNoteModel").click()}},{key:"LoadCrediNoteBalance",value:function(){var e=this;if(this.RemainingAmount=0,this.BalanceType="",this.CreditNoteBalance=0,null!=this.userSelected&&""!=this.userSelected&&null!=this.userSelected||null!=this.VisitorSelected&&""!=this.VisitorSelected&&null!=this.VisitorSelected){var t=null,i="false";"Patient"==this.CustomerType?(t=this.userSelected,i="false"):(t=this.VisitorSelected,i="true"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetCreditNoteBalAmount(t,i).subscribe(function(t){if(e._UtilityService.hideSpinner(),1==t.actionResult.success){if(e.CreditNoteBalance=parseFloat(t.actionResult.stringVal2),e.CreditNoteBalanceAmount=+t.actionResult.stringVal,e.RemainingAmount=t.actionResult.totalAmount,t.actionResult.stringVal.includes("-")?(e.BalanceType="Advance",e.MaxCreditLimit=+t.actionResult.stringVal,e.MaxRefundAmount=Math.abs(+t.actionResult.stringVal)):(e.MaxCreditLimit=+("-"+t.actionResult.stringVal),e.MaxRefundAmount=0,e.CreditNoteBalanceAmount>0&&(e.BalanceType="Dues")),t.actionResult.result.length>0){var i=JSON.parse(t.actionResult.result);e.CustomerInfoDetails=i=i||[],e.MaxCreditLimit=e.MaxCreditLimit+ +e.CustomerInfoDetails.CRLIMIT}e.MaxCreditLimit=Math.abs(e.MaxCreditLimit),e.cdRef.detectChanges()}else e.CreditNoteBalanceAmount=0,e.cdRef.detectChanges()},function(t){e._UtilityService.hideSpinner()})}else this.CreditNoteBalanceAmount=0,this.cdRef.detectChanges()}},{key:"SaveCreditNote",value:function(){this._ConstantServices.nullToZeroConverter(this.CreditNoteAmount)<=0?this._UtilityService.showWarningAlert("Please enter Receive Amount"):(this.SelectPaymodeArray.includes("ATONLN")&&this.PayExtraItemNew(this.userSelected,this.SlotBookingIdSelected),this.SelectPaymodeArray.includes("ATWLONLN")?this.PayExtraItemNewWL(this.userSelected,this.SlotBookingIdSelected):this.SaveCreditNoteOther())}},{key:"SaveCreditNoteOther",value:function(){var e,t,i,n,l,o,r,a,c,s,d,u=this;this.lstReciveVoucher=[],this.PaymentTransactionDetails=[];var b=0;if(this.lstTenderModel=[],null!=this.TenderObj.TrustId||null!=this.TenderObj.TrustId){if(null==this.TenderObj.TMemberTypeId||null==this.TenderObj.TMemberTypeId)return void this._UtilityService.showWarningAlert("Please select member type");if(null==this.TenderObj.MemberShipNumber||null==this.TenderObj.MemberShipNumber||""==this.TenderObj.MemberShipNumber)return void this._UtilityService.showWarningAlert("Please enter membership number")}if(null!=this.TenderObj.TMemberTypeId||null!=this.TenderObj.TMemberTypeId){if(null==this.TenderObj.TrustId||null==this.TenderObj.TrustId)return void this._UtilityService.showWarningAlert("Please select trust type");if(null==this.TenderObj.MemberShipNumber||null==this.TenderObj.MemberShipNumber||""==this.TenderObj.MemberShipNumber)return void this._UtilityService.showWarningAlert("Please enter membership number")}if(this.TenderObj.MemberShipNumber){if(null==this.TenderObj.TrustId||null==this.TenderObj.TrustId)return void this._UtilityService.showWarningAlert("Please select trust type");if(null==this.TenderObj.TMemberTypeId||null==this.TenderObj.TMemberTypeId)return void this._UtilityService.showWarningAlert("Please select member type")}if(this.SelectPaymodeArray.includes("AT01002")){if(null==this.TenderObj.CASH||null==this.TenderObj.CASH||this.TenderObj.CASH<=0)return void this._UtilityService.showWarningAlert("Please enter Cash Tender Amount");if(null==this.TenderObj.CashRecdDate||null==this.TenderObj.CashRecdDate)return void this._UtilityService.showWarningAlert("Please enter Cash Tender Amount Received Date");(I={ACCOUNT:"AT01002"}).AMOUNT=this.TenderObj.CASH,I.APPROVALCODE="",I.TRNMODE="Cash",I.REMARKS=this.TenderObj.REMARKS,this.lstTenderModel.push(I),this.PaymentTransactionDetails.push({TrnMode:"Cash",Remarks:this.TenderObj.REMARKS,ReceivedDate:this.TenderObj.CashRecdDate,Amount:this.TenderObj.CASH,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),b+=this.TenderObj.CASH}if(this.SelectPaymodeArray.includes("AT999999")){for(var h=!0,m=0;m<this.lstCardPaymentTransactionDetails.length;m++)(null==this.lstCardPaymentTransactionDetails[m].TransactionId||null==this.lstCardPaymentTransactionDetails[m].TransactionId||""==this.lstCardPaymentTransactionDetails[m].TransactionId||null==this.lstCardPaymentTransactionDetails[m].RecdDate||null==this.lstCardPaymentTransactionDetails[m].RecdDate||""==this.lstCardPaymentTransactionDetails[m].RecdDate||null==(null===(e=this.lstCardPaymentTransactionDetails[m])||void 0===e?void 0:e.Amount)||null==(null===(t=this.lstCardPaymentTransactionDetails[m])||void 0===t?void 0:t.Amount)||(null===(i=this.lstCardPaymentTransactionDetails[m])||void 0===i?void 0:i.Amount)<=0)&&1==h&&(h=!1);if(0==h)return void this._UtilityService.showWarningAlert("Please enter Transaction Details Properly");if(null==this.TenderObj.CARDAMT||null==this.TenderObj.CARDAMT||this.TenderObj.CARDAMT<=0)return void this._UtilityService.showWarningAlert("Please enter Card tender Amount");var v="",f="",p="";this.lstCardPaymentTransactionDetails.map(function(e){u.PaymentTransactionDetails.push({TrnMode:"Card",Remarks:u.TenderObj.REMARKS,CardNo:e.CardNumber,CardHolderName:e.CardHolderName,TransactionId:e.TransactionId,ReceivedDate:e.RecdDate,Amount:e.Amount,TrustId:u.TenderObj.TrustId,TMemberTypeId:u.TenderObj.TMemberTypeId,MemberShipNumber:u.TenderObj.MemberShipNumber}),v=v+e.TransactionId+",",p=p+e.CardHolderName+",",f=f+e.CardNumber+","}),(I={ACCOUNT:"AT999999"}).AMOUNT=this.TenderObj.CARDAMT,I.APPROVALCODE="",I.TRNMODE="Card",I.REMARKS=this.TenderObj.REMARKS,I.CARDNO=null==f?void 0:f.trimEnd(),I.CARDHOLDERNAME=null==p?void 0:p.trimEnd(),I.TRANSACTIONID=null==v?void 0:v.trimEnd(),this.lstTenderModel.push(I),b+=this.TenderObj.CARDAMT}if(this.SelectPaymodeArray.includes("LB1199")){if(null==this.TenderObj.CREDITAMT||null==this.TenderObj.CREDITAMT||this.TenderObj.CREDITAMT<=0)return void this._UtilityService.showWarningAlert("Please enter Credit Amount");(I={ACCOUNT:"LB1199"}).AMOUNT=this.TenderObj.CREDITAMT,I.APPROVALCODE="",I.TRNMODE="Credit",I.REMARKS=this.TenderObj.REMARKS,this.lstTenderModel.push(I),this.PaymentTransactionDetails.push({TrnMode:"Credit",Remarks:this.TenderObj.REMARKS,ReceivedDate:new Date,Amount:this.TenderObj.CREDITAMT,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),b+=this.TenderObj.CREDITAMT}if(this.SelectPaymodeArray.includes("BT01001")){for(h=!0,m=0;m<this.lstBankDepositTransactionDetails.length;m++)(null==this.lstBankDepositTransactionDetails[m].BankName||null==this.lstBankDepositTransactionDetails[m].BankName||""==this.lstBankDepositTransactionDetails[m].BankName||null==this.lstBankDepositTransactionDetails[m].TransactionId||null==this.lstBankDepositTransactionDetails[m].TransactionId||""==this.lstBankDepositTransactionDetails[m].TransactionId||null==this.lstBankDepositTransactionDetails[m].RecdDate||null==this.lstBankDepositTransactionDetails[m].RecdDate||""==this.lstBankDepositTransactionDetails[m].RecdDate||null==(null===(n=this.lstBankDepositTransactionDetails[m])||void 0===n?void 0:n.Amount)||null==(null===(l=this.lstBankDepositTransactionDetails[m])||void 0===l?void 0:l.Amount)||(null===(o=this.lstBankDepositTransactionDetails[m])||void 0===o?void 0:o.Amount)<=0)&&1==h&&(h=!1);if(0==h)return void this._UtilityService.showWarningAlert("Please enter Transaction Details Properly");if(null==this.TenderObj.BANKTFAMOUNT||null==this.TenderObj.BANKTFAMOUNT||this.TenderObj.BANKTFAMOUNT<=0)return void this._UtilityService.showWarningAlert("Please enter Bank Deposit Amount");v="";var g="";this.lstBankDepositTransactionDetails.map(function(e){u.PaymentTransactionDetails.push({TrnMode:"Bank Transfer",Remarks:u.TenderObj.REMARKS,BankName:e.BankName,TransactionId:e.TransactionId,ReceivedDate:e.RecdDate,Amount:e.Amount,TrustId:u.TenderObj.TrustId,TMemberTypeId:u.TenderObj.TMemberTypeId,MemberShipNumber:u.TenderObj.MemberShipNumber}),v=v+e.TransactionId+",",g=g+e.BankName+","}),(I={ACCOUNT:"BT01001"}).AMOUNT=this.TenderObj.BANKTFAMOUNT,I.APPROVALCODE="",I.TRNMODE="Bank Transfer",I.REMARKS=this.TenderObj.REMARKS,I.TRANSACTIONID=v.trimEnd(),I.CARDHOLDERNAME=g.trimEnd(),this.lstTenderModel.push(I),b+=this.TenderObj.BANKTFAMOUNT}if(this.SelectPaymodeArray.includes("DI01001")){if(null==this.TenderObj.CHEQUEAMT||null==this.TenderObj.CHEQUEAMT||this.TenderObj.CHEQUEAMT<=0)return void this._UtilityService.showWarningAlert("Please enter Cheque tender Amount");if(null==this.TenderObj.CHEQUENO||null==this.TenderObj.CHEQUENO||(null===(r=this.TenderObj.CHEQUENO)||void 0===r?void 0:r.length)<=0)return void this._UtilityService.showWarningAlert("Please enter Cheque Number");if(null==this.TenderObj.BANK||null==this.TenderObj.BANK||(null===(a=this.TenderObj.BANK)||void 0===a?void 0:a.length)<=0)return void this._UtilityService.showWarningAlert("Please enter Cheque Issued Bank Name");if(null==this.TenderObj.ChequeRecdDate||null==this.TenderObj.ChequeRecdDate)return void this._UtilityService.showWarningAlert("Please enter Cheque Received Date");if(null==this.TenderObj.ChequeIssueDate||null==this.TenderObj.ChequeIssueDate)return void this._UtilityService.showWarningAlert("Please enter Cheque Issued Date");var I;this.PaymentTransactionDetails.push({TrnMode:"Cheque",Remarks:this.TenderObj.REMARKS,IssueDate:this.TenderObj.ChequeIssueDate,ReceivedDate:this.TenderObj.ChequeRecdDate,Amount:this.TenderObj.CHEQUEAMT,DepositedBy:this.TenderObj.DepositedBy,BankName:this.TenderObj.BANK,ChequeNumber:this.TenderObj.CHEQUENO,ChequeHolderName:this.TenderObj.ChequeHolderName}),(I={ACCOUNT:"DI01001"}).AMOUNT=this.TenderObj.CHEQUEAMT,I.APPROVALCODE="",I.TRNMODE="Cheque",I.REMARKS=this.TenderObj.REMARKS,I.CARDNO=null===(c=this.TenderObj.CHEQUENO)||void 0===c?void 0:c.trimEnd(),I.CARDHOLDERNAME=null===(s=this.TenderObj.BANK)||void 0===s?void 0:s.trimEnd(),this.lstTenderModel.push(I),b+=this.TenderObj.CHEQUEAMT}if((null===(d=this.lstTenderModel)||void 0===d?void 0:d.length)>0){if(Math.round(b)<Math.round(this.CreditNoteAmount))return void this._UtilityService.showWarningAlert("Input Amount not match with Total Amount");if(Math.round(b)>Math.round(this.CreditNoteAmount))return void this._UtilityService.showWarningAlert("Input Amount not match with Total Amount")}if(null!=this.CreditNoteAmount&&null!=this.CreditNoteAmount)if(this.CreditNoteAmount<0)this._UtilityService.showWarningAlert("Please Enter Credit Amount");else{var C={};C.CreditNoteAmount=this.CreditNoteAmount,C.SlotBookingId="Patient"==this.CustomerType?this.userSelected:this.VisitorSelected,C.lstTender=this.lstTenderModel,C.PaymentTransactionDetails=this.PaymentTransactionDetails,C.UpdatedBy=localStorage.getItem("userId"),C.InvoiceFor="Extra Item",C.CustomerType=this.CustomerType,C.ClinicId=this.ClinicIdSelected,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddCustomerCreditAmount(C).subscribe(function(e){var t;if(u._UtilityService.hideSpinner(),1==e.actionResult.success){("CompleteInvoice"!=u.InvMode||"Visitor"!=u.CustomerType&&1!=u.isGenerateTI)&&u._UtilityService.showSuccessAlert(e.actionResult.errMsg);var i=JSON.parse(e.actionResult.result);if(u.lstReciveVoucher=i=i||[],(null===(t=u.lstReciveVoucher)||void 0===t?void 0:t.length)>0){var n=u.lstReciveVoucher.find(function(e){return"Bank Transfer"==e.TRNMODE||"Cheque"==e.TRNMODE||"Cash"==e.TRNMODE});null!=n&&u.UploadBankDepositSlip(n.VCHRNO,u.userSelected)}"Performa"==u.InvMode&&u.GeneratePerforma(),"CompleteInvoice"!=u.InvMode||"Visitor"!=u.CustomerType&&1!=u.isGenerateTI||u.GenerateCompleteInvoice(),u.LoadCrediNoteBalance(),u.LoadInvoiceData(),u.resetIndividualInvoiceList(),$("#btnCloseCreditModel").click()}else u._UtilityService.showWarningAlert(e.actionResult.errMsg)},function(e){u._UtilityService.hideSpinner()})}else this._UtilityService.showWarningAlert("Please Enter Credit Amount")}},{key:"CalculateNetPaybleAfterDiscountNew",value:function(){if(this.ItemCheckedTotal>0)if(this.BillWiseDiscountPer>0){var e=this.ItemCheckedTotal*this.BillWiseDiscountPer/100;this.BillWiseDiscountAmount=e,this.NetPaybleTotal=this.ItemCheckedTotal-e}else this.BillWiseDiscountAmount=0,this.NetPaybleTotal=this.ItemCheckedTotal;else this.NetPaybleTotal=0}},{key:"CalculateNetPaybleAfterDiscount",value:function(e){if(this.ItemCheckedTotal>0)if(e.value>0){var t=this.ItemCheckedTotal*e.value/100;this.BillWiseDiscountAmount=t,this.NetPaybleTotal=this.ItemCheckedTotal-t}else this.BillWiseDiscountAmount=0,this.NetPaybleTotal=this.ItemCheckedTotal;else this.NetPaybleTotal=0}},{key:"CalculateNetPaybleAfterDiscountReverse",value:function(e){this.ItemCheckedTotal>0?e.value>0?(this.BillWiseDiscountPer=100*e.value/this.ItemCheckedTotal,this.NetPaybleTotal=this.ItemCheckedTotal-e.value,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):(this.BillWiseDiscountPer=0,this.NetPaybleTotal=this.ItemCheckedTotal,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):this.NetPaybleTotal=0}},{key:"CalculateNetPaybleAfterDiscountReverseNew",value:function(){this.ItemCheckedTotal>0?(this.BillWiseDiscountAmount>this.ItemCheckedTotal&&(this.BillWiseDiscountAmount=this.ItemCheckedTotal),this.BillWiseDiscountAmount>0?(this.BillWiseDiscountPer=100*this.BillWiseDiscountAmount/this.ItemCheckedTotal,this.NetPaybleTotal=this.ItemCheckedTotal-this.BillWiseDiscountAmount,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):(this.BillWiseDiscountPer=0,this.NetPaybleTotal=this.ItemCheckedTotal,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0))):this.NetPaybleTotal=0}},{key:"openNew",value:function(e){var t=this;this.modalService.open(e,{backdrop:"static",keyboard:!1}).result.then(function(e){t.closeResult="Closed with: ".concat(e)},function(e){t.closeResult="Dismissed ".concat(t.getDismissReason(e))})}},{key:"CalculateDiscount",value:function(e,t){var i,n,l=this,o=this.AllItemPriceRes[t];this.AllItemPriceRes[t].DiscountAmount=n=(i=o.MRP*o.Qty)*e.value/100,this.AllItemPriceRes[t].PriceWithGST=i-n,this.ItemTotalDiscount=0,this.AllItemPriceRes.map(function(e){l.ItemTotalDiscount=l.ItemTotalDiscount+e.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscountReverseNew()}},{key:"CalculateDiscountNew",value:function(e){var t,i,n=this,l=this.AllItemPriceRes[e];this.AllItemPriceRes[e].DiscountAmount=i=(t=l.MRP*l.Qty)*l.DiscountPer/100,this.AllItemPriceRes[e].PriceWithGST=t-i,this.ItemTotalDiscount=0,this.AllItemPriceRes.map(function(e){n.ItemTotalDiscount=n.ItemTotalDiscount+e.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscountReverseNew()}},{key:"CalculateDiscountRev",value:function(e,t){var i,n,l,o=this,r=this.AllItemPriceRes[t];n=(l=e.value)/(i=r.MRP*r.Qty)*100,this.AllItemPriceRes[t].DiscountAmount=l,this.AllItemPriceRes[t].DiscountPer=n,this.AllItemPriceRes[t].DiscountPerUI=Math.round(n),this.AllItemPriceRes[t].PriceWithGST=i-l,this.ItemTotalDiscount=0,this.AllItemPriceRes.map(function(e){o.ItemTotalDiscount=o.ItemTotalDiscount+e.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscountReverseNew()}},{key:"CalculateDiscountBlur",value:function(e){var t,i,n,l=this,o=this.AllItemPriceRes[e];i=(n=o.DiscountAmount)/(t=o.MRP*o.Qty)*100,this.AllItemPriceRes[e].DiscountAmount=n,this.AllItemPriceRes[e].DiscountPer=i,this.AllItemPriceRes[e].PriceWithGST=t-n,this.ItemTotalDiscount=0,this.AllItemPriceRes.map(function(e){l.ItemTotalDiscount=l.ItemTotalDiscount+e.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscountReverseNew(),this.cdRef.detectChanges()}},{key:"CalculateTotalItemPrice",value:function(){if(null!=this.AllItemPriceRes.filter(function(e){return 1==e.IsChecked})){var e=this.AllItemPriceRes.filter(function(e){return 1==e.IsChecked}),t=0;e.length>0&&(t=e.map(function(e){return e.PriceWithGST}).reduce(function(e,t){return e+t},0)),this.ItemCheckedTotal=t,this.cdRef.detectChanges()}this.CalculateNetPaybleAfterDiscountReverseNew()}},{key:"openPaymentMethod",value:function(e){this.TenderObj={},this.TenderModel={},this.SelectPaymodeArray=[],this.selectedPaymodeCodes=null,this.modalService.open(e,{size:"lg",backdrop:"static",keyboard:!1})}},{key:"ShowSelectedItem",value:function(){var e;if((null===(e=this.selectedPaymodeCodes)||void 0===e?void 0:e.length)>0){var t=this.selectedPaymodeCodes.indexOf("ATONLN"),i=this.selectedPaymodeCodes.indexOf("ATWLONLN");t>-1?this.selectedPaymodeCodes=this.selectedPaymodeCodes.filter(function(e){return"ATONLN"==e}):i>-1&&(this.selectedPaymodeCodes=this.selectedPaymodeCodes.filter(function(e){return"ATWLONLN"==e})),this.SelectPaymodeArray=this.selectedPaymodeCodes.toString().split(",")}else this.SelectPaymodeArray=[]}},{key:"FireforPayment",value:function(){var e;0!=(null===(e=this.SelectPaymodeArray)||void 0===e?void 0:e.length)?this.SelectPaymodeArray.includes("ATONLN")&&(this.ItemPriceRes=this.AllItemPriceRes.filter(function(e){return 1==e.IsChecked}),this.PayExtraItemNew(this.userSelected,this.CreditNoteAmount)):this._UtilityService.showWarningAlert("Please select payment mode")}},{key:"GeneratePerforma",value:function(){var e,t,i,n=this;if((null===(e=this.AllItemPriceRes.filter(function(e){return 1==e.IsChecked}))||void 0===e?void 0:e.length)>0){if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy))return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.RequestedBy||""==this.RequestedBy||null==this.RequestedBy))return void this._UtilityService.showWarningAlert("Please enter Requested By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.RequestedBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Requested By");if("Performa"==this.InvMode&&"Edit"==this.TrnMode&&(null==this.PIEditGenRemarks||null==this.PIEditGenRemarks||0==this.PIEditGenRemarks.trim().length))return void this._UtilityService.showWarningAlert("Please enter General Remarks for Edit Proforma");this.NewItemDetails=[],this.AllItemPriceRes.filter(function(e){return 1==e.IsChecked}).map(function(e){n.NewItemDetails.push({BillItemId:e.BillItemId,Qty:e.Qty,MCODE:e.MCODE,MRP:e.MRP,SELLINGPRICE:e.MRP,INDDISCOUNTRATE:n._ConstantServices.nullToZeroConverter(e.DiscountPer),DCRATE:n._ConstantServices.nullToZeroConverter(n.BillWiseDiscountPer),NightCount:n._ConstantServices.nullToZeroConverter(e.NightCount),RoomCount:n._ConstantServices.nullToZeroConverter(e.RoomCount),lstTenderModel:[]})});var l={};l.NewItem=this.NewItemDetails,l.SlotBookingId=this.userSelected,l.PayMode="Other",l.OnlineTranId="",l.TotalAmount=this.NetPaybleTotal,l.ReferredBy=this.ReferredBy,l.RequestedBy=this.RequestedBy,l.TrnMode=this.TrnMode,l.InvoiceFor="Extra Item",l.GeneralRemarks=null===(t=this.PIEditGenRemarks)||void 0===t?void 0:t.trim(),l.ModifiedBy=localStorage.getItem("userId"),null!=this.CreditNoteNumber&&null!=this.CreditNoteNumber&&this.CreditNoteTranAmount>0&&(l.CreditNoteNumber=this.CreditNoteNumber,l.CreditNoteTranAmount=this.CreditNoteTranAmount),"Performa"==this.RecWith&&(null===(i=this.lstReciveVoucher)||void 0===i?void 0:i.length)>0&&(l.VourcherList=this.lstReciveVoucher),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.CreatePerformaInvoiceExtraItemRev(l).subscribe(function(e){n._UtilityService.hideSpinner(),1==e.actionResult.success&&(n.InvMode=null,$("#btnExtraItemModel").click(),n.LoadConsumedItem(),n.LoadInvoiceData(),n.LoadCrediNoteBalance(),n.resetIndividualInvoiceList()),n._UtilityService.showSuccessAlert(e.actionResult.errMsg)},function(e){n._UtilityService.hideSpinner(),n._UtilityService.showErrorAlert(e.error.message)})}}},{key:"UpdateTransactionDetails",value:function(e,t){var i,n=this;(null===(i=this.PaymentTransactionDetails)||void 0===i?void 0:i.length)>0&&(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UpdateTransactionDetails(this.PaymentTransactionDetails,t,e).subscribe(function(e){n._UtilityService.hideSpinner(),n._UtilityService.showSuccessAlert(e.actionResult.errMsg)},function(e){n._UtilityService.hideSpinner(),n._UtilityService.showErrorAlert(e.message)}))}},{key:"ShowReceivePaymentModel",value:function(){this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy)||this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0?this._UtilityService.showWarningAlert("Please enter Authorized By"):this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.RequestedBy||""==this.RequestedBy||null==this.RequestedBy)||this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.RequestedBy.trim().length<=0?this._UtilityService.showWarningAlert("Please enter Requested By"):"Performa"!=this.InvMode||"Edit"!=this.TrnMode||null!=this.PIEditGenRemarks&&null!=this.PIEditGenRemarks&&0!=this.PIEditGenRemarks.trim().length?Math.round(this.NetPaybleTotal)<1?this._UtilityService.showWarningAlert("Net Payable Should be Greater than Zero"):(this.ShowAddCreditNoteModel(),this.RecWith="Performa",this.CreditNoteAmount=this.NetPaybleTotal,this.MaxRecAmount=this.NetPaybleTotal,this.lstReciveVoucher=[],this.RecPayment=!1):this._UtilityService.showWarningAlert("Please enter General Remarks for Edit Proforma")}},{key:"UpdateTransactionDetailsPaymentReceive",value:function(e){var t,i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(null===(t=this.PaymentTransactionDetails)||void 0===t?void 0:t.length)>0&&(null==n?void 0:n.length)>0&&n.map(function(t){i._UtilityService.showSpinner(),i.unsubscribe.add=i._PatientServices.UpdateTransactionDetails(i.PaymentTransactionDetails.filter(function(e){return e.TrnMode==t.TRNMODE}),e,t.VCHRNO).subscribe(function(e){i._UtilityService.hideSpinner(),i._UtilityService.showSuccessAlert(e.actionResult.errMsg)},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})})}},{key:"UploadBankDepositSlip",value:function(e,t){var i=this,n=new FormData;this.fileUploadAttBankslip1.get("AttBankslip1").value&&(n.append(this.BankDepositSlip1Att,this.fileUploadAttBankslip1.get("AttBankslip1").value),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UploadBankDepositSlip(n,e,t).subscribe(function(e){i._UtilityService.hideSpinner(),1==e.actionResult.success&&(i.fileUploadAttBankslip1=i.formBuilder.group({AttBankslip1:[""]}),i.cdRef.detectChanges())},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)}))}},{key:"PayExtraItem",value:function(){var e;this.BankDepTrnCounter=1,this.lstBankDepositTransactionDetails=[],(null===(e=this.AllItemPriceRes.filter(function(e){return 1==e.IsChecked}))||void 0===e?void 0:e.length)>0?this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy)||this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0?this._UtilityService.showWarningAlert("Please enter Authorized By"):Math.round(this.NetPaybleTotal)<1?this._UtilityService.showWarningAlert("Net Payable Should be Greater than Zero"):(this.lstBankDepositTransactionDetails.push({Sequence:this.BankDepTrnCounter,BankName:"",TransactionId:"",RecdDate:null,Amount:0}),this.cdRef.detectChanges(),$("#btnShowPaymentMethodModel").click()):this._UtilityService.showWarningAlert("Please select Item for Bill")}},{key:"CalculateTotalBankTransaction",value:function(e,t){if(e.value>0){null!=this.TenderObj.BANKTFAMOUNT&&null!=this.TenderObj.BANKTFAMOUNT||(this.TenderObj.BANKTFAMOUNT=0);var i=0;(null==(n=this.lstBankDepositTransactionDetails.filter(function(e){return e.Sequence!=t}))?void 0:n.length)>0&&n.map(function(e){i+=e.Amount}),this.TenderObj.BANKTFAMOUNT=i+e.value,this.cdRef.detectChanges()}else{var n;null!=this.TenderObj.BANKTFAMOUNT&&null!=this.TenderObj.BANKTFAMOUNT||(this.TenderObj.BANKTFAMOUNT=0),i=0,(null==(n=this.lstBankDepositTransactionDetails.filter(function(e){return e.Sequence!=t}))?void 0:n.length)>0&&n.map(function(e){i+=e.Amount}),this.TenderObj.BANKTFAMOUNT=i,this.cdRef.detectChanges()}}},{key:"CalculateTotalBankTransactionrev",value:function(){var e=0;this.lstBankDepositTransactionDetails.map(function(t){e+=t.Amount}),this.TenderObj.BANKTFAMOUNT=e,this.cdRef.detectChanges()}},{key:"AddBankTransactionDetails",value:function(){this.BankDepTrnCounter++,this.lstBankDepositTransactionDetails.push({Sequence:this.BankDepTrnCounter,BankName:"",TransactionId:"",RecdDate:null,Amount:0}),this.cdRef.detectChanges()}},{key:"RemoveBankTransactionDetails",value:function(e){this.lstBankDepositTransactionDetails=this.lstBankDepositTransactionDetails.filter(function(t){return t.Sequence!==e}),this.CalculateTotalBankTransactionrev(),this.cdRef.detectChanges()}},{key:"PayExtraItemNewWL",value:function(e,t){var i=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddWordLineOrderDetailsWellnessSelectedItem(e,Math.round(this.CreditNoteAmount).toString()).subscribe(function(e){if(i._UtilityService.hideSpinner(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);i.WLOrderRes=t=t||[];var n=JSON.parse(e.actionResult.result2);i.UserRes=n=n||[],i.IsSelectedItem=!0,i.SlotBookingIdSelected=i.userSelected,i.HitforWLPayment()}else i._UtilityService.showWarningAlert(e.actionResult.errMsg)},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})}},{key:"HitforWLPayment",value:function(){$("#btnShowWLPayModel").click()}},{key:"GetWLPaymentStatusEmit",value:function(e){this.lstReciveVoucher=[],e.includes("~")&&"Success"===e.split("~")[0]&&($("#btnWLPayCloseModal").click(),$("#btnPaymentMethodModel").click(),this.lstReciveVoucher.push({VCHRNO:e.split("~")[1],TRNMODE:"Online"}),this.RecPayment=!1,$("#btnRecivePaymentClose").click(),"Performa"==this.InvMode&&this.GeneratePerforma(),this.LoadConsumedItem(),this.LoadInvoiceData(),this.LoadCrediNoteBalance(),this.resetIndividualInvoiceList())}},{key:"PayExtraItemNew",value:function(e,t){var i=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddRazorOrderDetailsWellnessSelectedItem(e,Math.round(this.CreditNoteAmount).toString()).subscribe(function(e){if(i._UtilityService.hideSpinner(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);i.OrderRes=t=t||[];var n=JSON.parse(e.actionResult.result2);i.UserRes=n=n||[],i.IsSelectedItem=!0,i.SlotBookingIdSelected=i.userSelected,i.HitforPayment()}else i._UtilityService.showSuccessAlert(e.actionResult.errMsg)},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})}},{key:"HitforPayment",value:function(){$("#btnShowRazorPayModel").click()}},{key:"openNewExtraItem",value:function(e){this.modalService.open(e,{size:"xxl"})}},{key:"getDismissReason",value:function(e){return e===r.a.ESC?"by pressing ESC":e===r.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(e)}},{key:"clear",value:function(){this.lstExtraItemDetails=[],this.extraItemRowCounter=0,this.AddExtraItemDetails()}},{key:"PrintCreditInvoice",value:function(){for(var e=[],t=0;t<this.tableDataExtraItemCredit.length;t++)1==this.tableDataExtraItemCredit[t].checkAccess&&e.push({id:this.tableDataExtraItemCredit[t].BillItemId});0!=e.length?this.GetCreditBillItemBySlotBookingId(e):this._UtilityService.showWarningAlert("Please Select any one record")}},{key:"getSelectAllRecord",value:function(){if(1==this.checked)for(var e=0;e<this.tableDataExtraItemCredit.length;e++)this.tableDataExtraItemCredit[e].checkAccess=!0;else for(e=0;e<this.tableDataExtraItemCredit.length;e++)this.tableDataExtraItemCredit[e].checkAccess=!1;this.cdRef.detectChanges()}},{key:"GetCreditBillItemBySlotBookingId",value:function(e){var t=this;this.TotalGrandTotalAmount=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetCreditBillItemBySlotBookingId(e,this.userSelected).subscribe(function(e){if(t._UtilityService.hideSpinner(),1==e.actionResult.success){var i=JSON.parse(e.actionResult.result);t.printBillItem=i=i||[],t.TotalGrandTotalAmount=t.printBillItem.map(function(e){return e.PriceWithGST}).reduce(function(e,t){return e+t}),t.cdRef.detectChanges(),t.ShowPerformaInvoiceListModel=!0}else t.printBillItem=[],t._UtilityService.showWarningAlert(e.actionResult.errMsg)},function(e){t._UtilityService.hideSpinner(),t._UtilityService.showErrorAlert(e.message)})}},{key:"ReflectCreditBalance",value:function(e){var t;(t=null==e?void 0:e.value)>0?(this.CreditNoteAmount=t,this.NetPaybleTotal=t):(this.CreditNoteAmount=0,this.NetPaybleTotal=0),this.cdRef.detectChanges()}},{key:"EditPInvoice",value:function(e,t,i,n){var l=this;this.ResetPriceDetails(),this.ResetTenderList(),this.ExtraItemList=[],this.AllItemPriceRes=[],this.ItemPriceRes=[],this.TrnMode="Edit",this.lstReciveVoucher=[],this.PIEditGenRemarks=null,0==this.MaxCreditLimit&&(this.lstPayMode=this.lstPayMode.filter(function(e){return"LB1199"!==e.ACID})),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetItemByPerforma(e,t).subscribe(function(e){var t;if(l._UtilityService.hideSpinner(),1==e.actionResult.success){var i=JSON.parse(e.actionResult.result);l.ExtraItemList=i=i||[],l.AllItemPriceRes=i,l.ReferredBy=null!=l.AllItemPriceRes[0].ReferredBy&&null!=l.AllItemPriceRes[0].ReferredBy?l.AllItemPriceRes[0].ReferredBy:"",l.RequestedBy=null!=l.AllItemPriceRes[0].RequestedBy&&null!=l.AllItemPriceRes[0].RequestedBy?l.AllItemPriceRes[0].RequestedBy:"";var n=0,o=0;if(l.AllItemPriceRes.map(function(e){n+=l._ConstantServices.nullToZeroConverter(e.IDiscountAmount),o+=l._ConstantServices.nullToZeroConverter(e.IDiscountPercentage)}),l._ConstantServices.nullToZeroConverter(o)>0&&(o/=null===(t=l.AllItemPriceRes)||void 0===t?void 0:t.length),l.BillWiseDiscountAmount=l._ConstantServices.nullToZeroConverter(n),l.BillWiseDiscountPer=l._ConstantServices.nullToZeroConverter(o),e.actionResult.result2)l.CreditNoteNumber="",l.CreditNoteTranAmount=0,l.MaxCreditNoteAmount=0;else{var r=JSON.parse(e.actionResult.result2);l.CreditNoteNumber=(r=r||[]).CreditNoteNumber,l.CreditNoteTranAmount=r.DebitAmount,l.MaxCreditNoteAmount=r.DebitAmount}l.CalculateTotalItemPrice(),l.InvMode="Performa",l.CheckIsCredit=!1,l.cdRef.detectChanges(),$("#btnShowExtraItemModel").click(),l.LoadAuthorizedMaster()}else l.ExtraItemList=[],l._UtilityService.showWarningAlert(e.actionResult.errMsg)},function(e){l._UtilityService.hideSpinner(),l._UtilityService.showErrorAlert(e.message)})}},{key:"CancelPInvoice",value:function(e,t,i,n){var l=this;this.confirmationService.confirm({header:"Confirmation",message:"Are sure you want to Cancel this Proforma ?",icon:"pi pi-exclamation-triangle",accept:function(){l._UtilityService.showSpinner(),l.unsubscribe.add=l._PatientServices.CancelPerforMaInvoice(e,t,l.IsRefundforPI).subscribe(function(e){l._UtilityService.hideSpinner(),1==e.actionResult.success?(l.LoadInvoiceData(),l.LoadCrediNoteBalance(),l.resetIndividualInvoiceList(),l._UtilityService.showSuccessAlert(e.actionResult.errMsg)):l._UtilityService.showWarningAlert(e.actionResult.errMsg)},function(e){l._UtilityService.hideSpinner(),l._UtilityService.showErrorAlert(e.message)})}})}},{key:"CancelPInvoiceWithRefund",value:function(e,t,i,n){this.IsRefundforPI=!1,this.CancelPInvoice(e,t,i,n)}},{key:"CancelPInvoiceWithNoRefund",value:function(e,t,i,n){this.IsRefundforPI=!0,this.CancelPInvoice(e,t,i,n)}},{key:"CalculateItemTotal",value:function(e,t){if(this._ConstantServices.nullToZeroConverter(e.value)>0){var i=this._ConstantServices.nullToZeroConverter(e.value);this.AllItemPriceRes[t].PriceWithGST=parseFloat(this.AllItemPriceRes[t].MRP)*i,this.AllItemPriceRes[t].NETAMOUNT=parseFloat(this.AllItemPriceRes[t].MRP)*i,this.AllItemPriceRes[t].Qty=i}else this.AllItemPriceRes[t].PriceWithGST=0,this.AllItemPriceRes[t].NETAMOUNT=0;this.CalculateDiscountNew(t)}},{key:"CalculateItemTotalNew",value:function(e){var t=this.AllItemPriceRes[e];if(this._ConstantServices.nullToZeroConverter(t.Qty)>0){var i=this._ConstantServices.nullToZeroConverter(t.Qty);this.AllItemPriceRes[e].PriceWithGST=parseFloat(this.AllItemPriceRes[e].MRP)*i,this.AllItemPriceRes[e].NETAMOUNT=parseFloat(this.AllItemPriceRes[e].MRP)*i,this.AllItemPriceRes[e].Qty=i}else this.AllItemPriceRes[e].PriceWithGST=0,this.AllItemPriceRes[e].NETAMOUNT=0;this.CalculateDiscountNew(e)}},{key:"CalculateITotalNRev",value:function(e,t){var i=this.AllItemPriceRes[t],n=e.key,l=0;if(null!=n&&null!=n&&""!=n&&"0"!=n&&(l=parseInt(n)),this._ConstantServices.nullToZeroConverter(l)>0&&i.RoomCount>0)this.AllItemPriceRes[t].Qty=this._ConstantServices.nullToZeroConverter(l)*this._ConstantServices.nullToZeroConverter(i.RoomCount),this.CalculateItemTotalNew(t);else{this.AllItemPriceRes[t].Qty=(this._ConstantServices.nullToZeroConverter(l)>0?this._ConstantServices.nullToZeroConverter(l):1)*(this._ConstantServices.nullToZeroConverter(i.RoomCount)>0?this._ConstantServices.nullToZeroConverter(i.RoomCount):1);var o=this._ConstantServices.nullToZeroConverter(l)>0?this._ConstantServices.nullToZeroConverter(l):1;this.AllItemPriceRes[t].NightCount=this._ConstantServices.nullToZeroConverter(o),this.CalculateItemTotalNew(t),this._ConstantServices.nullToZeroConverter(l)}this.cdRef.detectChanges()}},{key:"CalculateITotalNRevWE",value:function(e){var t=this.AllItemPriceRes[e],i=0;if(t.NightCount>0&&(i=parseInt(t.NightCount)),this._ConstantServices.nullToZeroConverter(i)>0&&t.RoomCount)this.AllItemPriceRes[e].Qty=this._ConstantServices.nullToZeroConverter(i)*this._ConstantServices.nullToZeroConverter(t.RoomCount),this.CalculateItemTotalNew(e);else{this.AllItemPriceRes[e].Qty=(this._ConstantServices.nullToZeroConverter(i)>0?this._ConstantServices.nullToZeroConverter(i):1)*(this._ConstantServices.nullToZeroConverter(t.RoomCount)>0?this._ConstantServices.nullToZeroConverter(t.RoomCount):1);var n=this._ConstantServices.nullToZeroConverter(i)>0?this._ConstantServices.nullToZeroConverter(i):1;this.AllItemPriceRes[e].NightCount=this._ConstantServices.nullToZeroConverter(n),this.CalculateItemTotalNew(e),this._ConstantServices.nullToZeroConverter(i)}this.cdRef.detectChanges()}},{key:"CalculateITotalNightRev",value:function(e,t){var i=this.lstExtraItemDetails.find(function(e){return e.Sequence==t}),n=this.lstExtraItemDetails.findIndex(function(e){return e.Sequence==t}),l=e.value,o=0;null!=l&&null!=l&&""!=l&&"0"!=l&&(o=parseInt(l)),this._ConstantServices.nullToZeroConverter(o)>0&&i.RoomCount>0?this.lstExtraItemDetails[n].Qty=this._ConstantServices.nullToZeroConverter(o)*this._ConstantServices.nullToZeroConverter(i.RoomCount):(this.lstExtraItemDetails[n].Qty=(this._ConstantServices.nullToZeroConverter(o)>0?this._ConstantServices.nullToZeroConverter(o):1)*(this._ConstantServices.nullToZeroConverter(i.RoomCount)>0?this._ConstantServices.nullToZeroConverter(i.RoomCount):1),this.lstExtraItemDetails[n].NightCount=this._ConstantServices.nullToZeroConverter(o)>0?this._ConstantServices.nullToZeroConverter(o):1,this.lstExtraItemDetails[n].RoomCount=1,this._ConstantServices.nullToZeroConverter(o)),this.cdRef.detectChanges()}},{key:"CalculateITotalRRev",value:function(e,t){var i=this.AllItemPriceRes[t],n=e.key,l=0;if(null!=n&&null!=n&&""!=n&&"0"!=n&&(l=parseInt(n)),this._ConstantServices.nullToZeroConverter(l)>0&&i.NightCount)this.AllItemPriceRes[t].Qty=this._ConstantServices.nullToZeroConverter(l)*this._ConstantServices.nullToZeroConverter(i.NightCount),this.CalculateItemTotalNew(t);else{this.AllItemPriceRes[t].Qty=(this._ConstantServices.nullToZeroConverter(l)>0?this._ConstantServices.nullToZeroConverter(l):1)*(this._ConstantServices.nullToZeroConverter(i.NightCount)>0?this._ConstantServices.nullToZeroConverter(i.NightCount):1);var o=this._ConstantServices.nullToZeroConverter(l)>0?this._ConstantServices.nullToZeroConverter(l):1;this.AllItemPriceRes[t].RoomCount=this._ConstantServices.nullToZeroConverter(o),this.CalculateItemTotalNew(t),this._ConstantServices.nullToZeroConverter(l)}this.cdRef.detectChanges()}},{key:"CalculateITotalRRevWE",value:function(e){var t=this.AllItemPriceRes[e],i=0;if(t.RoomCount>0&&(i=parseInt(t.RoomCount)),this._ConstantServices.nullToZeroConverter(i)>0&&t.NightCount)this.AllItemPriceRes[e].Qty=this._ConstantServices.nullToZeroConverter(i)*this._ConstantServices.nullToZeroConverter(t.NightCount),this.CalculateItemTotalNew(e);else{this.AllItemPriceRes[e].Qty=(this._ConstantServices.nullToZeroConverter(i)>0?this._ConstantServices.nullToZeroConverter(i):1)*(this._ConstantServices.nullToZeroConverter(t.NightCount)>0?this._ConstantServices.nullToZeroConverter(t.NightCount):1);var n=this._ConstantServices.nullToZeroConverter(i)>0?this._ConstantServices.nullToZeroConverter(i):1;this.AllItemPriceRes[e].RoomCount=this._ConstantServices.nullToZeroConverter(n),this.CalculateItemTotalNew(e),this._ConstantServices.nullToZeroConverter(i)}this.cdRef.detectChanges()}},{key:"CalculateITotalDaysRev",value:function(e,t){var i=this.lstExtraItemDetails.find(function(e){return e.Sequence==t}),n=this.lstExtraItemDetails.findIndex(function(e){return e.Sequence==t}),l=e.value,o=0;null!=l&&null!=l&&""!=l&&"0"!=l&&(o=parseInt(l)),this._ConstantServices.nullToZeroConverter(o)>0&&i.NightCount>0?this.lstExtraItemDetails[n].Qty=this._ConstantServices.nullToZeroConverter(o)*this._ConstantServices.nullToZeroConverter(i.NightCount):(this.lstExtraItemDetails[n].Qty=(this._ConstantServices.nullToZeroConverter(o)>0?this._ConstantServices.nullToZeroConverter(o):1)*(this._ConstantServices.nullToZeroConverter(i.NightCount)>0?this._ConstantServices.nullToZeroConverter(i.NightCount):1),this.lstExtraItemDetails[n].RoomCount=this._ConstantServices.nullToZeroConverter(o)>0?this._ConstantServices.nullToZeroConverter(o):1,0==this._ConstantServices.nullToZeroConverter(o)&&this._UtilityService.showWarningAlert("Bed Count Shouldn't be zero")),this.cdRef.detectChanges()}},{key:"PrintPInvoice",value:function(e,t,i,n){var l=this;this.SlotBookingIdSelected=e,this.TotalDiscountAmount=0,this.TotalReceiveAmount=0,this.printBillItem=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetItemByPerforma(e,t).subscribe(function(e){if(l._UtilityService.hideSpinner(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);l.printBillItem=t=t||[],l._ConstantServices.nullToZeroConverter(e.actionResult.totalAmount)>0&&(l.TotalReceiveAmount=l._ConstantServices.nullToZeroConverter(e.actionResult.totalAmount)),l.TotalGrandTotalAmount=l.printBillItem.map(function(e){return e.PriceWithGST}).reduce(function(e,t){return e+t}),l.printBillItem.map(function(e){l.TotalDiscountAmount=l.TotalDiscountAmount+l._ConstantServices.nullToZeroConverter(e.IDiscountAmount)}),l.cdRef.detectChanges(),l.ShowPerformaInvoiceListModel=!0}else l.printBillItem=[],l._UtilityService.showSuccessAlert(e.actionResult.errMsg)},function(e){l._UtilityService.hideSpinner(),l._UtilityService.showErrorAlert(e.message)})}},{key:"ShowAddCreditNoteModelCI",value:function(){if("Visitor"==this.CustomerType){if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy))return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Authorized By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.RequestedBy||""==this.RequestedBy||null==this.RequestedBy))return void this._UtilityService.showWarningAlert("Please enter Requested By");if(this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.RequestedBy.trim().length<=0)return void this._UtilityService.showWarningAlert("Please enter Requested By")}this.ShowAddCreditNoteModel(),this.NetPaybleTotal-this.MaxCreditLimit>0&&(this.CreditNoteAmount=Math.round(this._ConstantServices.nullToZeroConverter(this.NetPaybleTotal-this.MaxCreditLimit)),this.MaxRecAmount=this.CreditNoteAmount),this.cdRef.detectChanges()}},{key:"ShowRefundCreditNoteModelCI",value:function(){this.ShowRefundCreditNoteModel(),this.MaxRefundAmount-this.NetPaybleTotal>0&&(this.RefundCreditNoteAmount=this._ConstantServices.nullToZeroConverter(this.MaxRefundAmount-this.NetPaybleTotal),this.MaxRefundableAmount=this.RefundCreditNoteAmount),this.cdRef.detectChanges()}},{key:"getSelectAllItem",value:function(){var e;if(1==this.selectAllItem)for(var t=0;t<(null===(e=this.AllItemPriceRes)||void 0===e?void 0:e.length);t++)this.AllItemPriceRes[t].IsChecked=!0;else for(t=0;t<this.AllItemPriceRes.length;t++)(0==this.AllItemPriceRes[t].IsDisabledCheckBox||this.AllItemPriceRes[t].CanEditQty)&&(this.AllItemPriceRes[t].IsChecked=!1);this.CalculateTotalItemPrice()}},{key:"validateZero",value:function(e){var t=e.keyCode;e.key.match(/[1-9]/g)&&![8,37,39,46].includes(t)||e.preventDefault()}},{key:"onFileSelectRefundAppSlip",value:function(e,t){var i;if((null===(i=e.target.files)||void 0===i?void 0:i.length)>0){var n=e.target.files[0];[".jpg",".png",".jpeg",".pdf"].includes("."+n.type.split("/")[1])?n.size>5242880?($("#"+t).val(""),"AttRefAppslip1"==t&&(this.fileInputLabelAttRefAppslip1="",this.AttRefundSlip1Att=""),this._UtilityService.showWarningAlert("Maximum 5 MB file can be Uploaded")):"AttRefAppslip1"==t&&(this.fileInputLabelAttRefAppslip1=n.name,this.fileUploadAttRefslip1.get("AttRefAppslip1").setValue(n)):($("#"+t).val(""),"AttRefAppslip1"==t&&(this.fileInputLabelAttRefAppslip1="",this.AttRefundSlip1Att=""),this._UtilityService.showWarningAlert("Only jpg, png and pdf Allowed!")),this.cdRef.detectChanges()}}},{key:"UploadRefundApprovalSlip",value:function(e,t){var i=this,n=new FormData;this.fileUploadAttRefslip1.get("AttRefAppslip1").value&&(n.append(this.AttRefundSlip1Att,this.fileUploadAttRefslip1.get("AttRefAppslip1").value),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UploadBankDepositSlip(n,e,t,"Refund").subscribe(function(e){i._UtilityService.hideSpinner(),1==e.actionResult.success&&i.cdRef.detectChanges()},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)}))}},{key:"SelectParentMCode",value:function(e){this.lstExtraItemDetails[this.SelectedSequence].Parent=e,this.showModalRoomCategorySelect=!1,this.cdRef.detectChanges()}},{key:"CalculateTotalCardPayment",value:function(e,t){if(e.value>0){null!=this.TenderObj.CARDAMT&&null!=this.TenderObj.CARDAMT||(this.TenderObj.CARDAMT=0);var i=0;(null==(n=this.lstCardPaymentTransactionDetails.filter(function(e){return e.Sequence!=t}))?void 0:n.length)>0&&n.map(function(e){i+=e.Amount}),this.TenderObj.CARDAMT=i+e.value,this.cdRef.detectChanges()}else{var n;null!=this.TenderObj.CARDAMT&&null!=this.TenderObj.CARDAMT||(this.TenderObj.CARDAMT=0),i=0,(null==(n=this.lstCardPaymentTransactionDetails.filter(function(e){return e.Sequence!=t}))?void 0:n.length)>0&&n.map(function(e){i+=e.Amount}),this.TenderObj.CARDAMT=i,this.cdRef.detectChanges()}}},{key:"CalculateTotalCardPaymentrev",value:function(){var e=0;this.lstCardPaymentTransactionDetails.map(function(t){e+=t.Amount}),this.TenderObj.CARDAMT=e,this.cdRef.detectChanges()}},{key:"AddCardPaymentDetails",value:function(){this.CardTrnCounter++,this.lstCardPaymentTransactionDetails.push({Sequence:this.CardTrnCounter,CardNumber:"",CardHolderName:"",TransactionId:"",RecdDate:null,Amount:0}),this.cdRef.detectChanges()}},{key:"RemoveCardPaymentDetails",value:function(e){this.lstCardPaymentTransactionDetails=this.lstCardPaymentTransactionDetails.filter(function(t){return t.Sequence!==e}),this.CalculateTotalCardPaymentrev(),this.cdRef.detectChanges()}},{key:"ShowTransactionDetails",value:function(e,t,i,n){this.SlotBookingIdSelected=e,this.InvoiceNumberSelected=t,this.PhiscalIdSelected=i,this.DivisionSelected=n,this.ShowTransactionDetailsModel=!0}},{key:"CheckCreditNote",value:function(){var e=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetNetBalanceCreditNote(this.ClinicIdSelected,this.userSelected,this.CreditNoteNumber).subscribe(function(t){e._UtilityService.hideSpinner(),1==t.actionResult.success?e.MaxCreditNoteAmount=t.actionResult.totalAmount:(e._UtilityService.showWarningAlert(t.actionResult.errMsg),e.MaxCreditNoteAmount=0)},function(t){e._UtilityService.hideSpinner(),e.MaxCreditNoteAmount=0}),this.cdRef.detectChanges()}},{key:"LoadClinicMasterById",value:function(){var e=this;this.ClinicDetails={},this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetClinicMasterById(this.ClinicIdSelected).subscribe(function(t){if(e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.ClinicDetails=i=i||[],e.ResetTenderList(),e.cdRef.detectChanges()}else e.cdRef.detectChanges()})}},{key:"onselectedLetterhead",value:function(e){this.IsLetterhead=e}},{key:"PrintPaymentVoucher",value:function(e,t,i,n,l){this.SelectedSlotBookingId=e,this.SelectedVCHRNO=t,this.SelectedPhiscalID=i,this.SelectedDivision=n,this.SelectedInvType=l,this.ShowPrintPaymentVoucherModel=!0}},{key:"PrintInvoice",value:function(e,t,i,n){this.SlotBookingIdSelected=e,this.InvoiceNumberSelected=t,this.PhiscalIdSelected=i,this.DivisionSelected=n,this.ShowPrintProfileModel=!0}},{key:"PrintCombinedInvoice",value:function(){var e=this;window.open("#/print/combined-invoice-print?SlotBookingId="+this.userSelected+"&UserId="+this.UserList.filter(function(t){return t.SlotBookingId==e.userSelected})[0].UserId)}},{key:"PrintBankDepositSlip",value:function(e,t,i){var n=this._ConstantServices.BaseURIFileServer+"FolderTransaction/"+this.ProdList.find(function(e){return e.VCHRNO==t}).BankDSlip;window.open(n)}},{key:"ShowEstimetedBill",value:function(){var e=this;this.SlotBookingIdSelected=this.userSelected,this.TotalGrandTotalAmount=0,this.printBillItem=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetUnbilledItemBySlot(this.userSelected).subscribe(function(t){if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.printBillItem=i=i||[],e.TotalGrandTotalAmount=e.printBillItem.map(function(e){return e.PriceWithGST}).reduce(function(e,t){return e+t}),e.cdRef.detectChanges(),e.ShowEstimetedBillListModel=!0}else e.printBillItem=[],e._UtilityService.showSuccessAlert(t.actionResult.errMsg)},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"GenerateTIProvisionalNo",value:function(){var e=this;this.confirmationService.confirm({header:"Confirmation",message:"Are you sure to Generate Provisonal Number?",icon:"pi pi-exclamation-triangle",accept:function(){e._UtilityService.showSpinner(),e.unsubscribe.add=e._PatientServices.GenerateTIProvisionalNo(e.userSelected).subscribe(function(t){e._UtilityService.hideSpinner(),1==t.actionResult.success?e._UtilityService.showSuccessAlert(t.actionResult.errMsg):e._UtilityService.showWarningAlert(t.actionResult.errMsg)},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}})}},{key:"GetColonhydrothrapyCount",value:function(){this.ShowColonHydroModel=!0}},{key:"OnChangeOption",value:function(){"Visitor"==this.CustomerType&&(this.VisitorUserMaster={},this.userSelected=null,this.lstExtraItemDetails=[],this.extraItemRowCounter=0,this.AddExtraItemDetails(),this.LoaditemMasterWithGrouping(),this.cdRef.detectChanges())}},{key:"saveExtraItemVisitor",value:function(){var e,t,i,n,l,o,r,a,c,s,d,u,b,h=this;if(this.IsListView&&(this.lstExtraItemDetails=[],this.itemMaster.map(function(e){e.expanded=!1}),this.lstExtraItemDetails=this.lstExtraListItemDetails),this.ResetPriceDetails(),this.AllItemPriceRes=[],this.MaxCreditNoteAmount=0,this.CreditNoteNumber=null,this.CreditNoteTranAmount=0,this.VisitorSelected=null,""!=(null===(e=this.VisitorUserMaster)||void 0===e?void 0:e.FirstName)&&null!=(null===(t=this.VisitorUserMaster)||void 0===t?void 0:t.FirstName)&&null!=(null===(i=this.VisitorUserMaster)||void 0===i?void 0:i.FirstName)&&""!=(null===(l=null===(n=this.VisitorUserMaster)||void 0===n?void 0:n.FirstName)||void 0===l?void 0:l.trim()))if(!(null===(o=this.VisitorUserMaster)||void 0===o?void 0:o.IsStaff)||""!=(null===(r=this.VisitorUserMaster)||void 0===r?void 0:r.EmpCode)&&null!=(null===(a=this.VisitorUserMaster)||void 0===a?void 0:a.EmpCode)&&null!=(null===(c=this.VisitorUserMaster)||void 0===c?void 0:c.EmpCode)&&""!=(null===(d=null===(s=this.VisitorUserMaster)||void 0===s?void 0:s.EmpCode)||void 0===d?void 0:d.trim()))if((null===(u=this.VisitorUserMaster)||void 0===u?void 0:u.IsStaff)||(this.VisitorUserMaster.EmpCode="",this.VisitorUserMaster.Department=""),0!=(null===(b=this.lstExtraItemDetails)||void 0===b?void 0:b.length)){var m=[],v=!0;if(this.lstExtraItemDetails.forEach(function(e){if(e.MCODE==h.defaultItemMCODE.OtherCharge&&(null==e.MRP||null==e.MRP||e.MRP<=0||null==e.OtherPurpose||null==e.OtherPurpose||0==e.OtherPurpose.trim().length))v=!1;else if(""!=e.MCODE&&null!=e.MCODE&&""!=e.UOMS&&null!=e.UOMS&&0!=(null==e?void 0:e.Qty)&&null!=(null==e?void 0:e.Qty)&&0!=e.Sequence){var t={ClinicId:h.ClinicIdSelected,MCODE:e.MCODE,UOMS:e.UOMS,Qty:e.Qty,IsBilled:!1,BillTypeStatus:h.billType,CreatedBy:h.loginId,ModifiedBy:h.loginId,NightCount:h._ConstantServices.nullToZeroConverter(e.NightCount),RoomCount:h._ConstantServices.nullToZeroConverter(e.RoomCount),PMCODE:e.Parent,MRP:h._ConstantServices.nullToZeroConverter(e.MRP),OtherPurpose:e.OtherPurpose};m.push(t)}else v=!1}),v)if(Rn(m))this._UtilityService.showWarningAlert("Item should not duplicate.");else{var f={};this.VisitorUserMaster.CreatedBy=localStorage.getItem("userId"),this.VisitorUserMaster.CreatedBy=localStorage.getItem("userId"),this.VisitorUserMaster.ClinicId=this.ClinicIdSelected,f.VUMaster=this.VisitorUserMaster,f.lstBillItem=m,this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.SaveVisitorDetailsExtraItemArray(f).subscribe(function(e){if(h._UtilityService.hideSpinner(),1==e.actionResult.success){h._UtilityService.showSuccessAlert(e.actionResult.errMsg);var t=JSON.parse(e.actionResult.result);h.AllItemPriceRes=t=t||[],h.VisitorSelected=e.actionResult.stringVal,h.CalculateTotalItemPrice(),h.InvMode="CompleteInvoice",h.lstReciveVoucher=[],h.cdRef.detectChanges(),$("#btnShowExtraItemModel").click(),h.LoadAuthorizedMaster(),h.cdRef.detectChanges()}else h._UtilityService.showWarningAlert(e.actionResult.errMsg)},function(e){h._UtilityService.hideSpinner(),h._UtilityService.showErrorAlert(e.message)})}else this._UtilityService.showWarningAlert("Please select all Item Details")}else this._UtilityService.showWarningAlert("Please select Item Details");else this._UtilityService.showWarningAlert("Please enter employee Code");else this._UtilityService.showWarningAlert("Please enter first name")}},{key:"ShowInvoiceList",value:function(){""!=this.VisitorSelected&&null!=this.VisitorSelected&&null!=this.VisitorSelected&&(this.ShowInvoiceListModel=!0)}},{key:"PrintPreInvoice",value:function(){this.ShowPreInvoiceModel=!0}}]),o}(d.a);return t.\u0275fac=function(e){return new(e||t)(b.Sb(b.h),b.Sb(h.i),b.Sb(h.a),b.Sb(r.j),b.Sb(u.f),b.Sb(m.a),b.Sb(v.a),b.Sb(f.a),b.Sb(p.d),b.Sb(g.a))},t.\u0275cmp=b.Mb({type:t,selectors:[["app-extra-item-consumption"]],viewQuery:function(e,t){var i;(1&e&&(b.cd(Z,1),b.cd(G,1)),2&e)&&(b.Hc(i=b.jc())&&(t.AttBankslip1=i.first),b.Hc(i=b.jc())&&(t.AttRefAppslip1=i.first))},features:[b.Cb],decls:81,vars:79,consts:[["class","row mt25",4,"ngIf"],[4,"ngIf"],[1,"row","mt25","mb-4"],["class","col-auto",4,"ngIf"],["class","col-auto mt-2",4,"ngIf"],["class","col-md-4",4,"ngIf"],["class","row mt25 mb-4",4,"ngIf"],["class","row mt-4 balance",4,"ngIf"],["class","row  mt-2",4,"ngIf"],["tabContent",""],["class","row  mt-3",4,"ngIf"],["tabBillable",""],["tabCreditItem",""],["tabBilledItem",""],["tabPerformaInvItem",""],["tabPaymentReceiveVoucher",""],["type","button","id","btnShowExtraItemModel","name","btnShowExtraItemModel",2,"display","none",3,"click"],[1,"example-preview"],["contentExtraItem",""],["type","button","id","btnShowRazorPayModel","name","btnShowRazorPayModel",2,"display","none",3,"click"],["contentGen",""],["type","button","id","btnShowWLPayModel","name","btnShowWLPayModel",2,"display","none",3,"click"],["contentGenWL",""],["type","button","id","btnShowPaymentMethodModel","name","btnShowPaymentMethodModel",2,"display","none",3,"click"],["contentPaymentMethod",""],["type","button","id","btnShowCreditNoteModel","name","btnShowCreditNoteModel",2,"display","none",3,"click"],["contentCRNote",""],["header","Refund Customer Balance",3,"modal","visible","visibleChange"],["pTemplate","body"],["pTemplate","footer"],["header","Colon Hydrotherapy Count",3,"visible","modal","closeOnEscape","closable","draggable","resizable","visibleChange"],[3,"visible","modal","closeOnEscape","closable","draggable","visibleChange"],["pTemplate","header"],[1,"m-0"],["header","Estimeted Bill",3,"modal","visible","visibleChange"],["printEstimetedBill",""],["header","Print Voucher",3,"modal","visible","visibleChange"],["printDiv",""],[3,"modal","visible","visibleChange"],["header","Transaction Details",3,"modal","visible","baseZIndex","visibleChange"],["header","Voucher List",3,"modal","visible","visibleChange"],["header","Pre Invoice Print",3,"modal","visible","visibleChange"],[1,"row","mt25"],[1,"col","col-md-1","pr-0"],["for","",1,"pt-2"],[1,"required"],[1,"col","col-md-3"],[3,"isCenterLabel","mode","onclinicSelect","onselectedClinic"],[1,"col-auto"],[1,"field-radiobutton"],["name","rdPatient","value","Patient",3,"ngModel","ngModelChange","onClick"],[1,"pl-2","mr-2","radiolabel"],["name","rdPatient","value","Visitor",3,"ngModel","ngModelChange","onClick"],["type","button",1,"btn-new-primary","mr-2",3,"click"],[1,"col-auto","mt-2"],[1,"col-md-4"],["optionLabel","name","optionValue","SlotBookingId","placeholder","Select Health Seeker",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],["placeholder","Select Health Seeker","optionLabel","name","optionValue","SlotBookingId","field","name",3,"ngModel","minLength","suggestions","inputStyle","ngModelChange","onClear","onSelect","completeMethod"],["type","checkbox","checked","checked","name","select",3,"ngModel","ngModelChange","change"],[1,"col","col-md-3","col-12"],[1,"form-group"],["for",""],["required","","type","text","name","txtFName","placeholder","First Name",1,"form-control",3,"ngModel","ngModelChange","keypress"],["fNameref","ngModel"],["type","text","name","txtLname","placeholder","Last Name",1,"form-control",3,"ngModel","ngModelChange","keypress"],["type","text","name","txtMobile","placeholder","Enter Phone Number","pattern","[0-9]{10}$","minlength","10","maxlength","10",1,"form-control",3,"ngModel","ngModelChange","keypress"],["mobileref","ngModel"],[1,"form-group","tow-col"],["type","text","placeholder","AddressLine 1","name","AddressLine1",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","col-md-3","col-12","mt-7"],[1,"input-group"],[1,"mr-2"],["type","checkbox","name","chkIsStaff",3,"ngModel","ngModelChange"],["class","col col-md-3 col-12",4,"ngIf"],["type","text","placeholder","Employee Code","name","EmpCode",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Department","name","Department",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","mt-4","balance"],[1,"pt-1"],[1,"material-icons"],[1,"col-auto","balance-btn"],["type","button","class","btn btn-new-primary mr-2",3,"click",4,"ngIf"],["title","Colon Hydrotherpy Count",1,"btn","btn-new-secondary",3,"click"],[1,"fa","fa-info-circle",2,"font-size","20px"],["class","col-md-2 balance-btn",4,"ngIf"],[1,"material-icons",2,"top","2px"],["type","button",1,"btn","btn-new-primary","mr-2",3,"click"],[1,"fa","fa-plus"],[1,"col-md-2","balance-btn"],["type","button","class","btn btn-new-secondary w-100",3,"click",4,"ngIf"],["type","button",1,"btn","btn-new-secondary","w-100",3,"click"],[1,"fa","fa-minus"],[1,"row","mt-2"],[1,"col","col-md-12"],[3,"activeIndex","activeIndexChange","onChange"],[3,"header"],[4,"ngTemplateOutlet"],["header","Prescribed",4,"ngIf"],[1,"col","col-auto"],["type","button","class","btn btn-new-primary",3,"click",4,"ngIf"],[1,"mr-2","ml-2"],["type","checkbox","name","chkIsListView",1,"mt-2",3,"ngModel","ngModelChange","click"],["header","Prescribed"],["type","button",1,"btn","btn-new-primary",3,"click"],[1,"extmt"],["responsiveLayout","scroll","scrollHeight","250px",3,"value","rowHover","scrollable",4,"ngIf"],["responsiveLayout","scroll","scrollHeight","250px",3,"value","rowHover","scrollable"],["dt11",""],["pTemplate","colgroup"],[2,"width","250px"],[2,"width","100px"],[2,"width","150px"],[2,"text-align","center"],["id","btnCloseOverlayItem","name","btnCloseOverlayItem",2,"display","none",3,"click"],["appendTo","body","icon","pi pi-list",1,"ov-button",3,"id","label","click"],["appendTo","body",3,"id","showCloseIcon"],["op",""],["pTemplate",""],["appendTo","body","optionLabel","UOMName","optionValue","UOMName","placeholder","Select Unit",3,"name","options","ngModel","filter","showClear","ngModelChange"],[2,"display","flex","justify-content","center"],["styleClass","input30px",3,"name","ngModel","useGrouping","min","maxlength","ngModelChange",4,"ngIf"],["class","row",4,"ngIf"],["pInputText","","type","text",3,"name","ngModel","ngModelChange",4,"ngIf"],["href","javascript: void(0);",1,"add-btn","mr-2",3,"click"],["class","add-btn mr-2","href","javascript: void(0);",3,"click",4,"ngIf"],["class","pi pi-refresh","title","Reset Item",3,"click",4,"ngIf"],["selectionMode","single",3,"id","value","filter","selection","styleClass","onNodeSelect","selectionChange",4,"ngIf"],["selectionMode","single",3,"id","value","filter","selection","styleClass","onNodeSelect","selectionChange"],["styleClass","input30px",3,"name","ngModel","useGrouping","min","maxlength","ngModelChange"],[1,"row"],[1,"col-auto","pt-2"],[1,"col-auto","p-0"],["styleClass","input30px",3,"name","ngModel","useGrouping","min","maxlength","onInput","ngModelChange"],[3,"name","ngModel","useGrouping","min","maxlength","ngModelChange"],["pInputText","","type","text",3,"name","ngModel","ngModelChange"],["title","Reset Item",1,"pi","pi-refresh",3,"click"],[2,"width","350px"],[2,"width","650px"],["id","btnCloseOverlayItem1","name","btnCloseOverlayItem1",2,"display","none",3,"click"],["appendTo","body","id","btn_op_lstExtraItemDetails","icon","pi pi-list",1,"ov-button",3,"label","click"],["appendTo","body","id","op_lstExtraItemDetails",3,"showCloseIcon"],["op1",""],["styleClass","input35px",3,"name","ngModel","useGrouping","min","maxlength","ngModelChange",4,"ngIf"],["id","tree_lstExtraItemDetails","selectionMode","checkbox",3,"filter","value","selection","styleClass","onNodeSelect","onNodeUnselect","selectionChange"],["styleClass","input35px",3,"name","ngModel","useGrouping","min","maxlength","ngModelChange"],[1,"row","mt-3"],["header","Billable Item"],["header","Proforma Item List"],["header","Voucher list"],["header","Billed Item List"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","200px",3,"value","rowHover","globalFilterFields","scrollable","selection","selectionChange"],["dt1",""],["pTemplate","caption"],["pTemplate","emptymessage"],[1,"p-d-flex"],["pButton","","pRipple","","title","Estimeted Bill","label","Estimeted Bill","icon","","class","mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","title","Edit Item","label","Edit Item","icon","fa fa-edit",3,"click",4,"ngIf"],["pButton","","pRipple","","title","Save Item","label","Save","icon","",3,"click",4,"ngIf"],["pButton","","pRipple","","title","Cancel Item","label","Cancel","icon","","class","ml-2",3,"click",4,"ngIf"],["pButton","","pRipple","","title","Delete Item","label","Delete Item","icon","","class","ml-2",3,"click",4,"ngIf"],["pButton","","title","Create Proforma Invoice","label","Create Proforma Invoice","class","btn btn-new-primary ml-2","icon","pi pi-file-o",3,"click",4,"ngIf"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pButton","","pRipple","","title","Estimeted Bill","label","Estimeted Bill","icon","",1,"mr-2",3,"click"],["pButton","","pRipple","","title","Edit Item","label","Edit Item","icon","fa fa-edit",3,"click"],["pButton","","pRipple","","title","Save Item","label","Save","icon","",3,"click"],["pButton","","pRipple","","title","Cancel Item","label","Cancel","icon","",1,"ml-2",3,"click"],["pButton","","pRipple","","title","Delete Item","label","Delete Item","icon","",1,"ml-2",3,"click"],["pButton","","title","Create Proforma Invoice","label","Create Proforma Invoice","icon","pi pi-file-o",1,"btn","btn-new-primary","ml-2",3,"click"],[2,"width","70px"],[2,"width","120px"],[2,"width","190px"],[2,"width","80px"],[2,"width","90px"],[2,"width","130px"],["pFrozenColumn",""],[3,"value"],["matTooltip","Delete",3,"click",4,"ngIf"],["pInputText","","type","text","required","",2,"width","100%",3,"name","ngModel","keypress","ngModelChange"],["matTooltip","Delete",3,"click"],["src","./assets/custom-icons/no.svg",1,"custom-ico"],["styleClass","p-datatable-striped","scrollHeight","150px","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable"],["pButton","","title","All Invoice Print","label","Print","class","p-button-outlined","icon","pi pi-print",3,"click",4,"ngIf"],["pButton","","title","All Invoice Print","label","Print","icon","pi pi-print",1,"p-button-outlined",3,"click"],[2,"width","60px"],["binary","true","inputId","binary",3,"ngModel","ngModelChange","onChange"],["binary","true",3,"ngModel","ngModelChange"],["matTooltip","Cancel",3,"click",4,"ngIf"],["matTooltip","Cancel",3,"click"],["styleClass","p-datatable-striped","scrollHeight","250px","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable",4,"ngIf"],["styleClass","p-datatable-striped","scrollHeight","250px","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable"],["dt2",""],[1,"p-d-flex","bills"],["pButton","","title","Complete Invoice","label","Complete Invoice","class","btn btn-new-primary","icon","pi pi-print",3,"click",4,"ngIf"],["pButton","","title","Complete Invoice","label","Complete Invoice","icon","pi pi-print",1,"btn","btn-new-primary",3,"click"],[2,"width","105px"],[2,"width","95px"],["class","material-icons mr-3","matTooltip","Print Voucher",3,"click",4,"ngIf"],["class","material-icons mr-3","matTooltip","Download Bank Deposit Slip",3,"click",4,"ngIf"],["matTooltip","Transaction Details",1,"material-icons","mr-3",3,"click"],["matTooltip","Print Voucher",1,"material-icons","mr-3",3,"click"],["matTooltip","Download Bank Deposit Slip",1,"material-icons","mr-3",3,"click"],["dt33",""],["pButton","","title","Create Complete Invoice","label","Create Complete Invoice","class","btn btn-new-primary mr-2","icon","pi pi-print",3,"click",4,"ngIf"],["pButton","","title","Print Invoice","class","btn btn-new-primary","icon","pi pi-print",3,"label","click",4,"ngIf"],["pButton","","title","Generate Provisional Number","label","Generate Provisional Number","class","ml-2 btn btn-new-primary","icon","pi pi-user-plus",3,"click",4,"ngIf"],["pButton","","title","Create Complete Invoice","label","Create Complete Invoice","icon","pi pi-print",1,"btn","btn-new-primary","mr-2",3,"click"],["pButton","","title","Print Invoice","icon","pi pi-print",1,"btn","btn-new-primary",3,"label","click"],["pButton","","title","Generate Provisional Number","label","Generate Provisional Number","icon","pi pi-user-plus",1,"ml-2","btn","btn-new-primary",3,"click"],[2,"width","125px"],["class","fas fa-print mr-3","title","Print",3,"click",4,"ngIf"],["class","fas fa-edit mr-3","title","Edit Proforma Invoice",3,"click",4,"ngIf"],["class","fas fa-plane-slash mr-3","title","Cancel Proforma Invoice With No Refund",3,"click",4,"ngIf"],["class","fas fa-window-close","title","Cancel Proforma Invoice",3,"click",4,"ngIf"],["title","Print",1,"fas","fa-print","mr-3",3,"click"],["title","Edit Proforma Invoice",1,"fas","fa-edit","mr-3",3,"click"],["title","Cancel Proforma Invoice With No Refund",1,"fas","fa-plane-slash","mr-3",3,"click"],["title","Cancel Proforma Invoice",1,"fas","fa-window-close",3,"click"],[1,"row","mt-5"],["class","col col-md-12",4,"ngIf"],[3,"showIndividualInvoiceList","slotBookingId","IsGrouped","BookingType"],[1,"modal-header"],[1,"modal-title"],["type","button","id","btnExtraItemModel","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"table","table-striped","table-bordered",2,"width","100%"],["type","checkbox",3,"ngModel","ngModelChange","change",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],["name","txtBillWiseDiscountPer","mode","decimal",3,"disabled","ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onInput","onBlur"],["name","txtBillWiseDiscountAmount","mode","decimal",3,"disabled","ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onInput","onBlur"],["style","display: none;",4,"ngIf"],["colspan","1"],["colspan","1",1,"text-center"],["type","text","class","ref-input","pInputText","","name","txtRequestedBy","minlength","3","maxlength","150",3,"ngModel","ngModelChange",4,"ngIf"],["required","true","name","txtReferredBy","optionLabel","Name","optionValue","Name","placeholder","Select Authorized Name",3,"options","ngModel","showClear","filter","style","ngModelChange",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-new-secondary",3,"click"],[1,"col-md-3","balance"],["class","col-md-3 balance",4,"ngIf"],["class","col-md-3 balance-btn",4,"ngIf"],[1,"col-md-3","balance-btn"],["type","button",1,"btn","btn-new-primary","w-100",3,"click"],["type","checkbox",3,"ngModel","ngModelChange","change"],["type","checkbox","name","chkExtraItem",3,"disabled","ngModel","change","ngModelChange"],["mode","decimal",3,"name","ngModel","min","max","maxlength","style","ngModelChange","onInput","onBlur",4,"ngIf"],["name","txtItemWiseDiscountPer","mode","decimal",3,"ngModel","min","max","maxlength","disabled","ngModelChange","onInput","onBlur"],["name","txtItemWiseDiscountAmount","mode","decimal",3,"ngModel","disabled","min","max","maxlength","ngModelChange","onInput","onBlur"],[1,"col-md-5"],["type","number","name","txtItemWiseNightCount","min","1","max","col.NightCount",2,"text-align","center","width","40px",3,"ngModel","ngModelChange","keypress","change"],[1,"col-md-2"],["type","number","name","txtItemWiseRoomCount","min","1","max","col.RoomCount",2,"text-align","center","width","40px",3,"ngModel","ngModelChange","keypress","change"],["mode","decimal",3,"name","ngModel","min","max","maxlength","ngModelChange","onInput","onBlur"],[2,"display","none"],[1,"bold"],["colspan","2"],["type","text","name","txtCreditNoteNumber","pInputText","",3,"disabled","ngModel","ngModelChange"],["class","text-center",4,"ngIf"],["colspan","2",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[1,"text-center"],["name","txtCreditNoteTranAmount","mode","decimal",3,"ngModel","min","max","ngModelChange","onBlur"],["type","text","pInputText","","name","txtRequestedBy","minlength","3","maxlength","150",1,"ref-input",3,"ngModel","ngModelChange"],["required","true","name","txtReferredBy","optionLabel","Name","optionValue","Name","placeholder","Select Authorized Name",3,"options","ngModel","showClear","filter","ngModelChange"],["colspan","2",1,"text-left"],["colspan","6",1,"text-center"],["type","text","pInputText","","name","txtPIEditGenRemarks","minlength","3","maxlength","150",1,"ref-input",3,"ngModel","ngModelChange"],["type","button","id","btnRazorPayCloseModal","aria-label","Close",1,"close",3,"click"],[3,"OrderRes","ItemPriceRes","SlotBookingIdSelected","IsSelectedItem","UserRes","BillWiseDiscountPer","ReferredBy","PayRequestFrom","GetPaymentStatusEmit"],["type","button","id","btnWLPayCloseModal","aria-label","Close",1,"close",3,"click"],[3,"WLOrderRes","ItemPriceRes","SlotBookingIdSelected","IsSelectedItem","UserRes","BillWiseDiscountPer","ReferredBy","PayRequestFrom","GetPaymentStatusEmit"],["type","button","id","btnPaymentMethodModel","aria-label","Close",1,"close",3,"click"],["optionLabel","TenderName","optionValue","ACID","placeholder","Please select payment option",3,"options","ngModel","onChange","ngModelChange"],[1,"col-md-12","text-right","bold"],["id","dvCreditTender",4,"ngIf"],["id","dvCashTender",4,"ngIf"],["id","dvCardTender",4,"ngIf"],["id","dvBankTfTender",4,"ngIf"],["id","dvChequeTender",4,"ngIf"],["class","row mb-3 m-2",4,"ngIf"],["id","dvRemarks"],["class","row mt-3",4,"ngIf"],["id","dvCreditTender"],[1,"row","mb-3"],[1,"col-md-3"],[1,"required",2,"color","red"],[1,"col-md-9"],["name","txtCreditAmount","mode","decimal",3,"ngModel","min","max","ngModelChange"],["id","dvCashTender"],[1,"mt-2","mb-2"],["name","txtCashAmount","mode","decimal",3,"ngModel","min","max","ngModelChange"],["inputId","icon",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange"],["CashRecdDate",""],["id","dvCardTender"],["type","text","name","txtCardNumber","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtCardHolderName","pInputText","",3,"ngModel","ngModelChange"],["CardRecdDate",""],["name","txtCardAmount","mode","decimal",3,"ngModel","min","max","ngModelChange"],["id","dvBankTfTender"],["name","txtBankTFAmount","disabled","","mode","decimal",3,"ngModel","min","max","ngModelChange"],["type","text","pInputText","",3,"name","ngModel","ngModelChange"],["BankDepRecdDate",""],["mode","decimal",3,"name","ngModel","min","max","onInput","onBlur","ngModelChange"],["id","dvChequeTender"],["type","text","name","txtChequeBankName","pInputText","",3,"ngModel","ngModelChange"],["appendTo","body","inputId","icon",1,"iconcal",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange"],["name","txtChequeAmount","mode","decimal",3,"ngModel","min","max","ngModelChange"],["type","text","name","txtChequeHolderName","pInputText","",3,"ngModel","ngModelChange"],[1,"row","mb-3","m-2"],[1,"col-md-3","bold"],["type","file","id","AttBankslip1","name","AttMedicalTest1","accept",".JPEG,.JPG,.PNG,.PDF",1,"custom-file-upload","mr-2",3,"change"],["AttMedicalTest1",""],["type","text","name","txtRemarks","pInputText","",3,"ngModel","ngModelChange"],["id","btnRecivePaymentClose","type","button","matTooltip","close","aria-label","Close",1,"close-btn",3,"click"],[1,"modal-body","p-1"],[1,"row","m-0"],[1,"col-md-6"],["name","txtCreditAmount","mode","decimal",3,"ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onInput"],[1,"row","m-0","mb-2"],["id","dvTrustDetails",4,"ngIf"],["type","button","id","btnCloseCreditModel","name","btnCloseCreditModel",1,"btn","btn-new-secondary",3,"click"],[1,"row","m-0","mb-3"],[1,"row","mt-3","mb-3"],[1,"col-md-1","mt-1","pt-2","bold"],["BankDepRecdDatecr",""],["inputId","icon",1,"iconcal",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange"],["id","dvTrustDetails"],["optionLabel","TrustName","optionValue","TrustMasterId","placeholder","Select Trust",3,"options","ngModel","filter","showClear","ngModelChange"],["optionLabel","MemberTypeName","optionValue","TrustMemberTypeMasterId","placeholder","Select Trust Member Type",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","MemberShip Number",3,"ngModel","ngModelChange"],["name","txtRefundCreditAmount","mode","decimal",3,"ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange"],["optionLabel","TenderName","optionValue","ACID","placeholder","Please select Refund Mode",3,"options","ngModel","filter","showClear","ngModelChange"],["class","row mb-3","id","dvBankTransferRefund",4,"ngIf"],["class","row mb-3","id","dvCashRefund",4,"ngIf"],["type","text","name","txtRemarksRefund","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtApprovedByRefund","pInputText","",3,"ngModel","ngModelChange"],["id","dvBankTransferRefund",1,"row","mb-3"],["type","text","name","txtAccNumber","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtAccHolderName","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtIFSCCode","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtBankName","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtTransactionIdRefund","pInputText","",3,"ngModel","ngModelChange"],["id","dvCashRefund",1,"row","mb-3"],["appendTo","body","inputId","icon","dateFormat","dd-mm-yy",1,"iconcal",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","readonlyInput","ngModelChange"],[3,"clinicId"],[2,"width","100%","overflow-x","auto","overflow-y","auto"],[2,"width","100%"],[3,"IsLetterhead","IsNgxPrint","onselectedLetterhead"],["id","print-section",1,"row"],[3,"slotBookingId","IsGST","IsLetterhead","heading"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","font-size","15px"],["cellpadding","0","cellspacing","3",2,"width","100%","margin","0 auto","box-sizing","border-box","border","1px solid #d3d3d3","margin-top","10px"],["align","Center"],[2,"background","#d3d3d3"],["align","Center",2,"padding","6px"],[2,"padding","6px","text-align","right"],["colspan","5","align","right",2,"padding","2px"],["colspan","5"],["colspan","5","align","right",2,"padding","20px 4px","border-top","1px solid #f1f1f1"],["align","center",2,"text-align","center","padding","6px 0","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],["align","center",2,"text-align","center","padding","6px  0px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],["align","right",2,"text-align","right","padding","6px 0px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],["align","right",2,"text-align","center","padding","6px 0px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],[3,"slotBookingId","IsGST","IsLetterhead"],[3,"SelectedSlotBookingId","SelectedVCHRNO","SelectedPhiscalID","SelectedDivision","InvType"],[3,"SlotBookingIdSelected","InvoiceNumberSelected","PhiscalIdSelected","DivisionSelected"],[3,"slotBookingId","SelectedVCHRNO","SelectedPhiscalID","SelectedDivision"],[3,"slotBookingId","IsVisitor"],[3,"SlotBookingIdSelected","TIProvisionalNo","TIProvisionalDate","RemainingAmount"]],template:function(e,t){if(1&e){var i=b.Zb();b.Sc(0,q,8,2,"div",0),b.Sc(1,H,1,0,"hr",1),b.Yb(2,"div",2),b.Sc(3,Q,8,2,"div",3),b.Sc(4,z,3,0,"div",3),b.Sc(5,K,3,0,"div",4),b.Sc(6,ie,4,7,"div",5),b.Sc(7,oe,3,8,"div",5),b.Sc(8,re,2,1,"div",4),b.Sc(9,ae,3,0,"div",4),b.Xb(),b.Sc(10,de,33,7,"div",6),b.Sc(11,fe,20,12,"div",7),b.Sc(12,ye,16,7,"div",8),b.Sc(13,Ve,3,2,"ng-template",null,9,b.Tc),b.Sc(15,Qe,11,4,"div",10),b.Sc(16,ut,9,6,"ng-template",null,11,b.Tc),b.Sc(18,It,9,5,"ng-template",null,12,b.Tc),b.Sc(20,Xt,3,1,"ng-template",null,13,b.Tc),b.Sc(22,Zt,3,1,"ng-template",null,14,b.Tc),b.Sc(24,qt,2,1,"ng-template",null,15,b.Tc),b.Yb(26,"button",16),b.ic("click",function(){b.Lc(i);var e=b.Ic(30);return t.openNewExtraItem(e)}),b.Xb(),b.Yb(27,"div",17),b.Yb(28,"div"),b.Sc(29,gi,105,38,"ng-template",null,18,b.Tc),b.Xb(),b.Xb(),b.Yb(31,"button",19),b.ic("click",function(){b.Lc(i);var e=b.Ic(35);return t.openNew(e)}),b.Xb(),b.Yb(32,"div",17),b.Yb(33,"div"),b.Sc(34,Ii,13,8,"ng-template",null,20,b.Tc),b.Xb(),b.Xb(),b.Yb(36,"button",21),b.ic("click",function(){b.Lc(i);var e=b.Ic(40);return t.openNew(e)}),b.Xb(),b.Yb(37,"div",17),b.Yb(38,"div"),b.Sc(39,Ci,13,8,"ng-template",null,22,b.Tc),b.Xb(),b.Xb(),b.Yb(41,"button",23),b.ic("click",function(){b.Lc(i);var e=b.Ic(45);return t.openPaymentMethod(e)}),b.Xb(),b.Yb(42,"div",17),b.Yb(43,"div"),b.Sc(44,xi,29,16,"ng-template",null,24,b.Tc),b.Xb(),b.Xb(),b.Yb(46,"button",25),b.ic("click",function(){b.Lc(i);var e=b.Ic(50);return t.openCRNoteModel(e)}),b.Xb(),b.Yb(47,"div",17),b.Yb(48,"div"),b.Sc(49,Qi,32,21,"ng-template",null,26,b.Tc),b.Xb(),b.Xb(),b.Yb(51,"p-dialog",27),b.ic("visibleChange",function(e){return t.ShowPaymentRefundMethodModel=e}),b.Sc(52,Ji,26,25,"ng-template",28),b.Sc(53,tn,1,1,"ng-template",29),b.Xb(),b.Yb(54,"p-dialog",30),b.ic("visibleChange",function(e){return t.ShowColonHydroModel=e}),b.Sc(55,nn,2,1,"div",1),b.Xb(),b.Yb(56,"p-dialog",31),b.ic("visibleChange",function(e){return t.showModalRoomCategorySelect=e}),b.Sc(57,ln,2,0,"ng-template",32),b.Tb(58,"hr",33),b.Sc(59,rn,11,1,"ng-template",28),b.Tb(60,"hr",33),b.Sc(61,an,0,0,"ng-template",29),b.Xb(),b.Yb(62,"p-dialog",34),b.ic("visibleChange",function(e){return t.ShowEstimetedBillListModel=e}),b.Sc(63,sn,2,1,"div",1),b.Xb(),b.Sc(64,un,34,11,"ng-template",null,35,b.Tc),b.Yb(66,"p-dialog",36),b.ic("visibleChange",function(e){return t.ShowPerformaInvoiceListModel=e}),b.Sc(67,hn,2,1,"div",1),b.Xb(),b.Sc(68,vn,58,26,"ng-template",null,37,b.Tc),b.Yb(70,"p-dialog",38),b.ic("visibleChange",function(e){return t.ShowPrintPaymentVoucherModel=e}),b.Sc(71,fn,2,1,"ng-template",32),b.Sc(72,pn,2,5,"div",1),b.Xb(),b.Yb(73,"p-dialog",36),b.ic("visibleChange",function(e){return t.ShowPrintProfileModel=e}),b.Sc(74,gn,2,4,"div",1),b.Xb(),b.Yb(75,"p-dialog",39),b.ic("visibleChange",function(e){return t.ShowTransactionDetailsModel=e}),b.Sc(76,In,2,4,"div",1),b.Xb(),b.Yb(77,"p-dialog",40),b.ic("visibleChange",function(e){return t.ShowInvoiceListModel=e}),b.Sc(78,Cn,2,2,"div",1),b.Xb(),b.Yb(79,"p-dialog",41),b.ic("visibleChange",function(e){return t.ShowPreInvoiceModel=e}),b.Sc(80,Sn,2,4,"div",1),b.Xb()}2&e&&(b.tc("ngIf",t.UserTypeCurre===t.UserTypes.SuperAdmin),b.Fb(1),b.tc("ngIf",t.UserTypeCurre===t.UserTypes.SuperAdmin),b.Fb(2),b.tc("ngIf",t.IsVistorBilling),b.Fb(1),b.tc("ngIf","Visitor"==t.CustomerType&&""!=t.VisitorSelected&&null!=t.VisitorSelected&&null!=t.VisitorSelected),b.Fb(1),b.tc("ngIf","Patient"==t.CustomerType),b.Fb(1),b.tc("ngIf","Patient"==t.CustomerType&&!t.SearchByMrNo),b.Fb(1),b.tc("ngIf","Patient"==t.CustomerType&&t.SearchByMrNo),b.Fb(1),b.tc("ngIf","Patient"==t.CustomerType),b.Fb(1),b.tc("ngIf","Patient"==t.CustomerType),b.Fb(1),b.tc("ngIf","Visitor"==t.CustomerType),b.Fb(1),b.tc("ngIf",null!=t.userSelected&&""!=t.userSelected&&"Patient"==t.CustomerType),b.Fb(1),b.tc("ngIf",""!==t.userSelected&&null!=t.userSelected||"Visitor"==t.CustomerType),b.Fb(3),b.tc("ngIf",""!==t.userSelected&&null!=t.userSelected&&"Patient"==t.CustomerType),b.Fb(36),b.Pc(b.yc(69,yn)),b.tc("modal",!0)("visible",t.ShowPaymentRefundMethodModel),b.Fb(3),b.Pc(b.yc(70,Tn)),b.tc("visible",t.ShowColonHydroModel)("modal",!0)("closeOnEscape",!1)("closable",!0)("draggable",!0)("resizable",!0),b.Fb(1),b.tc("ngIf",t.ShowColonHydroModel),b.Fb(1),b.Pc(b.yc(71,Mn)),b.tc("visible",t.showModalRoomCategorySelect)("modal",!0)("closeOnEscape",!1)("closable",!1)("draggable",!1),b.Fb(6),b.Pc(b.yc(72,yn)),b.tc("modal",!0)("visible",t.ShowEstimetedBillListModel),b.Fb(1),b.tc("ngIf",t.ShowEstimetedBillListModel),b.Fb(3),b.Pc(b.yc(73,yn)),b.tc("modal",!0)("visible",t.ShowPerformaInvoiceListModel),b.Fb(1),b.tc("ngIf",t.ShowPerformaInvoiceListModel),b.Fb(3),b.Pc(b.yc(74,yn)),b.tc("modal",!0)("visible",t.ShowPrintPaymentVoucherModel),b.Fb(2),b.tc("ngIf",t.ShowPrintPaymentVoucherModel),b.Fb(1),b.Pc(b.yc(75,yn)),b.tc("modal",!0)("visible",t.ShowPrintProfileModel),b.Fb(1),b.tc("ngIf",t.ShowPrintProfileModel),b.Fb(1),b.Pc(b.yc(76,yn)),b.tc("modal",!0)("visible",t.ShowTransactionDetailsModel)("baseZIndex",1e4),b.Fb(1),b.tc("ngIf",t.ShowTransactionDetailsModel),b.Fb(1),b.Pc(b.yc(77,yn)),b.tc("modal",!0)("visible",t.ShowInvoiceListModel),b.Fb(1),b.tc("ngIf",t.ShowInvoiceListModel),b.Fb(1),b.Pc(b.yc(78,yn)),b.tc("modal",!0)("visible",t.ShowPreInvoiceModel),b.Fb(1),b.tc("ngIf",t.ShowPreInvoiceModel))},directives:[I.p,C.a,g.i,S.a,y.a,p.o,p.r,T.a,M.a,p.a,p.b,p.w,p.u,p.k,p.j,A.b,A.a,I.t,R.c,D.a,P.a,Y.a,X.a,U.a,D.b,N.a,R.e,R.d,x.a,I.o,p.t,k.a,B.a,w.a,E.a,L.a,O.a,F.a,_.a,W.a,j.a,V.a],pipes:[I.g,I.f],styles:[""]}),t}();function Rn(e){var t=e.reduce(function(e,t){return e[t.MCODE]=(e[t.MCODE]||0)+1,e},{});return Object.values(t).some(function(e){return e>1})}}}])}();