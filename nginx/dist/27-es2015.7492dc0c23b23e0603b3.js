(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{SR41:function(t,e,i){"use strict";i.r(e),i.d(e,"CombinedInvoicePrintModule",function(){return v});var o=i("ofXK"),n=i("tyNb"),b=i("CwUn"),s=i("Nach"),c=i("fXoL"),l=i("G+wY"),a=i("7zAq"),d=i("NLkC"),r=i("sCq/"),u=i("Q8Cd");function h(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div"),c.Yb(1,"app-print-access-header",21),c.ic("onselectedLetterhead",function(e){return c.Lc(t),c.mc().onselectedLetterhead(e)}),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(1),c.tc("IsLetterhead",t.IsLetterhead)("IsNgxPrint",!0)}}function p(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"td",22),c.Uc(2),c.nc(3,"date"),c.Xb(),c.Yb(4,"td",22),c.Uc(5),c.Xb(),c.Yb(6,"td",22),c.Uc(7),c.Xb(),c.Yb(8,"td",22),c.Uc(9),c.Xb(),c.Yb(10,"td",22),c.Uc(11),c.Xb(),c.Yb(12,"td",22),c.Uc(13),c.nc(14,"number"),c.Xb(),c.Yb(15,"td",22),c.Uc(16),c.nc(17,"number"),c.Xb(),c.Yb(18,"td",22),c.Uc(19),c.nc(20,"number"),c.Xb(),c.Yb(21,"td",22),c.Uc(22),c.nc(23,"number"),c.Xb(),c.Xb()),2&t){const t=e.$implicit,i=c.mc();c.Fb(2),c.Wc(" ",c.pc(3,9,t.BillDate,i.customDateFormat.DEF_DATE)," "),c.Fb(3),c.Wc(" ",t.VCHRNO," "),c.Fb(2),c.Wc(" ",null==t.FGENERIC||null==t.FGENERIC||"0 x 0"==t.FGENERIC?t.ITEMDESC:"Treatment ("+t.ITEMDESC+")",""),c.Fb(2),c.Wc(" ",t.HSNCODE,""),c.Fb(2),c.Wc(" ",t.AltQty,""),c.Fb(2),c.Wc(" ",c.pc(14,12,t.MRP,"1.1-2"),""),c.Fb(3),c.Wc(" ",c.pc(17,15,t.INDDISCOUNTRATE,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(20,18,t.INDDISCOUNT,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(23,21,t.MRP*t.AltQty-t.INDDISCOUNT,"1.1-2"),"")}}function m(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"td",22),c.Uc(2),c.nc(3,"titlecase"),c.Xb(),c.Yb(4,"td",22),c.Uc(5),c.nc(6,"date"),c.Xb(),c.Yb(7,"td",22),c.Uc(8),c.nc(9,"titlecase"),c.Xb(),c.Yb(10,"td",22),c.Uc(11),c.nc(12,"date"),c.Xb(),c.Yb(13,"td",22),c.Uc(14),c.nc(15,"date"),c.Xb(),c.Yb(16,"td",22),c.Uc(17),c.nc(18,"number"),c.Xb(),c.Xb()),2&t){const t=e.$implicit,i=c.mc(2);c.Fb(2),c.Xc(" ",c.oc(3,7,t.TrnMode)," ","Bank Transfer"==t.TrnMode&&null!=t.BankName?" - "+t.BankName:""," "),c.Fb(3),c.Wc(" ",c.pc(6,9,t.TrnDate,i.customDateFormat.DEF_DATE)," "),c.Fb(3),c.Wc(" ",c.oc(9,12,t.InvType)," "),c.Fb(3),c.Wc(" ",c.pc(12,14,t.TrnDate,i.customDateFormat.DEF_DATE)," "),c.Fb(3),c.Wc(" ",c.pc(15,17,t.CreatedOn,i.customDateFormat.DEF_DATE)," "),c.Fb(3),c.Wc(" ",c.pc(18,20,"Refund"==t.InvType?-t.Amount:t.Amount,"1.1-2")," ")}}function T(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"th",25),c.Uc(2," Total Refund"),c.Xb(),c.Yb(3,"th",24),c.Uc(4),c.nc(5,"number"),c.Xb(),c.Xb()),2&t){const t=c.mc(2);c.Fb(4),c.Wc(" ",c.pc(5,1,t.TotalRefund,"1.1-2"),"")}}function X(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"th",25),c.Uc(2," Total Balance"),c.Xb(),c.Yb(3,"th",24),c.Uc(4),c.nc(5,"number"),c.Xb(),c.Xb()),2&t){const t=c.mc(2);c.Fb(4),c.Wc(" ",c.pc(5,1,t.TotalReceive-(t.TotalReceive-(t.TotalAmount-t.TotalFlatDiscount)+(t.TotalAmount-t.TotalFlatDiscount)),"1.1-2"),"")}}function Y(t,e){if(1&t&&(c.Yb(0,"table",6),c.Yb(1,"thead",7),c.Yb(2,"tr",8),c.Yb(3,"th",9),c.Uc(4,"Payment Mode"),c.Xb(),c.Yb(5,"th",9),c.Uc(6,"Date"),c.Xb(),c.Yb(7,"th",9),c.Uc(8,"Type"),c.Xb(),c.Yb(9,"th",9),c.Uc(10,"Transaction Date"),c.Xb(),c.Yb(11,"th",9),c.Uc(12,"Receipt Date"),c.Xb(),c.Yb(13,"th",9),c.Uc(14,"Amount"),c.Xb(),c.Xb(),c.Xb(),c.Yb(15,"tbody",7),c.Sc(16,m,19,23,"tr",11),c.Yb(17,"tr"),c.Yb(18,"th",23),c.Uc(19," Total Receive"),c.Xb(),c.Yb(20,"th",24),c.Uc(21),c.nc(22,"number"),c.Xb(),c.Xb(),c.Sc(23,T,6,4,"tr",1),c.Sc(24,X,6,4,"tr",1),c.Xb(),c.Xb()),2&t){const t=c.mc();c.Fb(16),c.tc("ngForOf",t.lstTenderDetails),c.Fb(5),c.Wc(" ",c.pc(22,4,t.TotalReceive,"1.1-2"),""),c.Fb(2),c.tc("ngIf",t.TotalRefund>0&&!t.lsobjClinicMaster.IsTIBriefSummary),c.Fb(1),c.tc("ngIf",t.lstTenderDetails.length>0&&t.lsobjClinicMaster.IsTIBriefSummary)}}function g(t,e){1&t&&(c.Yb(0,"table",16),c.Yb(1,"tbody"),c.Yb(2,"tr"),c.Yb(3,"td",9),c.Yb(4,"strong"),c.Uc(5,"Brief Summary"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb())}function S(t,e){if(1&t&&(c.Yb(0,"table",6),c.Yb(1,"thead",7),c.Yb(2,"tr",8),c.Yb(3,"th",9),c.Uc(4,"Added Rs"),c.Xb(),c.Yb(5,"th",9),c.Uc(6,"Concession Rs"),c.Xb(),c.Yb(7,"th",9),c.Uc(8,"Total Due Rs"),c.Xb(),c.Yb(9,"th",9),c.Uc(10,"Deposited Rs"),c.Xb(),c.Yb(11,"th",9),c.Uc(12,"Refund Rs"),c.Xb(),c.Yb(13,"th",9),c.Uc(14,"Balance Rs"),c.Xb(),c.Xb(),c.Xb(),c.Yb(15,"tbody",7),c.Yb(16,"tr"),c.Yb(17,"td",22),c.Uc(18),c.nc(19,"number"),c.Xb(),c.Yb(20,"td",22),c.Uc(21),c.nc(22,"number"),c.Xb(),c.Yb(23,"td",22),c.Uc(24),c.nc(25,"number"),c.Xb(),c.Yb(26,"td",22),c.Uc(27),c.nc(28,"number"),c.Xb(),c.Yb(29,"td",22),c.Uc(30),c.nc(31,"number"),c.Xb(),c.Yb(32,"td",22),c.Uc(33),c.nc(34,"number"),c.Xb(),c.Xb(),c.Xb(),c.Xb()),2&t){const t=c.mc();c.Fb(18),c.Wc(" ",c.pc(19,6,t.TotalAmount-t.TotalFlatDiscount+t.TotalDiscount,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(22,9,t.TotalDiscount,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(25,12,t.TotalAmount-t.TotalFlatDiscount,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(28,15,t.TotalReceive,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(31,18,t.TotalReceive-(t.TotalAmount-t.TotalFlatDiscount)-t.TotalRefund>0?-(t.TotalReceive-(t.TotalAmount-t.TotalFlatDiscount)-t.TotalRefund):t.TotalReceive-(t.TotalAmount-t.TotalFlatDiscount)-t.TotalRefund,"1.1-2")," "),c.Fb(3),c.Wc(" ",c.pc(34,21,t.TotalReceive-(t.TotalReceive-(t.TotalAmount-t.TotalFlatDiscount)+(t.TotalAmount-t.TotalFlatDiscount)),"1.1-2")," ")}}function f(t,e){1&t&&(c.Yb(0,"table",16),c.Yb(1,"tbody"),c.Yb(2,"tr"),c.Yb(3,"td",26),c.Yb(4,"strong"),c.Uc(5,"Bill Is Fully Settled"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb())}function F(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",27),c.Yb(1,"app-print-access-header",21),c.ic("onselectedLetterhead",function(e){return c.Lc(t),c.mc().onselectedLetterhead(e)}),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(1),c.tc("IsLetterhead",t.IsLetterhead)("IsNgxPrint",!0)}}const I=[{path:"",component:(()=>{class t extends b.a{constructor(t,e,i,o,n,b){super(),this.route=t,this.cdRef=e,this._PatientServices=i,this._Roomservice=o,this._ConstantsService=n,this._UtilityService=b,this.lsobjClinicMaster=JSON.parse(localStorage.getItem("objClinicMaster"))||null,this.InputType=0,this.customDateFormat=s.h,this.SlotBookingIdSelected="",this.ProdList=[],this.TotalTaxableAmount=0,this.TotalCGSTAmount=0,this.TotalSGSTAmount=0,this.TotalGrandTotalAmount=0,this.TotalFlatDiscount=0,this.TotalDiscount=0,this.TotalAmount=0,this.ItemWiseTotalDisAmount=0,this.BillWiseDiscountPer=0,this.TotalReceive=0,this.TotalRefund=0,this.LstRoomCountByMCode=[],this.NumberNights=0,this.lstTenderDetails=[],this.IsLetterhead="false"}ngOnInit(){this.unsubscribe.add=this.route.queryParams.subscribe(t=>{this.SlotBookingIdSelected=t.SlotBookingId,this.ViewVoucherForHMSCombined()})}ViewVoucherForHMSCombined(){this.LstRoomCountByMCode=[],this.ProdList=[],this.TotalGrandTotalAmount=0,""!=this.SlotBookingIdSelected&&null!=this.SlotBookingIdSelected&&(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.getViewVoucherForHMSCombined(this.SlotBookingIdSelected).subscribe(t=>{var e,i,o,n,b;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){if(null!=t.actionResult.result&&null!=t.actionResult.result&&(null===(e=t.actionResult.result)||void 0===e?void 0:e.length)>0){var s=JSON.parse(t.actionResult.result);this.ProdList=s=s||[]}if(null!=t.actionResult.result5&&null!=t.actionResult.result5&&(null===(i=t.actionResult.result5)||void 0===i?void 0:i.length)>0){var c=JSON.parse(t.actionResult.result5);this.LstRoomCountByMCode=c=c||[],this.LstRoomCountByMCode.map(t=>{var e=this.ProdList.findIndex(e=>e.MCODE===t.MCODE&&e.VCHRNO===t.VCHRNO);e>=0&&(this.ProdList[e].FGENERIC=t.NightCount.toString()+" x "+t.RoomCount.toString())})}if(null!=t.actionResult.result2&&null!=t.actionResult.result2&&(null===(o=t.actionResult.result2)||void 0===o?void 0:o.length)>0){var l=JSON.parse(t.actionResult.result2);this.lstTenderDetails=l=l||[]}this.TotalAmount=0,this.TotalFlatDiscount=0,this.ProdList.map(t=>{this.TotalAmount=this.TotalAmount+(t.MRP*t.AltQty-t.INDDISCOUNT),this.ItemWiseTotalDisAmount=this.ItemWiseTotalDisAmount+t.INDDISCOUNT,this.TotalFlatDiscount=this.TotalFlatDiscount+t.FLATDISCOUNT}),(null===(n=this.lstTenderDetails)||void 0===n?void 0:n.length)>0&&(this.lstTenderDetails.map(t=>{"Receive"==t.InvType&&(this.TotalReceive=this.TotalReceive+parseFloat(t.Amount)),"Refund"==t.InvType&&(this.TotalRefund=this.TotalRefund+parseFloat(t.Amount))}),this.cdRef.detectChanges()),this.TotalDiscount=this.ItemWiseTotalDisAmount+this.TotalFlatDiscount,this.BillWiseDiscountPer=Math.round(100*this.TotalFlatDiscount/this.TotalAmount),(null===(b=this.ProdList)||void 0===b?void 0:b.length)>0&&(this.TotalGrandTotalAmount=this.ProdList.map(t=>t.FNETAMOUNT).reduce(function(t,e){return t+e}))}else this.ProdList=[];this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}LoadRoomCount(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._Roomservice.GetRoomBookingCountDetailsBYSlot(this.SlotBookingIdSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.LstRoomCountByMCode=e=e||[],this.LstRoomCountByMCode.map(t=>{var e=this.ProdList.findIndex(e=>e.MCODE===t.MCODE&&e.VCHRNO===t.VCHRNO);e>=0&&(this.ProdList[e].FGENERIC=t.NightCount.toString()+" x "+t.RoomCount.toString())})}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}onselectedLetterhead(t){this.IsLetterhead=t}}return t.\u0275fac=function(e){return new(e||t)(c.Sb(n.a),c.Sb(c.h),c.Sb(l.a),c.Sb(a.a),c.Sb(s.f),c.Sb(d.a))},t.\u0275cmp=c.Mb({type:t,selectors:[["app-combined-invoice-print"]],inputs:{InputType:"InputType"},features:[c.Cb],decls:78,vars:26,consts:[[1,"container"],[4,"ngIf"],["id","print-section",1,"row"],[1,"col-md-12"],[3,"slotBookingId","IsGST","IsLetterhead"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","font-size","15px"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box","border","1px solid #d3d3d3","margin-top","10px"],["align","Center"],[2,"background","#d3d3d3"],[2,"padding","6px"],[2,"padding","6px","text-align","right"],[4,"ngFor","ngForOf"],["colspan","8","align","right",2,"padding","2px"],["align","right",2,"padding","4px 6px"],["style","width: 100%; margin: 0 auto; box-sizing: border-box; border: 1px solid #d3d3d3; margin-top: 10px;","cellpadding","0","cellspacing","0",4,"ngIf"],["style","width: 100%; margin: 0 auto; box-sizing: border-box;","cellpadding","0","cellspacing","0",4,"ngIf"],["cellpadding","0","cellspacing","0",2,"width","100%","margin","0 auto","box-sizing","border-box"],[2,"width","100%","line-height","80px"],[2,"width","60%"],[2,"width","40%"],["class","mt-3",4,"ngIf"],[3,"IsLetterhead","IsNgxPrint","onselectedLetterhead"],[2,"padding","6px 0","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3"],["colspan","5",2,"padding","6px 10px","border-left","1px solid #d5d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3","text-align","right"],[2,"padding","6px 10px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3"],["colspan","5",2,"padding","6px 10px","border-left","1px solid #d3d3d3","border-bottom","1px solid #d3d3d3","border-top","1px solid #d3d3d3","text-align","right"],["align","Center",2,"padding","6px"],[1,"mt-3"]],template:function(t,e){1&t&&(c.Yb(0,"article"),c.Yb(1,"div",0),c.Sc(2,h,2,2,"div",1),c.Yb(3,"div",2),c.Yb(4,"div",3),c.Tb(5,"app-print-header",4),c.Yb(6,"table",5),c.Yb(7,"tbody"),c.Yb(8,"tr"),c.Yb(9,"table",6),c.Yb(10,"thead",7),c.Yb(11,"tr",8),c.Yb(12,"th",9),c.Uc(13,"Date"),c.Xb(),c.Yb(14,"th",9),c.Uc(15,"Bill of Supply No"),c.Xb(),c.Yb(16,"th",9),c.Uc(17,"Fee Head"),c.Xb(),c.Yb(18,"th",9),c.Uc(19,"HSN/SAC"),c.Xb(),c.Yb(20,"th",9),c.Uc(21,"QTY"),c.Xb(),c.Yb(22,"th",9),c.Uc(23,"Price"),c.Xb(),c.Yb(24,"th",9),c.Uc(25,"Dis%"),c.Xb(),c.Yb(26,"th",9),c.Uc(27,"Dis Amt"),c.Xb(),c.Yb(28,"th",10),c.Uc(29,"Total Amt"),c.Xb(),c.Xb(),c.Xb(),c.Yb(30,"tbody",7),c.Sc(31,p,24,24,"tr",11),c.Yb(32,"tr"),c.Yb(33,"td",12),c.Yb(34,"b"),c.Uc(35,"Grand Total"),c.Xb(),c.Xb(),c.Yb(36,"td",13),c.Uc(37),c.nc(38,"number"),c.Xb(),c.Xb(),c.Yb(39,"tr"),c.Yb(40,"td",12),c.Yb(41,"b"),c.Yb(42,"b"),c.Uc(43),c.nc(44,"number"),c.Xb(),c.Xb(),c.Xb(),c.Yb(45,"td",13),c.Uc(46),c.nc(47,"number"),c.Xb(),c.Xb(),c.Yb(48,"tr"),c.Yb(49,"td",12),c.Yb(50,"b"),c.Uc(51,"Net Amount"),c.Xb(),c.Xb(),c.Yb(52,"td",13),c.Yb(53,"b"),c.Uc(54),c.nc(55,"number"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Tb(56,"hr"),c.Sc(57,Y,25,7,"table",14),c.Sc(58,g,6,0,"table",15),c.Sc(59,S,35,24,"table",14),c.Sc(60,f,6,0,"table",15),c.Xb(),c.Xb(),c.Xb(),c.Yb(61,"table",16),c.Yb(62,"tbody"),c.Yb(63,"tr",17),c.Yb(64,"td",18),c.Yb(65,"b"),c.Uc(66,"Health Seeker's Signature: ................................"),c.Xb(),c.Xb(),c.Yb(67,"td",19),c.Yb(68,"b"),c.Uc(69,"Authorised Signatory: ................................"),c.Xb(),c.Xb(),c.Xb(),c.Yb(70,"tr"),c.Yb(71,"td",18),c.Yb(72,"b"),c.Uc(73,"Prepared By: .........................................................."),c.Xb(),c.Xb(),c.Yb(74,"td",19),c.Yb(75,"b"),c.Uc(76,"Checked By: ...................................................."),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Sc(77,F,2,2,"div",20),c.Xb(),c.Xb()),2&t&&(c.Fb(2),c.tc("ngIf",0==e.InputType),c.Fb(3),c.tc("slotBookingId",e.SlotBookingIdSelected)("IsGST",!0)("IsLetterhead",e.IsLetterhead),c.Fb(26),c.tc("ngForOf",e.ProdList),c.Fb(6),c.Wc("\u20b9 ",c.pc(38,14,e.TotalAmount,"1.1-2"),""),c.Fb(6),c.Wc("Bill Wise Dis Amount (",c.pc(44,17,e.BillWiseDiscountPer,"1.1-2")," %):"),c.Fb(3),c.Wc("\u20b9 ",c.pc(47,20,e.TotalFlatDiscount,"1.1-2"),""),c.Fb(8),c.Wc("\u20b9 ",c.pc(55,23,e.TotalAmount-e.TotalFlatDiscount,"1.1-2"),""),c.Fb(3),c.tc("ngIf",e.lstTenderDetails.length>0),c.Fb(1),c.tc("ngIf",e.lstTenderDetails.length>0&&e.lsobjClinicMaster.IsTIBriefSummary),c.Fb(1),c.tc("ngIf",e.lstTenderDetails.length>0&&e.lsobjClinicMaster.IsTIBriefSummary),c.Fb(1),c.tc("ngIf",e.lstTenderDetails.length>0&&e.lsobjClinicMaster.IsTIBriefSummary),c.Fb(17),c.tc("ngIf",0==e.InputType))},directives:[o.p,r.a,o.o,u.a],pipes:[o.g,o.f,o.y],styles:[""]}),t})()}];let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Qb({type:t}),t.\u0275inj=c.Pb({imports:[[n.l.forChild(I)],n.l]}),t})();var R=i("m1XX"),U=i("9XlL"),C=i("ycwT");let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Qb({type:t}),t.\u0275inj=c.Pb({imports:[[o.c,D,R.b,U.a,C.a]]}),t})()}}]);