(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"7LiV":function(e,t,i){"use strict";i.d(t,"a",function(){return I}),i.d(t,"b",function(){return F}),i.d(t,"c",function(){return y});var n=i("fXoL"),l=i("R0Ic"),o=i("ofXK"),c=i("7zfz");function s(e,t){if(1&e&&(n.Yb(0,"span",9),n.Uc(1),n.Xb()),2&e){const e=n.mc();n.Fb(1),n.Wc(" ",e.header," ")}}function r(e,t){1&e&&n.Ub(0)}function a(e,t){1&e&&n.rc(0,1,["*ngIf","hasHeaderFacet"])}function d(e,t){1&e&&n.Ub(0)}function b(e,t){if(1&e&&(n.Wb(0),n.Sc(1,d,1,0,"ng-container",5),n.Vb()),2&e){const e=n.mc();n.Fb(1),n.tc("ngTemplateOutlet",e.contentTemplate)}}const u=["*",[["p-header"]]],h=function(e){return{"p-accordion-tab-active":e}},p=function(e,t){return{"p-highlight":e,"p-disabled":t}},m=function(e){return{transitionParams:e}},g=function(e){return{value:"visible",params:e}},f=function(e){return{value:"hidden",params:e}},C=["*","p-header"],v=["*"];let S=0,y=(()=>{class e{constructor(e,t){this.changeDetector=t,this.cache=!0,this.selectedChange=new n.o,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-accordiontab-"+S++,this.accordion=e}get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||(this._selected&&this.cache&&(this.loaded=!0),this.changeDetector.markForCheck())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;default:this.contentTemplate=e.template}})}toggle(e){if(this.disabled)return!1;let t=this.findTabIndex();if(this.selected)this.selected=!1,this.accordion.onClose.emit({originalEvent:e,index:t});else{if(!this.accordion.multiple)for(var i=0;i<this.accordion.tabs.length;i++)this.accordion.tabs[i].selected=!1,this.accordion.tabs[i].selectedChange.emit(!1),this.accordion.tabs[i].changeDetector.markForCheck();this.selected=!0,this.loaded=!0,this.accordion.onOpen.emit({originalEvent:e,index:t})}this.selectedChange.emit(this.selected),this.accordion.updateActiveIndex(),this.changeDetector.markForCheck(),e.preventDefault()}findTabIndex(){let e=-1;for(var t=0;t<this.accordion.tabs.length;t++)if(this.accordion.tabs[t]==this){e=t;break}return e}get hasHeaderFacet(){return this.headerFacet&&this.headerFacet.length>0}onKeydown(e){32!==e.which&&13!==e.which||(this.toggle(e),e.preventDefault())}ngOnDestroy(){this.accordion.tabs.splice(this.findTabIndex(),1)}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(Object(n.X)(()=>I)),n.Sb(n.h))},e.\u0275cmp=n.Mb({type:e,selectors:[["p-accordionTab"]],contentQueries:function(e,t,i){if(1&e&&(n.Lb(i,c.f,0),n.Lb(i,c.i,0)),2&e){let e;n.Hc(e=n.jc())&&(t.headerFacet=e),n.Hc(e=n.jc())&&(t.templates=e)}},inputs:{cache:"cache",transitionOptions:"transitionOptions",selected:"selected",header:"header",disabled:"disabled"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:C,decls:11,vars:28,consts:[[1,"p-accordion-tab",3,"ngClass"],[1,"p-accordion-header",3,"ngClass"],["role","tab",1,"p-accordion-header-link",3,"click","keydown"],[1,"p-accordion-toggle-icon",3,"ngClass"],["class","p-accordion-header-text",4,"ngIf"],[4,"ngTemplateOutlet"],[4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-accordion-content"],[1,"p-accordion-header-text"]],template:function(e,t){1&e&&(n.sc(u),n.Yb(0,"div",0),n.Yb(1,"div",1),n.Yb(2,"a",2),n.ic("click",function(e){return t.toggle(e)})("keydown",function(e){return t.onKeydown(e)}),n.Tb(3,"span",3),n.Sc(4,s,2,1,"span",4),n.Sc(5,r,1,0,"ng-container",5),n.Sc(6,a,1,0,"ng-content",6),n.Xb(),n.Xb(),n.Yb(7,"div",7),n.Yb(8,"div",8),n.rc(9),n.Sc(10,b,2,1,"ng-container",6),n.Xb(),n.Xb(),n.Xb()),2&e&&(n.tc("ngClass",n.zc(15,h,t.selected)),n.Fb(1),n.tc("ngClass",n.Ac(17,p,t.selected,t.disabled)),n.Fb(1),n.Gb("tabindex",t.disabled?null:0)("id",t.id)("aria-controls",t.id+"-content")("aria-expanded",t.selected),n.Fb(1),n.tc("ngClass",t.selected?t.accordion.collapseIcon:t.accordion.expandIcon),n.Fb(1),n.tc("ngIf",!t.hasHeaderFacet),n.Fb(1),n.tc("ngTemplateOutlet",t.headerTemplate),n.Fb(1),n.tc("ngIf",t.hasHeaderFacet),n.Fb(1),n.tc("@tabContent",t.selected?n.zc(22,g,n.zc(20,m,t.transitionOptions)):n.zc(26,f,n.zc(24,m,t.transitionOptions))),n.Gb("id",t.id+"-content")("aria-hidden",!t.selected)("aria-labelledby",t.id),n.Fb(3),n.tc("ngIf",t.contentTemplate&&(t.cache?t.loaded:t.selected)))},directives:[o.n,o.p,o.t],styles:[".p-accordion-header-link{-ms-user-select:none;-webkit-user-select:none;align-items:center;cursor:pointer;display:flex;position:relative;text-decoration:none;user-select:none}.p-accordion-header-link:focus{z-index:1}.p-accordion-header-text{line-height:1}"],encapsulation:2,data:{animation:[Object(l.m)("tabContent",[Object(l.j)("hidden",Object(l.k)({height:"0",overflow:"hidden"})),Object(l.j)("visible",Object(l.k)({height:"*"})),Object(l.l)("visible <=> hidden",[Object(l.k)({overflow:"hidden"}),Object(l.e)("{{transitionParams}}")]),Object(l.l)("void => *",Object(l.e)(0))])]},changeDetection:0}),e})(),I=(()=>{class e{constructor(e,t){this.el=e,this.changeDetector=t,this.onClose=new n.o,this.onOpen=new n.o,this.expandIcon="pi pi-fw pi-chevron-right",this.collapseIcon="pi pi-fw pi-chevron-down",this.activeIndexChange=new n.o,this.tabs=[]}ngAfterContentInit(){this.initTabs(),this.tabListSubscription=this.tabList.changes.subscribe(e=>{this.initTabs()})}initTabs(){this.tabs=this.tabList.toArray(),this.updateSelectionState(),this.changeDetector.markForCheck()}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.updateSelectionState()}updateSelectionState(){if(this.tabs&&this.tabs.length&&null!=this._activeIndex)for(let e=0;e<this.tabs.length;e++){let t=this.multiple?this._activeIndex.includes(e):e===this._activeIndex;t!==this.tabs[e].selected&&(this.tabs[e].selected=t,this.tabs[e].selectedChange.emit(t),this.tabs[e].changeDetector.markForCheck())}}updateActiveIndex(){let e=this.multiple?[]:null;this.tabs.forEach((t,i)=>{if(t.selected){if(!this.multiple)return void(e=i);e.push(i)}}),this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(e)}ngOnDestroy(){this.tabListSubscription&&this.tabListSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(n.m),n.Sb(n.h))},e.\u0275cmp=n.Mb({type:e,selectors:[["p-accordion"]],contentQueries:function(e,t,i){if(1&e&&n.Lb(i,y,0),2&e){let e;n.Hc(e=n.jc())&&(t.tabList=e)}},inputs:{expandIcon:"expandIcon",collapseIcon:"collapseIcon",activeIndex:"activeIndex",multiple:"multiple",style:"style",styleClass:"styleClass"},outputs:{onClose:"onClose",onOpen:"onOpen",activeIndexChange:"activeIndexChange"},ngContentSelectors:v,decls:2,vars:4,consts:[["role","tablist",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(n.sc(),n.Yb(0,"div",0),n.rc(1),n.Xb()),2&e&&(n.Hb(t.styleClass),n.tc("ngClass","p-accordion p-component")("ngStyle",t.style))},directives:[o.n,o.q],encapsulation:2,changeDetection:0}),e})(),F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Qb({type:e}),e.\u0275inj=n.Pb({imports:[[o.c],c.j]}),e})()},l91o:function(e,t,i){"use strict";i.r(t),i.d(t,"CreditSettlementModule",function(){return qe});var n=i("ofXK"),l=i("tyNb"),o=i("CwUn"),c=i("Nach"),s=i("fXoL"),r=i("dcBc"),a=i("G+wY"),d=i("PtJb"),b=i("NLkC"),u=i("7LiV"),h=i("jIHw"),p=i("eO1q"),m=i("3Pt+"),g=i("7kUa"),f=i("Ks7X"),C=i("rEr+"),v=i("7zfz"),S=i("/RsI"),y=i("AAHA"),I=i("arFO");const F=["dt"],Y=["filtr"],X=["calendar"];function w(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",5),s.Yb(1,"app-center-dropdown",26),s.ic("onclinicSelect",function(t){return s.Lc(e),s.mc(2).onclinicSelect(t)}),s.Xb(),s.Xb()}if(2&e){const e=s.mc(2);s.Fb(1),s.tc("isCenterLabel",!1)("ClinicIdSelected",e.ClinicIdSelected)("mode","get")}}function R(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",16),s.Yb(1,"span",17),s.Yb(2,"div",18),s.Sc(3,w,2,3,"div",19),s.Yb(4,"div",20),s.Uc(5),s.Xb(),s.Xb(),s.Xb(),s.Yb(6,"span",21),s.Yb(7,"span",22),s.Tb(8,"i",23),s.Yb(9,"input",24,25),s.ic("input",function(t){s.Lc(e);const i=s.mc(),n=s.Ic(14);return i.onGlobalFilter(n,t)}),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&e){const e=s.mc();s.Fb(3),s.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin),s.Fb(2),s.Wc(" ",(null==e.lstDetails?null:e.lstDetails.length)>0?"Total Records: "+e.filteredValuesLength:""," ")}}function D(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Uc(2," No records found "),s.Xb(),s.Xb()),2&e){const e=t.$implicit;s.Fb(1),s.Gb("colspan",null==e?null:e.length)}}function T(e,t){1&e&&(s.Yb(0,"tr"),s.Yb(1,"th"),s.Uc(2,"S.No."),s.Xb(),s.Yb(3,"th"),s.Uc(4,"Cheque Number"),s.Xb(),s.Yb(5,"th"),s.Uc(6,"Cheque Amount"),s.Xb(),s.Yb(7,"th"),s.Uc(8,"Cheque Balance"),s.Xb(),s.Yb(9,"th"),s.Uc(10,"Clear From"),s.Xb(),s.Yb(11,"th"),s.Uc(12,"Clear To"),s.Xb(),s.Yb(13,"th"),s.Uc(14,"Clear On"),s.Xb(),s.Xb())}function A(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Uc(2),s.Xb(),s.Yb(3,"td"),s.Uc(4),s.Xb(),s.Yb(5,"td"),s.Uc(6),s.Xb(),s.Yb(7,"td"),s.Uc(8),s.Xb(),s.Yb(9,"td"),s.Uc(10),s.nc(11,"date"),s.Xb(),s.Yb(12,"td"),s.Uc(13),s.nc(14,"date"),s.Xb(),s.Yb(15,"td"),s.Uc(16),s.nc(17,"date"),s.Xb(),s.Xb()),2&e){const e=t.$implicit,i=t.rowIndex,n=s.mc();s.Fb(2),s.Vc(i+1),s.Fb(2),s.Vc(e.ChequeNumber),s.Fb(2),s.Vc(e.ChequeAmount),s.Fb(2),s.Vc(e.ChequeBalance),s.Fb(2),s.Vc(s.pc(11,7,e.ClearFrom,n.customDateFormat.DEF_DATE)),s.Fb(3),s.Vc(s.pc(14,10,e.ClearTo,n.customDateFormat.DEF_DATE)),s.Fb(3),s.Vc(s.pc(17,13,e.ClearOn,n.customDateFormat.DEF_DATE))}}const U=function(){return["ChequeNumber","ChequeAmount","ChequeBalance"]};let M=(()=>{class e extends o.a{constructor(e,t,i,n,l,o){super(),this.router=e,this.datepipe=t,this._ConstantServices=i,this._UtilityService=n,this._PatientServices=l,this._ReportServices=o,this.filteredValuesLength=0,this.lstDetails=[],this.ClinicIdSelected="",this.UserTypeCurre=localStorage.getItem("userTypeId"),this.userTypes=c.s,this.customDateFormat=c.h,this.datesRangeFilter=[],this.datesRangeFilter=[new Date,new Date],this.MaxYear=(new Date).getFullYear()}ngOnInit(){c.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.GetChequeDetails())}onSelect(){null!==this.datesRangeFilter[0]&&null!==this.datesRangeFilter[1]&&(this.calendar.overlayVisible=!1,this.GetChequeDetails())}GetChequeDetails(){var e;let t={};(null===(e=this.datesRangeFilter)||void 0===e?void 0:e.length)>0&&(t.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),t.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd")),t.clinicId=this.ClinicIdSelected,t.createdBy=localStorage.getItem("userId"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetChequeDetails(t).subscribe({next:e=>{var t,i;if(this._UtilityService.hideSpinner(),1==e.actionResult.success){var n=JSON.parse(e.actionResult.result);this.lstDetails=n=n||[],this.filteredValuesLength=null===(t=this.lstDetails)||void 0===t?void 0:t.length,void 0!==this.filtr&&(this.filtr.nativeElement.value="",this.dataTable.reset(),this.filteredValuesLength=null===(i=this.lstDetails)||void 0===i?void 0:i.length)}else this.lstDetails=[]},error:e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.Message)}})}onclinicSelect(e){this.ClinicIdSelected=e,this.GetChequeDetails()}onFilter(e,t){this.filteredValuesLength=e.filteredValue.length}onGlobalFilter(e,t){e.filterGlobal(t.target.value,"contains")}}return e.\u0275fac=function(t){return new(t||e)(s.Sb(l.i),s.Sb(n.f),s.Sb(c.f),s.Sb(b.a),s.Sb(a.a),s.Sb(d.a))},e.\u0275cmp=s.Mb({type:e,selectors:[["app-cheque-details-report"]],viewQuery:function(e,t){if(1&e&&(s.cd(F,1),s.cd(Y,1),s.cd(X,1)),2&e){let e;s.Hc(e=s.jc())&&(t.dataTable=e.first),s.Hc(e=s.jc())&&(t.filtr=e.first),s.Hc(e=s.jc())&&(t.calendar=e.first)}},features:[s.Cb],decls:19,vars:13,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-auto"],[1,"required"],[1,"col-md-4"],["selectionMode","range","inputId","icon","name","rangeDates",3,"monthNavigator","yearNavigator","yearRange","ngModel","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],["dataKey","Category","responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 180px)",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"row"],["class","col-auto",4,"ngIf"],[1,"col-auto","pt-2"],[1,"p-ml-auto"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],[3,"isCenterLabel","ClinicIdSelected","mode","onclinicSelect"]],template:function(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"div",4),s.Yb(5,"div",5),s.Yb(6,"label"),s.Uc(7,"Bill Date "),s.Xb(),s.Yb(8,"span",6),s.Uc(9,"*"),s.Xb(),s.Xb(),s.Yb(10,"div",7),s.Yb(11,"p-calendar",8,9),s.ic("ngModelChange",function(e){return t.datesRangeFilter=e})("onSelect",function(){return t.onSelect()}),s.Xb(),s.Xb(),s.Xb(),s.Yb(13,"p-table",10,11),s.ic("onFilter",function(i){s.Lc(e);const n=s.Ic(14);return t.onFilter(i,n)}),s.Sc(15,R,11,2,"ng-template",12),s.Sc(16,D,3,1,"ng-template",13),s.Sc(17,T,15,0,"ng-template",14),s.Sc(18,A,18,16,"ng-template",15),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()}2&e&&(s.Fb(11),s.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),s.tc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.datesRangeFilter)("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),s.Fb(2),s.tc("value",t.lstDetails)("rowHover",!0)("globalFilterFields",s.yc(12,U))("scrollable",!0))},directives:[p.a,m.o,m.r,C.c,v.i,n.p,g.a,y.a],pipes:[n.f],styles:[""]}),e})();var B=i("jhiP");const x=["dt"],k=["filtr"],N=["calendar"],q=["printContent"];function P(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",34),s.Yb(1,"app-center-dropdown",35),s.ic("onclinicSelect",function(t){return s.Lc(e),s.mc(2).onclinicSelect(t)}),s.Xb(),s.Xb()}if(2&e){const e=s.mc(2);s.Fb(1),s.tc("isCenterLabel",!1)("ClinicIdSelected",e.ClinicIdSelected)("mode","get")}}function L(e,t){if(1&e){const e=s.Zb();s.Yb(0,"button",36),s.ic("click",function(){return s.Lc(e),s.mc(2).exportToItemExcel()}),s.Xb()}}function _(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",23),s.Yb(1,"span",24),s.Yb(2,"div",25),s.Sc(3,P,2,3,"div",26),s.Yb(4,"div",27),s.Uc(5),s.Xb(),s.Xb(),s.Xb(),s.Yb(6,"span",28),s.Sc(7,L,1,0,"button",29),s.Yb(8,"span",30),s.Tb(9,"i",31),s.Yb(10,"input",32,33),s.ic("input",function(t){s.Lc(e);const i=s.mc(),n=s.Ic(20);return i.onGlobalFilter(n,t)}),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&e){const e=s.mc();s.Fb(3),s.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin),s.Fb(2),s.Wc(" ",(null==e.lstDetails?null:e.lstDetails.length)>0?"Total Records: "+e.filteredValuesLength:""," "),s.Fb(2),s.tc("ngIf",(null==e.lstDetails?null:e.lstDetails.length)>0)}}function O(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Uc(2," No records found "),s.Xb(),s.Xb()),2&e){const e=t.$implicit;s.Fb(1),s.Gb("colspan",null==e?null:e.length)}}function V(e,t){1&e&&(s.Yb(0,"tr"),s.Yb(1,"th",37),s.Uc(2,"S.No."),s.Xb(),s.Yb(3,"th",38),s.Uc(4,"MR No"),s.Xb(),s.Yb(5,"th",39),s.Uc(6,"Booking Number"),s.Xb(),s.Yb(7,"th",39),s.Uc(8,"Patient Name"),s.Xb(),s.Yb(9,"th",40),s.Uc(10,"Service"),s.Xb(),s.Yb(11,"th",41),s.Uc(12,"MRP"),s.Xb(),s.Yb(13,"th",41),s.Uc(14,"Dis Amount"),s.Xb(),s.Yb(15,"th",41),s.Uc(16,"Paid"),s.Xb(),s.Yb(17,"th",42),s.Uc(18,"Clear On"),s.Xb(),s.Yb(19,"th",43),s.Uc(20,"TI"),s.Xb(),s.Xb())}function j(e,t){if(1&e){const e=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td",37),s.Uc(2),s.Xb(),s.Yb(3,"td",38),s.Uc(4),s.Xb(),s.Yb(5,"td",39),s.Uc(6),s.Xb(),s.Yb(7,"td",39),s.Uc(8),s.Xb(),s.Yb(9,"td",40),s.Uc(10),s.Xb(),s.Yb(11,"td",41),s.Uc(12),s.Xb(),s.Yb(13,"td",41),s.Uc(14),s.Xb(),s.Yb(15,"td",41),s.Uc(16),s.Xb(),s.Yb(17,"td",42),s.Uc(18),s.nc(19,"date"),s.Xb(),s.Yb(20,"td",43),s.Yb(21,"a",44),s.ic("click",function(){s.Lc(e);const i=t.$implicit;return s.mc().PrintInvoice(i.SlotBookingId,i.InvoiceNumber,i.PhiscalID,i.Division)}),s.Tb(22,"i",45),s.Xb(),s.Xb(),s.Xb()}if(2&e){const e=t.$implicit,i=t.rowIndex,n=s.mc();s.Fb(2),s.Vc(i+1),s.Fb(2),s.Vc(e.MRNo),s.Fb(2),s.Vc(e.BookingNumber),s.Fb(2),s.Vc(e.FullName),s.Fb(2),s.Vc(e.Description),s.Fb(2),s.Vc(e.MRP),s.Fb(2),s.Vc(e.DiscountAmount),s.Fb(2),s.Vc(e.Paid),s.Fb(2),s.Vc(s.pc(19,9,e.BillDate,n.customDateFormat.DEF_DATE))}}function E(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"td",46),s.Uc(2,"Total"),s.Xb(),s.Tb(3,"td",38),s.Tb(4,"td",39),s.Tb(5,"td",39),s.Tb(6,"td",40),s.Yb(7,"td",47),s.Uc(8),s.nc(9,"number"),s.Xb(),s.Yb(10,"td",47),s.Uc(11),s.nc(12,"number"),s.Xb(),s.Yb(13,"td",47),s.Uc(14),s.nc(15,"number"),s.Xb(),s.Tb(16,"td",42),s.Tb(17,"td",43),s.Xb()),2&e){const e=s.mc();s.Fb(8),s.Wc("\u20b9 ",s.pc(9,3,e.totalMRP,"1.2-2"),""),s.Fb(3),s.Wc("\u20b9 ",s.pc(12,6,e.totalDiscountAmount,"1.2-2"),""),s.Fb(3),s.Wc("\u20b9 ",s.pc(15,9,e.totalPaidAmount,"1.2-2"),"")}}function H(e,t){if(1&e&&(s.Yb(0,"div",25),s.Yb(1,"div",1),s.Tb(2,"app-print-profile",48),s.Xb(),s.Xb()),2&e){const e=s.mc();s.Fb(2),s.tc("SlotBookingIdSelected",e.slotBookingId)("InvoiceNumberSelected",e.InvoiceNumberSelected)("PhiscalIdSelected",e.PhiscalIdSelected)("DivisionSelected",e.DivisionSelected)}}const G=function(){return["MRNo","BookingNumber","FullName","Description"]},Z=function(){return{width:"90vw"}};let W=(()=>{class e extends o.a{constructor(e,t,i,n,l,o){super(),this.router=e,this._ConstantServices=t,this._UtilityService=i,this.datepipe=n,this._ReportServices=l,this._MasterServices=o,this.filteredValuesLength=0,this.lstDetails=[],this.ClinicIdSelected="",this.UserTypeCurre=localStorage.getItem("userTypeId"),this.userTypes=c.s,this.customDateFormat=c.h,this.datesRangeFilter=[],this.MRNo=null,this.totalMRP=0,this.totalDiscountAmount=0,this.totalPaidAmount=0,this.InvoiceNumberSelected=null,this.PhiscalIdSelected=null,this.DivisionSelected=null,this.slotBookingId=null,this.ShowPrintProfileModel=!1,this.lstIAccess=[],this.lstIAccessStr=[],this.ActionList=c.a,this.datesRangeFilter=[new Date,new Date],this.MaxYear=(new Date).getFullYear()}ngOnInit(){c.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.GetBillClearReport())}onSelect(){null!==this.datesRangeFilter[0]&&null!==this.datesRangeFilter[1]&&(this.calendar.overlayVisible=!1)}GetBillClearReport(){var e;this.totalMRP=0,this.totalDiscountAmount=0,this.totalPaidAmount=0;let t={};(null===(e=this.datesRangeFilter)||void 0===e?void 0:e.length)>0&&(t.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),t.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd")),t.clinicId=this.ClinicIdSelected,t.createdBy=localStorage.getItem("userId"),t.patientId=this.MRNo,this._UtilityService.showSpinner(),this.unsubscribe.add=this._ReportServices.GetBillClearReport(t).subscribe({next:e=>{var t,i;if(this._UtilityService.hideSpinner(),1==e.actionResult.success){var n=JSON.parse(e.actionResult.result);this.lstDetails=n=n||[],this.filteredValuesLength=null===(t=this.lstDetails)||void 0===t?void 0:t.length,this.filteredValuesLength>0&&(this.totalMRP=this.lstDetails.map(e=>e.MRP).reduce(function(e,t){return e+t}),this.totalDiscountAmount=this.lstDetails.map(e=>e.DiscountAmount).reduce(function(e,t){return e+t}),this.totalPaidAmount=this.lstDetails.map(e=>e.Paid).reduce(function(e,t){return e+t})),void 0!==this.filtr&&(this.filtr.nativeElement.value="",this.dataTable.reset(),this.filteredValuesLength=null===(i=this.lstDetails)||void 0===i?void 0:i.length)}else this.lstDetails=[]},error:e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.Message)}})}PrintInvoice(e,t,i,n){this.slotBookingId=e,this.InvoiceNumberSelected=t,this.PhiscalIdSelected=i,this.DivisionSelected=n,this.ShowPrintProfileModel=!0}onclinicSelect(e){this.ClinicIdSelected=e,this.GetBillClearReport()}onFilter(e,t){this.filteredValuesLength=e.filteredValue.length,0==this.filteredValuesLength&&(this.totalMRP=0,this.totalDiscountAmount=0,this.totalPaidAmount=0),this.totalMRP=e.filteredValue.map(e=>e.MRP).reduce(function(e,t){return e+t}),this.totalDiscountAmount=e.filteredValue.map(e=>e.DiscountAmount).reduce(function(e,t){return e+t}),this.totalPaidAmount=e.filteredValue.map(e=>e.Paid).reduce(function(e,t){return e+t})}onGlobalFilter(e,t){e.filterGlobal(t.target.value,"contains")}exportToItemExcel(){let e={reportname:"BillClearReport",filename:"BillClearReport"};e.clinicId=this.ClinicIdSelected,e.isExcel=!0,e.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),e.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd"),this._MasterServices.downloadReport(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Sb(l.i),s.Sb(c.f),s.Sb(b.a),s.Sb(n.f),s.Sb(d.a),s.Sb(r.a))},e.\u0275cmp=s.Mb({type:e,selectors:[["app-bill-clear-report"]],viewQuery:function(e,t){if(1&e&&(s.cd(x,1),s.cd(k,1),s.cd(N,1),s.cd(q,1)),2&e){let e;s.Hc(e=s.jc())&&(t.dataTable=e.first),s.Hc(e=s.jc())&&(t.filtr=e.first),s.Hc(e=s.jc())&&(t.calendar=e.first),s.Hc(e=s.jc())&&(t.printContent=e.first)}},features:[s.Cb],decls:28,vars:20,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-3"],[1,"required"],["selectionMode","range","inputId","icon","name","rangeDates",3,"monthNavigator","yearNavigator","yearRange","ngModel","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],[1,"col-md-2"],[1,"form-label"],["pInputText","","type","text","required","","name","txtBlockName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-2","mt-8"],["type","button","title","Show",1,"btn","btn-new-primary",3,"click"],["dataKey","Category","responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 180px)",1,"ColumnFilterTable",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["header","Print Voucher","appendTo","body",3,"modal","visible","visibleChange"],["class","row",4,"ngIf"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"row"],["class","col-auto",4,"ngIf"],[1,"col-auto","pt-2"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],[1,"col-auto"],[3,"isCenterLabel","ClinicIdSelected","mode","onclinicSelect"],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[2,"width","60px"],[2,"width","150px"],[2,"width","160px"],[2,"width","240px"],[2,"width","130px"],[2,"width","100px"],[1,"hidden-print",2,"width","35px"],["title","Print Voucher",1,"mr-2",3,"click"],["aria-hidden","true",1,"fa","fa-print"],[2,"width","60px","font-weight","bold"],[2,"width","130px","font-weight","bold"],[3,"SlotBookingIdSelected","InvoiceNumberSelected","PhiscalIdSelected","DivisionSelected"]],template:function(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"div",4),s.Yb(5,"div",5),s.Yb(6,"label"),s.Uc(7,"Bill Date"),s.Xb(),s.Yb(8,"span",6),s.Uc(9,"*"),s.Xb(),s.Yb(10,"p-calendar",7,8),s.ic("ngModelChange",function(e){return t.datesRangeFilter=e})("onSelect",function(){return t.onSelect()}),s.Xb(),s.Xb(),s.Yb(12,"div",9),s.Yb(13,"label",10),s.Uc(14,"Name/MR No."),s.Xb(),s.Yb(15,"input",11),s.ic("ngModelChange",function(e){return t.MRNo=e}),s.Xb(),s.Xb(),s.Yb(16,"div",12),s.Yb(17,"button",13),s.ic("click",function(){return t.GetBillClearReport()}),s.Uc(18," Show "),s.Xb(),s.Xb(),s.Xb(),s.Yb(19,"p-table",14,15),s.ic("onFilter",function(i){s.Lc(e);const n=s.Ic(20);return t.onFilter(i,n)}),s.Sc(21,_,12,3,"ng-template",16),s.Sc(22,O,3,1,"ng-template",17),s.Sc(23,V,21,0,"ng-template",18),s.Sc(24,j,23,12,"ng-template",19),s.Sc(25,E,18,12,"ng-template",20),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(26,"p-dialog",21),s.ic("visibleChange",function(e){return t.ShowPrintProfileModel=e}),s.Sc(27,H,3,4,"div",22),s.Xb()}2&e&&(s.Fb(10),s.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),s.tc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.datesRangeFilter)("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),s.Fb(5),s.tc("ngModel",t.MRNo),s.Fb(4),s.tc("value",t.lstDetails)("rowHover",!0)("globalFilterFields",s.yc(18,G))("scrollable",!0),s.Fb(7),s.Pc(s.yc(19,Z)),s.tc("modal",!0)("visible",t.ShowPrintProfileModel),s.Fb(1),s.tc("ngIf",t.ShowPrintProfileModel))},directives:[p.a,m.o,m.r,m.b,g.a,m.w,C.c,v.i,S.a,n.p,y.a,h.b,B.a],pipes:[n.f,n.g],styles:[""]}),e})();const z=["calendar"],Q=["calendar2"],J=["dt"],$=["filtr"];function K(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",31),s.Yb(1,"div",32),s.Yb(2,"label",33),s.Uc(3,"Center "),s.Yb(4,"span",14),s.Uc(5,"*"),s.Xb(),s.Xb(),s.Xb(),s.Yb(6,"div",34),s.Yb(7,"app-center-dropdown",35),s.ic("onselectedClinic",function(t){return s.Lc(e),s.mc().onselectedClinic(t)}),s.Xb(),s.Xb(),s.Xb()}2&e&&(s.Fb(7),s.tc("isCenterLabel",!1)("mode","get"))}function ee(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",36),s.Yb(1,"button",37),s.ic("click",function(){return s.Lc(e),s.mc().ReflectToBill()}),s.Xb(),s.Xb()}}function te(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",36),s.Yb(1,"button",38),s.ic("click",function(){return s.Lc(e),s.mc().ClearBill()}),s.Xb(),s.Xb()}}function ie(e,t){1&e&&(s.Yb(0,"div",41),s.Yb(1,"label",45),s.Uc(2,"Booking Type "),s.Yb(3,"span",14),s.Uc(4,"*"),s.Xb(),s.Xb(),s.Xb())}const ne=function(){return{width:"100%"}},le=function(){return{standalone:!0}};function oe(e,t){if(1&e){const e=s.Zb();s.Yb(0,"p-dropdown",48),s.ic("ngModelChange",function(t){return s.Lc(e),s.mc(3).bookingtype=t})("onChange",function(){return s.Lc(e),s.mc(3).OnChangeBookingType()}),s.Xb()}if(2&e){const e=s.mc(3);s.Pc(s.yc(5,ne)),s.tc("options",e.stlstbookingtype)("ngModel",e.bookingtype)("ngModelOptions",s.yc(6,le))}}function ce(e,t){if(1&e&&(s.Yb(0,"div",36),s.Yb(1,"div",46),s.Sc(2,oe,1,7,"p-dropdown",47),s.Xb(),s.Xb()),2&e){const e=s.mc(2);s.Fb(2),s.tc("ngIf","ALL"==(null==e.clinicType?null:e.clinicType.toUpperCase()))}}function se(e,t){if(1&e){const e=s.Zb();s.Yb(0,"button",49),s.ic("click",function(){return s.Lc(e),s.mc(2).exportToItemExcel()}),s.Xb()}}function re(e,t){if(1&e&&(s.Yb(0,"div",39),s.Yb(1,"span",40),s.Yb(2,"div",41),s.Uc(3),s.Xb(),s.Sc(4,ie,5,0,"div",42),s.Sc(5,ce,3,1,"div",19),s.Xb(),s.Yb(6,"span",43),s.Sc(7,se,1,0,"button",44),s.Xb(),s.Xb()),2&e){const e=s.mc();s.Fb(3),s.Wc(" ",(null==e.lstReport?null:e.lstReport.length)>0?"Total Records: "+e.TotalRecords:"",""),s.Fb(1),s.tc("ngIf","ALL"==(null==e.clinicType?null:e.clinicType.toUpperCase())),s.Fb(1),s.tc("ngIf","ALL"==(null==e.clinicType?null:e.clinicType.toUpperCase())),s.Fb(2),s.tc("ngIf",(null==e.lstReport?null:e.lstReport.length)>0)}}function ae(e,t){1&e&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Uc(2," No records found "),s.Xb(),s.Xb()),2&e&&(s.Fb(1),s.Gb("colspan",2))}function de(e,t){1&e&&s.Tb(0,"col",50)}function be(e,t){if(1&e&&(s.Yb(0,"colgroup"),s.Tb(1,"col",50),s.Tb(2,"col",51),s.Tb(3,"col",50),s.Tb(4,"col",50),s.Tb(5,"col",52),s.Tb(6,"col",53),s.Tb(7,"col",54),s.Tb(8,"col",54),s.Tb(9,"col",54),s.Tb(10,"col",53),s.Sc(11,de,1,0,"col",55),s.Tb(12,"col",50),s.Xb()),2&e){const e=s.mc();s.Fb(11),s.tc("ngIf","OPD"==e.bookingtype)}}function ue(e,t){if(1&e){const e=s.Zb();s.Yb(0,"i",59),s.ic("click",function(){return s.Lc(e),s.mc(2).sortTable(1)}),s.Xb()}}function he(e,t){if(1&e){const e=s.Zb();s.Yb(0,"i",60),s.ic("click",function(){return s.Lc(e),s.mc(2).sortTable(1)}),s.Xb()}}function pe(e,t){if(1&e){const e=s.Zb();s.Yb(0,"i",59),s.ic("click",function(){return s.Lc(e),s.mc(2).sortTable(1)}),s.Xb()}}function me(e,t){if(1&e){const e=s.Zb();s.Yb(0,"i",61),s.ic("click",function(){return s.Lc(e),s.mc(2).sortTable(-1)}),s.Xb()}}function ge(e,t){1&e&&(s.Yb(0,"th"),s.Uc(1," User Name "),s.Xb())}function fe(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"th"),s.Uc(2,"MR No"),s.Xb(),s.Yb(3,"th"),s.Uc(4,"Booking Number"),s.Xb(),s.Yb(5,"th"),s.Uc(6,"Patient Name"),s.Xb(),s.Yb(7,"th"),s.Uc(8,"Invoice Number"),s.Xb(),s.Yb(9,"th"),s.Uc(10,"Booking For"),s.Xb(),s.Yb(11,"th"),s.Uc(12,"Net Payable"),s.Xb(),s.Yb(13,"th"),s.Uc(14,"Due Amount "),s.Sc(15,ue,1,0,"i",56),s.Sc(16,he,1,0,"i",57),s.Sc(17,pe,1,0,"i",56),s.Sc(18,me,1,0,"i",58),s.Xb(),s.Yb(19,"th"),s.Uc(20,"Acc. Balance"),s.Xb(),s.Yb(21,"th"),s.Uc(22,"Clear Amount"),s.Xb(),s.Yb(23,"th"),s.Uc(24,"Paid Amount"),s.Xb(),s.Sc(25,ge,2,0,"th",29),s.Yb(26,"th"),s.Yb(27,"p-tableHeaderCheckbox"),s.Uc(28,"Action"),s.Xb(),s.Xb(),s.Xb()),2&e){const e=s.mc();s.Fb(15),s.tc("ngIf",0==e.sortOrder),s.Fb(1),s.tc("ngIf",0==e.sortOrder),s.Fb(1),s.tc("ngIf",-1==e.sortOrder),s.Fb(1),s.tc("ngIf",1==e.sortOrder),s.Fb(7),s.tc("ngIf","OPD"==e.bookingtype)}}function Ce(e,t){if(1&e&&(s.Yb(0,"td"),s.Uc(1),s.Xb()),2&e){const e=s.mc().$implicit;s.Fb(1),s.Wc(" ",e.CreatedBy,"")}}function ve(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Uc(2),s.Xb(),s.Yb(3,"td"),s.Uc(4),s.Xb(),s.Yb(5,"td"),s.Uc(6),s.Xb(),s.Yb(7,"td"),s.Uc(8),s.Xb(),s.Yb(9,"td"),s.Uc(10),s.nc(11,"date"),s.Xb(),s.Yb(12,"td"),s.Uc(13),s.nc(14,"number"),s.Xb(),s.Yb(15,"td"),s.Uc(16),s.nc(17,"number"),s.Xb(),s.Yb(18,"td"),s.Uc(19),s.nc(20,"number"),s.Xb(),s.Yb(21,"td"),s.Yb(22,"p-inputNumber",62),s.ic("ngModelChange",function(e){return t.$implicit.ClearBillAmount=e}),s.Xb(),s.Xb(),s.Yb(23,"td"),s.Uc(24),s.nc(25,"number"),s.Xb(),s.Sc(26,Ce,2,1,"td",29),s.Yb(27,"td"),s.Yb(28,"div",63),s.Tb(29,"p-tableCheckbox",64),s.Xb(),s.Xb(),s.Xb()),2&e){const e=t.$implicit,i=t.rowIndex,n=s.mc();s.Fb(2),s.Vc(e.MRNo),s.Fb(2),s.Vc(e.BookingNumber),s.Fb(2),s.Vc(e.PatientName),s.Fb(2),s.Vc(e.InvoiceNumber),s.Fb(2),s.Wc("",s.pc(11,19,e.BookingFor,n.customDateFormat.DEF_DATE)," "),s.Fb(3),s.Vc(s.pc(14,22,e.NetPayble,"1.1-2")),s.Fb(3),s.Vc(s.pc(17,25,e.DueAmount,"1.1-2")),s.Fb(3),s.Vc(s.pc(20,28,e.AccBalance,"1.1-2")),s.Fb(3),s.Pc(s.yc(34,ne)),s.vc("name","txtClearBillAmount_",i,""),s.tc("disabled",null==n.BillClChequeAmount||null==n.BillClChequeAmount||0==n.BillClChequeAmount)("ngModel",e.ClearBillAmount)("min",0)("max",e.DueAmount),s.Fb(2),s.Vc(s.pc(25,31,e.NetPayble-e.DueAmount,"1.1-2")),s.Fb(2),s.tc("ngIf","OPD"==n.bookingtype),s.Fb(3),s.tc("value",e)("disabled",e.DueAmount<=0)}}function Se(e,t){1&e&&(s.Yb(0,"div"),s.Tb(1,"app-cheque-details-report"),s.Xb())}function ye(e,t){1&e&&(s.Yb(0,"div"),s.Tb(1,"app-bill-clear-report"),s.Xb())}const Ie=function(){return["BookingNumber","PaitentName","BookingOn"]},Fe=function(){return{width:"90vw"}},Ye=[{path:"",component:(()=>{class e extends o.a{constructor(e,t,i,n,l,o,s,r){super(),this.cdRef=e,this.router=t,this.datepipe=i,this._ConstantServices=n,this._MasterServices=l,this._PatientServices=o,this._ReportServices=s,this._UtilityService=r,this.UserTypeCurre=localStorage.getItem("userTypeId"),this.userTypes=c.s,this.ClinicIdSelected=null,this.lstReport=[],this.lstReportSelection=[],this.first=0,this.rows=0,this.TotalDueAmount=0,this.filteredValuesLength=0,this.SearchBookingNumber=null,this.SearchMRNumber=null,this.SearchName=null,this.lstRoomTypeMaster=[],this.maxYear=(new Date).getFullYear()+2,this.customDateFormat=c.h,this.bookingtype=null,this.clinicType=null,this.stlstbookingtype=[],this.sortOrder=0,this.SelectedSlotBookingId=null,this.SelectedPatientId=null,this.lstIAccess=[],this.lstIAccessStr=[],this.ActionList=c.a,this.SelectedRows=10,this.BillClChequeNumber=null,this.BillClChequeAmount=0,this.datesRangeFilter=[],this.bkfordatesRangeFilter=null,this.today=new Date,this.CapturedRow={},this.ChequeDetails={},this.selectAllItem=!1,this.IsChequeUsed=!1,this.ShowChequeModel=!1,this.ShowBillClearModel=!1,this.lstUserType=[],this._ConstantServices.ActiveMenuName="Credit Settlement",c.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId")),this.getPageLevelAccess(),this.datesRangeFilter=[new Date,new Date],this.MaxYear=this.today.getFullYear(),this.lstUserType.push({code:"0",value:"All"}),this.lstUserType.push({code:"1",value:"Patient"}),this.lstUserType.push({code:"2",value:"Visitor"})}getPageLevelAccess(){var e,t,i=this.router.url,n=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==n?void 0:n.find(e=>e.MenuItemURL===i))&&(this.lstIAccess=null===(e=n.find(e=>e.MenuItemURL===i))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(e=>{this.lstIAccessStr.push(e.ActionId.toString())}))}ngOnInit(){this.LoadCreditSettlementReport(0,this.SelectedRows)}onselectedClinic(e){c.s.SuperAdmin===localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=e.ClinicId)}OnChangeBookingType(){this.LoadCreditSettlementReport(0,this.SelectedRows)}dateRangeChange(){null!=this.bkfordatesRangeFilter&&null!=this.bkfordatesRangeFilter&&null!==this.bkfordatesRangeFilter[0]&&null!==this.bkfordatesRangeFilter[1]&&(this.calendar2.overlayVisible=!1,this.LoadCreditSettlementReport(0,this.SelectedRows))}loadPatientList(e){this.lstReport&&this.LoadCreditSettlementReport(e.first,e.rows)}LoadCreditSettlementReport(e,t){this.first=parseInt(e),this.rows=parseInt(t);let i={};i.clinicId=this.ClinicIdSelected,i.bookingType=this.bookingtype,i.first=e.toString(),i.rows=t.toString(),i.IsSkipPaging=!1,i.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),i.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd"),this.TotalDueAmount=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._ReportServices.GetCreditSettlementReport(i).subscribe({next:e=>{if(this._UtilityService.hideSpinner(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);this.lstReport=t=t||[],this.lstReport.map(e=>{this.TotalDueAmount=this.TotalDueAmount+e.DueAmount}),this.TotalRecords=JSON.parse(e.actionResult.result2),this.sortOrder=0}else this.TotalRecords=0,this.TotalDueAmount=0,this.lstReport=[],this.lstReportSelection=[]},error:e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.Message)}})}sortTable(e){this.sortOrder=e,-1==e?this.lstReport.sort((e,t)=>e.DueAmount<t.DueAmount?1:e.DueAmount>t.DueAmount?-1:0):1==e&&this.lstReport.sort((e,t)=>e.DueAmount<t.DueAmount?-1:e.DueAmount>t.DueAmount?1:0)}ClearFilter(){this.SearchBookingNumber=null,this.SearchName=null,this.SearchBookingForDate=null,this.bkfordatesRangeFilter=null,this.LoadCreditSettlementReport(0,this.SelectedRows)}onSelect(){null!==this.datesRangeFilter[0]&&null!==this.datesRangeFilter[1]&&(this.calendar.overlayVisible=!1,this.LoadCreditSettlementReport(0,this.SelectedRows))}ClearBill(){var e,t,i,n,l,o,c;if(0==(null===(e=this.datesRangeFilter)||void 0===e?void 0:e.length))return void this._UtilityService.showWarningAlert("Please select Bill Date Range");if(null==this.BillClChequeNumber||null==this.BillClChequeNumber||""==this.BillClChequeNumber||0==this.BillClChequeNumber.trim().length)return void this._UtilityService.showWarningAlert("Please Enter Cheque Number");if(null==(null===(t=this.ChequeDetails)||void 0===t?void 0:t.Amount)||null==(null===(i=this.ChequeDetails)||void 0===i?void 0:i.Amount)||0==(null===(n=this.ChequeDetails)||void 0===n?void 0:n.Amount))return void this._UtilityService.showWarningAlert("Please Enter Cheque Amount");if(0==(null===(l=this.lstReportSelection)||void 0===l?void 0:l.length)||null==this.lstReportSelection)return void this._UtilityService.showWarningAlert("Please Check Some Slot and clear Bill");if((null===(o=this.lstReportSelection.filter(e=>e.ClearBillAmount!=e.DueAmount))||void 0===o?void 0:o.length)>0)return void this._UtilityService.showWarningAlert("Insufficient amount to settle the due balance.");let s={};s.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),s.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd"),s.ChequeNumber=this.BillClChequeNumber,s.ChequeAmount=null===(c=this.ChequeDetails)||void 0===c?void 0:c.Amount,s.lstBillitemCRSET=this.lstReportSelection.filter(e=>e.ClearBillAmount>0&&e.DueAmount-e.ClearBillAmount==0),s.clinicId=this.ClinicIdSelected,s.createdBy=localStorage.getItem("userId"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.ClearPendingBill(s).subscribe({next:e=>{this._UtilityService.hideSpinner(),1==e.actionResult.success?(this._UtilityService.showSuccessAlert(e.actionResult.errMsg),this.BillClChequeNumber=null,this.BillClChequeAmount=0,this.ChequeDetails={},this.LoadCreditSettlementReport(0,this.SelectedRows),this.lstReportSelection=[]):(this._UtilityService.showWarningAlert(e.actionResult.errMsg),this.lstReportSelection=[])},error:e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.Message)}})}ReflectToBill(){var e;if(null!=this.BillClChequeAmount&&null!=this.BillClChequeAmount&&0!=this.BillClChequeAmount){var t=this.BillClChequeAmount;this.lstReport.map(e=>e.ClearBillAmount=0);for(var i=0;i<(null===(e=this.lstReport)||void 0===e?void 0:e.length);i++)this._ConstantServices.nullToZeroConverter(this.lstReport[i].DueAmount)>0&&t>=this._ConstantServices.nullToZeroConverter(this.lstReport[i].DueAmount)&&0==this._ConstantServices.nullToZeroConverter(this.lstReport[i].ClearBillAmount)?(t-=this.lstReport[i].DueAmount,this.lstReport[i].ClearBillAmount=this.lstReport[i].DueAmount):this.lstReport[i].ClearBillAmount=0;this.lstReport.some(e=>0==e.ClearBillAmount)&&this._UtilityService.showWarningAlert("Insufficient amount to settle the outstanding due balance."),this.BillClChequeAmount=t}else this._UtilityService.showWarningAlert("Please Enter Cheque Amount")}CheckChequeNumber(){null==this.BillClChequeNumber||null==this.BillClChequeNumber||""==this.BillClChequeNumber||0==this.BillClChequeNumber.trim().length||(this.ChequeDetails.ChequeNumber=this.BillClChequeNumber,this.IsChequeUsed=!1,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.CheckChequeDetails(this.ClinicIdSelected,this.BillClChequeNumber).subscribe({next:e=>{if(this._UtilityService.hideSpinner(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);this.BillClChequeAmount=this._ConstantServices.nullToZeroConverter(null==(t=t||[])?void 0:t.ChequeBalance),this.ChequeDetails.Amount=this._ConstantServices.nullToZeroConverter(null==t?void 0:t.ChequeBalance),this.ChequeDetails.ChequeNumber=null==t?void 0:t.ChequeNumber,this.IsChequeUsed=!0}else this.BillClChequeAmount=0},error:e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.Message)}}))}CaptureChequeAmount(){this.ChequeDetails.Amount=this.BillClChequeAmount}getSelectAllItem(){var e,t;if(1==this.selectAllItem)for(var i=0;i<(null===(e=this.lstReport)||void 0===e?void 0:e.length);i++)this.lstReport[i].DueAmount>0&&(this.lstReport[i].Checked=!0);else for(i=0;i<(null===(t=this.lstReport)||void 0===t?void 0:t.length);i++)this.lstReport[i].IsChecked=!1}onFilter(e,t){this.filteredValuesLength=e.filteredValue.length}exportToItemExcel(){let e={reportname:"CreditSettlementReport"};e.filename=this._ConstantServices.ActiveMenuName,e.clinicId=this.ClinicIdSelected,e.first="0",e.rows="10",e.IsSkipPaging=!0,e.isExcel=!0,e.bookingType=this.bookingtype,e.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),e.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd"),this._MasterServices.downloadReport(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Sb(s.h),s.Sb(l.i),s.Sb(n.f),s.Sb(c.f),s.Sb(r.a),s.Sb(a.a),s.Sb(d.a),s.Sb(b.a))},e.\u0275cmp=s.Mb({type:e,selectors:[["app-credit-settlement"]],viewQuery:function(e,t){if(1&e&&(s.cd(z,1),s.cd(Q,1),s.cd(J,1),s.cd($,1)),2&e){let e;s.Hc(e=s.jc())&&(t.calendar=e.first),s.Hc(e=s.jc())&&(t.calendar2=e.first),s.Hc(e=s.jc())&&(t.dataTable=e.first),s.Hc(e=s.jc())&&(t.filtr=e.first)}},features:[s.Cb],decls:53,vars:50,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["class","row mb-2",4,"ngIf"],[1,"row","mb-5"],["activeIndex","-1"],["header","Bill Clear Details",3,"selected"],[1,"row"],[1,"col-md-4"],["align","right",1,"col-md-4"],["pButton","","type","button","title","Used Cheque Details","label","Used Cheque Details",1,"mr-2",3,"click"],[1,"row","mt-2"],[1,"form-group","pos-rel","col-md-4"],[1,"required"],["appendTo","body","selectionMode","range","inputId","icon",3,"monthNavigator","yearNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],["type","text","name","txtChequeNumber","pInputText","",3,"ngModel","ngModelChange","change"],["name","txtChequeAmount","mode","decimal",3,"disabled","ngModel","min","maxlength","ngModelChange","onBlur"],["class","col-auto",4,"ngIf"],[1,"filter-box","mt-3"],["styleClass","p-datatable-striped","scrollHeight","calc(100vh - 300px)","responsiveLayout","scroll",1,"ColumnFilterTable",3,"value","lazy","rowHover","selection","lazyLoadOnInit","globalFilterFields","scrollable","paginator","rows","totalRecords","first","selectionChange","onLazyLoad","firstChange"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["header","Used Cheque Details",3,"modal","visible","visibleChange"],[4,"ngIf"],["header","Bill Clear Report",3,"modal","visible","visibleChange"],[1,"row","mb-2"],[1,"col-auto","pr-0"],["for","",1,"pt-2"],[1,"col-md-3"],[3,"isCenterLabel","mode","onselectedClinic"],[1,"col-auto"],["pButton","","type","button","title","Reflect To Bill","label","Reflect To Bill",1,"mr-2",3,"click"],["pButton","","type","button","title","Clear Bill","label","Clear Bill",1,"mr-2",3,"click"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"col-auto","mt-2"],["class","col-auto mt-2",4,"ngIf"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],["for",""],[1,"form-group","mb-0"],["optionLabel","name","optionValue","code",3,"options","ngModel","ngModelOptions","style","ngModelChange","onChange",4,"ngIf"],["optionLabel","name","optionValue","code",3,"options","ngModel","ngModelOptions","ngModelChange","onChange"],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[2,"width","150px"],[2,"width","170px"],[2,"width","250px"],[2,"width","100px"],[2,"width","140px"],["style","width:150px",4,"ngIf"],["class","pi pi-arrow-down ml-1",3,"click",4,"ngIf"],["class","pi pi pi-arrow-up",3,"click",4,"ngIf"],["class","pi pi-arrow-up ml-1",3,"click",4,"ngIf"],[1,"pi","pi-arrow-down","ml-1",3,"click"],[1,"pi","pi","pi-arrow-up",3,"click"],[1,"pi","pi-arrow-up","ml-1",3,"click"],["mode","decimal",3,"name","disabled","ngModel","min","max","ngModelChange"],[1,"field-checkbox","mt-3"],[3,"value","disabled"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Sc(4,K,8,2,"div",4),s.Yb(5,"div",5),s.Yb(6,"div",1),s.Yb(7,"p-accordion",6),s.Yb(8,"p-accordionTab",7),s.Yb(9,"div",8),s.Yb(10,"div",9),s.Yb(11,"label"),s.Uc(12),s.Xb(),s.Xb(),s.Tb(13,"div",9),s.Yb(14,"div",10),s.Yb(15,"button",11),s.ic("click",function(){return t.ShowChequeModel=!0}),s.Xb(),s.Xb(),s.Xb(),s.Yb(16,"div",12),s.Yb(17,"div",13),s.Yb(18,"label"),s.Uc(19,"Bill Date"),s.Xb(),s.Yb(20,"span",14),s.Uc(21,"*"),s.Xb(),s.Yb(22,"p-calendar",15,16),s.ic("ngModelChange",function(e){return t.datesRangeFilter=e})("onSelect",function(){return t.onSelect()}),s.Xb(),s.Xb(),s.Yb(24,"div",13),s.Yb(25,"label"),s.Uc(26,"Cheque Number"),s.Xb(),s.Yb(27,"span",14),s.Uc(28,"*"),s.Xb(),s.Yb(29,"input",17),s.ic("ngModelChange",function(e){return t.BillClChequeNumber=e})("change",function(){return t.CheckChequeNumber()}),s.Xb(),s.Xb(),s.Yb(30,"div",13),s.Yb(31,"label"),s.Uc(32,"Cheque Amount"),s.Xb(),s.Yb(33,"span",14),s.Uc(34,"*"),s.Xb(),s.Yb(35,"p-inputNumber",18),s.ic("ngModelChange",function(e){return t.BillClChequeAmount=e})("onBlur",function(){return t.CaptureChequeAmount()}),s.Xb(),s.Xb(),s.Xb(),s.Yb(36,"div",12),s.Sc(37,ee,2,0,"div",19),s.Sc(38,te,2,0,"div",19),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(39,"div",8),s.Yb(40,"div",1),s.Yb(41,"div",20),s.Yb(42,"p-table",21,22),s.ic("selectionChange",function(e){return t.lstReportSelection=e})("onLazyLoad",function(e){return t.loadPatientList(e)})("firstChange",function(e){return t.first=e}),s.Sc(44,re,8,4,"ng-template",23),s.Sc(45,ae,3,1,"ng-template",24),s.Sc(46,be,13,1,"ng-template",25),s.Sc(47,fe,29,5,"ng-template",26),s.Sc(48,ve,30,35,"ng-template",27),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(49,"p-dialog",28),s.ic("visibleChange",function(e){return t.ShowChequeModel=e}),s.Sc(50,Se,2,0,"div",29),s.Xb(),s.Yb(51,"p-dialog",30),s.ic("visibleChange",function(e){return t.ShowBillClearModel=e}),s.Sc(52,ye,2,0,"div",29),s.Xb()),2&e&&(s.Fb(4),s.tc("ngIf",t.UserTypeCurre===t.userTypes.SuperAdmin),s.Fb(4),s.tc("selected",!0),s.Fb(4),s.Wc("Total Due : ",t.TotalDueAmount,""),s.Fb(10),s.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),s.tc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.datesRangeFilter)("ngModelOptions",s.yc(44,le))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),s.Fb(7),s.Pc(s.yc(45,ne)),s.tc("ngModel",t.BillClChequeNumber),s.Fb(6),s.Pc(s.yc(46,ne)),s.tc("disabled",null==t.BillClChequeNumber||null==t.BillClChequeNumber||""==t.BillClChequeNumber||0==t.BillClChequeNumber.trim().length||t.IsChequeUsed)("ngModel",t.BillClChequeAmount)("min",0)("maxlength",20),s.Fb(2),s.tc("ngIf",(null==t.ChequeDetails?null:t.ChequeDetails.Amount)>0),s.Fb(1),s.tc("ngIf",(null==t.ChequeDetails?null:t.ChequeDetails.Amount)>0),s.Fb(4),s.tc("value",t.lstReport)("lazy",!0)("rowHover",!0)("selection",t.lstReportSelection)("lazyLoadOnInit",!1)("globalFilterFields",s.yc(47,Ie))("scrollable",!0)("paginator",!0)("rows",t.SelectedRows)("totalRecords",t.TotalRecords)("first",t.first),s.Fb(7),s.Pc(s.yc(48,Fe)),s.tc("modal",!0)("visible",t.ShowChequeModel),s.Fb(1),s.tc("ngIf",t.ShowChequeModel),s.Fb(1),s.Pc(s.yc(49,Fe)),s.tc("modal",!0)("visible",t.ShowBillClearModel),s.Fb(1),s.tc("ngIf",t.ShowBillClearModel))},directives:[n.p,u.a,u.c,h.b,p.a,m.o,m.r,m.b,g.a,f.a,m.j,C.c,v.i,S.a,y.a,I.a,C.e,C.d,M,W],pipes:[n.f,n.g],styles:[""]}),e})()}];let Xe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({imports:[[l.l.forChild(Ye)],l.l]}),e})();var we=i("LuMj"),Re=i("Ji6n"),De=i("T2Aj");const Te=[];let Ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({imports:[[l.l.forChild(Te)],l.l]}),e})();var Ue=i("Gxio");let Me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({imports:[[n.c,Ae,m.i,Ue.b,C.f,I.b,g.b,h.c,p.b,De.a]]}),e})();const Be=[];let xe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({imports:[[l.l.forChild(Be)],l.l]}),e})();var ke=i("QbTu");let Ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({imports:[[n.c,xe,m.i,Ue.b,C.f,I.b,g.b,h.c,p.b,De.a,S.b,ke.a,we.b]]}),e})(),qe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({imports:[[n.c,Xe,m.i,C.f,h.c,I.b,g.b,we.b,p.b,Re.b,f.b,S.b,u.b,De.a,Me,Ne]]}),e})()}}]);