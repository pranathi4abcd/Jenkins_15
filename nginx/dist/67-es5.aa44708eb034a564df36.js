!function(){function e(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),i&&t(e,i)}function t(e,i){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,i)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,o=l(e);if(t){var c=l(this).constructor;i=Reflect.construct(o,arguments,c)}else i=o.apply(this,arguments);return n(this,i)}}function n(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"7LiV":function(e,t,i){"use strict";i.d(t,"a",function(){return Y}),i.d(t,"b",function(){return X}),i.d(t,"c",function(){return F});var n=i("fXoL"),l=i("R0Ic"),c=i("ofXK"),a=i("7zfz");function s(e,t){if(1&e&&(n.Yb(0,"span",9),n.Uc(1),n.Xb()),2&e){var i=n.mc();n.Fb(1),n.Wc(" ",i.header," ")}}function u(e,t){1&e&&n.Ub(0)}function d(e,t){1&e&&n.rc(0,1,["*ngIf","hasHeaderFacet"])}function b(e,t){1&e&&n.Ub(0)}function h(e,t){if(1&e&&(n.Wb(0),n.Sc(1,b,1,0,"ng-container",5),n.Vb()),2&e){var i=n.mc();n.Fb(1),n.tc("ngTemplateOutlet",i.contentTemplate)}}var p=["*",[["p-header"]]],f=function(e){return{"p-accordion-tab-active":e}},m=function(e,t){return{"p-highlight":e,"p-disabled":t}},v=function(e){return{transitionParams:e}},g=function(e){return{value:"visible",params:e}},C=function(e){return{value:"hidden",params:e}},y=["*","p-header"],S=["*"],I=0,F=function(){var e=function(){function e(t,i){o(this,e),this.changeDetector=i,this.cache=!0,this.selectedChange=new n.o,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-accordiontab-"+I++,this.accordion=t}return r(e,[{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e,this.loaded||(this._selected&&this.cache&&(this.loaded=!0),this.changeDetector.markForCheck())}},{key:"ngAfterContentInit",value:function(){var e=this;this.templates.forEach(function(t){switch(t.getType()){case"content":e.contentTemplate=t.template;break;case"header":e.headerTemplate=t.template;break;default:e.contentTemplate=t.template}})}},{key:"toggle",value:function(e){if(this.disabled)return!1;var t=this.findTabIndex();if(this.selected)this.selected=!1,this.accordion.onClose.emit({originalEvent:e,index:t});else{if(!this.accordion.multiple)for(var i=0;i<this.accordion.tabs.length;i++)this.accordion.tabs[i].selected=!1,this.accordion.tabs[i].selectedChange.emit(!1),this.accordion.tabs[i].changeDetector.markForCheck();this.selected=!0,this.loaded=!0,this.accordion.onOpen.emit({originalEvent:e,index:t})}this.selectedChange.emit(this.selected),this.accordion.updateActiveIndex(),this.changeDetector.markForCheck(),e.preventDefault()}},{key:"findTabIndex",value:function(){for(var e=-1,t=0;t<this.accordion.tabs.length;t++)if(this.accordion.tabs[t]==this){e=t;break}return e}},{key:"hasHeaderFacet",get:function(){return this.headerFacet&&this.headerFacet.length>0}},{key:"onKeydown",value:function(e){32!==e.which&&13!==e.which||(this.toggle(e),e.preventDefault())}},{key:"ngOnDestroy",value:function(){this.accordion.tabs.splice(this.findTabIndex(),1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Sb(Object(n.X)(function(){return Y})),n.Sb(n.h))},e.\u0275cmp=n.Mb({type:e,selectors:[["p-accordionTab"]],contentQueries:function(e,t,i){var l;(1&e&&(n.Lb(i,a.f,0),n.Lb(i,a.i,0)),2&e)&&(n.Hc(l=n.jc())&&(t.headerFacet=l),n.Hc(l=n.jc())&&(t.templates=l))},inputs:{cache:"cache",transitionOptions:"transitionOptions",selected:"selected",header:"header",disabled:"disabled"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:y,decls:11,vars:28,consts:[[1,"p-accordion-tab",3,"ngClass"],[1,"p-accordion-header",3,"ngClass"],["role","tab",1,"p-accordion-header-link",3,"click","keydown"],[1,"p-accordion-toggle-icon",3,"ngClass"],["class","p-accordion-header-text",4,"ngIf"],[4,"ngTemplateOutlet"],[4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-accordion-content"],[1,"p-accordion-header-text"]],template:function(e,t){1&e&&(n.sc(p),n.Yb(0,"div",0),n.Yb(1,"div",1),n.Yb(2,"a",2),n.ic("click",function(e){return t.toggle(e)})("keydown",function(e){return t.onKeydown(e)}),n.Tb(3,"span",3),n.Sc(4,s,2,1,"span",4),n.Sc(5,u,1,0,"ng-container",5),n.Sc(6,d,1,0,"ng-content",6),n.Xb(),n.Xb(),n.Yb(7,"div",7),n.Yb(8,"div",8),n.rc(9),n.Sc(10,h,2,1,"ng-container",6),n.Xb(),n.Xb(),n.Xb()),2&e&&(n.tc("ngClass",n.zc(15,f,t.selected)),n.Fb(1),n.tc("ngClass",n.Ac(17,m,t.selected,t.disabled)),n.Fb(1),n.Gb("tabindex",t.disabled?null:0)("id",t.id)("aria-controls",t.id+"-content")("aria-expanded",t.selected),n.Fb(1),n.tc("ngClass",t.selected?t.accordion.collapseIcon:t.accordion.expandIcon),n.Fb(1),n.tc("ngIf",!t.hasHeaderFacet),n.Fb(1),n.tc("ngTemplateOutlet",t.headerTemplate),n.Fb(1),n.tc("ngIf",t.hasHeaderFacet),n.Fb(1),n.tc("@tabContent",t.selected?n.zc(22,g,n.zc(20,v,t.transitionOptions)):n.zc(26,C,n.zc(24,v,t.transitionOptions))),n.Gb("id",t.id+"-content")("aria-hidden",!t.selected)("aria-labelledby",t.id),n.Fb(3),n.tc("ngIf",t.contentTemplate&&(t.cache?t.loaded:t.selected)))},directives:[c.n,c.p,c.t],styles:[".p-accordion-header-link{-ms-user-select:none;-webkit-user-select:none;align-items:center;cursor:pointer;display:flex;position:relative;text-decoration:none;user-select:none}.p-accordion-header-link:focus{z-index:1}.p-accordion-header-text{line-height:1}"],encapsulation:2,data:{animation:[Object(l.m)("tabContent",[Object(l.j)("hidden",Object(l.k)({height:"0",overflow:"hidden"})),Object(l.j)("visible",Object(l.k)({height:"*"})),Object(l.l)("visible <=> hidden",[Object(l.k)({overflow:"hidden"}),Object(l.e)("{{transitionParams}}")]),Object(l.l)("void => *",Object(l.e)(0))])]},changeDetection:0}),e}(),Y=function(){var e=function(){function e(t,i){o(this,e),this.el=t,this.changeDetector=i,this.onClose=new n.o,this.onOpen=new n.o,this.expandIcon="pi pi-fw pi-chevron-right",this.collapseIcon="pi pi-fw pi-chevron-down",this.activeIndexChange=new n.o,this.tabs=[]}return r(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.initTabs(),this.tabListSubscription=this.tabList.changes.subscribe(function(t){e.initTabs()})}},{key:"initTabs",value:function(){this.tabs=this.tabList.toArray(),this.updateSelectionState(),this.changeDetector.markForCheck()}},{key:"getBlockableElement",value:function(){return this.el.nativeElement.children[0]}},{key:"activeIndex",get:function(){return this._activeIndex},set:function(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.updateSelectionState()}},{key:"updateSelectionState",value:function(){if(this.tabs&&this.tabs.length&&null!=this._activeIndex)for(var e=0;e<this.tabs.length;e++){var t=this.multiple?this._activeIndex.includes(e):e===this._activeIndex;t!==this.tabs[e].selected&&(this.tabs[e].selected=t,this.tabs[e].selectedChange.emit(t),this.tabs[e].changeDetector.markForCheck())}}},{key:"updateActiveIndex",value:function(){var e=this,t=this.multiple?[]:null;this.tabs.forEach(function(i,n){if(i.selected){if(!e.multiple)return void(t=n);t.push(n)}}),this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(t)}},{key:"ngOnDestroy",value:function(){this.tabListSubscription&&this.tabListSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Sb(n.m),n.Sb(n.h))},e.\u0275cmp=n.Mb({type:e,selectors:[["p-accordion"]],contentQueries:function(e,t,i){var l;(1&e&&n.Lb(i,F,0),2&e)&&(n.Hc(l=n.jc())&&(t.tabList=l))},inputs:{expandIcon:"expandIcon",collapseIcon:"collapseIcon",activeIndex:"activeIndex",multiple:"multiple",style:"style",styleClass:"styleClass"},outputs:{onClose:"onClose",onOpen:"onOpen",activeIndexChange:"activeIndexChange"},ngContentSelectors:S,decls:2,vars:4,consts:[["role","tablist",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(n.sc(),n.Yb(0,"div",0),n.rc(1),n.Xb()),2&e&&(n.Hb(t.styleClass),n.tc("ngClass","p-accordion p-component")("ngStyle",t.style))},directives:[c.n,c.q],encapsulation:2,changeDetection:0}),e}(),X=function(){var e=function e(){o(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Qb({type:e}),e.\u0275inj=n.Pb({imports:[[c.c],a.j]}),e}()},l91o:function(t,n,l){"use strict";l.r(n),l.d(n,"CreditSettlementModule",function(){return Qe});var c=l("ofXK"),a=l("tyNb"),s=l("CwUn"),u=l("Nach"),d=l("fXoL"),b=l("dcBc"),h=l("G+wY"),p=l("PtJb"),f=l("NLkC"),m=l("7LiV"),v=l("jIHw"),g=l("eO1q"),C=l("3Pt+"),y=l("7kUa"),S=l("Ks7X"),I=l("rEr+"),F=l("7zfz"),Y=l("/RsI"),X=l("AAHA"),w=l("arFO"),R=["dt"],D=["filtr"],T=["calendar"];function A(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",5),d.Yb(1,"app-center-dropdown",26),d.ic("onclinicSelect",function(e){return d.Lc(i),d.mc(2).onclinicSelect(e)}),d.Xb(),d.Xb()}if(2&e){var n=d.mc(2);d.Fb(1),d.tc("isCenterLabel",!1)("ClinicIdSelected",n.ClinicIdSelected)("mode","get")}}function k(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",16),d.Yb(1,"span",17),d.Yb(2,"div",18),d.Sc(3,A,2,3,"div",19),d.Yb(4,"div",20),d.Uc(5),d.Xb(),d.Xb(),d.Xb(),d.Yb(6,"span",21),d.Yb(7,"span",22),d.Tb(8,"i",23),d.Yb(9,"input",24,25),d.ic("input",function(e){d.Lc(i);var t=d.mc(),n=d.Ic(14);return t.onGlobalFilter(n,e)}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&e){var n=d.mc();d.Fb(3),d.tc("ngIf",n.UserTypeCurre===n.userTypes.SuperAdmin),d.Fb(2),d.Wc(" ",(null==n.lstDetails?null:n.lstDetails.length)>0?"Total Records: "+n.filteredValuesLength:""," ")}}function U(e,t){if(1&e&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&e){var i=t.$implicit;d.Fb(1),d.Gb("colspan",null==i?null:i.length)}}function M(e,t){1&e&&(d.Yb(0,"tr"),d.Yb(1,"th"),d.Uc(2,"S.No."),d.Xb(),d.Yb(3,"th"),d.Uc(4,"Cheque Number"),d.Xb(),d.Yb(5,"th"),d.Uc(6,"Cheque Amount"),d.Xb(),d.Yb(7,"th"),d.Uc(8,"Cheque Balance"),d.Xb(),d.Yb(9,"th"),d.Uc(10,"Clear From"),d.Xb(),d.Yb(11,"th"),d.Uc(12,"Clear To"),d.Xb(),d.Yb(13,"th"),d.Uc(14,"Clear On"),d.Xb(),d.Xb())}function B(e,t){if(1&e&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2),d.Xb(),d.Yb(3,"td"),d.Uc(4),d.Xb(),d.Yb(5,"td"),d.Uc(6),d.Xb(),d.Yb(7,"td"),d.Uc(8),d.Xb(),d.Yb(9,"td"),d.Uc(10),d.nc(11,"date"),d.Xb(),d.Yb(12,"td"),d.Uc(13),d.nc(14,"date"),d.Xb(),d.Yb(15,"td"),d.Uc(16),d.nc(17,"date"),d.Xb(),d.Xb()),2&e){var i=t.$implicit,n=t.rowIndex,l=d.mc();d.Fb(2),d.Vc(n+1),d.Fb(2),d.Vc(i.ChequeNumber),d.Fb(2),d.Vc(i.ChequeAmount),d.Fb(2),d.Vc(i.ChequeBalance),d.Fb(2),d.Vc(d.pc(11,7,i.ClearFrom,l.customDateFormat.DEF_DATE)),d.Fb(3),d.Vc(d.pc(14,10,i.ClearTo,l.customDateFormat.DEF_DATE)),d.Fb(3),d.Vc(d.pc(17,13,i.ClearOn,l.customDateFormat.DEF_DATE))}}var x,N=function(){return["ChequeNumber","ChequeAmount","ChequeBalance"]},q=((x=function(t){e(l,t);var n=i(l);function l(e,t,i,c,r,a){var s;return o(this,l),(s=n.call(this)).router=e,s.datepipe=t,s._ConstantServices=i,s._UtilityService=c,s._PatientServices=r,s._ReportServices=a,s.filteredValuesLength=0,s.lstDetails=[],s.ClinicIdSelected="",s.UserTypeCurre=localStorage.getItem("userTypeId"),s.userTypes=u.s,s.customDateFormat=u.h,s.datesRangeFilter=[],s.datesRangeFilter=[new Date,new Date],s.MaxYear=(new Date).getFullYear(),s}return r(l,[{key:"ngOnInit",value:function(){u.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.GetChequeDetails())}},{key:"onSelect",value:function(){null!==this.datesRangeFilter[0]&&null!==this.datesRangeFilter[1]&&(this.calendar.overlayVisible=!1,this.GetChequeDetails())}},{key:"GetChequeDetails",value:function(){var e,t=this,i={};(null===(e=this.datesRangeFilter)||void 0===e?void 0:e.length)>0&&(i.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),i.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd")),i.clinicId=this.ClinicIdSelected,i.createdBy=localStorage.getItem("userId"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetChequeDetails(i).subscribe({next:function(e){var i,n;if(t._UtilityService.hideSpinner(),1==e.actionResult.success){var l=JSON.parse(e.actionResult.result);t.lstDetails=l=l||[],t.filteredValuesLength=null===(i=t.lstDetails)||void 0===i?void 0:i.length,void 0!==t.filtr&&(t.filtr.nativeElement.value="",t.dataTable.reset(),t.filteredValuesLength=null===(n=t.lstDetails)||void 0===n?void 0:n.length)}else t.lstDetails=[]},error:function(e){t._UtilityService.hideSpinner(),t._UtilityService.showErrorAlert(e.Message)}})}},{key:"onclinicSelect",value:function(e){this.ClinicIdSelected=e,this.GetChequeDetails()}},{key:"onFilter",value:function(e,t){this.filteredValuesLength=e.filteredValue.length}},{key:"onGlobalFilter",value:function(e,t){e.filterGlobal(t.target.value,"contains")}}]),l}(s.a)).\u0275fac=function(e){return new(e||x)(d.Sb(a.i),d.Sb(c.f),d.Sb(u.f),d.Sb(f.a),d.Sb(h.a),d.Sb(p.a))},x.\u0275cmp=d.Mb({type:x,selectors:[["app-cheque-details-report"]],viewQuery:function(e,t){var i;1&e&&(d.cd(R,1),d.cd(D,1),d.cd(T,1)),2&e&&(d.Hc(i=d.jc())&&(t.dataTable=i.first),d.Hc(i=d.jc())&&(t.filtr=i.first),d.Hc(i=d.jc())&&(t.calendar=i.first))},features:[d.Cb],decls:19,vars:13,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-auto"],[1,"required"],[1,"col-md-4"],["selectionMode","range","inputId","icon","name","rangeDates",3,"monthNavigator","yearNavigator","yearRange","ngModel","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],["dataKey","Category","responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 180px)",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"row"],["class","col-auto",4,"ngIf"],[1,"col-auto","pt-2"],[1,"p-ml-auto"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],[3,"isCenterLabel","ClinicIdSelected","mode","onclinicSelect"]],template:function(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"div",3),d.Yb(4,"div",4),d.Yb(5,"div",5),d.Yb(6,"label"),d.Uc(7,"Bill Date "),d.Xb(),d.Yb(8,"span",6),d.Uc(9,"*"),d.Xb(),d.Xb(),d.Yb(10,"div",7),d.Yb(11,"p-calendar",8,9),d.ic("ngModelChange",function(e){return t.datesRangeFilter=e})("onSelect",function(){return t.onSelect()}),d.Xb(),d.Xb(),d.Xb(),d.Yb(13,"p-table",10,11),d.ic("onFilter",function(e){d.Lc(i);var n=d.Ic(14);return t.onFilter(e,n)}),d.Sc(15,k,11,2,"ng-template",12),d.Sc(16,U,3,1,"ng-template",13),d.Sc(17,M,15,0,"ng-template",14),d.Sc(18,B,18,16,"ng-template",15),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()}2&e&&(d.Fb(11),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.datesRangeFilter)("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),d.Fb(2),d.tc("value",t.lstDetails)("rowHover",!0)("globalFilterFields",d.yc(12,N))("scrollable",!0))},directives:[g.a,C.o,C.r,I.c,F.i,c.p,y.a,X.a],pipes:[c.f],styles:[""]}),x),P=l("jhiP"),L=["dt"],_=["filtr"],O=["calendar"],V=["printContent"];function j(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",34),d.Yb(1,"app-center-dropdown",35),d.ic("onclinicSelect",function(e){return d.Lc(i),d.mc(2).onclinicSelect(e)}),d.Xb(),d.Xb()}if(2&e){var n=d.mc(2);d.Fb(1),d.tc("isCenterLabel",!1)("ClinicIdSelected",n.ClinicIdSelected)("mode","get")}}function E(e,t){if(1&e){var i=d.Zb();d.Yb(0,"button",36),d.ic("click",function(){return d.Lc(i),d.mc(2).exportToItemExcel()}),d.Xb()}}function H(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",23),d.Yb(1,"span",24),d.Yb(2,"div",25),d.Sc(3,j,2,3,"div",26),d.Yb(4,"div",27),d.Uc(5),d.Xb(),d.Xb(),d.Xb(),d.Yb(6,"span",28),d.Sc(7,E,1,0,"button",29),d.Yb(8,"span",30),d.Tb(9,"i",31),d.Yb(10,"input",32,33),d.ic("input",function(e){d.Lc(i);var t=d.mc(),n=d.Ic(20);return t.onGlobalFilter(n,e)}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&e){var n=d.mc();d.Fb(3),d.tc("ngIf",n.UserTypeCurre===n.userTypes.SuperAdmin),d.Fb(2),d.Wc(" ",(null==n.lstDetails?null:n.lstDetails.length)>0?"Total Records: "+n.filteredValuesLength:""," "),d.Fb(2),d.tc("ngIf",(null==n.lstDetails?null:n.lstDetails.length)>0)}}function G(e,t){if(1&e&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&e){var i=t.$implicit;d.Fb(1),d.Gb("colspan",null==i?null:i.length)}}function Z(e,t){1&e&&(d.Yb(0,"tr"),d.Yb(1,"th",37),d.Uc(2,"S.No."),d.Xb(),d.Yb(3,"th",38),d.Uc(4,"MR No"),d.Xb(),d.Yb(5,"th",39),d.Uc(6,"Booking Number"),d.Xb(),d.Yb(7,"th",39),d.Uc(8,"Patient Name"),d.Xb(),d.Yb(9,"th",40),d.Uc(10,"Service"),d.Xb(),d.Yb(11,"th",41),d.Uc(12,"MRP"),d.Xb(),d.Yb(13,"th",41),d.Uc(14,"Dis Amount"),d.Xb(),d.Yb(15,"th",41),d.Uc(16,"Paid"),d.Xb(),d.Yb(17,"th",42),d.Uc(18,"Clear On"),d.Xb(),d.Yb(19,"th",43),d.Uc(20,"TI"),d.Xb(),d.Xb())}function W(e,t){if(1&e){var i=d.Zb();d.Yb(0,"tr"),d.Yb(1,"td",37),d.Uc(2),d.Xb(),d.Yb(3,"td",38),d.Uc(4),d.Xb(),d.Yb(5,"td",39),d.Uc(6),d.Xb(),d.Yb(7,"td",39),d.Uc(8),d.Xb(),d.Yb(9,"td",40),d.Uc(10),d.Xb(),d.Yb(11,"td",41),d.Uc(12),d.Xb(),d.Yb(13,"td",41),d.Uc(14),d.Xb(),d.Yb(15,"td",41),d.Uc(16),d.Xb(),d.Yb(17,"td",42),d.Uc(18),d.nc(19,"date"),d.Xb(),d.Yb(20,"td",43),d.Yb(21,"a",44),d.ic("click",function(){d.Lc(i);var e=t.$implicit;return d.mc().PrintInvoice(e.SlotBookingId,e.InvoiceNumber,e.PhiscalID,e.Division)}),d.Tb(22,"i",45),d.Xb(),d.Xb(),d.Xb()}if(2&e){var n=t.$implicit,l=t.rowIndex,o=d.mc();d.Fb(2),d.Vc(l+1),d.Fb(2),d.Vc(n.MRNo),d.Fb(2),d.Vc(n.BookingNumber),d.Fb(2),d.Vc(n.FullName),d.Fb(2),d.Vc(n.Description),d.Fb(2),d.Vc(n.MRP),d.Fb(2),d.Vc(n.DiscountAmount),d.Fb(2),d.Vc(n.Paid),d.Fb(2),d.Vc(d.pc(19,9,n.BillDate,o.customDateFormat.DEF_DATE))}}function z(e,t){if(1&e&&(d.Yb(0,"tr"),d.Yb(1,"td",46),d.Uc(2,"Total"),d.Xb(),d.Tb(3,"td",38),d.Tb(4,"td",39),d.Tb(5,"td",39),d.Tb(6,"td",40),d.Yb(7,"td",47),d.Uc(8),d.nc(9,"number"),d.Xb(),d.Yb(10,"td",47),d.Uc(11),d.nc(12,"number"),d.Xb(),d.Yb(13,"td",47),d.Uc(14),d.nc(15,"number"),d.Xb(),d.Tb(16,"td",42),d.Tb(17,"td",43),d.Xb()),2&e){var i=d.mc();d.Fb(8),d.Wc("\u20b9 ",d.pc(9,3,i.totalMRP,"1.2-2"),""),d.Fb(3),d.Wc("\u20b9 ",d.pc(12,6,i.totalDiscountAmount,"1.2-2"),""),d.Fb(3),d.Wc("\u20b9 ",d.pc(15,9,i.totalPaidAmount,"1.2-2"),"")}}function Q(e,t){if(1&e&&(d.Yb(0,"div",25),d.Yb(1,"div",1),d.Tb(2,"app-print-profile",48),d.Xb(),d.Xb()),2&e){var i=d.mc();d.Fb(2),d.tc("SlotBookingIdSelected",i.slotBookingId)("InvoiceNumberSelected",i.InvoiceNumberSelected)("PhiscalIdSelected",i.PhiscalIdSelected)("DivisionSelected",i.DivisionSelected)}}var J,$=function(){return["MRNo","BookingNumber","FullName","Description"]},K=function(){return{width:"90vw"}},ee=((J=function(t){e(l,t);var n=i(l);function l(e,t,i,c,r,a){var s;return o(this,l),(s=n.call(this)).router=e,s._ConstantServices=t,s._UtilityService=i,s.datepipe=c,s._ReportServices=r,s._MasterServices=a,s.filteredValuesLength=0,s.lstDetails=[],s.ClinicIdSelected="",s.UserTypeCurre=localStorage.getItem("userTypeId"),s.userTypes=u.s,s.customDateFormat=u.h,s.datesRangeFilter=[],s.MRNo=null,s.totalMRP=0,s.totalDiscountAmount=0,s.totalPaidAmount=0,s.InvoiceNumberSelected=null,s.PhiscalIdSelected=null,s.DivisionSelected=null,s.slotBookingId=null,s.ShowPrintProfileModel=!1,s.lstIAccess=[],s.lstIAccessStr=[],s.ActionList=u.a,s.datesRangeFilter=[new Date,new Date],s.MaxYear=(new Date).getFullYear(),s}return r(l,[{key:"ngOnInit",value:function(){u.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.GetBillClearReport())}},{key:"onSelect",value:function(){null!==this.datesRangeFilter[0]&&null!==this.datesRangeFilter[1]&&(this.calendar.overlayVisible=!1)}},{key:"GetBillClearReport",value:function(){var e,t=this;this.totalMRP=0,this.totalDiscountAmount=0,this.totalPaidAmount=0;var i={};(null===(e=this.datesRangeFilter)||void 0===e?void 0:e.length)>0&&(i.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),i.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd")),i.clinicId=this.ClinicIdSelected,i.createdBy=localStorage.getItem("userId"),i.patientId=this.MRNo,this._UtilityService.showSpinner(),this.unsubscribe.add=this._ReportServices.GetBillClearReport(i).subscribe({next:function(e){var i,n;if(t._UtilityService.hideSpinner(),1==e.actionResult.success){var l=JSON.parse(e.actionResult.result);t.lstDetails=l=l||[],t.filteredValuesLength=null===(i=t.lstDetails)||void 0===i?void 0:i.length,t.filteredValuesLength>0&&(t.totalMRP=t.lstDetails.map(function(e){return e.MRP}).reduce(function(e,t){return e+t}),t.totalDiscountAmount=t.lstDetails.map(function(e){return e.DiscountAmount}).reduce(function(e,t){return e+t}),t.totalPaidAmount=t.lstDetails.map(function(e){return e.Paid}).reduce(function(e,t){return e+t})),void 0!==t.filtr&&(t.filtr.nativeElement.value="",t.dataTable.reset(),t.filteredValuesLength=null===(n=t.lstDetails)||void 0===n?void 0:n.length)}else t.lstDetails=[]},error:function(e){t._UtilityService.hideSpinner(),t._UtilityService.showErrorAlert(e.Message)}})}},{key:"PrintInvoice",value:function(e,t,i,n){this.slotBookingId=e,this.InvoiceNumberSelected=t,this.PhiscalIdSelected=i,this.DivisionSelected=n,this.ShowPrintProfileModel=!0}},{key:"onclinicSelect",value:function(e){this.ClinicIdSelected=e,this.GetBillClearReport()}},{key:"onFilter",value:function(e,t){this.filteredValuesLength=e.filteredValue.length,0==this.filteredValuesLength&&(this.totalMRP=0,this.totalDiscountAmount=0,this.totalPaidAmount=0),this.totalMRP=e.filteredValue.map(function(e){return e.MRP}).reduce(function(e,t){return e+t}),this.totalDiscountAmount=e.filteredValue.map(function(e){return e.DiscountAmount}).reduce(function(e,t){return e+t}),this.totalPaidAmount=e.filteredValue.map(function(e){return e.Paid}).reduce(function(e,t){return e+t})}},{key:"onGlobalFilter",value:function(e,t){e.filterGlobal(t.target.value,"contains")}},{key:"exportToItemExcel",value:function(){var e={reportname:"BillClearReport",filename:"BillClearReport"};e.clinicId=this.ClinicIdSelected,e.isExcel=!0,e.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),e.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd"),this._MasterServices.downloadReport(e)}}]),l}(s.a)).\u0275fac=function(e){return new(e||J)(d.Sb(a.i),d.Sb(u.f),d.Sb(f.a),d.Sb(c.f),d.Sb(p.a),d.Sb(b.a))},J.\u0275cmp=d.Mb({type:J,selectors:[["app-bill-clear-report"]],viewQuery:function(e,t){var i;1&e&&(d.cd(L,1),d.cd(_,1),d.cd(O,1),d.cd(V,1)),2&e&&(d.Hc(i=d.jc())&&(t.dataTable=i.first),d.Hc(i=d.jc())&&(t.filtr=i.first),d.Hc(i=d.jc())&&(t.calendar=i.first),d.Hc(i=d.jc())&&(t.printContent=i.first))},features:[d.Cb],decls:28,vars:20,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-3"],[1,"required"],["selectionMode","range","inputId","icon","name","rangeDates",3,"monthNavigator","yearNavigator","yearRange","ngModel","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],[1,"col-md-2"],[1,"form-label"],["pInputText","","type","text","required","","name","txtBlockName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-2","mt-8"],["type","button","title","Show",1,"btn","btn-new-primary",3,"click"],["dataKey","Category","responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 180px)",1,"ColumnFilterTable",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["header","Print Voucher","appendTo","body",3,"modal","visible","visibleChange"],["class","row",4,"ngIf"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"row"],["class","col-auto",4,"ngIf"],[1,"col-auto","pt-2"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],[1,"col-auto"],[3,"isCenterLabel","ClinicIdSelected","mode","onclinicSelect"],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[2,"width","60px"],[2,"width","150px"],[2,"width","160px"],[2,"width","240px"],[2,"width","130px"],[2,"width","100px"],[1,"hidden-print",2,"width","35px"],["title","Print Voucher",1,"mr-2",3,"click"],["aria-hidden","true",1,"fa","fa-print"],[2,"width","60px","font-weight","bold"],[2,"width","130px","font-weight","bold"],[3,"SlotBookingIdSelected","InvoiceNumberSelected","PhiscalIdSelected","DivisionSelected"]],template:function(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"div",3),d.Yb(4,"div",4),d.Yb(5,"div",5),d.Yb(6,"label"),d.Uc(7,"Bill Date"),d.Xb(),d.Yb(8,"span",6),d.Uc(9,"*"),d.Xb(),d.Yb(10,"p-calendar",7,8),d.ic("ngModelChange",function(e){return t.datesRangeFilter=e})("onSelect",function(){return t.onSelect()}),d.Xb(),d.Xb(),d.Yb(12,"div",9),d.Yb(13,"label",10),d.Uc(14,"Name/MR No."),d.Xb(),d.Yb(15,"input",11),d.ic("ngModelChange",function(e){return t.MRNo=e}),d.Xb(),d.Xb(),d.Yb(16,"div",12),d.Yb(17,"button",13),d.ic("click",function(){return t.GetBillClearReport()}),d.Uc(18," Show "),d.Xb(),d.Xb(),d.Xb(),d.Yb(19,"p-table",14,15),d.ic("onFilter",function(e){d.Lc(i);var n=d.Ic(20);return t.onFilter(e,n)}),d.Sc(21,H,12,3,"ng-template",16),d.Sc(22,G,3,1,"ng-template",17),d.Sc(23,Z,21,0,"ng-template",18),d.Sc(24,W,23,12,"ng-template",19),d.Sc(25,z,18,12,"ng-template",20),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(26,"p-dialog",21),d.ic("visibleChange",function(e){return t.ShowPrintProfileModel=e}),d.Sc(27,Q,3,4,"div",22),d.Xb()}2&e&&(d.Fb(10),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.datesRangeFilter)("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),d.Fb(5),d.tc("ngModel",t.MRNo),d.Fb(4),d.tc("value",t.lstDetails)("rowHover",!0)("globalFilterFields",d.yc(18,$))("scrollable",!0),d.Fb(7),d.Pc(d.yc(19,K)),d.tc("modal",!0)("visible",t.ShowPrintProfileModel),d.Fb(1),d.tc("ngIf",t.ShowPrintProfileModel))},directives:[g.a,C.o,C.r,C.b,y.a,C.w,I.c,F.i,Y.a,c.p,X.a,v.b,P.a],pipes:[c.f,c.g],styles:[""]}),J),te=["calendar"],ie=["calendar2"],ne=["dt"],le=["filtr"];function oe(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",31),d.Yb(1,"div",32),d.Yb(2,"label",33),d.Uc(3,"Center "),d.Yb(4,"span",14),d.Uc(5,"*"),d.Xb(),d.Xb(),d.Xb(),d.Yb(6,"div",34),d.Yb(7,"app-center-dropdown",35),d.ic("onselectedClinic",function(e){return d.Lc(i),d.mc().onselectedClinic(e)}),d.Xb(),d.Xb(),d.Xb()}2&e&&(d.Fb(7),d.tc("isCenterLabel",!1)("mode","get"))}function ce(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",36),d.Yb(1,"button",37),d.ic("click",function(){return d.Lc(i),d.mc().ReflectToBill()}),d.Xb(),d.Xb()}}function re(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",36),d.Yb(1,"button",38),d.ic("click",function(){return d.Lc(i),d.mc().ClearBill()}),d.Xb(),d.Xb()}}function ae(e,t){1&e&&(d.Yb(0,"div",41),d.Yb(1,"label",45),d.Uc(2,"Booking Type "),d.Yb(3,"span",14),d.Uc(4,"*"),d.Xb(),d.Xb(),d.Xb())}var se=function(){return{width:"100%"}},ue=function(){return{standalone:!0}};function de(e,t){if(1&e){var i=d.Zb();d.Yb(0,"p-dropdown",48),d.ic("ngModelChange",function(e){return d.Lc(i),d.mc(3).bookingtype=e})("onChange",function(){return d.Lc(i),d.mc(3).OnChangeBookingType()}),d.Xb()}if(2&e){var n=d.mc(3);d.Pc(d.yc(5,se)),d.tc("options",n.stlstbookingtype)("ngModel",n.bookingtype)("ngModelOptions",d.yc(6,ue))}}function be(e,t){if(1&e&&(d.Yb(0,"div",36),d.Yb(1,"div",46),d.Sc(2,de,1,7,"p-dropdown",47),d.Xb(),d.Xb()),2&e){var i=d.mc(2);d.Fb(2),d.tc("ngIf","ALL"==(null==i.clinicType?null:i.clinicType.toUpperCase()))}}function he(e,t){if(1&e){var i=d.Zb();d.Yb(0,"button",49),d.ic("click",function(){return d.Lc(i),d.mc(2).exportToItemExcel()}),d.Xb()}}function pe(e,t){if(1&e&&(d.Yb(0,"div",39),d.Yb(1,"span",40),d.Yb(2,"div",41),d.Uc(3),d.Xb(),d.Sc(4,ae,5,0,"div",42),d.Sc(5,be,3,1,"div",19),d.Xb(),d.Yb(6,"span",43),d.Sc(7,he,1,0,"button",44),d.Xb(),d.Xb()),2&e){var i=d.mc();d.Fb(3),d.Wc(" ",(null==i.lstReport?null:i.lstReport.length)>0?"Total Records: "+i.TotalRecords:"",""),d.Fb(1),d.tc("ngIf","ALL"==(null==i.clinicType?null:i.clinicType.toUpperCase())),d.Fb(1),d.tc("ngIf","ALL"==(null==i.clinicType?null:i.clinicType.toUpperCase())),d.Fb(2),d.tc("ngIf",(null==i.lstReport?null:i.lstReport.length)>0)}}function fe(e,t){1&e&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&e&&(d.Fb(1),d.Gb("colspan",2))}function me(e,t){1&e&&d.Tb(0,"col",50)}function ve(e,t){if(1&e&&(d.Yb(0,"colgroup"),d.Tb(1,"col",50),d.Tb(2,"col",51),d.Tb(3,"col",50),d.Tb(4,"col",50),d.Tb(5,"col",52),d.Tb(6,"col",53),d.Tb(7,"col",54),d.Tb(8,"col",54),d.Tb(9,"col",54),d.Tb(10,"col",53),d.Sc(11,me,1,0,"col",55),d.Tb(12,"col",50),d.Xb()),2&e){var i=d.mc();d.Fb(11),d.tc("ngIf","OPD"==i.bookingtype)}}function ge(e,t){if(1&e){var i=d.Zb();d.Yb(0,"i",59),d.ic("click",function(){return d.Lc(i),d.mc(2).sortTable(1)}),d.Xb()}}function Ce(e,t){if(1&e){var i=d.Zb();d.Yb(0,"i",60),d.ic("click",function(){return d.Lc(i),d.mc(2).sortTable(1)}),d.Xb()}}function ye(e,t){if(1&e){var i=d.Zb();d.Yb(0,"i",59),d.ic("click",function(){return d.Lc(i),d.mc(2).sortTable(1)}),d.Xb()}}function Se(e,t){if(1&e){var i=d.Zb();d.Yb(0,"i",61),d.ic("click",function(){return d.Lc(i),d.mc(2).sortTable(-1)}),d.Xb()}}function Ie(e,t){1&e&&(d.Yb(0,"th"),d.Uc(1," User Name "),d.Xb())}function Fe(e,t){if(1&e&&(d.Yb(0,"tr"),d.Yb(1,"th"),d.Uc(2,"MR No"),d.Xb(),d.Yb(3,"th"),d.Uc(4,"Booking Number"),d.Xb(),d.Yb(5,"th"),d.Uc(6,"Patient Name"),d.Xb(),d.Yb(7,"th"),d.Uc(8,"Invoice Number"),d.Xb(),d.Yb(9,"th"),d.Uc(10,"Booking For"),d.Xb(),d.Yb(11,"th"),d.Uc(12,"Net Payable"),d.Xb(),d.Yb(13,"th"),d.Uc(14,"Due Amount "),d.Sc(15,ge,1,0,"i",56),d.Sc(16,Ce,1,0,"i",57),d.Sc(17,ye,1,0,"i",56),d.Sc(18,Se,1,0,"i",58),d.Xb(),d.Yb(19,"th"),d.Uc(20,"Acc. Balance"),d.Xb(),d.Yb(21,"th"),d.Uc(22,"Clear Amount"),d.Xb(),d.Yb(23,"th"),d.Uc(24,"Paid Amount"),d.Xb(),d.Sc(25,Ie,2,0,"th",29),d.Yb(26,"th"),d.Yb(27,"p-tableHeaderCheckbox"),d.Uc(28,"Action"),d.Xb(),d.Xb(),d.Xb()),2&e){var i=d.mc();d.Fb(15),d.tc("ngIf",0==i.sortOrder),d.Fb(1),d.tc("ngIf",0==i.sortOrder),d.Fb(1),d.tc("ngIf",-1==i.sortOrder),d.Fb(1),d.tc("ngIf",1==i.sortOrder),d.Fb(7),d.tc("ngIf","OPD"==i.bookingtype)}}function Ye(e,t){if(1&e&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&e){var i=d.mc().$implicit;d.Fb(1),d.Wc(" ",i.CreatedBy,"")}}function Xe(e,t){if(1&e&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2),d.Xb(),d.Yb(3,"td"),d.Uc(4),d.Xb(),d.Yb(5,"td"),d.Uc(6),d.Xb(),d.Yb(7,"td"),d.Uc(8),d.Xb(),d.Yb(9,"td"),d.Uc(10),d.nc(11,"date"),d.Xb(),d.Yb(12,"td"),d.Uc(13),d.nc(14,"number"),d.Xb(),d.Yb(15,"td"),d.Uc(16),d.nc(17,"number"),d.Xb(),d.Yb(18,"td"),d.Uc(19),d.nc(20,"number"),d.Xb(),d.Yb(21,"td"),d.Yb(22,"p-inputNumber",62),d.ic("ngModelChange",function(e){return t.$implicit.ClearBillAmount=e}),d.Xb(),d.Xb(),d.Yb(23,"td"),d.Uc(24),d.nc(25,"number"),d.Xb(),d.Sc(26,Ye,2,1,"td",29),d.Yb(27,"td"),d.Yb(28,"div",63),d.Tb(29,"p-tableCheckbox",64),d.Xb(),d.Xb(),d.Xb()),2&e){var i=t.$implicit,n=t.rowIndex,l=d.mc();d.Fb(2),d.Vc(i.MRNo),d.Fb(2),d.Vc(i.BookingNumber),d.Fb(2),d.Vc(i.PatientName),d.Fb(2),d.Vc(i.InvoiceNumber),d.Fb(2),d.Wc("",d.pc(11,19,i.BookingFor,l.customDateFormat.DEF_DATE)," "),d.Fb(3),d.Vc(d.pc(14,22,i.NetPayble,"1.1-2")),d.Fb(3),d.Vc(d.pc(17,25,i.DueAmount,"1.1-2")),d.Fb(3),d.Vc(d.pc(20,28,i.AccBalance,"1.1-2")),d.Fb(3),d.Pc(d.yc(34,se)),d.vc("name","txtClearBillAmount_",n,""),d.tc("disabled",null==l.BillClChequeAmount||null==l.BillClChequeAmount||0==l.BillClChequeAmount)("ngModel",i.ClearBillAmount)("min",0)("max",i.DueAmount),d.Fb(2),d.Vc(d.pc(25,31,i.NetPayble-i.DueAmount,"1.1-2")),d.Fb(2),d.tc("ngIf","OPD"==l.bookingtype),d.Fb(3),d.tc("value",i)("disabled",i.DueAmount<=0)}}function we(e,t){1&e&&(d.Yb(0,"div"),d.Tb(1,"app-cheque-details-report"),d.Xb())}function Re(e,t){1&e&&(d.Yb(0,"div"),d.Tb(1,"app-bill-clear-report"),d.Xb())}var De,Te,Ae,ke,Ue,Me,Be,xe=function(){return["BookingNumber","PaitentName","BookingOn"]},Ne=function(){return{width:"90vw"}},qe=[{path:"",component:(De=function(t){e(l,t);var n=i(l);function l(e,t,i,c,r,a,s,d){var b;return o(this,l),(b=n.call(this)).cdRef=e,b.router=t,b.datepipe=i,b._ConstantServices=c,b._MasterServices=r,b._PatientServices=a,b._ReportServices=s,b._UtilityService=d,b.UserTypeCurre=localStorage.getItem("userTypeId"),b.userTypes=u.s,b.ClinicIdSelected=null,b.lstReport=[],b.lstReportSelection=[],b.first=0,b.rows=0,b.TotalDueAmount=0,b.filteredValuesLength=0,b.SearchBookingNumber=null,b.SearchMRNumber=null,b.SearchName=null,b.lstRoomTypeMaster=[],b.maxYear=(new Date).getFullYear()+2,b.customDateFormat=u.h,b.bookingtype=null,b.clinicType=null,b.stlstbookingtype=[],b.sortOrder=0,b.SelectedSlotBookingId=null,b.SelectedPatientId=null,b.lstIAccess=[],b.lstIAccessStr=[],b.ActionList=u.a,b.SelectedRows=10,b.BillClChequeNumber=null,b.BillClChequeAmount=0,b.datesRangeFilter=[],b.bkfordatesRangeFilter=null,b.today=new Date,b.CapturedRow={},b.ChequeDetails={},b.selectAllItem=!1,b.IsChequeUsed=!1,b.ShowChequeModel=!1,b.ShowBillClearModel=!1,b.lstUserType=[],b._ConstantServices.ActiveMenuName="Credit Settlement",u.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(b.ClinicIdSelected=localStorage.getItem("ClinicId")),b.getPageLevelAccess(),b.datesRangeFilter=[new Date,new Date],b.MaxYear=b.today.getFullYear(),b.lstUserType.push({code:"0",value:"All"}),b.lstUserType.push({code:"1",value:"Patient"}),b.lstUserType.push({code:"2",value:"Visitor"}),b}return r(l,[{key:"getPageLevelAccess",value:function(){var e,t,i=this,n=this.router.url,l=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==l?void 0:l.find(function(e){return e.MenuItemURL===n}))&&(this.lstIAccess=null===(e=l.find(function(e){return e.MenuItemURL===n}))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(function(e){i.lstIAccessStr.push(e.ActionId.toString())}))}},{key:"ngOnInit",value:function(){this.LoadCreditSettlementReport(0,this.SelectedRows)}},{key:"onselectedClinic",value:function(e){u.s.SuperAdmin===localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=e.ClinicId)}},{key:"OnChangeBookingType",value:function(){this.LoadCreditSettlementReport(0,this.SelectedRows)}},{key:"dateRangeChange",value:function(){null!=this.bkfordatesRangeFilter&&null!=this.bkfordatesRangeFilter&&null!==this.bkfordatesRangeFilter[0]&&null!==this.bkfordatesRangeFilter[1]&&(this.calendar2.overlayVisible=!1,this.LoadCreditSettlementReport(0,this.SelectedRows))}},{key:"loadPatientList",value:function(e){this.lstReport&&this.LoadCreditSettlementReport(e.first,e.rows)}},{key:"LoadCreditSettlementReport",value:function(e,t){var i=this;this.first=parseInt(e),this.rows=parseInt(t);var n={};n.clinicId=this.ClinicIdSelected,n.bookingType=this.bookingtype,n.first=e.toString(),n.rows=t.toString(),n.IsSkipPaging=!1,n.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),n.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd"),this.TotalDueAmount=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._ReportServices.GetCreditSettlementReport(n).subscribe({next:function(e){if(i._UtilityService.hideSpinner(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);i.lstReport=t=t||[],i.lstReport.map(function(e){i.TotalDueAmount=i.TotalDueAmount+e.DueAmount}),i.TotalRecords=JSON.parse(e.actionResult.result2),i.sortOrder=0}else i.TotalRecords=0,i.TotalDueAmount=0,i.lstReport=[],i.lstReportSelection=[]},error:function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.Message)}})}},{key:"sortTable",value:function(e){this.sortOrder=e,-1==e?this.lstReport.sort(function(e,t){return e.DueAmount<t.DueAmount?1:e.DueAmount>t.DueAmount?-1:0}):1==e&&this.lstReport.sort(function(e,t){return e.DueAmount<t.DueAmount?-1:e.DueAmount>t.DueAmount?1:0})}},{key:"ClearFilter",value:function(){this.SearchBookingNumber=null,this.SearchName=null,this.SearchBookingForDate=null,this.bkfordatesRangeFilter=null,this.LoadCreditSettlementReport(0,this.SelectedRows)}},{key:"onSelect",value:function(){null!==this.datesRangeFilter[0]&&null!==this.datesRangeFilter[1]&&(this.calendar.overlayVisible=!1,this.LoadCreditSettlementReport(0,this.SelectedRows))}},{key:"ClearBill",value:function(){var e,t,i,n,l,o,c,r=this;if(0!=(null===(e=this.datesRangeFilter)||void 0===e?void 0:e.length))if(null!=this.BillClChequeNumber&&null!=this.BillClChequeNumber&&""!=this.BillClChequeNumber&&0!=this.BillClChequeNumber.trim().length)if(null!=(null===(t=this.ChequeDetails)||void 0===t?void 0:t.Amount)&&null!=(null===(i=this.ChequeDetails)||void 0===i?void 0:i.Amount)&&0!=(null===(n=this.ChequeDetails)||void 0===n?void 0:n.Amount))if(0!=(null===(l=this.lstReportSelection)||void 0===l?void 0:l.length)&&null!=this.lstReportSelection)if((null===(o=this.lstReportSelection.filter(function(e){return e.ClearBillAmount!=e.DueAmount}))||void 0===o?void 0:o.length)>0)this._UtilityService.showWarningAlert("Insufficient amount to settle the due balance.");else{var a={};a.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),a.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd"),a.ChequeNumber=this.BillClChequeNumber,a.ChequeAmount=null===(c=this.ChequeDetails)||void 0===c?void 0:c.Amount,a.lstBillitemCRSET=this.lstReportSelection.filter(function(e){return e.ClearBillAmount>0&&e.DueAmount-e.ClearBillAmount==0}),a.clinicId=this.ClinicIdSelected,a.createdBy=localStorage.getItem("userId"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.ClearPendingBill(a).subscribe({next:function(e){r._UtilityService.hideSpinner(),1==e.actionResult.success?(r._UtilityService.showSuccessAlert(e.actionResult.errMsg),r.BillClChequeNumber=null,r.BillClChequeAmount=0,r.ChequeDetails={},r.LoadCreditSettlementReport(0,r.SelectedRows),r.lstReportSelection=[]):(r._UtilityService.showWarningAlert(e.actionResult.errMsg),r.lstReportSelection=[])},error:function(e){r._UtilityService.hideSpinner(),r._UtilityService.showErrorAlert(e.Message)}})}else this._UtilityService.showWarningAlert("Please Check Some Slot and clear Bill");else this._UtilityService.showWarningAlert("Please Enter Cheque Amount");else this._UtilityService.showWarningAlert("Please Enter Cheque Number");else this._UtilityService.showWarningAlert("Please select Bill Date Range")}},{key:"ReflectToBill",value:function(){var e;if(null!=this.BillClChequeAmount&&null!=this.BillClChequeAmount&&0!=this.BillClChequeAmount){var t=this.BillClChequeAmount;this.lstReport.map(function(e){return e.ClearBillAmount=0});for(var i=0;i<(null===(e=this.lstReport)||void 0===e?void 0:e.length);i++)this._ConstantServices.nullToZeroConverter(this.lstReport[i].DueAmount)>0&&t>=this._ConstantServices.nullToZeroConverter(this.lstReport[i].DueAmount)&&0==this._ConstantServices.nullToZeroConverter(this.lstReport[i].ClearBillAmount)?(t-=this.lstReport[i].DueAmount,this.lstReport[i].ClearBillAmount=this.lstReport[i].DueAmount):this.lstReport[i].ClearBillAmount=0;this.lstReport.some(function(e){return 0==e.ClearBillAmount})&&this._UtilityService.showWarningAlert("Insufficient amount to settle the outstanding due balance."),this.BillClChequeAmount=t}else this._UtilityService.showWarningAlert("Please Enter Cheque Amount")}},{key:"CheckChequeNumber",value:function(){var e=this;null==this.BillClChequeNumber||null==this.BillClChequeNumber||""==this.BillClChequeNumber||0==this.BillClChequeNumber.trim().length||(this.ChequeDetails.ChequeNumber=this.BillClChequeNumber,this.IsChequeUsed=!1,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.CheckChequeDetails(this.ClinicIdSelected,this.BillClChequeNumber).subscribe({next:function(t){if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.BillClChequeAmount=e._ConstantServices.nullToZeroConverter(null==(i=i||[])?void 0:i.ChequeBalance),e.ChequeDetails.Amount=e._ConstantServices.nullToZeroConverter(null==i?void 0:i.ChequeBalance),e.ChequeDetails.ChequeNumber=null==i?void 0:i.ChequeNumber,e.IsChequeUsed=!0}else e.BillClChequeAmount=0},error:function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.Message)}}))}},{key:"CaptureChequeAmount",value:function(){this.ChequeDetails.Amount=this.BillClChequeAmount}},{key:"getSelectAllItem",value:function(){var e,t;if(1==this.selectAllItem)for(var i=0;i<(null===(e=this.lstReport)||void 0===e?void 0:e.length);i++)this.lstReport[i].DueAmount>0&&(this.lstReport[i].Checked=!0);else for(i=0;i<(null===(t=this.lstReport)||void 0===t?void 0:t.length);i++)this.lstReport[i].IsChecked=!1}},{key:"onFilter",value:function(e,t){this.filteredValuesLength=e.filteredValue.length}},{key:"exportToItemExcel",value:function(){var e={reportname:"CreditSettlementReport"};e.filename=this._ConstantServices.ActiveMenuName,e.clinicId=this.ClinicIdSelected,e.first="0",e.rows="10",e.IsSkipPaging=!0,e.isExcel=!0,e.bookingType=this.bookingtype,e.dFrom=this.datepipe.transform(new Date(this.datesRangeFilter[0]),"yyyy-MM-dd"),e.dTo=this.datepipe.transform(new Date(this.datesRangeFilter[1]),"yyyy-MM-dd"),this._MasterServices.downloadReport(e)}}]),l}(s.a),De.\u0275fac=function(e){return new(e||De)(d.Sb(d.h),d.Sb(a.i),d.Sb(c.f),d.Sb(u.f),d.Sb(b.a),d.Sb(h.a),d.Sb(p.a),d.Sb(f.a))},De.\u0275cmp=d.Mb({type:De,selectors:[["app-credit-settlement"]],viewQuery:function(e,t){var i;1&e&&(d.cd(te,1),d.cd(ie,1),d.cd(ne,1),d.cd(le,1)),2&e&&(d.Hc(i=d.jc())&&(t.calendar=i.first),d.Hc(i=d.jc())&&(t.calendar2=i.first),d.Hc(i=d.jc())&&(t.dataTable=i.first),d.Hc(i=d.jc())&&(t.filtr=i.first))},features:[d.Cb],decls:53,vars:50,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["class","row mb-2",4,"ngIf"],[1,"row","mb-5"],["activeIndex","-1"],["header","Bill Clear Details",3,"selected"],[1,"row"],[1,"col-md-4"],["align","right",1,"col-md-4"],["pButton","","type","button","title","Used Cheque Details","label","Used Cheque Details",1,"mr-2",3,"click"],[1,"row","mt-2"],[1,"form-group","pos-rel","col-md-4"],[1,"required"],["appendTo","body","selectionMode","range","inputId","icon",3,"monthNavigator","yearNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],["type","text","name","txtChequeNumber","pInputText","",3,"ngModel","ngModelChange","change"],["name","txtChequeAmount","mode","decimal",3,"disabled","ngModel","min","maxlength","ngModelChange","onBlur"],["class","col-auto",4,"ngIf"],[1,"filter-box","mt-3"],["styleClass","p-datatable-striped","scrollHeight","calc(100vh - 300px)","responsiveLayout","scroll",1,"ColumnFilterTable",3,"value","lazy","rowHover","selection","lazyLoadOnInit","globalFilterFields","scrollable","paginator","rows","totalRecords","first","selectionChange","onLazyLoad","firstChange"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["header","Used Cheque Details",3,"modal","visible","visibleChange"],[4,"ngIf"],["header","Bill Clear Report",3,"modal","visible","visibleChange"],[1,"row","mb-2"],[1,"col-auto","pr-0"],["for","",1,"pt-2"],[1,"col-md-3"],[3,"isCenterLabel","mode","onselectedClinic"],[1,"col-auto"],["pButton","","type","button","title","Reflect To Bill","label","Reflect To Bill",1,"mr-2",3,"click"],["pButton","","type","button","title","Clear Bill","label","Clear Bill",1,"mr-2",3,"click"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"col-auto","mt-2"],["class","col-auto mt-2",4,"ngIf"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],["for",""],[1,"form-group","mb-0"],["optionLabel","name","optionValue","code",3,"options","ngModel","ngModelOptions","style","ngModelChange","onChange",4,"ngIf"],["optionLabel","name","optionValue","code",3,"options","ngModel","ngModelOptions","ngModelChange","onChange"],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[2,"width","150px"],[2,"width","170px"],[2,"width","250px"],[2,"width","100px"],[2,"width","140px"],["style","width:150px",4,"ngIf"],["class","pi pi-arrow-down ml-1",3,"click",4,"ngIf"],["class","pi pi pi-arrow-up",3,"click",4,"ngIf"],["class","pi pi-arrow-up ml-1",3,"click",4,"ngIf"],[1,"pi","pi-arrow-down","ml-1",3,"click"],[1,"pi","pi","pi-arrow-up",3,"click"],[1,"pi","pi-arrow-up","ml-1",3,"click"],["mode","decimal",3,"name","disabled","ngModel","min","max","ngModelChange"],[1,"field-checkbox","mt-3"],[3,"value","disabled"]],template:function(e,t){1&e&&(d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"div",3),d.Sc(4,oe,8,2,"div",4),d.Yb(5,"div",5),d.Yb(6,"div",1),d.Yb(7,"p-accordion",6),d.Yb(8,"p-accordionTab",7),d.Yb(9,"div",8),d.Yb(10,"div",9),d.Yb(11,"label"),d.Uc(12),d.Xb(),d.Xb(),d.Tb(13,"div",9),d.Yb(14,"div",10),d.Yb(15,"button",11),d.ic("click",function(){return t.ShowChequeModel=!0}),d.Xb(),d.Xb(),d.Xb(),d.Yb(16,"div",12),d.Yb(17,"div",13),d.Yb(18,"label"),d.Uc(19,"Bill Date"),d.Xb(),d.Yb(20,"span",14),d.Uc(21,"*"),d.Xb(),d.Yb(22,"p-calendar",15,16),d.ic("ngModelChange",function(e){return t.datesRangeFilter=e})("onSelect",function(){return t.onSelect()}),d.Xb(),d.Xb(),d.Yb(24,"div",13),d.Yb(25,"label"),d.Uc(26,"Cheque Number"),d.Xb(),d.Yb(27,"span",14),d.Uc(28,"*"),d.Xb(),d.Yb(29,"input",17),d.ic("ngModelChange",function(e){return t.BillClChequeNumber=e})("change",function(){return t.CheckChequeNumber()}),d.Xb(),d.Xb(),d.Yb(30,"div",13),d.Yb(31,"label"),d.Uc(32,"Cheque Amount"),d.Xb(),d.Yb(33,"span",14),d.Uc(34,"*"),d.Xb(),d.Yb(35,"p-inputNumber",18),d.ic("ngModelChange",function(e){return t.BillClChequeAmount=e})("onBlur",function(){return t.CaptureChequeAmount()}),d.Xb(),d.Xb(),d.Xb(),d.Yb(36,"div",12),d.Sc(37,ce,2,0,"div",19),d.Sc(38,re,2,0,"div",19),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(39,"div",8),d.Yb(40,"div",1),d.Yb(41,"div",20),d.Yb(42,"p-table",21,22),d.ic("selectionChange",function(e){return t.lstReportSelection=e})("onLazyLoad",function(e){return t.loadPatientList(e)})("firstChange",function(e){return t.first=e}),d.Sc(44,pe,8,4,"ng-template",23),d.Sc(45,fe,3,1,"ng-template",24),d.Sc(46,ve,13,1,"ng-template",25),d.Sc(47,Fe,29,5,"ng-template",26),d.Sc(48,Xe,30,35,"ng-template",27),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(49,"p-dialog",28),d.ic("visibleChange",function(e){return t.ShowChequeModel=e}),d.Sc(50,we,2,0,"div",29),d.Xb(),d.Yb(51,"p-dialog",30),d.ic("visibleChange",function(e){return t.ShowBillClearModel=e}),d.Sc(52,Re,2,0,"div",29),d.Xb()),2&e&&(d.Fb(4),d.tc("ngIf",t.UserTypeCurre===t.userTypes.SuperAdmin),d.Fb(4),d.tc("selected",!0),d.Fb(4),d.Wc("Total Due : ",t.TotalDueAmount,""),d.Fb(10),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.datesRangeFilter)("ngModelOptions",d.yc(44,ue))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),d.Fb(7),d.Pc(d.yc(45,se)),d.tc("ngModel",t.BillClChequeNumber),d.Fb(6),d.Pc(d.yc(46,se)),d.tc("disabled",null==t.BillClChequeNumber||null==t.BillClChequeNumber||""==t.BillClChequeNumber||0==t.BillClChequeNumber.trim().length||t.IsChequeUsed)("ngModel",t.BillClChequeAmount)("min",0)("maxlength",20),d.Fb(2),d.tc("ngIf",(null==t.ChequeDetails?null:t.ChequeDetails.Amount)>0),d.Fb(1),d.tc("ngIf",(null==t.ChequeDetails?null:t.ChequeDetails.Amount)>0),d.Fb(4),d.tc("value",t.lstReport)("lazy",!0)("rowHover",!0)("selection",t.lstReportSelection)("lazyLoadOnInit",!1)("globalFilterFields",d.yc(47,xe))("scrollable",!0)("paginator",!0)("rows",t.SelectedRows)("totalRecords",t.TotalRecords)("first",t.first),d.Fb(7),d.Pc(d.yc(48,Ne)),d.tc("modal",!0)("visible",t.ShowChequeModel),d.Fb(1),d.tc("ngIf",t.ShowChequeModel),d.Fb(1),d.Pc(d.yc(49,Ne)),d.tc("modal",!0)("visible",t.ShowBillClearModel),d.Fb(1),d.tc("ngIf",t.ShowBillClearModel))},directives:[c.p,m.a,m.c,v.b,g.a,C.o,C.r,C.b,y.a,S.a,C.j,I.c,F.i,Y.a,X.a,w.a,I.e,I.d,q,ee],pipes:[c.f,c.g],styles:[""]}),De)}],Pe=((Te=function e(){o(this,e)}).\u0275fac=function(e){return new(e||Te)},Te.\u0275mod=d.Qb({type:Te}),Te.\u0275inj=d.Pb({imports:[[a.l.forChild(qe)],a.l]}),Te),Le=l("LuMj"),_e=l("Ji6n"),Oe=l("T2Aj"),Ve=[],je=((Ae=function e(){o(this,e)}).\u0275fac=function(e){return new(e||Ae)},Ae.\u0275mod=d.Qb({type:Ae}),Ae.\u0275inj=d.Pb({imports:[[a.l.forChild(Ve)],a.l]}),Ae),Ee=l("Gxio"),He=((ke=function e(){o(this,e)}).\u0275fac=function(e){return new(e||ke)},ke.\u0275mod=d.Qb({type:ke}),ke.\u0275inj=d.Pb({imports:[[c.c,je,C.i,Ee.b,I.f,w.b,y.b,v.c,g.b,Oe.a]]}),ke),Ge=[],Ze=((Ue=function e(){o(this,e)}).\u0275fac=function(e){return new(e||Ue)},Ue.\u0275mod=d.Qb({type:Ue}),Ue.\u0275inj=d.Pb({imports:[[a.l.forChild(Ge)],a.l]}),Ue),We=l("QbTu"),ze=((Be=function e(){o(this,e)}).\u0275fac=function(e){return new(e||Be)},Be.\u0275mod=d.Qb({type:Be}),Be.\u0275inj=d.Pb({imports:[[c.c,Ze,C.i,Ee.b,I.f,w.b,y.b,v.c,g.b,Oe.a,Y.b,We.a,Le.b]]}),Be),Qe=((Me=function e(){o(this,e)}).\u0275fac=function(e){return new(e||Me)},Me.\u0275mod=d.Qb({type:Me}),Me.\u0275inj=d.Pb({imports:[[c.c,Pe,C.i,I.f,v.c,w.b,y.b,Le.b,g.b,_e.b,S.b,Y.b,m.b,Oe.a,He,ze]]}),Me)}}])}();