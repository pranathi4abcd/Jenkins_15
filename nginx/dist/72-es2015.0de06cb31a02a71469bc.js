(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{zBgB:function(t,e,i){"use strict";i.r(e),i.d(e,"LeaveApplicationModule",function(){return R});var c=i("ofXK"),o=i("tyNb"),n=i("Nach"),a=i("CwUn"),l=i("fXoL"),s=i("ReGW"),r=i("NLkC"),p=i("rEr+"),b=i("7zfz"),d=i("jIHw"),u=i("7kUa"),v=i("3Pt+"),h=i("eO1q");function m(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",12),l.Yb(1,"button",13),l.ic("click",function(){return l.Lc(t),l.mc(2).AddNewLeave()}),l.Xb(),l.Yb(2,"span",14),l.Tb(3,"i",15),l.Yb(4,"input",16),l.ic("input",function(e){return l.Lc(t),l.mc(),l.Ic(5).filterGlobal(e.target.value,"contains")}),l.Xb(),l.Xb(),l.Xb()}}function L(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"td"),l.Uc(2," No records found "),l.Xb(),l.Xb()),2&t){const t=e.$implicit;l.Fb(1),l.Gb("colspan",null==t?null:t.length)}}function A(t,e){1&t&&(l.Yb(0,"colgroup"),l.Tb(1,"col",17),l.Tb(2,"col",17),l.Tb(3,"col",17),l.Tb(4,"col",18),l.Tb(5,"col",18),l.Tb(6,"col",18),l.Tb(7,"col",19),l.Xb())}function f(t,e){1&t&&(l.Yb(0,"tr"),l.Yb(1,"th"),l.Uc(2,"Action"),l.Xb(),l.Yb(3,"th"),l.Uc(4,"Leave From"),l.Xb(),l.Yb(5,"th"),l.Uc(6,"Leave Upto"),l.Xb(),l.Yb(7,"th"),l.Uc(8,"Applied On"),l.Xb(),l.Yb(9,"th"),l.Uc(10,"Approved On"),l.Xb(),l.Yb(11,"th"),l.Uc(12,"Approved By"),l.Xb(),l.Yb(13,"th"),l.Uc(14,"Application Status"),l.Xb(),l.Xb())}function S(t,e){if(1&t){const t=l.Zb();l.Yb(0,"a",23),l.ic("click",function(){l.Lc(t);const e=l.mc().$implicit;return l.mc(2).CancelApplication(e.LeaveId)}),l.Tb(1,"img",24),l.Xb()}}function g(t,e){if(1&t){const t=l.Zb();l.Yb(0,"tr"),l.Yb(1,"td"),l.Yb(2,"a",20),l.ic("click",function(){l.Lc(t);const i=e.$implicit;return l.mc(2).LoadApplicationId(i.LeaveId)}),l.Tb(3,"img",21),l.Xb(),l.Sc(4,S,2,0,"a",22),l.Xb(),l.Yb(5,"td"),l.Uc(6),l.nc(7,"date"),l.Xb(),l.Yb(8,"td"),l.Uc(9),l.nc(10,"date"),l.Xb(),l.Yb(11,"td"),l.Uc(12),l.nc(13,"date"),l.Xb(),l.Yb(14,"td"),l.Uc(15),l.nc(16,"date"),l.Xb(),l.Yb(17,"td"),l.Uc(18),l.Xb(),l.Yb(19,"td"),l.Uc(20),l.Xb(),l.Xb()}if(2&t){const t=e.$implicit,i=l.mc(2);l.Fb(4),l.tc("ngIf","Pending"==t.ApprovalStatus),l.Fb(2),l.Vc(l.pc(7,7,t.LeaveFrom,i.customDateFormat.DEF_DATE)),l.Fb(3),l.Vc(l.pc(10,10,t.LeaveUpto,i.customDateFormat.DEF_DATE)),l.Fb(3),l.Vc(l.pc(13,13,t.AppliedOn,i.customDateFormat.DEF_DATE)),l.Fb(3),l.Vc(l.pc(16,16,t.ApprovedOn,i.customDateFormat.DEF_DATE)),l.Fb(3),l.Vc(t.ApprovedByName),l.Fb(2),l.Vc(t.ApprovalStatus)}}const y=function(){return["LeaveFrom","LeaveUpto","AppliedOn","ApprovedOn","ApprovedByName","ApprovalStatus"]};function D(t,e){if(1&t&&(l.Yb(0,"div",1),l.Yb(1,"div",2),l.Yb(2,"div",3),l.Yb(3,"div",4),l.Yb(4,"p-table",5,6),l.Sc(6,m,5,0,"ng-template",7),l.Sc(7,L,3,1,"ng-template",8),l.Sc(8,A,8,0,"ng-template",9),l.Sc(9,f,15,0,"ng-template",10),l.Sc(10,g,21,19,"ng-template",11),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()),2&t){const t=l.mc();l.Fb(4),l.tc("value",t.LstDoctorLeaveApplication)("rowHover",!0)("globalFilterFields",l.yc(4,y))("scrollable",!0)}}function U(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",34),l.Yb(1,"label"),l.Uc(2,"Cancel Reason"),l.Xb(),l.Yb(3,"span",30),l.Uc(4,"*"),l.Xb(),l.Yb(5,"textarea",41),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc(2).DoctorLeaveApplication.CancelReason=e}),l.Xb(),l.Xb()}if(2&t){const t=l.mc(2);l.Fb(5),l.tc("ngModel",t.DoctorLeaveApplication.CancelReason)}}function X(t,e){if(1&t){const t=l.Zb();l.Yb(0,"button",42),l.ic("click",function(){return l.Lc(t),l.mc(2).SaveApplication()}),l.Uc(1,"Save"),l.Xb()}if(2&t){l.mc();const t=l.Ic(5);l.tc("disabled",!t.form.valid)}}function Y(t,e){if(1&t){const t=l.Zb();l.Yb(0,"button",43),l.ic("click",function(){return l.Lc(t),l.mc(2).CancelApplicationSubmit()}),l.Uc(1,"Cancel Application"),l.Xb()}if(2&t){l.mc();const t=l.Ic(5);l.tc("disabled",!t.form.valid)}}const w=function(){return{standalone:!0}};function F(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",1),l.Yb(1,"div",25),l.Yb(2,"div",3),l.Yb(3,"div",4),l.Yb(4,"form",null,26),l.Yb(6,"div",27),l.Yb(7,"div",28),l.Yb(8,"div",29),l.Yb(9,"label"),l.Uc(10,"Leave From"),l.Xb(),l.Yb(11,"span",30),l.Uc(12,"*"),l.Xb(),l.Yb(13,"div"),l.Yb(14,"p-calendar",31,32),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().DoctorLeaveApplication.LeaveFrom=e})("onClose",function(){return l.Lc(t),l.mc().calculateDiff()}),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(16,"div",28),l.Yb(17,"div",29),l.Yb(18,"label"),l.Uc(19,"Leave Upto"),l.Xb(),l.Yb(20,"span",30),l.Uc(21,"*"),l.Xb(),l.Yb(22,"div"),l.Yb(23,"p-calendar",31,33),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().DoctorLeaveApplication.LeaveUpto=e})("onClose",function(){return l.Lc(t),l.mc().calculateDiff()}),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(25,"div",34),l.Yb(26,"div",29),l.Yb(27,"label"),l.Uc(28,"Reason"),l.Xb(),l.Yb(29,"span",30),l.Uc(30,"*"),l.Xb(),l.Yb(31,"textarea",35),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().DoctorLeaveApplication.LeaveReason=e}),l.Xb(),l.Xb(),l.Xb(),l.Sc(32,U,6,1,"div",36),l.Xb(),l.Yb(33,"div",37),l.Sc(34,X,2,1,"button",38),l.Sc(35,Y,2,1,"button",39),l.Yb(36,"button",40),l.ic("click",function(){return l.Lc(t),l.mc().CloseModal()}),l.Uc(37,"Close"),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=l.mc();l.Fb(14),l.tc("minDate",t.today)("ngModel",t.DoctorLeaveApplication.LeaveFrom)("ngModelOptions",l.yc(16,w))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1),l.Fb(9),l.tc("minDate",t.maxUpto)("ngModel",t.DoctorLeaveApplication.LeaveUpto)("ngModelOptions",l.yc(17,w))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1),l.Fb(8),l.tc("ngModel",t.DoctorLeaveApplication.LeaveReason),l.Fb(1),l.tc("ngIf","Cancel"==t.LeaveMode),l.Fb(2),l.tc("ngIf","Cancel"!=t.LeaveMode&&"Pending"===t.DoctorLeaveApplication.ApprovalStatus),l.Fb(1),l.tc("ngIf","Cancel"==t.LeaveMode&&"Pending"===t.DoctorLeaveApplication.ApprovalStatus)}}const C=[{path:"",component:(()=>{class t extends a.a{constructor(t,e,i,c){super(),this.cdRef=t,this._ConstantServices=e,this._DoctorServices=i,this._UtilityService=c,this.customDateFormat=n.h,this.LeaveMode=null,this.LstDoctorLeaveApplication=[],this.DoctorLeaveApplication={},this.today=new Date,this.maxFrom=new Date,this.maxUpto=new Date}ngOnInit(){this._ConstantServices.ActiveMenuName="Leave Application",this.LoadApplicationList()}LoadApplicationList(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetLeaveApplicationByUserId(localStorage.getItem("userId")).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){this._UtilityService.hideSpinner();var e=JSON.parse(t.actionResult.result);this.LstDoctorLeaveApplication=e=e||[],this.LeaveMode=null,this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadApplicationId(t){this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetLeaveApplicationByApplicationId(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.DoctorLeaveApplication=e=e||[],this.DoctorLeaveApplication.LeaveFrom=new Date(this.DoctorLeaveApplication.LeaveFrom),this.DoctorLeaveApplication.LeaveUpto=new Date(this.DoctorLeaveApplication.LeaveUpto),this.LeaveMode="Edit",this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}AddNewLeave(){this.DoctorLeaveApplication={},this.LeaveMode="Add",this.DoctorLeaveApplication.ApprovalStatus="Pending",this.cdRef.detectChanges()}SaveApplication(){this.DoctorLeaveApplication.DoctorId=localStorage.getItem("userId"),this.DoctorLeaveApplication.ClinicId=localStorage.getItem("ClinicId"),this.DoctorLeaveApplication.AppliedOn=new Date,this.DoctorLeaveApplication.AppliedBy=localStorage.getItem("userId"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.AddEditLeaveApplication(this.DoctorLeaveApplication).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadApplicationList(),this.LeaveMode=null):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}CancelApplication(t){this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetLeaveApplicationByApplicationId(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.DoctorLeaveApplication=e=e||[],this.LeaveMode="Cancel",this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}CancelApplicationSubmit(){null!=this.DoctorLeaveApplication.CancelReason?(this._UtilityService.showSpinner(),this.DoctorLeaveApplication.ApprovedOn=new Date,this.DoctorLeaveApplication.ApprovedBy=localStorage.getItem("userId"),this.DoctorLeaveApplication.ApprovalStatus="Cancelled",this.cdRef.detectChanges(),this.unsubscribe.add=this._DoctorServices.AddEditLeaveApplication(this.DoctorLeaveApplication).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.LoadApplicationList(),this.LeaveMode=null)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this._UtilityService.showWarningAlert("Please provide Cancel Reason")}CloseModal(){this.LeaveMode=null}calculateDiff(){var t=this.DoctorLeaveApplication.LeaveFrom,e=this.DoctorLeaveApplication.LeaveUpto;if(null!=t&&null!=t&&(this.maxUpto=this.today),null!=t&&null!=t&&null!=e&&null!=e){t>e&&(t=e,this.DoctorLeaveApplication.LeaveFrom=e);var i=Math.floor((e-t)/864e5);this.noofdays=i+1,this.cdRef.detectChanges()}}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(l.h),l.Sb(n.f),l.Sb(s.a),l.Sb(r.a))},t.\u0275cmp=l.Mb({type:t,selectors:[["app-leave-application"]],features:[l.Cb],decls:2,vars:2,consts:[["class","row mt25 mb10",4,"ngIf"],[1,"row","mt25","mb10"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 165px)",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined",3,"click"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","80px"],[2,"width","105px"],[2,"width","120px"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],["matTooltip","Cancel",3,"click",4,"ngIf"],["matTooltip","Cancel",3,"click"],["src","./assets/custom-icons/no.svg",1,"custom-ico",2,"width","24px !important"],[1,"col"],["myForm","ngForm"],[1,"row"],[1,"col-md-auto"],[1,"form-group"],[1,"required"],["inputId","icon",3,"minDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onClose"],["LeaveFrom",""],["LeaveUpto",""],[1,"col-md-6"],["rows","2","required","","name","txtReason",1,"form-control","text-area-input",3,"ngModel","ngModelChange"],["class","col-md-6",4,"ngIf"],[1,"row","justify-content-center"],["type","button","type","button","class","btn btn-new-primary mr-2",3,"disabled","click",4,"ngIf"],["type","button","type","button","class","btn  btn-new-primary mr-3",3,"disabled","click",4,"ngIf"],[1,"btn","btn-new-secondary",3,"click"],["rows","2","name","txtCancelReason",1,"form-control",3,"ngModel","ngModelChange"],["type","button","type","button",1,"btn","btn-new-primary","mr-2",3,"disabled","click"],["type","button","type","button",1,"btn","btn-new-primary","mr-3",3,"disabled","click"]],template:function(t,e){1&t&&(l.Sc(0,D,11,5,"div",0),l.Sc(1,F,38,18,"div",0)),2&t&&(l.tc("ngIf",null==e.LeaveMode),l.Fb(1),l.tc("ngIf",null!=e.LeaveMode))},directives:[c.p,p.c,b.i,d.b,u.a,v.z,v.p,v.q,h.a,v.o,v.r,v.b,v.w],pipes:[c.f],styles:[""]}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[o.l.forChild(C)],o.l]}),t})();var M=i("Q4Mo"),_=i("arFO");let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[c.c,I,v.i,v.v,p.f,d.c,M.b,_.b,u.b,h.b]]}),t})()}}]);