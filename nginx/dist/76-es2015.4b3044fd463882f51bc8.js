(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{"mA+j":function(t,e,i){"use strict";i.r(e),i.d(e,"LeaveApprovalModule",function(){return C});var c=i("ofXK"),o=i("tyNb"),n=i("Nach"),a=i("CwUn"),s=i("fXoL"),p=i("ReGW"),r=i("NLkC"),l=i("rEr+"),b=i("7zfz"),d=i("7kUa"),v=i("3Pt+"),u=i("eO1q");function h(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",13),s.Yb(1,"span",14),s.Tb(2,"i",15),s.Yb(3,"input",16),s.ic("input",function(e){return s.Lc(t),s.mc(),s.Ic(5).filterGlobal(e.target.value,"contains")}),s.Xb(),s.Xb(),s.Xb()}}function A(t,e){if(1&t&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Uc(2," No records found "),s.Xb(),s.Xb()),2&t){const t=e.$implicit;s.Fb(1),s.Gb("colspan",null==t?null:t.length)}}function m(t,e){1&t&&(s.Yb(0,"colgroup"),s.Tb(1,"col",17),s.Tb(2,"col",18),s.Tb(3,"col",19),s.Tb(4,"col",19),s.Tb(5,"col",19),s.Tb(6,"col",19),s.Tb(7,"col",20),s.Tb(8,"col",21),s.Xb())}function L(t,e){1&t&&(s.Yb(0,"tr"),s.Yb(1,"th"),s.Uc(2,"Action"),s.Xb(),s.Yb(3,"th"),s.Uc(4,"Applied By"),s.Xb(),s.Yb(5,"th"),s.Uc(6,"Leave From"),s.Xb(),s.Yb(7,"th"),s.Uc(8,"Leave Upto"),s.Xb(),s.Yb(9,"th"),s.Uc(10,"Applied On"),s.Xb(),s.Yb(11,"th"),s.Uc(12,"Approved On"),s.Xb(),s.Yb(13,"th"),s.Uc(14,"Approved By"),s.Xb(),s.Yb(15,"th"),s.Uc(16,"Application Status"),s.Xb(),s.Xb())}function S(t,e){if(1&t){const t=s.Zb();s.Yb(0,"a",26),s.ic("click",function(){s.Lc(t);const e=s.mc().$implicit;return s.mc(2).ApproveApplication(e.LeaveId)}),s.Tb(1,"img",27),s.Xb()}}function f(t,e){if(1&t){const t=s.Zb();s.Yb(0,"a",28),s.ic("click",function(){s.Lc(t);const e=s.mc().$implicit;return s.mc(2).RejectApplication(e.LeaveId)}),s.Tb(1,"img",29),s.Xb()}}function g(t,e){if(1&t){const t=s.Zb();s.Yb(0,"tr"),s.Yb(1,"td"),s.Sc(2,S,2,0,"a",22),s.Yb(3,"a",23),s.ic("click",function(){s.Lc(t);const i=e.$implicit;return s.mc(2).LoadApplicationId(i.LeaveId)}),s.Tb(4,"img",24),s.Xb(),s.Sc(5,f,2,0,"a",25),s.Xb(),s.Yb(6,"td"),s.Uc(7),s.Xb(),s.Yb(8,"td"),s.Uc(9),s.nc(10,"date"),s.Xb(),s.Yb(11,"td"),s.Uc(12),s.nc(13,"date"),s.Xb(),s.Yb(14,"td"),s.Uc(15),s.nc(16,"date"),s.Xb(),s.Yb(17,"td"),s.Uc(18),s.nc(19,"date"),s.Xb(),s.Yb(20,"td"),s.Uc(21),s.Xb(),s.Yb(22,"td"),s.Yb(23,"span"),s.Uc(24),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=e.$implicit,i=s.mc(2);s.Fb(2),s.tc("ngIf","Pending"==t.ApprovalStatus),s.Fb(3),s.tc("ngIf","Pending"==t.ApprovalStatus),s.Fb(2),s.Vc(t.AppliedBy),s.Fb(2),s.Vc(s.pc(10,12,t.LeaveFrom,i.customDateFormat.DEF_DATE)),s.Fb(3),s.Vc(s.pc(13,15,t.LeaveUpto,i.customDateFormat.DEF_DATE)),s.Fb(3),s.Vc(s.pc(16,18,t.AppliedOn,i.customDateFormat.DEF_DATE)),s.Fb(3),s.Vc(s.pc(19,21,t.ApprovedOn,i.customDateFormat.DEF_DATE)),s.Fb(3),s.Vc(t.ApprovedBy),s.Fb(2),s.Hb(t.ApprovalStatus),s.Fb(1),s.Vc(t.ApprovalStatus)}}const y=function(){return["AppliedBy","LeaveFrom","LeaveUpto","AppliedOn","ApprovedOn","ApprovedByName","ApprovalStatus"]};function U(t,e){if(1&t&&(s.Yb(0,"div",2),s.Yb(1,"div",3),s.Yb(2,"div",4),s.Yb(3,"div",5),s.Yb(4,"p-table",6,7),s.Sc(6,h,4,0,"ng-template",8),s.Sc(7,A,3,1,"ng-template",9),s.Sc(8,m,9,0,"ng-template",10),s.Sc(9,L,17,0,"ng-template",11),s.Sc(10,g,25,24,"ng-template",12),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&t){const t=s.mc();s.Fb(4),s.tc("value",t.LstDoctorLeaveApplication)("rowHover",!0)("globalFilterFields",s.yc(4,y))("scrollable",!0)}}function D(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",41),s.Yb(1,"label"),s.Uc(2,"Cancel/Reject Reason"),s.Xb(),s.Yb(3,"span",37),s.Uc(4,"*"),s.Xb(),s.Yb(5,"textarea",47),s.ic("ngModelChange",function(e){return s.Lc(t),s.mc(2).DoctorLeaveApplication.CancelReason=e}),s.Xb(),s.Xb()}if(2&t){const t=s.mc(2);s.Fb(5),s.tc("ngModel",t.DoctorLeaveApplication.CancelReason)}}function X(t,e){if(1&t){const t=s.Zb();s.Yb(0,"button",48),s.ic("click",function(){return s.Lc(t),s.mc(2).ApproveApplicationSubmit()}),s.Uc(1,"Approve"),s.Xb()}if(2&t){s.mc();const t=s.Ic(5);s.tc("disabled",!t.form.valid)}}function Y(t,e){if(1&t){const t=s.Zb();s.Yb(0,"button",48),s.ic("click",function(){return s.Lc(t),s.mc(2).RejectApplicationSubmit()}),s.Uc(1,"Reject Application"),s.Xb()}if(2&t){s.mc();const t=s.Ic(5);s.tc("disabled",!t.form.valid)}}const w=function(){return{standalone:!0}};function F(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",30),s.Yb(1,"div",31),s.Yb(2,"div",32),s.Yb(3,"div",3),s.Yb(4,"form",33,34),s.Yb(6,"div",4),s.Yb(7,"div",35),s.Yb(8,"div",36),s.Yb(9,"label"),s.Uc(10,"Leave From"),s.Xb(),s.Yb(11,"span",37),s.Uc(12,"*"),s.Xb(),s.Yb(13,"div"),s.Yb(14,"p-calendar",38,39),s.ic("ngModelChange",function(e){return s.Lc(t),s.mc().DoctorLeaveApplication.LeaveFrom=e}),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(16,"div",35),s.Yb(17,"div",36),s.Yb(18,"label"),s.Uc(19,"Leave Upto"),s.Xb(),s.Yb(20,"span",37),s.Uc(21,"*"),s.Xb(),s.Yb(22,"div"),s.Yb(23,"p-calendar",38,40),s.ic("ngModelChange",function(e){return s.Lc(t),s.mc().DoctorLeaveApplication.LeaveUpto=e}),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(25,"div",41),s.Yb(26,"label"),s.Uc(27,"Reason"),s.Xb(),s.Yb(28,"span",37),s.Uc(29,"*"),s.Xb(),s.Yb(30,"textarea",42),s.ic("ngModelChange",function(e){return s.Lc(t),s.mc().DoctorLeaveApplication.LeaveReason=e}),s.Xb(),s.Xb(),s.Sc(31,D,6,1,"div",43),s.Xb(),s.Yb(32,"div",44),s.Sc(33,X,2,1,"button",45),s.Sc(34,Y,2,1,"button",45),s.Yb(35,"button",46),s.ic("click",function(){return s.Lc(t),s.mc().CloseModal()}),s.Uc(36,"Close"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&t){const t=s.mc();s.Fb(14),s.tc("ngModel",t.DoctorLeaveApplication.LeaveFrom)("ngModelOptions",s.yc(14,w))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1),s.Fb(9),s.tc("ngModel",t.DoctorLeaveApplication.LeaveUpto)("ngModelOptions",s.yc(15,w))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1),s.Fb(7),s.tc("ngModel",t.DoctorLeaveApplication.LeaveReason),s.Fb(1),s.tc("ngIf","Reject"==t.LeaveMode&&"Rejected"!=t.DoctorLeaveApplication.ApprovalStatus),s.Fb(2),s.tc("ngIf",t.isApproved),s.Fb(1),s.tc("ngIf","Reject"==t.LeaveMode&&"Rejected"!=t.DoctorLeaveApplication.ApprovalStatus)}}const I=[{path:"",component:(()=>{class t extends a.a{constructor(t,e,i,c){super(),this.cdRef=t,this._DoctorServices=e,this._ConstantServices=i,this._UtilityService=c,this.ClinicCurre=localStorage.getItem("ClinicId"),this.UserTypeCurre=localStorage.getItem("userTypeId"),this.UserTypes=n.s,this.customDateFormat=n.h,this.isApproved=!1,this.LeaveMode=null,this.LstDoctorLeaveApplication=[],this.DoctorLeaveApplication={}}ngOnInit(){this._ConstantServices.ActiveMenuName="Leave Approval",this.LoadApplicationList()}ApproveApplication(t){this.LoadApplicationId(t),null!=this.DoctorLeaveApplication.LeaveId&&(this._UtilityService.showSpinner(),this.DoctorLeaveApplication.ApprovedOn=new Date,this.DoctorLeaveApplication.ApprovedBy=localStorage.getItem("userId"),this.DoctorLeaveApplication.ApprovalStatus="Approved",this.cdRef.detectChanges(),this._DoctorServices.AddEditLeaveApplication(this.DoctorLeaveApplication).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.LoadApplicationList(),this.LeaveMode=null)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}AddNewLeave(){this.DoctorLeaveApplication={},this.LeaveMode="Add",this.DoctorLeaveApplication.ApprovalStatus="Pending",this.cdRef.detectChanges()}RejectApplication(t){this._UtilityService.showSpinner(),this._DoctorServices.GetLeaveApplicationByApplicationId(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.DoctorLeaveApplication=e=e||[],this.LeaveMode="Reject",this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}RejectApplicationSubmit(){null!=this.DoctorLeaveApplication.CancelReason?(this._UtilityService.showSpinner(),this.DoctorLeaveApplication.ApprovedOn=new Date,this.DoctorLeaveApplication.ApprovedBy=localStorage.getItem("userId"),this.DoctorLeaveApplication.ApprovalStatus="Rejected",this.isApproved=!1,this.cdRef.detectChanges(),this._DoctorServices.AddEditLeaveApplication(this.DoctorLeaveApplication).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.LoadApplicationList(),this.LeaveMode=null)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this._UtilityService.showWarningAlert("Please provide Reject Reason")}CloseModal(){this.LeaveMode=null,this.isApproved=!1}LoadApplicationList(){var t="";this.UserTypeCurre!=n.s.SuperAdmin&&(t=localStorage.getItem("ClinicId")),this._UtilityService.showSpinner(),this._DoctorServices.GetLeaveApplicationByClinicId(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.LstDoctorLeaveApplication=e=e||[],this.LeaveMode=null,this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadApplicationId(t){this._UtilityService.showSpinner(),this.isApproved=!1,this._DoctorServices.GetLeaveApplicationByApplicationId(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.DoctorLeaveApplication=e=e||[],this.DoctorLeaveApplication.LeaveFrom=new Date(this.DoctorLeaveApplication.LeaveFrom),this.DoctorLeaveApplication.LeaveUpto=new Date(this.DoctorLeaveApplication.LeaveUpto),"Pending"!=this.DoctorLeaveApplication.ApprovalStatus&&"Rejected"!=this.DoctorLeaveApplication.ApprovalStatus||(this.isApproved=!0),this.LeaveMode="Edit",this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ApproveApplicationSubmit(){this.DoctorLeaveApplication.ApprovedOn=new Date,this.DoctorLeaveApplication.ApprovedBy=localStorage.getItem("userId"),this.DoctorLeaveApplication.ApprovalStatus="Approved",this._UtilityService.showSpinner(),this._DoctorServices.AddEditLeaveApplication(this.DoctorLeaveApplication).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.LoadApplicationList(),this.LeaveMode=null)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(s.h),s.Sb(p.a),s.Sb(n.f),s.Sb(r.a))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-leave-approval"]],features:[s.Cb],decls:2,vars:2,consts:[["class","card mt25 mb10",4,"ngIf"],["class","row mt25",4,"ngIf"],[1,"card","mt25","mb10"],[1,"card-body"],[1,"row"],[1,"col-md-12"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 165px)",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","60px"],[2,"width","150px"],[2,"width","100px"],[2,"width","130px"],[2,"width","110px"],["matTooltip","Approve Application",3,"click",4,"ngIf"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],["matTooltip","Reject Application",3,"click",4,"ngIf"],["matTooltip","Approve Application",3,"click"],["src","./assets/custom-icons/yes.svg",1,"custom-ico","mr4"],["matTooltip","Reject Application",3,"click"],["src","./assets/custom-icons/no.svg",1,"custom-ico"],[1,"row","mt25"],[1,"col"],[1,"card"],[1,"form-label"],["myForm","ngForm"],[1,"col-md-auto"],[1,"form-group"],[1,"required"],["disabled","true","inputId","icon",3,"ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange"],["LeaveFrom",""],["LeaveUpto",""],[1,"col-md-6"],["rows","1","name","txtReason","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-6",4,"ngIf"],[1,"row","justify-content-center"],["type","button","type","button","class","btn btn-new-primary mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-new-secondary",3,"click"],["rows","2","name","txtCancelReason",1,"form-control",3,"ngModel","ngModelChange"],["type","button","type","button",1,"btn","btn-new-primary","mr-2",3,"disabled","click"]],template:function(t,e){1&t&&(s.Sc(0,U,11,5,"div",0),s.Sc(1,F,37,16,"div",1)),2&t&&(s.tc("ngIf",null==e.LeaveMode),s.Fb(1),s.tc("ngIf",null!=e.LeaveMode))},directives:[c.p,l.c,b.i,d.a,v.z,v.p,v.q,u.a,v.o,v.r,v.b],pipes:[c.f],styles:[""]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Qb({type:t}),t.\u0275inj=s.Pb({imports:[[o.l.forChild(I)],o.l]}),t})();var _=i("jIHw"),M=i("arFO");let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Qb({type:t}),t.\u0275inj=s.Pb({imports:[[c.c,R,v.i,l.f,_.c,M.b,d.b,u.b]]}),t})()}}]);