(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{t7OT:function(t,e,i){"use strict";i.r(e),i.d(e,"CenterEmailTemplateModule",function(){return R});var s=i("ofXK"),c=i("tyNb"),n=i("Nach"),l=i("+z1p"),r=i("CwUn"),o=i("fXoL"),a=i("dcBc"),b=i("NLkC"),d=i("rEr+"),u=i("7zfz"),p=i("7kUa"),h=i("jIHw"),m=i("3Pt+"),f=i("arFO"),g=i("zioG"),S=i("AAHA");const v=["myForm"];function y(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",17),o.ic("click",function(){return o.Lc(t),o.mc(3).AddNew()}),o.Xb()}}function M(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div",11),o.Sc(1,y,1,0,"button",12),o.Yb(2,"span",13),o.Uc(3),o.Xb(),o.Yb(4,"span",14),o.Tb(5,"i",15),o.Yb(6,"input",16),o.ic("input",function(e){return o.Lc(t),o.mc(),o.Ic(5).filterGlobal(e.target.value,"contains")}),o.Xb(),o.Xb(),o.Xb()}if(2&t){const t=o.mc(2);o.Fb(1),o.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString())),o.Fb(2),o.Wc(" ",(null==t.lstMaster?null:t.lstMaster.length)>0?"Total Records: "+(null==t.lstMaster?null:t.lstMaster.length):""," ")}}function X(t,e){1&t&&(o.Yb(0,"tr"),o.Yb(1,"td"),o.Uc(2," No records found "),o.Xb(),o.Xb()),2&t&&(o.Fb(1),o.Gb("colspan",4))}function I(t,e){1&t&&(o.Yb(0,"tr"),o.Yb(1,"th"),o.Uc(2,"Type"),o.Xb(),o.Yb(3,"th"),o.Uc(4,"Subject"),o.Xb(),o.Yb(5,"th"),o.Uc(6,"Status"),o.Xb(),o.Yb(7,"th"),o.Uc(8,"Action"),o.Xb(),o.Xb())}function Y(t,e){if(1&t){const t=o.Zb();o.Yb(0,"tr"),o.Yb(1,"td"),o.Uc(2),o.Xb(),o.Yb(3,"td"),o.Uc(4),o.Xb(),o.Yb(5,"td"),o.Uc(6),o.Xb(),o.Yb(7,"td"),o.Yb(8,"a",18),o.ic("click",function(){o.Lc(t);const i=e.$implicit;return o.mc(2).LoadEmailTemplateByType(i.CenterEmailDraftingMasterId)}),o.Tb(9,"img",19),o.Xb(),o.Xb(),o.Xb()}if(2&t){const t=e.$implicit;o.Fb(2),o.Vc(t.DraftingType),o.Fb(2),o.Vc(t.DraftingSubject),o.Fb(2),o.Vc(1==t.Status?"Active":"Inactive")}}const C=function(){return["DraftingType","DraftingSubject"]};function w(t,e){if(1&t&&(o.Yb(0,"div",1),o.Yb(1,"div",2),o.Yb(2,"div",3),o.Yb(3,"div",4),o.Yb(4,"p-table",5,6),o.Sc(6,M,7,2,"ng-template",7),o.Sc(7,X,3,1,"ng-template",8),o.Sc(8,I,9,0,"ng-template",9),o.Sc(9,Y,10,3,"ng-template",10),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb()),2&t){const t=o.mc();o.Fb(4),o.tc("value",t.lstMaster)("rowHover",!0)("globalFilterFields",o.yc(4,C))("scrollable",!0)}}function A(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div",24),o.Yb(1,"app-center-dropdown",35),o.ic("onclinicSelect",function(e){return o.Lc(t),o.mc(2).onclinicSelect(e)}),o.Xb(),o.Xb()}if(2&t){const t=o.mc(2);o.Fb(1),o.tc("ClinicIdSelected",t.objMaster.ClinicId)("mode",t.mode)}}function T(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",36),o.ic("click",function(){return o.Lc(t),o.mc(2).Save()}),o.Uc(1,"Submit"),o.Xb()}if(2&t){o.mc();const t=o.Ic(5);o.tc("disabled",!t.form.valid)}}const U=function(){return{width:"100%"}};function j(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div",1),o.Yb(1,"div",20),o.Yb(2,"div",3),o.Yb(3,"div",4),o.Yb(4,"form",null,21),o.Yb(6,"div",22),o.Sc(7,A,2,2,"div",23),o.Yb(8,"div",24),o.Yb(9,"div",25),o.Yb(10,"label"),o.Uc(11,"Type"),o.Xb(),o.Yb(12,"span",26),o.Uc(13,"*"),o.Xb(),o.Yb(14,"p-dropdown",27),o.ic("ngModelChange",function(e){return o.Lc(t),o.mc().objMaster.DraftingType=e}),o.Xb(),o.Xb(),o.Xb(),o.Yb(15,"div",28),o.Yb(16,"div",25),o.Yb(17,"label"),o.Uc(18,"Subject"),o.Xb(),o.Yb(19,"span",26),o.Uc(20,"*"),o.Xb(),o.Yb(21,"input",29),o.ic("ngModelChange",function(e){return o.Lc(t),o.mc().objMaster.DraftingSubject=e}),o.Xb(),o.Xb(),o.Xb(),o.Yb(22,"div",2),o.Yb(23,"div",25),o.Yb(24,"label"),o.Uc(25,"Details"),o.Xb(),o.Yb(26,"span",26),o.Uc(27,"*"),o.Xb(),o.Yb(28,"ckeditor",30),o.ic("ngModelChange",function(e){return o.Lc(t),o.mc().objMaster.DraftingDetails=e}),o.Xb(),o.Xb(),o.Xb(),o.Yb(29,"div",24),o.Yb(30,"label"),o.Uc(31,"Status"),o.Xb(),o.Yb(32,"span",26),o.Uc(33,"*"),o.Xb(),o.Yb(34,"p-dropdown",31),o.ic("ngModelChange",function(e){return o.Lc(t),o.mc().objMaster.Status=e}),o.Xb(),o.Xb(),o.Xb(),o.Yb(35,"div",32),o.Sc(36,T,2,1,"button",33),o.Yb(37,"button",34),o.ic("click",function(){return o.Lc(t),o.mc().CloseModal()}),o.Uc(38,"Close"),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb()}if(2&t){const t=o.mc();o.Fb(7),o.tc("ngIf",t.UserTypeCurre===t.userTypes.SuperAdmin),o.Fb(7),o.Pc(o.yc(17,U)),o.tc("options",t.lstDraftingType)("ngModel",t.objMaster.DraftingType)("filter",!0)("disabled","Edit"==t.mode),o.Fb(7),o.tc("ngModel",t.objMaster.DraftingSubject),o.Fb(7),o.tc("editor",t.Editor)("config",t.config)("ngModel",t.objMaster.DraftingDetails),o.Fb(6),o.Pc(o.yc(18,U)),o.tc("options",t.stlststatus)("ngModel",t.objMaster.Status)("filter",!0),o.Fb(2),o.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))}}const D=[{path:"",component:(()=>{class t extends r.a{constructor(t,e,i,s,c){super(),this.router=t,this._MasterServices=e,this._ConstantServices=i,this.cdRef=s,this._UtilityService=c,this.Editor=l,this.UserTypeCurre=localStorage.getItem("userTypeId"),this.userTypes=n.s,this.ClinicIdSelected=null,this.mode=null,this.lstDraftingType=[],this.objMaster={},this.stlststatus=[],this.ActionList=n.a,this.lstIAccess=[],this.lstIAccessStr=[],this._ConstantServices.ActiveMenuName="Center Email Template",this.stlststatus=[{name:"Active",code:1},{name:"Inactive",code:0}],this.getPageLevelAccess()}getPageLevelAccess(){var t,e,i=this.router.url,s=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==s?void 0:s.find(t=>t.MenuItemURL===i))&&(this.lstIAccess=null===(t=s.find(t=>t.MenuItemURL===i))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}ngOnInit(){n.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.GetAllEmailDrafting()),this.LoadEmailDraftingTypeMaster(),this.config={toolbar:{items:["bold","italic","|","undo","redo","|","numberedList","bulletedList"],shouldNotGroupWhenFull:!0}}}onclinicSelect(t){this.ClinicIdSelected=t,this.objMaster.ClinicId=t}LoadEmailDraftingTypeMaster(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetEmailDraftingTypeMaster().subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstDraftingType=e=e||[],this.cdRef.detectChanges()}else this.lstDraftingType=[]},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}GetAllEmailDrafting(){null!=this.ClinicIdSelected&&null!=this.ClinicIdSelected&&""!=this.ClinicIdSelected?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetCenterEmailDrafting(this.ClinicIdSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstMaster=e=e||[],this.cdRef.detectChanges()}else this.lstMaster=[],this.cdRef.detectChanges()})):this._UtilityService.showWarningAlert("Please select center")}AddNew(){this.ResetModel(),this.mode="Add",this.cdRef.detectChanges(),this.myForm.resetForm()}LoadEmailTemplateByType(t){this.unsubscribe.add=this._MasterServices.GetCenterEmailTemplateByType(t).subscribe(t=>{if(1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.objMaster=e=e||[],this.mode="update",this.cdRef.detectChanges()}})}Save(){var t,e,i;null!=(null===(t=this.objMaster)||void 0===t?void 0:t.ClinicId)&&null!=(null===(e=this.objMaster)||void 0===e?void 0:e.ClinicId)&&""!=(null===(i=this.objMaster)||void 0===i?void 0:i.ClinicId)?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.SaveUpdateCenterEmailDrafting(this.objMaster).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.GetAllEmailDrafting(),this.mode=null)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this._UtilityService.showWarningAlert("Please select center")}ResetModel(){this.objMaster={},this.objMaster.ClinicId=this.ClinicIdSelected,this.objMaster.Status=1}CloseModal(){this.mode=null}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(c.i),o.Sb(a.a),o.Sb(n.f),o.Sb(o.h),o.Sb(b.a))},t.\u0275cmp=o.Mb({type:t,selectors:[["app-center-email-template"]],viewQuery:function(t,e){if(1&t&&o.cd(v,1),2&t){let t;o.Hc(t=o.jc())&&(e.myForm=t.first)}},features:[o.Cb],decls:2,vars:2,consts:[["class","row mt25",4,"ngIf"],[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["styleClass","p-datatable-striped","scrollHeight","calc(100vh - 165px)","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],["pButton","","title","New","label","Add New","class","p-button-outlined","icon","pi pi-plus",3,"click",4,"ngIf"],[1,"pl-1","pt-3","mr-2","p-ml-left"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined",3,"click"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],[1,"col"],["myForm","ngForm"],[1,"row"],["class","col-md-4",4,"ngIf"],[1,"col-md-4"],[1,"form-group"],[1,"required"],["required","true","name","ddlType","optionLabel","DraftingType","optionValue","DraftingType","placeholder","-Select-",3,"options","ngModel","filter","disabled","ngModelChange"],[1,"col-md-8"],["type","text","required","","name","txtDraftingSubject",1,"form-control",3,"ngModel","ngModelChange"],["name","TEDDraftingDetails",3,"editor","config","ngModel","ngModelChange"],["required","true","name","ddlStatus","optionLabel","name","optionValue","code","placeholder","-Select-",3,"options","ngModel","filter","ngModelChange"],[1,"row","justify-content-center"],["type","button","class","btn btn-new-primary mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-new-secondary",3,"click"],[3,"ClinicIdSelected","mode","onclinicSelect"],["type","button",1,"btn","btn-new-primary","mr-2",3,"disabled","click"]],template:function(t,e){1&t&&(o.Sc(0,w,10,5,"div",0),o.Sc(1,j,39,19,"div",0)),2&t&&(o.tc("ngIf",null==e.mode),o.Fb(1),o.tc("ngIf",null!=e.mode))},directives:[s.p,d.c,u.i,p.a,h.b,m.z,m.p,m.q,f.a,m.w,m.o,m.r,m.b,g.a,S.a],styles:[""]}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({imports:[[c.l.forChild(D)],c.l]}),t})();var F=i("T2Aj");let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({imports:[[s.c,L,m.i,d.f,h.c,f.b,p.b,g.b,F.a]]}),t})()}}]);