!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=r(e);if(t){var l=r(this).constructor;i=Reflect.construct(n,arguments,l)}else i=n.apply(this,arguments);return c(this,i)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{t7OT:function(c,r,l){"use strict";l.r(r),l.d(r,"CenterEmailTemplateModule",function(){return G});var o=l("ofXK"),s=l("tyNb"),a=l("Nach"),u=l("+z1p"),b=l("CwUn"),d=l("fXoL"),f=l("dcBc"),p=l("NLkC"),m=l("rEr+"),v=l("7zfz"),h=l("7kUa"),g=l("jIHw"),S=l("3Pt+"),y=l("arFO"),M=l("zioG"),X=l("AAHA"),I=["myForm"];function Y(e,t){if(1&e){var i=d.Zb();d.Yb(0,"button",17),d.ic("click",function(){return d.Lc(i),d.mc(3).AddNew()}),d.Xb()}}function C(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",11),d.Sc(1,Y,1,0,"button",12),d.Yb(2,"span",13),d.Uc(3),d.Xb(),d.Yb(4,"span",14),d.Tb(5,"i",15),d.Yb(6,"input",16),d.ic("input",function(e){return d.Lc(i),d.mc(),d.Ic(5).filterGlobal(e.target.value,"contains")}),d.Xb(),d.Xb(),d.Xb()}if(2&e){var n=d.mc(2);d.Fb(1),d.tc("ngIf",null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString())),d.Fb(2),d.Wc(" ",(null==n.lstMaster?null:n.lstMaster.length)>0?"Total Records: "+(null==n.lstMaster?null:n.lstMaster.length):""," ")}}function w(e,t){1&e&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&e&&(d.Fb(1),d.Gb("colspan",4))}function T(e,t){1&e&&(d.Yb(0,"tr"),d.Yb(1,"th"),d.Uc(2,"Type"),d.Xb(),d.Yb(3,"th"),d.Uc(4,"Subject"),d.Xb(),d.Yb(5,"th"),d.Uc(6,"Status"),d.Xb(),d.Yb(7,"th"),d.Uc(8,"Action"),d.Xb(),d.Xb())}function A(e,t){if(1&e){var i=d.Zb();d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2),d.Xb(),d.Yb(3,"td"),d.Uc(4),d.Xb(),d.Yb(5,"td"),d.Uc(6),d.Xb(),d.Yb(7,"td"),d.Yb(8,"a",18),d.ic("click",function(){d.Lc(i);var e=t.$implicit;return d.mc(2).LoadEmailTemplateByType(e.CenterEmailDraftingMasterId)}),d.Tb(9,"img",19),d.Xb(),d.Xb(),d.Xb()}if(2&e){var n=t.$implicit;d.Fb(2),d.Vc(n.DraftingType),d.Fb(2),d.Vc(n.DraftingSubject),d.Fb(2),d.Vc(1==n.Status?"Active":"Inactive")}}var U=function(){return["DraftingType","DraftingSubject"]};function j(e,t){if(1&e&&(d.Yb(0,"div",1),d.Yb(1,"div",2),d.Yb(2,"div",3),d.Yb(3,"div",4),d.Yb(4,"p-table",5,6),d.Sc(6,C,7,2,"ng-template",7),d.Sc(7,w,3,1,"ng-template",8),d.Sc(8,T,9,0,"ng-template",9),d.Sc(9,A,10,3,"ng-template",10),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()),2&e){var i=d.mc();d.Fb(4),d.tc("value",i.lstMaster)("rowHover",!0)("globalFilterFields",d.yc(4,U))("scrollable",!0)}}function D(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",24),d.Yb(1,"app-center-dropdown",35),d.ic("onclinicSelect",function(e){return d.Lc(i),d.mc(2).onclinicSelect(e)}),d.Xb(),d.Xb()}if(2&e){var n=d.mc(2);d.Fb(1),d.tc("ClinicIdSelected",n.objMaster.ClinicId)("mode",n.mode)}}function R(e,t){if(1&e){var i=d.Zb();d.Yb(0,"button",36),d.ic("click",function(){return d.Lc(i),d.mc(2).Save()}),d.Uc(1,"Submit"),d.Xb()}if(2&e){d.mc();var n=d.Ic(5);d.tc("disabled",!n.form.valid)}}var _=function(){return{width:"100%"}};function L(e,t){if(1&e){var i=d.Zb();d.Yb(0,"div",1),d.Yb(1,"div",20),d.Yb(2,"div",3),d.Yb(3,"div",4),d.Yb(4,"form",null,21),d.Yb(6,"div",22),d.Sc(7,D,2,2,"div",23),d.Yb(8,"div",24),d.Yb(9,"div",25),d.Yb(10,"label"),d.Uc(11,"Type"),d.Xb(),d.Yb(12,"span",26),d.Uc(13,"*"),d.Xb(),d.Yb(14,"p-dropdown",27),d.ic("ngModelChange",function(e){return d.Lc(i),d.mc().objMaster.DraftingType=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(15,"div",28),d.Yb(16,"div",25),d.Yb(17,"label"),d.Uc(18,"Subject"),d.Xb(),d.Yb(19,"span",26),d.Uc(20,"*"),d.Xb(),d.Yb(21,"input",29),d.ic("ngModelChange",function(e){return d.Lc(i),d.mc().objMaster.DraftingSubject=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(22,"div",2),d.Yb(23,"div",25),d.Yb(24,"label"),d.Uc(25,"Details"),d.Xb(),d.Yb(26,"span",26),d.Uc(27,"*"),d.Xb(),d.Yb(28,"ckeditor",30),d.ic("ngModelChange",function(e){return d.Lc(i),d.mc().objMaster.DraftingDetails=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(29,"div",24),d.Yb(30,"label"),d.Uc(31,"Status"),d.Xb(),d.Yb(32,"span",26),d.Uc(33,"*"),d.Xb(),d.Yb(34,"p-dropdown",31),d.ic("ngModelChange",function(e){return d.Lc(i),d.mc().objMaster.Status=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(35,"div",32),d.Sc(36,R,2,1,"button",33),d.Yb(37,"button",34),d.ic("click",function(){return d.Lc(i),d.mc().CloseModal()}),d.Uc(38,"Close"),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&e){var n=d.mc();d.Fb(7),d.tc("ngIf",n.UserTypeCurre===n.userTypes.SuperAdmin),d.Fb(7),d.Pc(d.yc(17,_)),d.tc("options",n.lstDraftingType)("ngModel",n.objMaster.DraftingType)("filter",!0)("disabled","Edit"==n.mode),d.Fb(7),d.tc("ngModel",n.objMaster.DraftingSubject),d.Fb(7),d.tc("editor",n.Editor)("config",n.config)("ngModel",n.objMaster.DraftingDetails),d.Fb(6),d.Pc(d.yc(18,_)),d.tc("options",n.stlststatus)("ngModel",n.objMaster.Status)("filter",!0),d.Fb(2),d.tc("ngIf",null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))}}var F,k,E,O=[{path:"",component:(F=function(c){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(b,c);var r,l,o,s=n(b);function b(t,i,n,c,r){var l;return e(this,b),(l=s.call(this)).router=t,l._MasterServices=i,l._ConstantServices=n,l.cdRef=c,l._UtilityService=r,l.Editor=u,l.UserTypeCurre=localStorage.getItem("userTypeId"),l.userTypes=a.s,l.ClinicIdSelected=null,l.mode=null,l.lstDraftingType=[],l.objMaster={},l.stlststatus=[],l.ActionList=a.a,l.lstIAccess=[],l.lstIAccessStr=[],l._ConstantServices.ActiveMenuName="Center Email Template",l.stlststatus=[{name:"Active",code:1},{name:"Inactive",code:0}],l.getPageLevelAccess(),l}return r=b,(l=[{key:"getPageLevelAccess",value:function(){var e,t,i=this,n=this.router.url,c=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==c?void 0:c.find(function(e){return e.MenuItemURL===n}))&&(this.lstIAccess=null===(e=c.find(function(e){return e.MenuItemURL===n}))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(function(e){i.lstIAccessStr.push(e.ActionId.toString())}))}},{key:"ngOnInit",value:function(){a.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.GetAllEmailDrafting()),this.LoadEmailDraftingTypeMaster(),this.config={toolbar:{items:["bold","italic","|","undo","redo","|","numberedList","bulletedList"],shouldNotGroupWhenFull:!0}}}},{key:"onclinicSelect",value:function(e){this.ClinicIdSelected=e,this.objMaster.ClinicId=e}},{key:"LoadEmailDraftingTypeMaster",value:function(){var e=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetEmailDraftingTypeMaster().subscribe(function(t){if(e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.lstDraftingType=i=i||[],e.cdRef.detectChanges()}else e.lstDraftingType=[]},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"GetAllEmailDrafting",value:function(){var e=this;null!=this.ClinicIdSelected&&null!=this.ClinicIdSelected&&""!=this.ClinicIdSelected?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetCenterEmailDrafting(this.ClinicIdSelected).subscribe(function(t){if(e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.lstMaster=i=i||[],e.cdRef.detectChanges()}else e.lstMaster=[],e.cdRef.detectChanges()})):this._UtilityService.showWarningAlert("Please select center")}},{key:"AddNew",value:function(){this.ResetModel(),this.mode="Add",this.cdRef.detectChanges(),this.myForm.resetForm()}},{key:"LoadEmailTemplateByType",value:function(e){var t=this;this.unsubscribe.add=this._MasterServices.GetCenterEmailTemplateByType(e).subscribe(function(e){if(1==e.actionResult.success){var i=JSON.parse(e.actionResult.result);t.objMaster=i=i||[],t.mode="update",t.cdRef.detectChanges()}})}},{key:"Save",value:function(){var e,t,i,n=this;null!=(null===(e=this.objMaster)||void 0===e?void 0:e.ClinicId)&&null!=(null===(t=this.objMaster)||void 0===t?void 0:t.ClinicId)&&""!=(null===(i=this.objMaster)||void 0===i?void 0:i.ClinicId)?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.SaveUpdateCenterEmailDrafting(this.objMaster).subscribe(function(e){n._UtilityService.hideSpinner(),n.cdRef.detectChanges(),n._UtilityService.showSuccessAlert(e.actionResult.errMsg),1==e.actionResult.success&&(n.GetAllEmailDrafting(),n.mode=null)},function(e){n._UtilityService.hideSpinner(),n._UtilityService.showErrorAlert(e.message)})):this._UtilityService.showWarningAlert("Please select center")}},{key:"ResetModel",value:function(){this.objMaster={},this.objMaster.ClinicId=this.ClinicIdSelected,this.objMaster.Status=1}},{key:"CloseModal",value:function(){this.mode=null}}])&&t(r.prototype,l),o&&t(r,o),b}(b.a),F.\u0275fac=function(e){return new(e||F)(d.Sb(s.i),d.Sb(f.a),d.Sb(a.f),d.Sb(d.h),d.Sb(p.a))},F.\u0275cmp=d.Mb({type:F,selectors:[["app-center-email-template"]],viewQuery:function(e,t){var i;1&e&&d.cd(I,1),2&e&&d.Hc(i=d.jc())&&(t.myForm=i.first)},features:[d.Cb],decls:2,vars:2,consts:[["class","row mt25",4,"ngIf"],[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["styleClass","p-datatable-striped","scrollHeight","calc(100vh - 165px)","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],["pButton","","title","New","label","Add New","class","p-button-outlined","icon","pi pi-plus",3,"click",4,"ngIf"],[1,"pl-1","pt-3","mr-2","p-ml-left"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined",3,"click"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],[1,"col"],["myForm","ngForm"],[1,"row"],["class","col-md-4",4,"ngIf"],[1,"col-md-4"],[1,"form-group"],[1,"required"],["required","true","name","ddlType","optionLabel","DraftingType","optionValue","DraftingType","placeholder","-Select-",3,"options","ngModel","filter","disabled","ngModelChange"],[1,"col-md-8"],["type","text","required","","name","txtDraftingSubject",1,"form-control",3,"ngModel","ngModelChange"],["name","TEDDraftingDetails",3,"editor","config","ngModel","ngModelChange"],["required","true","name","ddlStatus","optionLabel","name","optionValue","code","placeholder","-Select-",3,"options","ngModel","filter","ngModelChange"],[1,"row","justify-content-center"],["type","button","class","btn btn-new-primary mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-new-secondary",3,"click"],[3,"ClinicIdSelected","mode","onclinicSelect"],["type","button",1,"btn","btn-new-primary","mr-2",3,"disabled","click"]],template:function(e,t){1&e&&(d.Sc(0,j,10,5,"div",0),d.Sc(1,L,39,19,"div",0)),2&e&&(d.tc("ngIf",null==t.mode),d.Fb(1),d.tc("ngIf",null!=t.mode))},directives:[o.p,m.c,v.i,h.a,g.b,S.z,S.p,S.q,y.a,S.w,S.o,S.r,S.b,M.a,X.a],styles:[""]}),F)}],N=((k=function t(){e(this,t)}).\u0275fac=function(e){return new(e||k)},k.\u0275mod=d.Qb({type:k}),k.\u0275inj=d.Pb({imports:[[s.l.forChild(O)],s.l]}),k),P=l("T2Aj"),G=((E=function t(){e(this,t)}).\u0275fac=function(e){return new(e||E)},E.\u0275mod=d.Qb({type:E}),E.\u0275inj=d.Pb({imports:[[o.c,N,S.i,m.f,g.c,y.b,h.b,M.b,P.a]]}),E)}}])}();