!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=c(e);if(t){var s=c(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return r(this,i)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{"7AOd":function(r,c,s){"use strict";s.r(c),s.d(c,"EmailReceiverListModule",function(){return Z});var l=s("ofXK"),o=s("tyNb"),a=s("Nach"),u=s("CwUn"),b=s("fXoL"),d=s("dcBc"),f=s("NLkC"),p=s("rEr+"),v=s("7zfz"),m=s("7kUa"),h=s("jIHw"),g=s("3Pt+"),y=s("AAHA"),S=["myForm"],U=["dt"],C=["filtr"];function T(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",20),b.ic("click",function(){return b.Lc(i),b.mc(3).AddNew()}),b.Xb()}}function X(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",12),b.Sc(1,T,1,0,"button",13),b.Yb(2,"span",14),b.Uc(3),b.Xb(),b.Yb(4,"span",15),b.Yb(5,"span",16),b.Tb(6,"i",17),b.Yb(7,"input",18,19),b.ic("input",function(e){return b.Lc(i),b.mc(),b.Ic(5).filterGlobal(e.target.value,"contains")}),b.Xb(),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(1),b.tc("ngIf",null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString())),b.Fb(2),b.Wc(" ",(null==n.lstMaster?null:n.lstMaster.length)>0?"Total Records: "+n.filteredValuesLength:""," ")}}function Y(e,t){if(1&e&&(b.Yb(0,"tr"),b.Yb(1,"td"),b.Uc(2," No records found "),b.Xb(),b.Xb()),2&e){var i=t.$implicit;b.Fb(1),b.Gb("colspan",null==i?null:i.length)}}function w(e,t){1&e&&b.Tb(0,"col",25)}function I(e,t){if(1&e&&(b.Yb(0,"colgroup"),b.Sc(1,w,1,0,"col",21),b.Tb(2,"col",22),b.Tb(3,"col",23),b.Tb(4,"col",23),b.Tb(5,"col",24),b.Xb()),2&e){var i=b.mc(2);b.Fb(1),b.tc("ngIf",i.UserTypeCurre===i.userTypes.SuperAdmin)}}function M(e,t){1&e&&(b.Yb(0,"th"),b.Uc(1,"Center"),b.Xb())}function A(e,t){if(1&e&&(b.Yb(0,"tr"),b.Sc(1,M,2,0,"th",26),b.Yb(2,"th"),b.Uc(3,"Type"),b.Xb(),b.Yb(4,"th"),b.Uc(5,"To User"),b.Xb(),b.Yb(6,"th"),b.Uc(7,"CC User"),b.Xb(),b.Yb(8,"th"),b.Uc(9,"Status"),b.Xb(),b.Yb(10,"th"),b.Uc(11,"Action"),b.Xb(),b.Xb()),2&e){var i=b.mc(2);b.Fb(1),b.tc("ngIf",i.UserTypeCurre===i.userTypes.SuperAdmin)}}function F(e,t){if(1&e&&(b.Yb(0,"td"),b.Uc(1),b.Xb()),2&e){var i=b.mc().$implicit;b.Fb(1),b.Wc("",i.ClinicName," ")}}function L(e,t){if(1&e){var i=b.Zb();b.Yb(0,"tr"),b.Sc(1,F,2,1,"td",26),b.Yb(2,"td"),b.Uc(3),b.Xb(),b.Yb(4,"td"),b.Uc(5),b.Xb(),b.Yb(6,"td"),b.Uc(7),b.Xb(),b.Yb(8,"td"),b.Uc(9),b.Xb(),b.Yb(10,"td"),b.Yb(11,"a",27),b.ic("click",function(){b.Lc(i);var e=t.$implicit;return b.mc(2).LoadMasterById(e.ClinicId,e.DraftingType)}),b.Tb(12,"img",28),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=t.$implicit,r=b.mc(2);b.Fb(1),b.tc("ngIf",r.UserTypeCurre===r.userTypes.SuperAdmin),b.Fb(2),b.Vc(n.DraftingType),b.Fb(2),b.Vc(n.ToUser),b.Fb(2),b.Vc(n.CCUser),b.Fb(2),b.Vc(1==n.Status?"Active":"Inactive")}}var R=function(){return["ClinicName","DraftingType","ToUser","CCUser","Status"]};function _(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",1),b.Yb(1,"div",2),b.Yb(2,"div",3),b.Yb(3,"div",4),b.Yb(4,"p-table",5,6),b.ic("onFilter",function(e){b.Lc(i);var t=b.Ic(5);return b.mc().onFilter(e,t)}),b.Sc(6,X,9,2,"ng-template",7),b.Sc(7,Y,3,1,"ng-template",8),b.Sc(8,I,6,1,"ng-template",9),b.Sc(9,A,12,1,"ng-template",10),b.Sc(10,L,13,5,"ng-template",11),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(4),b.tc("value",n.lstMaster)("rowHover",!0)("globalFilterFields",b.yc(4,R))("scrollable",!0)}}function E(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",33),b.Yb(1,"app-center-dropdown",46),b.ic("onclinicSelect",function(e){return b.Lc(i),b.mc(2).onclinicSelect(e)}),b.Xb(),b.Xb()}if(2&e){var n=b.mc(2);b.Fb(1),b.tc("ClinicIdSelected",n.master.ClinicId)("mode",n.Mode)}}function k(e,t){if(1&e&&(b.Yb(0,"option",47),b.Uc(1),b.Xb()),2&e){var i=t.$implicit;b.uc("value",i.DraftingType),b.Fb(1),b.Wc(" ",i.DraftingType,"")}}function O(e,t){if(1&e){var i=b.Zb();b.Yb(0,"button",48),b.ic("click",function(){return b.Lc(i),b.mc(2).Save()}),b.Uc(1,"Submit"),b.Xb()}if(2&e){b.mc();var n=b.Ic(5);b.tc("disabled",!n.form.valid)}}function N(e,t){if(1&e){var i=b.Zb();b.Yb(0,"div",1),b.Yb(1,"div",29),b.Yb(2,"div",3),b.Yb(3,"div",4),b.Yb(4,"form",null,30),b.Yb(6,"div",31),b.Sc(7,E,2,2,"div",32),b.Yb(8,"div",33),b.Yb(9,"div",34),b.Yb(10,"label"),b.Uc(11,"Type"),b.Xb(),b.Yb(12,"span",35),b.Uc(13,"*"),b.Xb(),b.Yb(14,"select",36),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().master.DraftingType=e}),b.Sc(15,k,2,2,"option",37),b.Xb(),b.Xb(),b.Xb(),b.Yb(16,"div",33),b.Yb(17,"div",34),b.Yb(18,"label"),b.Uc(19,"To User"),b.Xb(),b.Yb(20,"input",38),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().master.ToUser=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(21,"div",33),b.Yb(22,"div",34),b.Yb(23,"label"),b.Uc(24,"CC User"),b.Xb(),b.Yb(25,"input",39),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().master.CCUser=e}),b.Xb(),b.Xb(),b.Xb(),b.Yb(26,"div",33),b.Yb(27,"div",34),b.Yb(28,"label"),b.Uc(29,"Status"),b.Xb(),b.Yb(30,"span",35),b.Uc(31,"*"),b.Xb(),b.Yb(32,"select",40),b.ic("ngModelChange",function(e){return b.Lc(i),b.mc().master.Status=e}),b.Yb(33,"option",41),b.Uc(34,"Active"),b.Xb(),b.Yb(35,"option",42),b.Uc(36,"Inactive"),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Yb(37,"div",43),b.Sc(38,O,2,1,"button",44),b.Yb(39,"button",45),b.ic("click",function(){return b.Lc(i),b.mc().CloseModal()}),b.Uc(40,"Close"),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb()}if(2&e){var n=b.mc();b.Fb(7),b.tc("ngIf",n.UserTypeCurre===n.userTypes.SuperAdmin),b.Fb(7),b.tc("ngModel",n.master.DraftingType)("disabled","Edit"==n.Mode),b.Fb(1),b.tc("ngForOf",n.lstDraftingType),b.Fb(5),b.tc("ngModel",n.master.ToUser),b.Fb(5),b.tc("ngModel",n.master.CCUser),b.Fb(7),b.tc("ngModel",n.master.Status),b.Fb(6),b.tc("ngIf",null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))}}var j,x,P,D=[{path:"",component:(j=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,r);var c,s,l,o=n(u);function u(t,i,n,r,c){var s;return e(this,u),(s=o.call(this)).cdRef=t,s.router=i,s._MasterServices=n,s._ConstantServices=r,s._UtilityService=c,s.filteredValuesLength=0,s.Mode=null,s.ClinicIdSelected=localStorage.getItem("ClinicId"),s.UserTypeCurre=localStorage.getItem("userTypeId"),s.userTypes=a.s,s.lstDraftingType=[],s.lstMaster=[],s.master={},s.ActionList=a.a,s.lstIAccess=[],s.lstIAccessStr=[],s.getPageLevelAccess(),s}return c=u,(s=[{key:"getPageLevelAccess",value:function(){var e,t,i=this,n=this.router.url,r=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==r?void 0:r.find(function(e){return e.MenuItemURL===n}))&&(this.lstIAccess=null===(e=r.find(function(e){return e.MenuItemURL===n}))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(function(e){i.lstIAccessStr.push(e.ActionId.toString())}))}},{key:"ngOnInit",value:function(){this._ConstantServices.ActiveMenuName="Email Receiver List",this.LoadEmailReceiverList(),this.LoadEmailDraftingTypeMaster()}},{key:"onclinicSelect",value:function(e){this.ClinicIdSelected=e,this.master.ClinicId=e}},{key:"LoadEmailDraftingTypeMaster",value:function(){var e=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetEmailDraftingTypeMaster().subscribe(function(t){if(e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.lstDraftingType=i=i||[],e.cdRef.detectChanges()}else e.lstDraftingType=[]},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"LoadEmailReceiverList",value:function(){var e=this,t="";this.UserTypeCurre!==a.s.SuperAdmin&&(t=this.ClinicIdSelected),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetCommonEmailReceiverList(t,!1).subscribe(function(t){var i;if(e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success){var n=JSON.parse(t.actionResult.result);e.lstMaster=n=n||[],void 0!==e.filtr&&(e.filtr.nativeElement.value="",e.dataTable.reset(),e.filteredValuesLength=null===(i=e.lstMaster)||void 0===i?void 0:i.length),e.cdRef.detectChanges()}else e.lstMaster=[]},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"LoadMasterById",value:function(e,t){var i=this;this._UtilityService.showSpinner(),this.Mode="Edit",this.unsubscribe.add=this._MasterServices.GetCommonEmailReceiverListByIdandType(e,t,!1).subscribe(function(e){if(i._UtilityService.hideSpinner(),i.cdRef.detectChanges(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);i.master=t=t||[],i.cdRef.detectChanges()}},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})}},{key:"Save",value:function(){var e=this;if(this.UserTypeCurre!==a.s.SuperAdmin&&(this.master.ClinicId=this.ClinicIdSelected),null!=this.master.ClinicId&&null!=this.master.ClinicId&&""!=this.master.ClinicId)if(null!=this.master.ToUser&&null!=this.master.ToUser&&""!=this.master.ToUser||null!=this.master.CCUser&&null!=this.master.CCUser&&""!=this.master.CCUser){var t=!0;if(null!=this.master.ToUser&&null!=this.master.ToUser&&""!=this.master.ToUser){var i=this.master.ToUser.split(";");if(console.log(i),(null==i?void 0:i.length)>0&&i.forEach(function(i){e.validateEmail(i)||(t=!1)}),!t)return void this._UtilityService.showWarningAlert("Please enter valid To User")}if(null!=this.master.CCUser&&null!=this.master.CCUser&&""!=this.master.CCUser&&((null==(i=this.master.ToUser.split(","))?void 0:i.length)>0&&i.forEach(function(i){e.validateEmail(i)||(t=!1)}),!t))return void this._UtilityService.showWarningAlert("Please enter valid CC User");this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.AddUpdateEmailReceiverList(this.master).subscribe(function(t){e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success?(e._UtilityService.showSuccessAlert(t.actionResult.errMsg),e.LoadEmailReceiverList(),e.Mode=null):e._UtilityService.showWarningAlert(t.actionResult.errMsg)},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}else this._UtilityService.showWarningAlert("Please enter To or CC User");else this._UtilityService.showWarningAlert("Please select center")}},{key:"AddNew",value:function(){this.ResetModel(),this.Mode="Add",this.cdRef.detectChanges(),this.myForm.resetForm()}},{key:"ResetModel",value:function(){this.master={},this.master.Status=1}},{key:"CloseModal",value:function(){this.Mode=null}},{key:"onFilter",value:function(e,t){this.filteredValuesLength=e.filteredValue.length}}])&&t(c.prototype,s),l&&t(c,l),u}(u.a),j.\u0275fac=function(e){return new(e||j)(b.Sb(b.h),b.Sb(o.i),b.Sb(d.a),b.Sb(a.f),b.Sb(f.a))},j.\u0275cmp=b.Mb({type:j,selectors:[["app-email-receiver-list"]],viewQuery:function(e,t){var i;1&e&&(b.cd(S,1),b.cd(U,1),b.cd(C,1)),2&e&&(b.Hc(i=b.jc())&&(t.myForm=i.first),b.Hc(i=b.jc())&&(t.dataTable=i.first),b.Hc(i=b.jc())&&(t.filtr=i.first))},features:[b.Cb],decls:2,vars:2,consts:[["class","row mt25",4,"ngIf"],[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 165px)",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],["pButton","","title","New","label","Add New","class","p-button-outlined","icon","pi pi-plus",3,"click",4,"ngIf"],[1,"pl-1","pt-3","mr-2","p-ml-left"],[1,"p-ml-auto"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined",3,"click"],["style","width:120px",4,"ngIf"],[2,"width","150px"],[2,"width","300px"],[2,"width","80px"],[2,"width","120px"],[4,"ngIf"],["ngbTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],[1,"col"],["myForm","ngForm"],[1,"row"],["class","col-md-3",4,"ngIf"],[1,"col-md-3"],[1,"form-group"],[1,"required"],["name","ddlType","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","ToUser",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","CCUser",1,"form-control",3,"ngModel","ngModelChange"],["name","Status","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","0"],[1,"row","justify-content-center"],["type","button","class","btn btn-new-primary mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-new-secondary",3,"click"],[3,"ClinicIdSelected","mode","onclinicSelect"],[3,"value"],["type","button",1,"btn","btn-new-primary","mr-2",3,"disabled","click"]],template:function(e,t){1&e&&(b.Sc(0,_,11,5,"div",0),b.Sc(1,N,41,8,"div",0)),2&e&&(b.tc("ngIf",null==t.Mode),b.Fb(1),b.tc("ngIf",null!=t.Mode))},directives:[l.p,p.c,v.i,m.a,h.b,g.z,g.p,g.q,g.x,g.w,g.o,g.r,l.o,g.b,g.s,g.A,y.a],styles:[""]}),j)}],V=((x=function t(){e(this,t)}).\u0275fac=function(e){return new(e||x)},x.\u0275mod=b.Qb({type:x}),x.\u0275inj=b.Pb({imports:[[o.l.forChild(D)],o.l]}),x),W=s("arFO"),B=s("Ks7X"),H=s("T2Aj"),Z=((P=function t(){e(this,t)}).\u0275fac=function(e){return new(e||P)},P.\u0275mod=b.Qb({type:P}),P.\u0275inj=b.Pb({imports:[[l.c,V,g.i,p.f,h.c,W.b,m.b,B.b,H.a]]}),P)}}])}();