(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{ItOj:function(t,e,i){"use strict";i.r(e),i.d(e,"PrescriptionDefaultTemplateMasterModule",function(){return et});var s=i("ofXK"),l=i("tyNb"),r=i("Nach"),n=i("CwUn"),c=i("fXoL"),o=i("dcBc"),a=i("ReGW"),d=i("NLkC"),h=i("/RsI"),m=i("7zfz"),p=i("rEr+"),u=i("7kUa"),b=i("jIHw"),f=i("3Pt+"),T=i("arFO"),v=i("Ji6n"),S=i("W6nD");const g=["myForm"];function C(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",24),c.ic("click",function(){return c.Lc(t),c.mc(3).AddNew()}),c.Xb()}}function D(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",15),c.Yb(1,"span",16),c.Uc(2),c.Xb(),c.Sc(3,C,1,0,"button",17),c.Yb(4,"span",18),c.Yb(5,"a",19),c.ic("click",function(){return c.Lc(t),c.mc(2).ngOnChanges()}),c.Tb(6,"img",20),c.Xb(),c.Yb(7,"span",21),c.Tb(8,"i",22),c.Yb(9,"input",23),c.ic("input",function(e){return c.Lc(t),c.mc(),c.Ic(5).filterGlobal(e.target.value,"contains")}),c.Xb(),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(2),c.Wc(" ",(null==t.lstPrescriptionDefaultTemplateMaster?null:t.lstPrescriptionDefaultTemplateMaster.length)>0?"Total Records: "+(null==t.lstPrescriptionDefaultTemplateMaster?null:t.lstPrescriptionDefaultTemplateMaster.length):""," "),c.Fb(1),c.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))}}function M(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2," No records found "),c.Xb(),c.Xb()),2&t&&(c.Fb(1),c.Gb("colspan",5))}function y(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"th"),c.Uc(2,"S.No"),c.Xb(),c.Yb(3,"th"),c.Uc(4,"Type"),c.Xb(),c.Yb(5,"th"),c.Uc(6,"Template Name"),c.Xb(),c.Yb(7,"th"),c.Uc(8,"Status"),c.Xb(),c.Yb(9,"th"),c.Uc(10,"Action"),c.Xb(),c.Xb())}function w(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2),c.Xb(),c.Yb(3,"td"),c.Uc(4),c.Xb(),c.Yb(5,"td"),c.Uc(6),c.Xb(),c.Yb(7,"td"),c.Uc(8),c.Xb(),c.Yb(9,"td"),c.Yb(10,"a",25),c.ic("click",function(){c.Lc(t);const i=e.$implicit;return c.mc(2).LoadPrescriptionDefaultTemplateMasterById(i.PDTMasterId)}),c.Tb(11,"img",26),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit,i=e.rowIndex;c.Fb(2),c.Vc(i+1),c.Fb(2),c.Vc(t.TimeType),c.Fb(2),c.Vc(t.TemplateName),c.Fb(2),c.Vc(1==t.Status?"Active":"Inactive")}}const L=function(){return["TemplateName","TimeType"]};function I(t,e){if(1&t&&(c.Yb(0,"div",5),c.Yb(1,"div",6),c.Yb(2,"div",7),c.Yb(3,"div",8),c.Yb(4,"p-table",9,10),c.Sc(6,D,10,2,"ng-template",11),c.Sc(7,M,3,1,"ng-template",12),c.Sc(8,y,11,0,"ng-template",13),c.Sc(9,w,12,4,"ng-template",14),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb()),2&t){const t=c.mc();c.Fb(4),c.tc("value",t.lstPrescriptionDefaultTemplateMaster)("rowHover",!0)("globalFilterFields",c.yc(4,L))("scrollable",!0)}}function X(t,e){if(1&t&&(c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2," No records found "),c.Xb(),c.Xb()),2&t){const t=e.$implicit;c.Fb(1),c.Gb("colspan",null==t?null:t.length)}}function Y(t,e){if(1&t&&(c.Yb(0,"th"),c.Uc(1),c.Xb()),2&t){const t=e.$implicit;c.Fb(1),c.Wc(" ",t.header," ")}}function P(t,e){if(1&t&&(c.Yb(0,"tr"),c.Sc(1,Y,2,1,"th",44),c.Xb()),2&t){const t=c.mc(2);c.Fb(1),c.tc("ngForOf",t.lstCommonField)}}function F(t,e){1&t&&c.Tb(0,"col",46)}function O(t,e){if(1&t&&(c.Yb(0,"colgroup"),c.Sc(1,F,1,0,"col",45),c.Xb()),2&t){const t=c.mc(2);c.Fb(1),c.tc("ngForOf",t.lstCommonField)}}function N(t,e){if(1&t){const t=c.Zb();c.Yb(0,"td",48),c.Uc(1),c.nc(2,"replaceSubstring"),c.Tb(3,"br"),c.Yb(4,"button",49),c.ic("click",function(){c.Lc(t);const i=e.$implicit;return c.mc(3).AddData(i.fieldId,i.field)}),c.Uc(5,"Add"),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit,i=c.mc().$implicit;c.Fb(1),c.Wc(" ",null==i[t.field]?i[t.field]:c.qc(2,1,"#"+i[t.field],"#.*?[^,]~","\n").slice(1)," ")}}function U(t,e){if(1&t&&(c.Yb(0,"tr"),c.Sc(1,N,6,5,"td",47),c.Xb()),2&t){const t=e.columns;c.Fb(1),c.tc("ngForOf",t)}}function R(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",50),c.ic("click",function(){return c.Lc(t),c.mc(2).SavePrescriptionDefaultTemplateMaster()}),c.Uc(1,"Save"),c.Xb()}if(2&t){c.mc();const t=c.Ic(5);c.tc("disabled",!t.form.valid)}}const A=function(){return{width:"100%"}};function k(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",27),c.Yb(1,"div",28),c.Yb(2,"div",7),c.Yb(3,"div",8),c.Yb(4,"form",null,29),c.Yb(6,"div",30),c.Yb(7,"div",31),c.Yb(8,"div",32),c.Yb(9,"label"),c.Uc(10,"Type"),c.Xb(),c.Yb(11,"span",33),c.Uc(12,"*"),c.Xb(),c.Yb(13,"p-dropdown",34),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().PrescriptionDefaultTemplateMaster.TimeType=e})("onChange",function(){return c.Lc(t),c.mc().OnChangeTimeType()}),c.Xb(),c.Xb(),c.Xb(),c.Yb(14,"div",31),c.Yb(15,"div",32),c.Yb(16,"label"),c.Uc(17,"Template Name"),c.Xb(),c.Yb(18,"span",33),c.Uc(19,"*"),c.Xb(),c.Yb(20,"input",35),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().PrescriptionDefaultTemplateMaster.TemplateName=e}),c.Xb(),c.Xb(),c.Xb(),c.Yb(21,"div",31),c.Yb(22,"div",32),c.Yb(23,"label"),c.Uc(24,"Status"),c.Xb(),c.Yb(25,"span",33),c.Uc(26,"*"),c.Xb(),c.Yb(27,"p-dropdown",36),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc().PrescriptionDefaultTemplateMaster.Status=e}),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Yb(28,"div",37),c.Yb(29,"div",6),c.Yb(30,"p-table",38,39),c.Sc(32,X,3,1,"ng-template",12),c.Sc(33,P,2,1,"ng-template",13),c.Sc(34,O,2,1,"ng-template",40),c.Sc(35,U,2,1,"ng-template",14),c.Xb(),c.Xb(),c.Xb(),c.Yb(36,"div",41),c.Sc(37,R,2,1,"button",42),c.Yb(38,"button",43),c.ic("click",function(){return c.Lc(t),c.mc().CloseModal()}),c.Uc(39,"Close"),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(13),c.Pc(c.yc(16,A)),c.tc("options",t.stlsttimetype)("ngModel",t.PrescriptionDefaultTemplateMaster.TimeType)("filter",!0),c.Fb(7),c.tc("ngModel",t.PrescriptionDefaultTemplateMaster.TemplateName),c.Fb(7),c.Pc(c.yc(17,A)),c.tc("options",t.stlststatus)("ngModel",t.PrescriptionDefaultTemplateMaster.Status)("filter",!0),c.Fb(3),c.tc("columns",t.lstCommonField)("value",t.lstTreatmentList)("rowHover",!0)("scrollable",!0),c.Fb(7),c.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))}}function _(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div",15),c.Yb(1,"span",21),c.Tb(2,"i",22),c.Yb(3,"input",54),c.ic("ngModelChange",function(e){return c.Lc(t),c.mc(2).SearchTreatVal=e})("change",function(){return c.Lc(t),c.mc(2).SearchTreatmentDiet()}),c.Xb(),c.Yb(4,"span",55),c.ic("click",function(){return c.Lc(t),c.mc(2).SearchTreatmentDiet()}),c.Uc(5," filter_alt "),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=c.mc(2);c.Fb(3),c.tc("ngModel",t.SearchTreatVal),c.Fb(1),c.Hb(null==t.SearchTreatVal||null==t.SearchTreatVal||""==t.SearchTreatVal?"material-icons ColumnfilterGlobalFilter":"material-icons ColumnfilterIconGlobalFilterColorDefult")}}function E(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2," No records found "),c.Xb(),c.Xb()),2&t&&(c.Fb(1),c.Gb("colspan",2))}function x(t,e){1&t&&(c.Yb(0,"colgroup"),c.Tb(1,"col",56),c.Tb(2,"col",57),c.Xb())}function V(t,e){1&t&&(c.Yb(0,"tr"),c.Yb(1,"th"),c.Uc(2,"Name"),c.Xb(),c.Tb(3,"th"),c.Xb())}function j(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Uc(2),c.Xb(),c.Yb(3,"td"),c.Yb(4,"p-checkbox",58),c.ic("onChange",function(i){c.Lc(t);const s=e.rowIndex,l=e.$implicit;return c.mc(2).AddRemoveSelectedList(i,s,l.MCODE)})("ngModelChange",function(t){return e.$implicit.Checked=t}),c.Xb(),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit,i=e.rowIndex;c.Fb(2),c.Vc(t.Description),c.Fb(2),c.vc("name","ChkItemCheck_",i,""),c.tc("ngModel",t.Checked)("binary",!0)}}function G(t,e){1&t&&(c.Yb(0,"colgroup"),c.Tb(1,"col",61),c.Tb(2,"col",62),c.Xb())}function H(t,e){1&t&&(c.Yb(0,"tr"),c.Tb(1,"th"),c.Yb(2,"th"),c.Uc(3,"Name"),c.Xb(),c.Xb())}function B(t,e){if(1&t){const t=c.Zb();c.Yb(0,"tr"),c.Yb(1,"td"),c.Yb(2,"p-checkbox",58),c.ic("onChange",function(i){c.Lc(t);const s=e.rowIndex,l=e.$implicit;return c.mc(3).RemoveSelectedList(i,s,l.MCODE)})("ngModelChange",function(t){return e.$implicit.Checked=t}),c.Xb(),c.Xb(),c.Yb(3,"td"),c.Uc(4),c.Xb(),c.Xb()}if(2&t){const t=e.$implicit,i=e.rowIndex;c.Fb(2),c.vc("name","ChkItemTreatDietCheck_",i,""),c.tc("ngModel",t.Checked)("binary",!0),c.Fb(2),c.Wc(" ",t.Description," ")}}function J(t,e){if(1&t&&(c.Yb(0,"div",31),c.Yb(1,"b"),c.Uc(2,"Selected List"),c.Xb(),c.Yb(3,"p-table",59,60),c.Sc(5,G,3,0,"ng-template",40),c.Sc(6,H,4,0,"ng-template",13),c.Sc(7,B,5,4,"ng-template",14),c.Xb(),c.Tb(8,"br"),c.Xb()),2&t){const t=c.mc(2);c.Fb(3),c.tc("value",t.lstCommmonListTreatDietSelcted)("rowHover",!0)("scrollable",!0)}}const $=function(){return["Description"]};function W(t,e){if(1&t){const t=c.Zb();c.Yb(0,"div"),c.Yb(1,"div",37),c.Yb(2,"div"),c.Yb(3,"div",37),c.Yb(4,"div",6),c.Yb(5,"p-table",51,52),c.ic("onLazyLoad",function(e){return c.Lc(t),c.mc().loadTreatDietList(e)})("firstChange",function(e){return c.Lc(t),c.mc().first=e}),c.Sc(7,_,6,4,"ng-template",11),c.Sc(8,E,3,1,"ng-template",12),c.Sc(9,x,3,0,"ng-template",40),c.Sc(10,V,4,0,"ng-template",13),c.Sc(11,j,5,4,"ng-template",14),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Sc(12,J,9,3,"div",53),c.Xb(),c.Xb()}if(2&t){const t=c.mc();c.Fb(2),c.Hb((null==t.lstCommmonListTreatDietSelcted?null:t.lstCommmonListTreatDietSelcted.length)>0?"col-md-8":"col-md-12"),c.Fb(3),c.tc("value",t.lstTreatmentNew)("rowHover",!0)("globalFilterFields",c.yc(14,$))("scrollable",!0)("lazy",!0)("paginator",!0)("rows",10)("totalRecords",t.TotalRecordsTreat)("lazyLoadOnInit",!1)("first",t.first),c.Fb(7),c.tc("ngIf",(null==t.lstCommmonListTreatDietSelcted?null:t.lstCommmonListTreatDietSelcted.length)>0)}}function Z(t,e){if(1&t){const t=c.Zb();c.Yb(0,"button",64),c.ic("click",function(){return c.Lc(t),c.mc(2).SaveNewTreatment()}),c.Uc(1,"Save"),c.Xb()}}function z(t,e){if(1&t&&c.Sc(0,Z,2,0,"button",63),2&t){const t=c.mc();c.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))}}const q=function(){return{width:"90vw"}},Q=[{path:"",component:(()=>{class t extends n.a{constructor(t,e,i,s,l,n){super(),this.cdRef=t,this.router=e,this._MasterServices=i,this._DoctorServices=s,this._ConstantServices=l,this._UtilityService=n,this.dtOptions={},this.Mode=null,this.PrescriptionDefaultTemplateMaster={},this.lstPrescriptionTimeMaster=[],this.lstPrescriptionItem=[],this.stlsttimetype=[],this.stlststatus=[],this.lstCommonField=[],this.lstTreatmentList=[],this.Trnmode="Add",this.lstTreatmentNew=[],this.lstTreatmentCategory=[],this.SelectedTreatCategory=null,this.lstCommmonListTreatDietSelcted=[],this.selectedlstPrescriptionObj=[],this.first=0,this.TotalRecordsTreat=0,this.TotalRecordsDiet=0,this.SearchTreatVal=null,this.ShowAddNewTreatmentModel=!1,this.ActionList=r.a,this.lstIAccess=[],this.lstIAccessStr=[],this.stlsttimetype=[{name:"Treatment",code:"Treatment"},{name:"Diet",code:"Diet"}],this.stlststatus=[{name:"Active",code:1},{name:"Inactive",code:0}],this.getPageLevelAccess()}getPageLevelAccess(){var t,e,i=this.router.url,s=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==s?void 0:s.find(t=>t.MenuItemURL===i))&&(this.lstIAccess=null===(t=s.find(t=>t.MenuItemURL===i))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}ngOnInit(){this._ConstantServices.ActiveMenuName="IPD Template Master",this.cdRef.detectChanges(),this.GetPrescriptionDefaultTemplateMasterList()}ngOnChanges(){this.GetPrescriptionDefaultTemplateMasterList()}OnChangeTimeType(){var t,e,i;null!=(null===(t=this.PrescriptionDefaultTemplateMaster)||void 0===t?void 0:t.TimeType)&&null!=(null===(e=this.PrescriptionDefaultTemplateMaster)||void 0===e?void 0:e.TimeType)&&""!=(null===(i=this.PrescriptionDefaultTemplateMaster)||void 0===i?void 0:i.TimeType)?(this.LoadTreatmentCategory(),this.GetPrescriptionDefaultTemplateItemByIdAndType()):(this.lstPrescriptionTimeMaster=[],this.lstPrescriptionItem=[])}GetPrescriptionDefaultTemplateMasterList(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPrescriptionDefaultTemplateMaster().subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstPrescriptionDefaultTemplateMaster=e=e||[],this.cdRef.detectChanges()}else this.lstPrescriptionDefaultTemplateMaster=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadPrescriptionDefaultTemplateMasterById(t){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPrescriptionDefaultTemplateMasterById(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.PrescriptionDefaultTemplateMaster=e=e||[],this.Mode="update",this.OnChangeTimeType(),this.cdRef.detectChanges()}else this.PrescriptionDefaultTemplateMaster={}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}SavePrescriptionDefaultTemplateMaster(){var t;this.PrescriptionDefaultTemplateMaster.CreatedBy=localStorage.getItem("userId"),this.PrescriptionDefaultTemplateMaster.ModifiedBy=localStorage.getItem("userId"),(null===(t=this.selectedlstPrescriptionObj)||void 0===t?void 0:t.length)>0?(this.PrescriptionDefaultTemplateMaster.lstDefaultTemplateItem=this.selectedlstPrescriptionObj,this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.AddUpdatePrescriptionDefaultTemplateMaster(this.PrescriptionDefaultTemplateMaster).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.GetPrescriptionDefaultTemplateMasterList(),this.Mode=null):this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this._UtilityService.showWarningAlert("No Item added for this Template")}AddNew(){this.ResetModel(),this.Mode="Add",this.cdRef.detectChanges(),this.myForm.resetForm()}ResetModel(){this.lstCommonField=[],this.lstTreatmentList=[],this.selectedlstPrescriptionObj=[],this.PrescriptionDefaultTemplateMaster={},this.PrescriptionDefaultTemplateMaster.PDTMasterId=null,this.PrescriptionDefaultTemplateMaster.Status=1}CloseModal(){this.Mode=null}AddData(t,e){var i,s;if(this.SearchTreatVal=null,this.cdRef.detectChanges(),this.lstCommmonListTreatDietSelcted=[],this.prescriptionFieldIdSelected=t,this.prescriptionFieldSelected=e,"Treatment"===(null===(i=this.PrescriptionDefaultTemplateMaster)||void 0===i?void 0:i.TimeType)?this.LoadTreatmentListByCategory(0,10):"Diet"===(null===(s=this.PrescriptionDefaultTemplateMaster)||void 0===s?void 0:s.TimeType)&&this.LoadDietListIPD(0,10),this.ShowAddNewTreatmentModel=!0,this.lstTreatmentList.length>0){var l=JSON.parse(JSON.stringify(this.lstTreatmentList));if(null!=l[0][e]&&null!=l[0][e]&&""!=l[0][e]){var r=l[0][e].split("#");(null==r?void 0:r.length)>0&&r.map(t=>{this.lstCommmonListTreatDietSelcted.push({Checked:!0,Description:t.split("~")[1],MCODE:t.split("~")[0]})})}}this.Trnmode="Add"}LoadTreatmentCategory(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetTreatmentCategory().subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstTreatmentCategory=e=e||[],this.lstTreatmentCategory.length>0&&(this.SelectedTreatCategory=this.lstTreatmentCategory[0].HCategoryName),this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}GetPrescriptionDefaultTemplateItemByIdAndType(){var t,e,i,s,l="";null!=(null===(t=this.PrescriptionDefaultTemplateMaster)||void 0===t?void 0:t.PDTMasterId)&&null!=(null===(e=this.PrescriptionDefaultTemplateMaster)||void 0===e?void 0:e.PDTMasterId)&&(l=null===(i=this.PrescriptionDefaultTemplateMaster)||void 0===i?void 0:i.PDTMasterId),this.lstCommonField=[],this.lstTreatmentList=[],this.selectedlstPrescriptionObj=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPrescriptionDefaultTemplateItemByIdAndType(l,null===(s=this.PrescriptionDefaultTemplateMaster)||void 0===s?void 0:s.TimeType).subscribe(t=>{var e,i,s,l;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var r=JSON.parse(t.actionResult.result);if(this.lstTreatmentList=r=r||[],null!=t.actionResult.result2){var n=JSON.parse(t.actionResult.result2);this.lstCommonField=n=n||[]}if(0==(null===(e=this.lstTreatmentList)||void 0===e?void 0:e.length))this.AddNewRow();else for(let t=0;t<(null===(i=this.lstTreatmentList)||void 0===i?void 0:i.length);t++)for(let e=0;e<(null===(s=this.lstCommonField)||void 0===s?void 0:s.length);e++){let i=null===(l=this.lstTreatmentList[t][this.lstCommonField[e].field])||void 0===l?void 0:l.split("#");if((null==i?void 0:i.length)>0)for(let t=0;t<(null==i?void 0:i.length);t++){var c={};c.MCODE=i[t].split("~")[0],c.TimeId=this.lstCommonField[e].fieldId,this.selectedlstPrescriptionObj.push(c)}}this.cdRef.detectChanges()}else this.lstTreatmentList=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}AddNewRow(){this.lstTreatmentList.push({}),this.cdRef.detectChanges()}LoadTreatmentListByCategory(t,e){this.first=parseInt(t),this.lstTreatmentNew=[];let i={};i.TimeId=this.prescriptionFieldIdSelected,i.SearchText=null==this.SearchTreatVal||null==this.SearchTreatVal||""==this.SearchTreatVal?"":this.SearchTreatVal.trim(),i.first=t.toString(),i.rows=e.toString(),i.HCategoryName="",this.TotalRecordsTreat=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetTreatmentListByCategory(i).subscribe(t=>{var e,i;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var s=JSON.parse(t.actionResult.result);this.lstTreatmentNew=s=s||[],(null===(e=this.lstTreatmentNew)||void 0===e?void 0:e.length)>0?(this.TotalRecordsTreat=parseInt(t.actionResult.stringVal),(null===(i=this.lstCommmonListTreatDietSelcted)||void 0===i?void 0:i.length)>0&&this.lstCommmonListTreatDietSelcted.forEach(t=>{if(this.lstTreatmentNew.find(e=>e.MCODE==t.MCODE&&1==t.Checked)){var e=this.lstTreatmentNew.findIndex(e=>e.MCODE==t.MCODE);e>=0&&(this.lstTreatmentNew[e].Checked=!0)}})):this.TotalRecordsTreat=0}else this.TotalRecordsTreat=0;this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadDietListIPD(t,e){this.first=parseInt(t),this.lstTreatmentNew=[],this.TotalRecordsTreat=0;let i={};i.TimeId=this.prescriptionFieldIdSelected,i.SearchText=null==this.SearchTreatVal||null==this.SearchTreatVal||""==this.SearchTreatVal?"":this.SearchTreatVal.trim(),i.first=t.toString(),i.rows=e.toString(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetDietMasterIPD(i).subscribe(t=>{var e,i;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var s=JSON.parse(t.actionResult.result);this.lstTreatmentNew=s=s||[],(null===(e=this.lstTreatmentNew)||void 0===e?void 0:e.length)>0?(this.TotalRecordsTreat=parseInt(t.actionResult.stringVal),(null===(i=this.lstCommmonListTreatDietSelcted)||void 0===i?void 0:i.length)>0&&this.lstCommmonListTreatDietSelcted.forEach(t=>{if(this.lstTreatmentNew.find(e=>e.MCODE==t.MCODE&&1==t.Checked)){var e=this.lstTreatmentNew.findIndex(e=>e.MCODE==t.MCODE);e>=0&&(this.lstTreatmentNew[e].Checked=!0)}})):this.TotalRecordsTreat=0}else this.TotalRecordsTreat=0;this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}SaveNewTreatment(){var t,e=this.lstCommmonListTreatDietSelcted.filter(t=>1==t.Checked);if((null==e?void 0:e.length)>0){var i=this.lstCommonField.find(t=>t.fieldId===this.prescriptionFieldIdSelected).field,s=(JSON.parse(JSON.stringify(this.lstTreatmentList)),null);this.selectedlstPrescriptionObj=this.selectedlstPrescriptionObj.filter(t=>t.TimeId!==this.prescriptionFieldIdSelected);for(let t=0;t<(null==e?void 0:e.length);t++){var l={};null==s||null==s?(s=e[t].MCODE+"~"+e[t].Description,l.MCODE=e[t].MCODE,l.TimeId=this.prescriptionFieldIdSelected,this.selectedlstPrescriptionObj.push(l)):s.includes(e[t].MCODE)||(s=s+"#"+e[t].MCODE+"~"+e[t].Description,l.MCODE=e[t].MCODE,l.TimeId=this.prescriptionFieldIdSelected,this.selectedlstPrescriptionObj.push(l))}(null===(t=this.selectedlstPrescriptionObj)||void 0===t?void 0:t.length)>0&&(this.lstTreatmentList[0][i]=s,this.ShowAddNewTreatmentModel=!1)}else this._UtilityService.showWarningAlert("Please Select atleast One Treatment")}UpdateNewTreatment(){var t,e,i=this.lstCommmonListTreatDietSelcted.filter(t=>!0===t.Checked),s=this.lstCommmonListTreatDietSelcted.filter(t=>!1===t.Checked);if((null==i?void 0:i.length)>0){i.map(t=>{this.selectedlstPrescriptionObj=this.selectedlstPrescriptionObj.filter(e=>e.MCODE!=t.MCODE&&e.TimeId!=t.TimeId)});for(let i=0;i<(null===(t=this.lstTreatmentList)||void 0===t?void 0:t.length);i++){var l=this.lstCommonField.find(t=>t.fieldId===this.prescriptionFieldIdSelected).field;let t=null===(e=this.lstTreatmentList[i][l])||void 0===e?void 0:e.split("#");var r="";if((null==t?void 0:t.length)>0&&(null==s?void 0:s.length)>0)for(let e=0;e<(null==s?void 0:s.length);e++)for(let i=0;i<(null==t?void 0:t.length);i++)t[i].split("~")[0]==s[e].MCODE&&(null==r||null==r||""==r?r+=t[i]:r=r+"#"+t[i]);this.lstTreatmentList[i][l]=r}}}loadTreatDietList(t){var e,i;(null===(e=this.lstTreatmentNew)||void 0===e?void 0:e.length)>0&&"Treatment"==this.PrescriptionDefaultTemplateMaster.TimeType?this.LoadTreatmentListByCategory(t.first,t.rows):(null===(i=this.lstTreatmentNew)||void 0===i?void 0:i.length)>0&&"Diet"==this.PrescriptionDefaultTemplateMaster.TimeType&&this.LoadDietListIPD(t.first,t.rows)}SearchTreatmentDiet(){"Treatment"==this.PrescriptionDefaultTemplateMaster.TimeType?this.LoadTreatmentListByCategory(0,10):this.LoadDietListIPD(0,10)}AddRemoveSelectedList(t,e,i){if(t.checked){var s=this.lstTreatmentNew.find(t=>t.MCODE==i);this.lstCommmonListTreatDietSelcted.push({MCODE:s.MCODE,Description:s.Description,Qty:s.Qty,Checked:t.checked})}else s=this.lstTreatmentNew.find(t=>t.MCODE==i),this.lstCommmonListTreatDietSelcted=this.lstCommmonListTreatDietSelcted.filter(t=>t.MCODE!==s.MCODE)}RemoveSelectedList(t,e,i){if(t.checked){var s=this.lstCommmonListTreatDietSelcted.find(t=>t.MCODE==i);(l=this.lstTreatmentNew.findIndex(t=>t.MCODE==s.MCODE))>=0&&(this.lstTreatmentNew[l].Checked=!0)}else{var l;s=this.lstCommmonListTreatDietSelcted.find(t=>t.MCODE==i),(l=this.lstTreatmentNew.findIndex(t=>t.MCODE==s.MCODE))>=0&&(this.lstTreatmentNew[l].Checked=!1)}this.UpdateNewTreatment(),this.cdRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(c.Sb(c.h),c.Sb(l.i),c.Sb(o.a),c.Sb(a.a),c.Sb(r.f),c.Sb(d.a))},t.\u0275cmp=c.Mb({type:t,selectors:[["app-prescription-default-template-master"]],viewQuery:function(t,e){if(1&t&&c.cd(g,1),2&t){let t;c.Hc(t=c.jc())&&(e.myForm=t.first)}},features:[c.Cb,c.Db],decls:5,vars:8,consts:[["class","row mt25",4,"ngIf"],["class","row mb-8",4,"ngIf"],["header","Add New",3,"modal","visible","visibleChange"],[4,"ngIf"],["pTemplate","footer"],[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["responsiveLayout","scroll","scrollHeight","500px",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-ml-left","mr-3"],["pButton","","title","New","label","Add New","class","p-button-outlined","icon","pi pi-plus",3,"click",4,"ngIf"],[1,"p-ml-auto"],["matTooltip","Refresh",3,"click"],["src","./assets/custom-icons/refresh.svg",1,"custom-ico","mr4"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined",3,"click"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],[1,"row","mb-8"],[1,"col"],["myForm","ngForm"],[1,"row","m-0"],[1,"col-md-4"],[1,"form-group"],[1,"required"],["required","true","name","ddlType","optionLabel","name","optionValue","code","placeholder","Please Select Type",3,"options","ngModel","filter","ngModelChange","onChange"],["type","text","required","","name","txtTemplateName",1,"form-control",3,"ngModel","ngModelChange"],["required","true","name","ddlStatus","optionLabel","name","optionValue","code","placeholder","Please Select Status",3,"options","ngModel","filter","ngModelChange"],[1,"row"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","250px",3,"columns","value","rowHover","scrollable"],["dt11",""],["pTemplate","colgroup"],[1,"row","justify-content-center"],["type","button","type","button","class","btn-con btn btn-success mr-3",3,"disabled","click",4,"ngIf"],[1,"btn-con","closeButtonCon",3,"click"],[4,"ngFor","ngForOf"],["style","width:140px",4,"ngFor","ngForOf"],[2,"width","140px"],["style","word-wrap: break-word;",4,"ngFor","ngForOf"],[2,"word-wrap","break-word"],["type","button",3,"click"],["type","button","type","button",1,"btn-con","btn","btn-success","mr-3",3,"disabled","click"],["scrollHeight","200px","responsiveLayout","scroll",1,"ColumnFilterTable",3,"value","rowHover","globalFilterFields","scrollable","lazy","paginator","rows","totalRecords","lazyLoadOnInit","first","onLazyLoad","firstChange"],["dt99",""],["class","col-md-4",4,"ngIf"],["type","text","name","txtInputSearchTreatment","placeholder","Search...",1,"form-control","psearchfilter",3,"ngModel","value","ngModelChange","change"],["matTooltip","Filter",3,"click"],[2,"width","100px"],[2,"width","50px"],["inputId","binary",3,"name","ngModel","binary","onChange","ngModelChange"],["scrollHeight","200px","responsiveLayout","scroll",3,"value","rowHover","scrollable"],["dt199",""],[2,"width","20px"],[2,"width","80px"],["type","button","class","btn btn-new-primary mr-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-new-primary","mr-2",3,"click"]],template:function(t,e){1&t&&(c.Sc(0,I,10,5,"div",0),c.Sc(1,k,40,18,"div",1),c.Yb(2,"p-dialog",2),c.ic("visibleChange",function(t){return e.ShowAddNewTreatmentModel=t}),c.Sc(3,W,13,15,"div",3),c.Sc(4,z,1,1,"ng-template",4),c.Xb()),2&t&&(c.tc("ngIf",null==e.Mode),c.Fb(1),c.tc("ngIf",null!=e.Mode),c.Fb(1),c.Pc(c.yc(7,q)),c.tc("modal",!0)("visible",e.ShowAddNewTreatmentModel),c.Fb(1),c.tc("ngIf",e.ShowAddNewTreatmentModel))},directives:[s.p,h.a,m.i,p.c,u.a,b.b,f.z,f.p,f.q,T.a,f.w,f.o,f.r,f.b,s.o,v.a],pipes:[S.a],styles:[""]}),t})()}];let K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Qb({type:t}),t.\u0275inj=c.Pb({imports:[[l.l.forChild(Q)],l.l]}),t})();var tt=i("QoE7");let et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Qb({type:t}),t.\u0275inj=c.Pb({imports:[[s.c,K,f.i,p.f,b.c,T.b,u.b,v.b,h.b,tt.a]]}),t})()}}]);