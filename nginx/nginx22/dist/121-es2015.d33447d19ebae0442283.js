(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{uwU3:function(t,e,n){"use strict";n.r(e),n.d(e,"PatientAttendantReportModule",function(){return k});var i=n("ofXK"),a=n("tyNb"),c=n("Nach"),r=n("CwUn"),o=n("fXoL"),s=n("dcBc"),l=n("PtJb"),d=n("NLkC"),b=n("eO1q"),u=n("3Pt+"),p=n("rEr+"),h=n("7zfz"),m=n("AAHA"),g=n("7kUa"),f=n("jIHw");const y=["dt"],S=["filtr"],Y=["calendar"];function A(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div",22),o.Yb(1,"app-center-dropdown",23),o.ic("onclinicSelect",function(e){return o.Lc(t),o.mc().onclinicSelect(e)}),o.Xb(),o.Xb()}2&t&&(o.Fb(1),o.tc("isCenterAll",!0)("mode","get"))}function X(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",32),o.ic("click",function(){return o.Lc(t),o.mc(2).exportToItemExcel()}),o.Xb()}}function v(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div",24),o.Yb(1,"span",25),o.Uc(2),o.Xb(),o.Yb(3,"span",26),o.Sc(4,X,1,0,"button",27),o.Yb(5,"span",28),o.Tb(6,"i",29),o.Yb(7,"input",30,31),o.ic("input",function(e){return o.Lc(t),o.mc(),o.Ic(21).filterGlobal(e.target.value,"contains")}),o.Xb(),o.Xb(),o.Xb(),o.Xb()}if(2&t){const t=o.mc();o.Fb(2),o.Wc(" ",(null==t.lstPatientAttendantReport?null:t.lstPatientAttendantReport.length)>0?"Total Records: "+t.filteredValuesLength:""," "),o.Fb(2),o.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Download.toString()))&&(null==t.lstPatientAttendantReport?null:t.lstPatientAttendantReport.length)>0)}}function w(t,e){if(1&t&&(o.Yb(0,"tr"),o.Yb(1,"td"),o.Uc(2," No records found "),o.Xb(),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.Gb("colspan",null==t?null:t.length)}}function I(t,e){1&t&&o.Tb(0,"col",41)}function U(t,e){if(1&t&&(o.Yb(0,"colgroup"),o.Tb(1,"col",33),o.Sc(2,I,1,0,"col",34),o.Tb(3,"col",35),o.Tb(4,"col",36),o.Tb(5,"col",37),o.Tb(6,"col",38),o.Tb(7,"col",39),o.Tb(8,"col",40),o.Tb(9,"col",41),o.Tb(10,"col",35),o.Tb(11,"col",35),o.Tb(12,"col",40),o.Tb(13,"col",40),o.Xb()),2&t){const t=o.mc();o.Fb(2),o.tc("ngIf",t.userTypes.SuperAdmin==t.UserTypeCurre)}}function F(t,e){1&t&&(o.Yb(0,"th"),o.Uc(1,"Center"),o.Xb())}function D(t,e){if(1&t&&(o.Yb(0,"tr"),o.Yb(1,"th"),o.Uc(2,"Sr.No."),o.Xb(),o.Sc(3,F,2,0,"th",42),o.Yb(4,"th"),o.Uc(5,"Attendant Id"),o.Xb(),o.Yb(6,"th"),o.Uc(7,"Name"),o.Xb(),o.Yb(8,"th"),o.Uc(9,"Gender"),o.Xb(),o.Yb(10,"th"),o.Uc(11,"Age"),o.Xb(),o.Yb(12,"th"),o.Uc(13,"PAdress"),o.Xb(),o.Yb(14,"th"),o.Uc(15,"PMobNo"),o.Xb(),o.Yb(16,"th"),o.Uc(17,"InOut"),o.Xb(),o.Yb(18,"th"),o.Uc(19,"DateIn"),o.Xb(),o.Yb(20,"th"),o.Uc(21,"DateOut"),o.Xb(),o.Yb(22,"th"),o.Uc(23,"CreatedBy"),o.Xb(),o.Yb(24,"th"),o.Uc(25,"ModifiedBy"),o.Xb(),o.Xb()),2&t){const t=o.mc();o.Fb(3),o.tc("ngIf",t.userTypes.SuperAdmin==t.UserTypeCurre)}}function R(t,e){if(1&t&&(o.Yb(0,"span"),o.Uc(1),o.Xb()),2&t){const t=o.mc(2).$implicit;o.Fb(1),o.Wc(", Attendant Charges - ",t.AttendantCharges,"")}}function T(t,e){if(1&t&&(o.Yb(0,"tr"),o.Yb(1,"td",43),o.Yb(2,"span"),o.Uc(3),o.Xb(),o.Sc(4,R,2,1,"span",42),o.Xb(),o.Xb()),2&t){const t=o.mc().$implicit,e=o.mc();o.Fb(1),o.Gb("colspan",e.userTypes.SuperAdmin==e.UserTypeCurre?13:12),o.Fb(2),o.Xc("",t.BookingNumber," (MRNo - ",t.MRNo,")"),o.Fb(1),o.tc("ngIf",null!=t.AttendantCharges)}}function C(t,e){if(1&t&&(o.Yb(0,"td"),o.Uc(1),o.Xb()),2&t){const t=o.mc().$implicit;o.Fb(1),o.Vc(t.ClinicName)}}function M(t,e){if(1&t&&(o.Sc(0,T,5,4,"tr",42),o.Yb(1,"tr"),o.Yb(2,"td"),o.Uc(3),o.Xb(),o.Sc(4,C,2,1,"td",42),o.Yb(5,"td"),o.Uc(6),o.Xb(),o.Yb(7,"td"),o.Uc(8),o.Xb(),o.Yb(9,"td"),o.Uc(10),o.Xb(),o.Yb(11,"td"),o.Uc(12),o.Xb(),o.Yb(13,"td"),o.Uc(14),o.Xb(),o.Yb(15,"td"),o.Uc(16),o.Xb(),o.Yb(17,"td"),o.Yb(18,"span"),o.Uc(19),o.Xb(),o.Xb(),o.Yb(20,"td"),o.Uc(21),o.nc(22,"date"),o.nc(23,"date"),o.Xb(),o.Yb(24,"td"),o.Uc(25),o.nc(26,"date"),o.nc(27,"date"),o.Xb(),o.Yb(28,"td"),o.Uc(29),o.Xb(),o.Yb(30,"td"),o.Uc(31),o.Xb(),o.Xb()),2&t){const t=e.$implicit,n=e.rowIndex,i=o.mc();o.tc("ngIf",(null==i.rowGroupMetadata[t.MRNo]?null:i.rowGroupMetadata[t.MRNo].index)==n),o.Fb(3),o.Vc(n+1),o.Fb(1),o.tc("ngIf",i.userTypes.SuperAdmin==i.UserTypeCurre),o.Fb(2),o.Vc(t.AttendantNumber),o.Fb(2),o.Vc(t.AttendantName),o.Fb(2),o.Vc(t.Gender),o.Fb(2),o.Vc(t.Age),o.Fb(2),o.Vc(t.PAddress),o.Fb(2),o.Vc(t.ContactNumber),o.Fb(2),o.Hb(t.Status),o.Fb(1),o.Vc(t.Status),o.Fb(2),o.Vc("0001"==o.pc(22,17,t.CheckedInDate,"yyyy")?"":o.pc(23,20,t.CheckedInDate,i.customDateFormat.DEF_DATE_TIME)),o.Fb(4),o.Vc("0001"==o.pc(26,23,t.CheckedOutDate,"yyyy")?"":o.pc(27,26,t.CheckedOutDate,i.customDateFormat.DEF_DATE_TIME)),o.Fb(4),o.Vc(t.CreatedBy),o.Fb(2),o.Vc(t.ModifiedBy)}}const P=function(){return{standalone:!0}},N=function(){return["ClinicName","GroupNumber","BookingNumber","PatientName","MRNo","ContactNumber","BookingStatus","RoomNumber","State","Gender"]},x=[{path:"",component:(()=>{class t extends r.a{constructor(t,e,n,i,a,r,o){super(),this.cdRef=t,this.router=e,this._ConstantServices=n,this._MasterServices=i,this._ReportServices=a,this._UtilityService=r,this.datepipe=o,this.UserTypeCurre=localStorage.getItem("userTypeId"),this.ClinicIdSelected=null,this.userTypes=c.s,this.customDateFormat=c.h,this.today=new Date,this.rangeDates=[],this.filteredValuesLength=0,this.ActionList=c.a,this.lstIAccess=[],this.lstIAccessStr=[],this._ConstantServices.ActiveMenuName="Patient Attendant Report",this.rangeDates=[new Date,new Date],this.getPageLevelAccess()}getPageLevelAccess(){var t,e,n=this.getUrlWithoutParams(),i=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==i?void 0:i.find(t=>t.MenuItemURL===n))&&(this.lstIAccess=null===(t=i.find(t=>t.MenuItemURL===n))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}getUrlWithoutParams(){let t=this.router.parseUrl(this.router.url);return t.queryParams={},t.fragment=null,t.toString()}ngOnInit(){c.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.LoadPatientAttendantReportList()),this.today.setFullYear(this.today.getFullYear()+1),this.maxYear=this.today.getFullYear()}onclinicSelect(t){this.ClinicIdSelected=t,this.LoadPatientAttendantReportList()}LoadPatientAttendantReportList(){if(null==this.ClinicIdSelected||null==this.ClinicIdSelected)return void this._UtilityService.showWarningAlert("Please select center");if(null==this.rangeDates[0]||null==this.rangeDates[0])return void this._UtilityService.showWarningAlert("Please select 'from' date");null!=this.rangeDates[1]&&null!=this.rangeDates[1]||(this.rangeDates=[this.rangeDates[0],this.rangeDates[0]]);let t={};t.clinicId=this.ClinicIdSelected,t.dFrom=new Date(this.datepipe.transform(this.rangeDates[0],"yyyy-MM-dd")),t.dTo=new Date(this.datepipe.transform(this.rangeDates[1],"yyyy-MM-dd")),t.gender="All",this._UtilityService.showSpinner(),this.unsubscribe.add=this._ReportServices.GetPatientAttendantReport(t).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var n=JSON.parse(t.actionResult.result);this.lstPatientAttendantReport=n=n||[],this.filtr.nativeElement.value="",this.dataTable.reset(),this.filteredValuesLength=null===(e=this.lstPatientAttendantReport)||void 0===e?void 0:e.length,this.updateRowGroupMetaData(this.lstPatientAttendantReport),this.cdRef.detectChanges()}else this.lstPatientAttendantReport=[],this.rowGroupMetadata={},this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}updateRowGroupMetaData(t=[]){if(this.rowGroupMetadata={},t)for(let e=0;e<t.length;e++){let n=t[e].MRNo;0==e?this.rowGroupMetadata[n]={index:0,size:1}:n===t[e-1].MRNo?this.rowGroupMetadata[n].size++:this.rowGroupMetadata[n]={index:e,size:1}}this.cdRef.detectChanges()}dateRangeChange(){this.rangeDates[0]&&this.rangeDates[1]&&(void 0!==this.calendar&&(this.calendar.overlayVisible=!1),this.LoadPatientAttendantReportList())}exportToItemExcel(){let t={reportname:"PatientAttendantReport",filename:"PatientAttendantReport"};t.clinicId=this.ClinicIdSelected,t.dFrom=new Date(this.datepipe.transform(this.rangeDates[0],"yyyy-MM-dd")),t.dTo=new Date(this.datepipe.transform(this.rangeDates[1],"yyyy-MM-dd")),t.gender="All",t.isExcel=!0,this._MasterServices.downloadReport(t)}onFilter(t,e){this.updateRowGroupMetaData(t.filteredValue),this.filteredValuesLength=t.filteredValue.length}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(o.h),o.Sb(a.i),o.Sb(c.f),o.Sb(s.a),o.Sb(l.a),o.Sb(d.a),o.Sb(i.f))},t.\u0275cmp=o.Mb({type:t,selectors:[["app-patient-attendant-report"]],viewQuery:function(t,e){if(1&t&&(o.cd(y,1),o.cd(S,1),o.cd(Y,1)),2&t){let t;o.Hc(t=o.jc())&&(e.dataTable=t.first),o.Hc(t=o.jc())&&(e.filtr=t.first),o.Hc(t=o.jc())&&(e.calendar=t.first)}},features:[o.Cb],decls:27,vars:17,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],["class","col-md-3",4,"ngIf"],[1,"col-auto"],[1,"form-group"],["for",""],[1,"required"],["selectionMode","range","inputId","icon","name","rangeDates",3,"monthNavigator","yearNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],[1,"col-md-1","mt-7","mt10"],["type","button","matTooltip","Search",1,"btn","btn-new-primary",3,"click"],[1,"row"],["scrollHeight","calc(100vh - 275px)","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[1,"col-md-3"],[3,"isCenterAll","mode","onclinicSelect"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[2,"width","60px"],["style","width:130px",4,"ngIf"],[2,"width","135px"],[2,"width","125px"],[2,"width","70px"],[2,"width","40px"],[2,"width","150px"],[2,"width","100px"],[2,"width","130px"],[4,"ngIf"],[2,"background-color","#ebedf3","font-weight","bold","height","34px"]],template:function(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div",0),o.Yb(1,"div",1),o.Yb(2,"div",2),o.Yb(3,"div",3),o.Yb(4,"div",4),o.Sc(5,A,2,2,"div",5),o.Yb(6,"div",6),o.Yb(7,"div",7),o.Yb(8,"label",8),o.Uc(9,"From / To"),o.Yb(10,"span",9),o.Uc(11,"*"),o.Xb(),o.Xb(),o.Yb(12,"div"),o.Yb(13,"p-calendar",10,11),o.ic("ngModelChange",function(t){return e.rangeDates=t})("onSelect",function(){return e.dateRangeChange()}),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(15,"div",12),o.Yb(16,"button",13),o.ic("click",function(){return e.LoadPatientAttendantReportList()}),o.Uc(17," Search "),o.Xb(),o.Xb(),o.Xb(),o.Yb(18,"div",14),o.Yb(19,"div",1),o.Yb(20,"p-table",15,16),o.ic("onFilter",function(n){o.Lc(t);const i=o.Ic(21);return e.onFilter(n,i)}),o.Sc(22,v,9,2,"ng-template",17),o.Sc(23,w,3,1,"ng-template",18),o.Sc(24,U,14,1,"ng-template",19),o.Sc(25,D,26,1,"ng-template",20),o.Sc(26,M,32,29,"ng-template",21),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb()}2&t&&(o.Fb(5),o.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin),o.Fb(8),o.wc("yearRange","",e.customDateFormat.MinYear,":",e.maxYear,""),o.tc("monthNavigator",!0)("yearNavigator",!0)("maxDate",e.today)("ngModel",e.rangeDates)("ngModelOptions",o.yc(15,P))("showIcon",!0)("dateFormat",e.customDateFormat.CalendarFormat)("readonlyInput",!0),o.Fb(7),o.tc("value",e.lstPatientAttendantReport)("rowHover",!0)("globalFilterFields",o.yc(16,N))("scrollable",!0))},directives:[i.p,b.a,u.o,u.r,p.c,h.i,m.a,g.a,f.b],pipes:[i.f],styles:[""]}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({imports:[[a.l.forChild(x)],a.l]}),t})();var V=n("arFO"),G=n("T2Aj");let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({imports:[[i.c,L,u.i,p.f,f.c,V.b,g.b,b.b,G.a]]}),t})()}}]);