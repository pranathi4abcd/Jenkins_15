(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{LjWT:function(t,e,c){"use strict";c.r(e),c.d(e,"PatientDischargeReportModule",function(){return _});var i=c("ofXK"),n=c("tyNb"),r=c("Nach"),o=c("CwUn"),l=c("fXoL"),s=c("dcBc"),a=c("PtJb"),b=c("NLkC"),d=c("eO1q"),p=c("3Pt+"),u=c("rEr+"),h=c("7zfz"),m=c("AAHA"),g=c("7kUa"),f=c("jIHw");const S=["dt"],I=["filtr"],Y=["calendar"];function X(t,e){1&t&&(l.Yb(0,"div",7),l.Yb(1,"label",21),l.Uc(2,"Center "),l.Yb(3,"span",9),l.Uc(4,"*"),l.Xb(),l.Xb(),l.Xb())}function y(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",10),l.Yb(1,"app-center-dropdown",22),l.ic("onclinicSelect",function(e){return l.Lc(t),l.mc().onclinicSelect(e)}),l.Xb(),l.Xb()}2&t&&(l.Fb(1),l.tc("isCenterLabel",!1)("mode","get"))}function U(t,e){if(1&t){const t=l.Zb();l.Yb(0,"button",31),l.ic("click",function(){return l.Lc(t),l.mc(2).exportToItemExcel()}),l.Xb()}}function T(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",23),l.Yb(1,"span",24),l.Uc(2),l.Xb(),l.Yb(3,"span",25),l.Sc(4,U,1,0,"button",26),l.Yb(5,"span",27),l.Tb(6,"i",28),l.Yb(7,"input",29,30),l.ic("input",function(e){return l.Lc(t),l.mc(),l.Ic(18).filterGlobal(e.target.value,"contains")}),l.Xb(),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=l.mc();l.Fb(2),l.Wc(" ",(null==t.lstReport?null:t.lstReport.length)>0?"Total Records: "+t.filteredValuesLength:""," "),l.Fb(2),l.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Download.toString()))&&(null==t.lstReport?null:t.lstReport.length)>0)}}function v(t,e){1&t&&(l.Yb(0,"tr"),l.Yb(1,"td"),l.Uc(2," No records found "),l.Xb(),l.Xb()),2&t&&(l.Fb(1),l.Gb("colspan",3))}function D(t,e){1&t&&l.Tb(0,"col",39)}function F(t,e){if(1&t&&(l.Yb(0,"colgroup"),l.Tb(1,"col",32),l.Tb(2,"col",32),l.Sc(3,D,1,0,"col",33),l.Tb(4,"col",34),l.Tb(5,"col",35),l.Tb(6,"col",36),l.Tb(7,"col",37),l.Tb(8,"col",38),l.Tb(9,"col",38),l.Tb(10,"col",38),l.Tb(11,"col",38),l.Tb(12,"col",37),l.Tb(13,"col",35),l.Tb(14,"col",34),l.Tb(15,"col",34),l.Tb(16,"col",34),l.Tb(17,"col",34),l.Tb(18,"col",34),l.Xb()),2&t){const t=l.mc();l.Fb(3),l.tc("ngIf",t.userTypes.SuperAdmin==t.UserTypeCurre)}}function C(t,e){1&t&&(l.Yb(0,"th"),l.Uc(1,"Center Name"),l.Xb())}function R(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"th"),l.Uc(2,"Action"),l.Xb(),l.Yb(3,"th"),l.Uc(4,"S No"),l.Xb(),l.Sc(5,C,2,0,"th",40),l.Yb(6,"th"),l.Uc(7,"Name"),l.Xb(),l.Yb(8,"th"),l.Uc(9,"MR No"),l.Xb(),l.Yb(10,"th"),l.Uc(11,"Gender"),l.Xb(),l.Yb(12,"th"),l.Uc(13,"Contact No"),l.Xb(),l.Yb(14,"th"),l.Uc(15,"Group No"),l.Xb(),l.Yb(16,"th"),l.Uc(17,"Booking No"),l.Xb(),l.Yb(18,"th",41),l.Uc(19,"IP No "),l.Tb(20,"p-sortIcon",42),l.Xb(),l.Yb(21,"th",43),l.Uc(22,"OP No "),l.Tb(23,"p-sortIcon",44),l.Xb(),l.Yb(24,"th"),l.Uc(25,"Room No"),l.Xb(),l.Yb(26,"th"),l.Uc(27,"Dr. Name"),l.Xb(),l.Yb(28,"th"),l.Uc(29,"Discharge Reason"),l.Xb(),l.Yb(30,"th"),l.Uc(31,"Admitted Time"),l.Xb(),l.Yb(32,"th"),l.Uc(33,"Discharged Time"),l.Xb(),l.Yb(34,"th"),l.Uc(35,"Discharge Creation"),l.Xb(),l.Yb(36,"th"),l.Uc(37,"Discharge Created By"),l.Xb(),l.Xb()),2&t){const t=l.mc();l.Fb(5),l.tc("ngIf",t.userTypes.SuperAdmin==t.UserTypeCurre)}}function w(t,e){if(1&t){const t=l.Zb();l.Yb(0,"i",46),l.ic("click",function(){l.Lc(t);const e=l.mc().$implicit;return l.mc().PrintPatientRecord(e.PatientId,e.SlotBookingId)}),l.Xb()}}function N(t,e){if(1&t&&(l.Yb(0,"td"),l.Uc(1),l.Xb()),2&t){const t=l.mc().$implicit;l.Fb(1),l.Vc(t.ClinicName)}}function P(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"td"),l.Sc(2,w,1,0,"i",45),l.Xb(),l.Yb(3,"td"),l.Uc(4),l.Xb(),l.Sc(5,N,2,1,"td",40),l.Yb(6,"td"),l.Uc(7),l.Xb(),l.Yb(8,"td"),l.Uc(9),l.Xb(),l.Yb(10,"td"),l.Uc(11),l.Xb(),l.Yb(12,"td"),l.Uc(13),l.Xb(),l.Yb(14,"td"),l.Uc(15),l.Xb(),l.Yb(16,"td"),l.Uc(17),l.Xb(),l.Yb(18,"td"),l.Uc(19),l.Xb(),l.Yb(20,"td"),l.Uc(21),l.Xb(),l.Yb(22,"td"),l.Uc(23),l.Xb(),l.Yb(24,"td"),l.Uc(25),l.Xb(),l.Yb(26,"td"),l.Uc(27),l.Xb(),l.Yb(28,"td"),l.Uc(29),l.nc(30,"date"),l.nc(31,"date"),l.Xb(),l.Yb(32,"td"),l.Uc(33),l.nc(34,"date"),l.nc(35,"date"),l.Xb(),l.Yb(36,"td"),l.Uc(37),l.nc(38,"date"),l.nc(39,"date"),l.Xb(),l.Yb(40,"td"),l.Uc(41),l.Xb(),l.Xb()),2&t){const t=e.$implicit,c=e.rowIndex,i=l.mc();l.Fb(2),l.tc("ngIf",null==i.lstIAccessStr?null:i.lstIAccessStr.includes(i.ActionList.Print.toString())),l.Fb(2),l.Vc(c+1),l.Fb(1),l.tc("ngIf",i.userTypes.SuperAdmin==i.UserTypeCurre),l.Fb(2),l.Vc(t.FullName),l.Fb(2),l.Vc(t.MRNo),l.Fb(2),l.Vc(t.Gender),l.Fb(2),l.Vc(t.ContactNumber),l.Fb(2),l.Vc(t.GroupNumber),l.Fb(2),l.Vc(t.BookingNumber),l.Fb(2),l.Vc(t.IPNumber),l.Fb(2),l.Vc(t.OPNumber),l.Fb(2),l.Vc(t.RoomNumber),l.Fb(2),l.Vc(t.DoctorName),l.Fb(2),l.Vc(t.DischargeReason),l.Fb(2),l.Vc("0001"==l.pc(30,18,t.CheckedInDate,"yyyy")?"":l.pc(31,21,t.CheckedInDate,i.customDateFormat.DEF_DATE_TIME_AMPM)),l.Fb(4),l.Vc("0001"==l.pc(34,24,t.CheckedOutDate,"yyyy")?"":l.pc(35,27,t.CheckedOutDate,i.customDateFormat.DEF_DATE_TIME_AMPM)),l.Fb(4),l.Vc("0001"==l.pc(38,30,t.DischargeTicketCreationTime,"yyyy")?"":l.pc(39,33,t.DischargeTicketCreationTime,i.customDateFormat.DEF_DATE_TIME_AMPM)),l.Fb(4),l.Vc(t.DischargeTicketCreatedBy)}}const A=function(){return{standalone:!0}},M=function(){return["ClinicName","FullName","MRNo","Gender","ContactNumber","GroupNumber","BookingNumber","RoomNumber","DischargeReason"]},L=[{path:"",component:(()=>{class t extends o.a{constructor(t,e,c,i,n,o,l){super(),this.cdRef=t,this.router=e,this.datepipe=c,this._MasterServices=i,this._ReportServices=n,this._ConstantServices=o,this._UtilityService=l,this.UserTypeCurre=localStorage.getItem("userTypeId"),this.ClinicIdSelected=null,this.userTypes=r.s,this.customDateFormat=r.h,this.today=new Date,this.filteredValuesLength=0,this.ActionList=r.a,this.lstIAccess=[],this.lstIAccessStr=[],this._ConstantServices.ActiveMenuName="Patient Discharge Report",this.selectedDate=new Date,this.getPageLevelAccess()}getPageLevelAccess(){var t,e,c=this.getUrlWithoutParams(),i=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==i?void 0:i.find(t=>t.MenuItemURL===c))&&(this.lstIAccess=null===(t=i.find(t=>t.MenuItemURL===c))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}getUrlWithoutParams(){let t=this.router.parseUrl(this.router.url);return t.queryParams={},t.fragment=null,t.toString()}ngOnInit(){r.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.LoadPatientDischargeReport()),this.MaxYear=this.today.getFullYear()}onclinicSelect(t){this.ClinicIdSelected=t,this.LoadPatientDischargeReport()}DateChange(){this.selectedDate&&(void 0!==this.calendar&&(this.calendar.overlayVisible=!1),this.LoadPatientDischargeReport())}LoadPatientDischargeReport(){null!=this.ClinicIdSelected&&null!=this.ClinicIdSelected?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._ReportServices.GetPatientDischargeReport(this.ClinicIdSelected,this.datepipe.transform(this.selectedDate,"yyyy-MM-dd")).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var c=JSON.parse(t.actionResult.result);this.lstReport=c=c||[],void 0!==this.filtr&&(this.filtr.nativeElement.value="",this.dataTable.reset(),this.filteredValuesLength=null===(e=this.lstReport)||void 0===e?void 0:e.length),this.cdRef.detectChanges()}else this.lstReport=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this._UtilityService.showWarningAlert("Please select center")}PrintDischargeSummary(t,e){window.open("#/print/patient-print-prescription?UserId="+t+"&SlotBookingId="+e+"&tag=IDS")}PrintPatientRecord(t,e){window.open("#/print/patient-record?UserId="+t+"&SlotBookingId="+e+"&tag=IPD")}exportToItemExcel(){let t={reportname:"PatientDischargeReport",filename:"PatientDischargeReport"};t.clinicId=this.ClinicIdSelected,t.dFrom=new Date(this.datepipe.transform(this.selectedDate,"yyyy-MM-dd")),this._MasterServices.downloadReport(t)}onFilter(t,e){this.filteredValuesLength=t.filteredValue.length}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(l.h),l.Sb(n.i),l.Sb(i.f),l.Sb(s.a),l.Sb(a.a),l.Sb(r.f),l.Sb(b.a))},t.\u0275cmp=l.Mb({type:t,selectors:[["app-patient-discharge-report"]],viewQuery:function(t,e){if(1&t&&(l.cd(S,1),l.cd(I,1),l.cd(Y,1)),2&t){let t;l.Hc(t=l.jc())&&(e.dataTable=t.first),l.Hc(t=l.jc())&&(e.filtr=t.first),l.Hc(t=l.jc())&&(e.calendar=t.first)}},features:[l.Cb],decls:24,vars:17,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],["class","col-auto pr-0",4,"ngIf"],["class","col-md-3",4,"ngIf"],[1,"col-auto","pr-0"],[1,"pt-2"],[1,"required"],[1,"col-md-3"],["inputId","icon",3,"monthNavigator","yearNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","onSelect","ngModelChange"],["calendar",""],[1,"row"],["scrollHeight","calc(100vh - 250px)","responsiveLayout","scroll",1,"ColumnFilterTable",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["for","",1,"pt-2"],[3,"isCenterLabel","mode","onclinicSelect"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[2,"width","60px"],["style","width:160px",4,"ngIf"],[2,"width","150px"],[2,"width","120px"],[2,"width","80px"],[2,"width","100px"],[2,"width","130px"],[2,"width","160px"],[4,"ngIf"],["pSortableColumn","IPNumber"],["field","IPNumber"],["pSortableColumn","OPNumber"],["field","OPNumber"],["title","Print Patient Record","class","fa fa-print mr-2",3,"click",4,"ngIf"],["title","Print Patient Record",1,"fa","fa-print","mr-2",3,"click"]],template:function(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",0),l.Yb(1,"div",1),l.Yb(2,"div",2),l.Yb(3,"div",3),l.Yb(4,"div",4),l.Sc(5,X,5,0,"div",5),l.Sc(6,y,2,2,"div",6),l.Yb(7,"div",7),l.Yb(8,"label",8),l.Uc(9,"Planned Discharged Date"),l.Yb(10,"span",9),l.Uc(11,"*"),l.Xb(),l.Xb(),l.Xb(),l.Yb(12,"div",10),l.Yb(13,"p-calendar",11,12),l.ic("onSelect",function(){return e.DateChange()})("ngModelChange",function(t){return e.selectedDate=t}),l.Xb(),l.Xb(),l.Xb(),l.Yb(15,"div",13),l.Yb(16,"div",1),l.Yb(17,"p-table",14,15),l.ic("onFilter",function(c){l.Lc(t);const i=l.Ic(18);return e.onFilter(c,i)}),l.Sc(19,T,9,2,"ng-template",16),l.Sc(20,v,3,1,"ng-template",17),l.Sc(21,F,19,1,"ng-template",18),l.Sc(22,R,38,1,"ng-template",19),l.Sc(23,P,42,36,"ng-template",20),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()}2&t&&(l.Fb(5),l.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin),l.Fb(1),l.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin),l.Fb(7),l.wc("yearRange","",e.customDateFormat.MinYear,":",e.MaxYear,""),l.tc("monthNavigator",!0)("yearNavigator",!0)("ngModel",e.selectedDate)("ngModelOptions",l.yc(15,A))("showIcon",!0)("dateFormat",e.customDateFormat.CalendarFormat)("readonlyInput",!1),l.Fb(4),l.tc("value",e.lstReport)("rowHover",!0)("globalFilterFields",l.yc(16,M))("scrollable",!0))},directives:[i.p,d.a,p.o,p.r,u.c,h.i,m.a,g.a,f.b,u.b,u.a],pipes:[i.f],styles:[""]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[n.l.forChild(L)],n.l]}),t})();var V=c("arFO"),x=c("T2Aj");let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[i.c,k,p.i,u.f,f.c,V.b,g.b,d.b,x.a]]}),t})()}}]);