(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{xLhn:function(t,e,i){"use strict";i.r(e),i.d(e,"RawItemReportModule",function(){return O});var n=i("ofXK"),s=i("tyNb"),a=i("Nach"),c=i("CwUn"),l=i("fXoL"),r=i("dcBc"),o=i("PtJb"),d=i("NLkC"),u=i("eO1q"),b=i("3Pt+"),h=i("rEr+"),m=i("7zfz"),p=i("AAHA"),g=i("jIHw");const f=["calendar"];function I(t,e){1&t&&(l.Yb(0,"div",7),l.Yb(1,"label",22),l.Uc(2,"Select Clinic: "),l.Yb(3,"span",9),l.Uc(4,"*"),l.Xb(),l.Xb(),l.Xb())}function w(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",12),l.Yb(1,"app-center-dropdown",23),l.ic("onclinicSelect",function(e){return l.Lc(t),l.mc().onclinicSelect(e)}),l.Xb(),l.Xb()}2&t&&(l.Fb(1),l.tc("isCenterLabel",!1)("mode","get"))}function S(t,e){if(1&t){const t=l.Zb();l.Yb(0,"button",28),l.ic("click",function(){return l.Lc(t),l.mc(2).exportToItemExcel()}),l.Xb()}}function v(t,e){if(1&t&&(l.Yb(0,"div",24),l.Yb(1,"span",25),l.Uc(2),l.Xb(),l.Yb(3,"span",26),l.Sc(4,S,1,0,"button",27),l.Xb(),l.Xb()),2&t){const t=l.mc();l.Fb(2),l.Wc(" ",(null==t.lstRawItemDetails?null:t.lstRawItemDetails.length)>0?"Total Records: "+t.filteredValuesLength:""," "),l.Fb(2),l.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Download.toString()))&&(null==t.lstRawItemDetails?null:t.lstRawItemDetails.length)>0)}}function y(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"td"),l.Uc(2," No records found "),l.Xb(),l.Xb()),2&t){const t=e.$implicit;l.Fb(1),l.Gb("colspan",null==t?null:t.length)}}function D(t,e){if(1&t&&(l.Yb(0,"th"),l.Uc(1),l.Xb()),2&t){const t=e.$implicit;l.Fb(1),l.Wc(" ",t.header," ")}}function R(t,e){if(1&t&&(l.Yb(0,"tr"),l.Sc(1,D,2,1,"th",29),l.Xb()),2&t){const t=l.mc();l.Fb(1),l.tc("ngForOf",t.lstRawItemField)}}function F(t,e){1&t&&l.Tb(0,"col",31)}function Y(t,e){if(1&t&&(l.Yb(0,"colgroup"),l.Sc(1,F,1,0,"col",30),l.Xb()),2&t){const t=l.mc();l.Fb(1),l.tc("ngForOf",t.lstRawItemField)}}function C(t,e){if(1&t&&(l.Yb(0,"td",33),l.Yb(1,"span"),l.Uc(2),l.Xb(),l.Xb()),2&t){const t=e.$implicit,i=l.mc().$implicit;l.Fb(2),l.Vc(i[t.field])}}function X(t,e){if(1&t&&(l.Yb(0,"tr"),l.Sc(1,C,3,1,"td",32),l.Xb()),2&t){const t=e.columns;l.Fb(1),l.tc("ngForOf",t)}}const A=function(){return{standalone:!0}},U=[{path:"",component:(()=>{class t extends c.a{constructor(t,e,i,n,s,c,l){super(),this.cdRef=t,this.router=e,this._ConstantServices=i,this._MasterServices=n,this._ReportServices=s,this._UtilityService=c,this.datepipe=l,this.UserTypeCurre=localStorage.getItem("userTypeId"),this.userTypes=a.s,this.filteredValuesLength=0,this.ClinicIdSelected="",this.rangeDates=[],this.customDateFormat=a.h,this.maxDate=new Date,this.lstRawItemDetails=[],this.lstRawItemField=[],this.ActionList=a.a,this.lstIAccess=[],this.lstIAccessStr=[],this._ConstantServices.ActiveMenuName="Raw Item Report",this.getPageLevelAccess()}getPageLevelAccess(){var t,e,i=this.getUrlWithoutParams(),n=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==n?void 0:n.find(t=>t.MenuItemURL===i))&&(this.lstIAccess=null===(t=n.find(t=>t.MenuItemURL===i))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}getUrlWithoutParams(){let t=this.router.parseUrl(this.router.url);return t.queryParams={},t.fragment=null,t.toString()}ngOnInit(){this.rangeDates=[new Date(Date.now()-6048e5),new Date],a.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.GetConsumedItem()),this.maxYear=this.maxDate.getFullYear()}onclinicSelect(t){this.ClinicIdSelected=t,this.GetConsumedItem()}dateRangeChange(){this.rangeDates[0]&&this.rangeDates[1]&&(void 0!==this.calendar&&(this.calendar.overlayVisible=!1),this.GetConsumedItem())}GetConsumedItem(){if(this.lstRawItemDetails=[],this.lstRawItemField=[],null!=this.ClinicIdSelected&&null!=this.ClinicIdSelected&&""!=this.ClinicIdSelected){if(null!==this.rangeDates[0]||void 0!==this.rangeDates[0]&&null!==this.rangeDates[1]||void 0!==this.rangeDates[1]){var t=new Date(this.datepipe.transform(this.rangeDates[0],"yyyy-MM-dd")),e=new Date(this.datepipe.transform(this.rangeDates[1],"yyyy-MM-dd"));Math.floor((e-t)/864e5)>=15&&(this._UtilityService.showWarningAlert("You can't select more than 15 days"),this.rangeDates[0]=new Date(Date.now()-6048e5),this.rangeDates[1]=new Date)}this.GetRawItemDetailsListByDate()}else this._UtilityService.showWarningAlert("Select Clinic!!")}GetRawItemDetailsListByDate(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._ReportServices.GetRawItemDetailsListByDate(this.ClinicIdSelected,this.datepipe.transform(this.rangeDates[0],"MM-dd-yyyy"),this.datepipe.transform(this.rangeDates[1],"MM-dd-yyyy")).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);this.lstRawItemDetails=i=i||[],this.filteredValuesLength=null===(e=this.lstRawItemDetails)||void 0===e?void 0:e.length;var n=JSON.parse(t.actionResult.result2);this.lstRawItemField=n=n||[],this.cdRef.detectChanges()}else this.lstRawItemDetails=[]})}exportToItemExcel(){let t={reportname:"RawItemReportByDates",filename:"RawItemReportByDates"};t.clinicId=this.ClinicIdSelected,t.dFrom=this.rangeDates[0],t.dTo=this.rangeDates[1],this._MasterServices.downloadReport(t)}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(l.h),l.Sb(s.i),l.Sb(a.f),l.Sb(r.a),l.Sb(o.a),l.Sb(d.a),l.Sb(n.f))},t.\u0275cmp=l.Mb({type:t,selectors:[["app-raw-item-report"]],viewQuery:function(t,e){if(1&t&&l.cd(f,1),2&t){let t;l.Hc(t=l.jc())&&(e.calendar=t.first)}},features:[l.Cb],decls:27,vars:17,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],["class","col-auto",4,"ngIf"],["class","col col-md-3",4,"ngIf"],[1,"col-auto"],[1,"mt-2"],[1,"required"],["selectionMode","range","inputId","icon","name","rangeDates",3,"maxDate","monthNavigator","yearNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],[1,"col","col-md-3"],["type","button",1,"btn","btn-new-primary",3,"click"],[1,"row"],["scrollHeight","calc(100vh - 250px)","responsiveLayout","scroll",3,"columns","value","rowHover","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","colgroup"],["pTemplate","body"],["for","",1,"pt-2"],[3,"isCenterLabel","mode","onclinicSelect"],[1,"p-d-flex"],[1,"p-ml-left","pt-3"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[4,"ngFor","ngForOf"],["style","width:100px",4,"ngFor","ngForOf"],[2,"width","100px"],["style","word-wrap: break-word;","class","dietcheckbox",4,"ngFor","ngForOf"],[1,"dietcheckbox",2,"word-wrap","break-word"]],template:function(t,e){1&t&&(l.Yb(0,"div",0),l.Yb(1,"div",1),l.Yb(2,"div",2),l.Yb(3,"div",3),l.Yb(4,"div",4),l.Sc(5,I,5,0,"div",5),l.Sc(6,w,2,2,"div",6),l.Yb(7,"div",7),l.Yb(8,"label",8),l.Uc(9,"Date: "),l.Yb(10,"span",9),l.Uc(11,"*"),l.Xb(),l.Xb(),l.Xb(),l.Yb(12,"div",7),l.Yb(13,"p-calendar",10,11),l.ic("ngModelChange",function(t){return e.rangeDates=t})("onSelect",function(){return e.dateRangeChange()}),l.Xb(),l.Xb(),l.Yb(15,"div",12),l.Yb(16,"button",13),l.ic("click",function(){return e.GetConsumedItem()}),l.Uc(17,"Search"),l.Xb(),l.Xb(),l.Xb(),l.Yb(18,"div",14),l.Yb(19,"div",1),l.Yb(20,"p-table",15,16),l.Sc(22,v,5,2,"ng-template",17),l.Sc(23,y,3,1,"ng-template",18),l.Sc(24,R,2,1,"ng-template",19),l.Sc(25,Y,2,1,"ng-template",20),l.Sc(26,X,2,1,"ng-template",21),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()),2&t&&(l.Fb(5),l.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin),l.Fb(1),l.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin),l.Fb(7),l.wc("yearRange","",e.customDateFormat.MinYear,":",e.maxYear,""),l.tc("maxDate",e.maxDate)("monthNavigator",!0)("yearNavigator",!0)("ngModel",e.rangeDates)("ngModelOptions",l.yc(16,A))("showIcon",!0)("dateFormat",e.customDateFormat.CalendarFormat)("readonlyInput",!0),l.Fb(7),l.tc("columns",e.lstRawItemField)("value",e.lstRawItemDetails)("rowHover",!0)("scrollable",!0))},directives:[n.p,u.a,b.o,b.r,h.c,m.i,p.a,g.b,n.o],styles:[""]}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[s.l.forChild(U)],s.l]}),t})();var x=i("arFO"),L=i("7kUa"),T=i("T2Aj");let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[n.c,M,b.i,h.f,g.c,x.b,L.b,u.b,T.a]]}),t})()}}]);