(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"4Tty":function(t,e,i){"use strict";i.d(e,"a",function(){return u});var n=i("ofXK"),o=i("tyNb"),s=i("xjJ3"),a=i("fXoL");const r=[{path:"",component:s.a}];let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({imports:[[o.l.forChild(r)],o.l]}),t})();var c=i("rEr+"),d=i("jIHw"),h=i("7kUa");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({imports:[[n.c,l,c.f,d.c,h.b]]}),t})()},"5QKP":function(t,e,i){"use strict";i.d(e,"a",function(){return _});var n=i("mrSG"),o=i("fXoL"),s=i("Nach"),a=i("CwUn"),r=i("ofXK"),l=i("dcBc"),c=i("7zAq"),d=i("NLkC"),h=i("ReGW"),u=i("3Pt+"),b=i("eO1q"),m=i("Ks7X"),g=i("arFO"),p=i("rEr+"),S=i("7zfz"),f=i("7kUa"),y=i("Ji6n");const I=function(){return{width:"100%"}},M=function(){return{standalone:!0}};function C(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div",2),o.Yb(1,"div",3),o.Yb(2,"label",4),o.Uc(3,"Permitted By "),o.Yb(4,"span",5),o.Uc(5,"*"),o.Xb(),o.Uc(6,":"),o.Xb(),o.Yb(7,"p-dropdown",13),o.ic("ngModelChange",function(e){return o.Lc(t),o.mc().permittedBy=e})("onChange",function(e){return o.Lc(t),o.mc().emitPermittedBy(e)}),o.Xb(),o.Xb(),o.Xb()}if(2&t){const t=o.mc();o.Fb(7),o.Pc(o.yc(10,I)),o.tc("options",t.lstDoctorMster)("ngModel",t.permittedBy)("ngModelOptions",o.yc(11,M))("showClear",!0)("filter",!0)("filterBy","FullName")("filterMatchMode","contains")("placeholder","Please Select Doctor")}}function P(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div",22),o.Yb(1,"span",23),o.Tb(2,"i",24),o.Yb(3,"input",25),o.ic("input",function(e){return o.Lc(t),o.mc(),o.Ic(3).filterGlobal(e.target.value,"contains")}),o.Xb(),o.Xb(),o.Xb()}}function k(t,e){if(1&t&&(o.Yb(0,"tr"),o.Yb(1,"td"),o.Uc(2," No records found "),o.Xb(),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.Gb("colspan",null==t?null:t.length)}}function v(t,e){1&t&&(o.Yb(0,"th"),o.Uc(1,"Extra Bed"),o.Xb())}function D(t,e){if(1&t&&(o.Yb(0,"tr"),o.Yb(1,"th"),o.Uc(2,"Room Type"),o.Xb(),o.Yb(3,"th"),o.Uc(4,"Price Per Night"),o.Xb(),o.Yb(5,"th"),o.Uc(6,"Available Rooms"),o.Xb(),o.Yb(7,"th"),o.Uc(8,"Required Rooms"),o.Xb(),o.Sc(9,v,2,0,"th",26),o.Xb()),2&t){const t=o.mc(2);o.Fb(9),o.tc("ngIf",t.ClinicMaster.IsExtraBedApplicable)}}function R(t,e){if(1&t&&(o.Yb(0,"option",30),o.Uc(1),o.Xb()),2&t){const t=e.$implicit;o.uc("value",t.requiredRooms),o.Fb(1),o.Wc(" ",t.requiredRooms," Room")}}function T(t,e){if(1&t&&(o.Yb(0,"option",30),o.Uc(1),o.Xb()),2&t){const t=e.$implicit;o.uc("value",t.requiredExbed),o.Fb(1),o.Wc(" ",t.requiredExbed," Extra Bed")}}function A(t,e){if(1&t){const t=o.Zb();o.Yb(0,"select",27),o.ic("change",function(e){o.Lc(t);const i=o.mc(),n=i.$implicit,s=i.rowIndex;return o.mc(2).bookRoom(e,n,s)})("ngModelChange",function(e){return o.Lc(t),o.mc().$implicit.RequiredExtraBed=e}),o.Sc(1,T,2,2,"option",28),o.Xb()}if(2&t){const t=o.mc(),e=t.$implicit;o.vc("name","ddlRequiredExtraBed_",t.rowIndex,""),o.tc("ngModel",e.RequiredExtraBed),o.Fb(1),o.tc("ngForOf",e.lstRequiredExtraBed)}}function B(t,e){if(1&t){const t=o.Zb();o.Yb(0,"tr"),o.Yb(1,"td"),o.Uc(2),o.Xb(),o.Yb(3,"td"),o.Uc(4),o.Xb(),o.Yb(5,"td"),o.Uc(6),o.Xb(),o.Yb(7,"td"),o.Yb(8,"select",27),o.ic("change",function(i){o.Lc(t);const n=e.$implicit,s=e.rowIndex,a=o.mc(2);return a.LoadReqExtraBed(n,s),a.bookRoom(i,n,s)})("ngModelChange",function(t){return e.$implicit.RequiredRooms=t}),o.Sc(9,R,2,2,"option",28),o.Xb(),o.Xb(),o.Yb(10,"td"),o.Sc(11,A,2,3,"select",29),o.Xb(),o.Xb()}if(2&t){const t=e.$implicit,i=e.rowIndex;o.Fb(2),o.Vc(t.RoomTypeName),o.Fb(2),o.Vc(t.RoomPrice),o.Fb(2),o.Vc(t.NumberOfRooms),o.Fb(2),o.vc("name","ddlRequiredRooms_",i,""),o.tc("ngModel",t.RequiredRooms),o.Fb(1),o.tc("ngForOf",t.lstRequiredRooms),o.Fb(2),o.tc("ngIf",1==t.IsExtraBedApplicable)}}const U=function(){return["RoomTypeName"]};function N(t,e){if(1&t&&(o.Yb(0,"div",14),o.Yb(1,"div",15),o.Yb(2,"p-table",16,17),o.Sc(4,P,4,0,"ng-template",18),o.Sc(5,k,3,1,"ng-template",19),o.Sc(6,D,10,1,"ng-template",20),o.Sc(7,B,12,7,"ng-template",21),o.Xb(),o.Xb(),o.Xb()),2&t){const t=o.mc();o.Fb(2),o.tc("value",t.lstRoomMaster)("rowHover",!0)("globalFilterFields",o.yc(4,U))("scrollable",!0)}}function w(t,e){if(1&t&&(o.Yb(0,"li"),o.Uc(1),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.Vc(t.Description)}}function F(t,e){1&t&&(o.Yb(0,"div",46),o.Yb(1,"label",47),o.Yb(2,"h3"),o.Uc(3,"No. of Package"),o.Xb(),o.Xb(),o.Xb())}function Y(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div",50),o.Yb(1,"p-inputNumber",51),o.ic("ngModelChange",function(e){return o.Lc(t),o.mc().$implicit.pckg.Qty=e}),o.Xb(),o.Xb()}if(2&t){const t=o.mc().$implicit,e=o.mc(2);o.Fb(1),o.tc("ngModel",t.pckg.Qty)("min",1)("max",e.GroupCount)}}function X(t,e){if(1&t){const t=o.Zb();o.Yb(0,"div"),o.Yb(1,"div",38),o.Yb(2,"div",39),o.Yb(3,"h2"),o.Uc(4),o.Xb(),o.Tb(5,"br"),o.Yb(6,"h5"),o.Uc(7),o.Xb(),o.Yb(8,"ul"),o.Sc(9,w,2,1,"li",40),o.Xb(),o.Xb(),o.Yb(10,"div",41),o.Yb(11,"div",42),o.Yb(12,"div",15),o.Yb(13,"h2",43),o.Uc(14),o.Yb(15,"span"),o.Uc(16),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(17,"div",42),o.Yb(18,"div",44),o.Yb(19,"p-checkbox",45),o.ic("ngModelChange",function(t){return e.$implicit.IsSelected=t})("onChange",function(e){return o.Lc(t),o.mc(2).EmitPackage(e)}),o.Xb(),o.Xb(),o.Yb(20,"div",46),o.Yb(21,"label",47),o.Yb(22,"h3"),o.Uc(23,"Include Package"),o.Xb(),o.Xb(),o.Xb(),o.Sc(24,F,4,0,"div",48),o.Sc(25,Y,2,3,"div",49),o.Xb(),o.Xb(),o.Xb(),o.Xb()}if(2&t){const t=e.$implicit,i=e.index,n=o.mc(2);o.Hb(0==i?"carousel-item active":"carousel-item"),o.Fb(4),o.Vc(t.pckg.PackageName),o.Fb(3),o.Wc("This Package Includes ",t.pckg.ServiceInludes,""),o.Fb(2),o.tc("ngForOf",t.pckgDet),o.Fb(5),o.Wc("Actual Cost - ",t.pckg.ActualPrice*t.pckg.Qty,"/-"),o.Fb(2),o.Wc("Offer Price - ",t.pckg.SellingPrice*t.pckg.Qty,"/- "),o.Fb(3),o.tc("ngModel",t.IsSelected),o.Fb(5),o.tc("ngIf",t.IsSelected&&n.IsGrouped),o.Fb(1),o.tc("ngIf",t.IsSelected&&n.IsGrouped)}}function L(t,e){1&t&&(o.Yb(0,"button",52),o.Tb(1,"span",53),o.Yb(2,"span",54),o.Uc(3,"Previous"),o.Xb(),o.Xb())}function O(t,e){1&t&&(o.Yb(0,"button",55),o.Tb(1,"span",56),o.Yb(2,"span",54),o.Uc(3,"Next"),o.Xb(),o.Xb())}function x(t,e){if(1&t&&(o.Yb(0,"div",31),o.Yb(1,"div",32),o.Yb(2,"div",33),o.Yb(3,"div",34),o.Sc(4,X,26,11,"div",35),o.Xb(),o.Sc(5,L,4,0,"button",36),o.Sc(6,O,4,0,"button",37),o.Xb(),o.Xb(),o.Xb()),2&t){const t=o.mc();o.Fb(4),o.tc("ngForOf",t.lstPackageMasterDetails),o.Fb(1),o.tc("ngIf",(null==t.lstPackageMasterDetails?null:t.lstPackageMasterDetails.length)>1),o.Fb(1),o.tc("ngIf",(null==t.lstPackageMasterDetails?null:t.lstPackageMasterDetails.length)>1)}}let _=(()=>{class t extends a.a{constructor(t,e,i,n,a,r,l,c){super(),this.cdRef=t,this.datePipe=e,this._masterService=i,this._roomServices=n,this._UtilityService=a,this._ConstantService=r,this._MasterServices=l,this._DoctorServices=c,this.lsobjClinicMaster=JSON.parse(localStorage.getItem("objClinicMaster"))||null,this.BookingSource="Patient",this.IsExtended=!1,this.roomBookClick=new o.o,this.EmitSelectedPackage=new o.o,this.EmitPermittedBy=new o.o,this.IsGrouped=!1,this.customDateFormat=s.h,this.statusnew=0,this.RoomMasterModel={},this.roomBookingMasterModel={},this.lstRequiredRooms=[],this.lstRequiredExtraBed=[],this.ExtraBedCharges={},this.OtherCharges=[],this.startdate=this._UtilityService.CUR_SERVER_TIME,this.today=this._UtilityService.CUR_SERVER_TIME,this.maxUpto=this._UtilityService.CUR_SERVER_TIME,this.MinYear=this._UtilityService.CUR_SERVER_TIME.getFullYear(),this.MaxYear=this._UtilityService.CUR_SERVER_TIME.getFullYear()+1,this.permittedBy=null,this.checkMaxUpto=!1,this.ClinicMaster={},this.MaxAllowedGroupMembers=1,this.lstPackageMaster=[],this.ShowOfferModel=!1,this.selectedMCODE=null,this.selectedPackage=null,this.lstPackageMasterDetails=[],this.lstDoctorMster=[]}ngOnInit(){return Object(n.a)(this,void 0,void 0,function*(){var t;this._UtilityService.CUR_SERVER_TIME=yield this._UtilityService.GetCurrentServerTime(),this.LoadClinicDetails(),this.LoadPackageMasterByClinic(),this.LoadAllDoctorListByClinic(),null!=localStorage.getItem("BookRoomPeriodFrom")&&(this.dFrom=new Date(localStorage.getItem("BookRoomPeriodFrom")),this.IsExtended&&((t=new Date(this.dFrom)).setDate(t.getDate()+1),this.maxUpto=t>this.maxUpto?t:this.maxUpto,this.MaxYear=this.maxUpto.getFullYear()+1),this.IsExtended||((t=new Date(this.dFrom)).setDate(t.getDate()+("Frontdesk"==this.BookingSource?1:7)),this.maxUpto=t,this.MaxYear=this.maxUpto.getFullYear()+1),null!=localStorage.getItem("BookRoomPeriodUpto")&&(this.dTo=new Date(localStorage.getItem("BookRoomPeriodUpto")),this.calculateDiff(!1),this.LoadRoomList(this.dFrom,this.dTo)))})}LoadClinicDetails(){this.unsubscribe.add=this._masterService.GetClinicMasterById(this.ClinicId).subscribe(t=>{var e;if(1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);if(this.ClinicMaster=i=i||[],this.MaxAllowedGroupMembers=null==(null===(e=this.ClinicMaster)||void 0===e?void 0:e.MaxGroupMemberAllowed)?1:this.ClinicMaster.MaxGroupMemberAllowed,"Patient"===this.BookingSource&&null!=this.ClinicMaster.BookingStartDate&&null!=this.ClinicMaster.BookingStartDate&&""!=this.ClinicMaster.BookingStartDate){var n=new Date(this.today)>new Date(this.ClinicMaster.BookingStartDate)?new Date(this.today):new Date(this.ClinicMaster.BookingStartDate);this.today=n,this.MinYear=this.today.getFullYear(),this.checkMaxUpto||(this.maxUpto=this.today),this.MaxYear=this.maxUpto.getFullYear()+1,this.checkMaxUpto=!1}}this.cdRef.detectChanges()})}LoadAllDoctorListByClinic(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetDoctorListByClinicId(this.ClinicId).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstDoctorMster=e=e||[],this.cdRef.detectChanges()}else this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.lstDoctorMster=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}GetRequiredRooms(t){this.lstRequiredRooms=[];for(var e=0;t>=e;)this.lstRequiredRooms.push({requiredRooms:e}),e+=1}LoadRoomList(t,e){this.LoadClinicDetails(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._roomServices.GetRoomMaster(this.datePipe.transform(t,"MM-dd-yyyy"),this.datePipe.transform(e,"MM-dd-yyyy"),this.ClinicId,this.SlotId,this.IsExtended).subscribe(t=>{var e,i;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var n=JSON.parse(t.actionResult.result);this.lstRoomMaster=n=n||[];var o=JSON.parse(t.actionResult.result2);this.ExtraBedCharges=o=o||[];var a=JSON.parse(t.actionResult.result3);if(this.OtherCharges=a=a||[],(null===(e=this.lstRoomMaster)||void 0===e?void 0:e.length)>0&&"Patient"==this.BookingSource){var r=this.lstRoomMaster.filter(t=>1==t.IsVisibletoCustomer);this.lstRoomMaster=(null==r?void 0:r.length)>0?r:[]}var l=["116100","116101"];(null===(i=this.lstRoomMaster)||void 0===i?void 0:i.length)>0&&this.lstRoomMaster.forEach(t=>{var e="61e10868cd3935b441059215"==this.ClinicId&&s.s.Patient==localStorage.getItem("userTypeId")?1:t.NumberOfRooms>this.MaxAllowedGroupMembers?this.MaxAllowedGroupMembers:t.NumberOfRooms;this.GetRequiredRooms(e),t.RequiredRooms=0,t.lstRequiredRooms=this.lstRequiredRooms,"61e10868cd3935b441059215"==this.ClinicId&&s.s.Patient==localStorage.getItem("userTypeId")&&l.indexOf(t.MCODE)<0&&(t.IsExtraBedApplicable=0)}),this.cdRef.detectChanges()}else this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.lstRoomMaster=null,this.cdRef.detectChanges()}),this.roomBookClick.emit(null)}ShowAvailableRooms(){""!==this.ClinicId&&null!=this.ClinicId?this.noofdays<7&&"Frontdesk"!=this.BookingSource?this._UtilityService.showWarningAlert("IPD Should be minimum 7 Days"):this.LoadRoomList(this.dFrom,this.dTo):this._UtilityService.showWarningAlert("Please select center")}calculateDiff(t){var e=this.dFrom;t&&null!=this.dFrom&&null!=this.dFrom&&(this.dTo=new Date(this.dFrom),this.dTo.setDate(this.dTo.getDate()+7),this.checkMaxUpto=!0);var i=this.dTo;if(null!=e&&null!=e){var n=new Date(new Date(this.dFrom));n.setDate(n.getDate()+("Frontdesk"==this.BookingSource?1:7)),this.maxUpto=n,this.MaxYear=this.maxUpto.getFullYear()+1}if(null!=e&&null!=e&&null!=i&&null!=i){e>i&&(e=i,this.dFrom=i);var o=new Date(this.datePipe.transform(this.dFrom,"yyyy-MM-dd")),s=new Date(this.datePipe.transform(this.dTo,"yyyy-MM-dd")),a=Math.floor((s-o)/864e5);this.noofdays=a,this.cdRef.detectChanges(),this.ShowAvailableRooms()}}LoadReqExtraBed(t,e){if(this.lstRequiredExtraBed=[],t.RequiredRooms>0){for(var i=0;t.RequiredRooms>=i;)this.lstRequiredExtraBed.push({requiredExbed:i}),i+=1;this.lstRequiredExtraBed.length>0?(this.lstRoomMaster[e].lstRequiredExtraBed=this.lstRequiredExtraBed,this.lstRoomMaster[e].RequiredExtraBed=0):(this.lstRoomMaster[e].lstRequiredExtraBed=[],this.lstRoomMaster[e].RequiredExtraBed=0)}else this.lstRoomMaster[e].lstRequiredExtraBed=[],this.lstRoomMaster[e].RequiredExtraBed=0}bookRoom(t,e,i){var n,o,a={RoomBookFromDate:new Date(Date.parse(this.datePipe.transform(this.dFrom,"yyyy-MM-dd"))),RoomBookToDate:new Date(Date.parse(this.datePipe.transform(this.dTo,"yyyy-MM-dd"))),Index:i,RoomTypeId:e.RoomTypeId,RoomPrice:e.RoomPrice,NumberOfRooms:e.NumberOfRooms,RequiredRooms:Number(e.RequiredRooms>e.NumberOfRooms?e.NumberOfRooms:e.RequiredRooms),RequiredExtraBed:null==e.RequiredExtraBed||null==e.RequiredExtraBed?0:Number(e.RequiredExtraBed),Status:1,DaysCount:this.noofdays,PermittedBy:this.IsExtended?this.permittedBy:null,GST:e.GST,PriceWithGST:e.PriceWithGST,DiscountAmount:e.DiscountAmount,MCODE:e.MCODE,RoomTypeName:e.RoomTypeName,ExbedMCODE:this.ExtraBedCharges.MCODE,ExbedPriceWithGST:null==e.ExtraBedMRP||null==e.ExtraBedMRP||0==e.ExtraBedMRP?this.ExtraBedCharges.PriceWithGST:e.ExtraBedMRP,RoomOtherCharges:e.RoomOtherCharges,RoomOtherChargesExb:null==e.ExtraBedOtherCharges||null==e.ExtraBedOtherCharges||0==e.ExtraBedOtherCharges?this.ExtraBedCharges.RoomOtherCharges:e.ExtraBedOtherCharges,DefaultBed:null==e.NumberOfBeds||null==e.NumberOfBeds?0:Number(e.NumberOfBeds),IPDRegMCODE:null===(n=this.OtherCharges.find(t=>t.MCODE==s.i.IPDRegistrationCharge))||void 0===n?void 0:n.MCODE,IPDRegPriceWithGST:null===(o=this.OtherCharges.find(t=>t.MCODE==s.i.IPDRegistrationCharge))||void 0===o?void 0:o.PriceWithGST};this.roomBookClick.emit(a)}OnInputDaysChange(){var t;this._ConstantService.nullToZeroConverter(this.noofdays)<=0?(this.dFrom=this.dFrom=new Date,(t=new Date(this.dFrom)).setDate(t.getDate()+1),this.dTo=t,this.calculateDiff(!1)):(null!=this.dFrom&&null!=this.dFrom||(this.dFrom=new Date),(t=new Date(this.dFrom)).setDate(t.getDate()+this._ConstantService.nullToZeroConverter(this.noofdays)),this.dTo=t,this.calculateDiff(!1))}LoadPackageMasterByClinic(){this.selectedMCODE=null,this.selectedPackage=null,this.lstPackageMaster=[],this.lstPackageMasterDetails=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPackageMaster(this.ClinicId,!0,!0).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstPackageMaster=e=e||[];var i=JSON.parse(t.actionResult.result2);this.lstPackageMasterDetails=i=i||[],this.lstPackageMasterDetails.forEach(t=>t.pckg.Qty=1),this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}emitPermittedBy(t){this.EmitPermittedBy.emit(t.value)}EmitPackage(t){this._UtilityService.showSuccessAlert(1==t.checked?"Package Included.":"Package Discluded.");var e={};e.Package=this.lstPackageMasterDetails.filter(t=>1==t.IsSelected),this.lstPackageMasterDetails.filter(t=>0==t.IsSelected).forEach(t=>t.pckg.Qty=1),this.EmitSelectedPackage.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(o.h),o.Sb(r.f),o.Sb(l.a),o.Sb(c.a),o.Sb(d.a),o.Sb(s.f),o.Sb(l.a),o.Sb(h.a))},t.\u0275cmp=o.Mb({type:t,selectors:[["app-room-book-public"]],inputs:{ClinicId:"ClinicId",SlotId:"SlotId",BookingSource:"BookingSource",IsExtended:"IsExtended",GroupCount:"GroupCount",IsGrouped:"IsGrouped"},outputs:{roomBookClick:"roomBookClick",EmitSelectedPackage:"EmitSelectedPackage",EmitPermittedBy:"EmitPermittedBy"},features:[o.Cb],decls:25,vars:38,consts:[["action",""],[1,"row","m-0"],[1,"col","col-md-3","col-12"],[1,"form-group"],["for",""],[1,"required"],["appendTo","body","inputId","icon","name","dFrom",3,"yearNavigator","monthNavigator","yearRange","minDate","ngModel","ngModelOptions","showIcon","disabled","dateFormat","readonlyInput","ngModelChange","onClose"],["calendar",""],["appendTo","body","inputId","icon","name","dTo",3,"yearNavigator","monthNavigator","yearRange","minDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onClose"],["mode","decimal",1,"w-100",3,"disabled","ngModel","min","useGrouping","ngModelOptions","ngModelChange","onBlur"],["class","col col-md-3 col-12",4,"ngIf"],["class","row m-0 mb-3",4,"ngIf"],["class","row m-0","style","height:auto;",4,"ngIf"],["appendTo","body","optionLabel","FullName","optionValue","UserId",3,"options","ngModel","ngModelOptions","showClear","filter","filterBy","filterMatchMode","placeholder","ngModelChange","onChange"],[1,"row","m-0","mb-3"],[1,"col-md-12"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","250px",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[4,"ngIf"],[1,"form-control",3,"name","ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","form-control",3,"name","ngModel","change","ngModelChange",4,"ngIf"],[3,"value"],[1,"row","m-0",2,"height","auto"],[1,"col-md-8"],["id","carouselExampleControls","data-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[3,"class",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button","data-target","#carouselExampleControls","data-slide","prev",4,"ngIf"],["class","carousel-control-next","type","button","data-target","#carouselExampleControls","data-slide","next",4,"ngIf"],[1,"offer-box"],[1,"offer-text"],[4,"ngFor","ngForOf"],[1,"offer-price"],[1,"row"],[1,"mb-2"],[1,"col-md-1","text-left","mt-2"],["binary","true","inputId","binary",1,"chkbox",3,"ngModel","ngModelChange","onChange"],[1,"col-md-3","text-left"],["for","ny",1,"text-left","bold"],["class","col-md-3 text-left",4,"ngIf"],["class","col-md-1 text-left",4,"ngIf"],[1,"col-md-1","text-left"],["inputId","minmax","mode","decimal",1,"InpNumSize",3,"ngModel","min","max","ngModelChange"],["type","button","data-target","#carouselExampleControls","data-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["type","button","data-target","#carouselExampleControls","data-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(t,e){1&t&&(o.Yb(0,"div"),o.Yb(1,"form",0),o.Yb(2,"div",1),o.Yb(3,"div",2),o.Yb(4,"div",3),o.Yb(5,"label",4),o.Uc(6,"Admission Date: "),o.Yb(7,"span",5),o.Uc(8,"*"),o.Xb(),o.Xb(),o.Yb(9,"p-calendar",6,7),o.ic("ngModelChange",function(t){return e.dFrom=t})("onClose",function(){return e.calculateDiff(!0)}),o.Xb(),o.Xb(),o.Xb(),o.Yb(11,"div",2),o.Yb(12,"div",3),o.Yb(13,"label",4),o.Uc(14,"Discharge Date:"),o.Xb(),o.Yb(15,"p-calendar",8,7),o.ic("ngModelChange",function(t){return e.dTo=t})("onClose",function(){return e.calculateDiff(!1)}),o.Xb(),o.Xb(),o.Xb(),o.Yb(17,"div",2),o.Yb(18,"div",3),o.Yb(19,"label",4),o.Uc(20,"No of Nights:"),o.Xb(),o.Yb(21,"p-inputNumber",9),o.ic("ngModelChange",function(t){return e.noofdays=t})("onBlur",function(){return e.OnInputDaysChange()}),o.Xb(),o.Xb(),o.Xb(),o.Sc(22,C,8,12,"div",10),o.Xb(),o.Xb(),o.Xb(),o.Sc(23,N,8,5,"div",11),o.Sc(24,x,7,3,"div",12)),2&t&&(o.Fb(9),o.Pc(o.yc(33,I)),o.wc("yearRange","",e.MinYear,":",e.MaxYear,""),o.tc("yearNavigator",!0)("monthNavigator",!0)("minDate",e.today)("ngModel",e.dFrom)("ngModelOptions",o.yc(34,M))("showIcon",!0)("disabled",e.IsExtended)("dateFormat",e.customDateFormat.CalendarFormat)("readonlyInput",!1),o.Fb(6),o.Pc(o.yc(35,I)),o.wc("yearRange","",e.MinYear,":",e.MaxYear,""),o.tc("yearNavigator",!0)("monthNavigator",!0)("minDate",e.maxUpto)("ngModel",e.dTo)("ngModelOptions",o.yc(36,M))("showIcon",!0)("dateFormat",e.customDateFormat.CalendarFormat)("readonlyInput",!1),o.Fb(6),o.tc("disabled","Patient"==e.BookingSource)("ngModel",e.noofdays)("min",1)("useGrouping",!1)("ngModelOptions",o.yc(37,M)),o.Fb(1),o.tc("ngIf",e.IsExtended),o.Fb(1),o.tc("ngIf",(null==e.lstRoomMaster?null:e.lstRoomMaster.length)>0),o.Fb(1),o.tc("ngIf",(null==e.lstPackageMasterDetails?null:e.lstPackageMasterDetails.length)>0&&0==e.IsExtended))},directives:[u.z,u.p,u.q,b.a,u.o,u.r,m.a,r.p,g.a,p.c,S.i,f.a,u.x,r.o,u.s,u.A,y.a],styles:[""]}),t})()},JpZ1:function(t,e,i){"use strict";i.d(e,"a",function(){return f});var n=i("ofXK"),o=i("tyNb"),s=i("5QKP"),a=i("fXoL");const r=[{path:"",component:s.a}];let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({imports:[[o.l.forChild(r)],o.l]}),t})();var c=i("3Pt+"),d=i("rEr+"),h=i("jIHw"),u=i("eO1q"),b=i("7kUa"),m=i("Ks7X"),g=i("/RsI"),p=i("Ji6n"),S=i("arFO");let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({imports:[[n.c,l,c.i,d.f,h.c,u.b,b.b,m.b,g.b,p.b,S.b]]}),t})()},"OUA+":function(t,e,i){"use strict";i.d(e,"a",function(){return m});var n=i("ofXK"),o=i("tyNb"),s=i("yd5W"),a=i("fXoL");const r=[{path:"",component:s.a}];let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({imports:[[o.l.forChild(r)],o.l]}),t})();var c=i("rEr+"),d=i("jIHw"),h=i("3Pt+"),u=i("arFO"),b=i("lVkt");let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({imports:[[n.c,l,h.i,c.f,d.c,u.b,b.b]]}),t})()},c5et:function(t,e,i){"use strict";i.r(e),i.d(e,"HealthSeekeerRegistrationModule",function(){return Vo});var n=i("ofXK"),o=i("tyNb"),s=i("mrSG"),a=i("Nach"),r=i("aeiD"),l=i("dLU1"),c=i("CwUn"),d=i("fXoL"),h=i("dcBc"),u=i("eRWq"),b=i("ReGW"),m=i("7zAq"),g=i("G+wY"),p=i("3Pt+"),S=i("NLkC"),f=i("7zfz"),y=i("fHQ/"),I=i("/RsI"),M=i("arFO"),C=i("7kUa"),P=i("rEr+"),k=i("AAHA"),v=i("jIHw"),D=i("LuMj"),R=i("eO1q"),T=i("B16f"),A=i("58k3"),B=i("lVkt"),U=i("Ji6n"),N=i("Ks7X"),w=i("5QKP"),F=i("yd5W"),Y=i("Rtg/"),X=i("MHjV"),L=i("mcUO"),O=i("xjJ3"),x=i("btFH"),_=i("9oqr"),E=i("Ty8P"),G=i("Bj//");const W=["myForm"],V=["dt"],j=["filtr"];function H(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",20),d.ic("click",function(){return d.Lc(t),d.mc(3).AddNewAttendantDetails()}),d.Xb()}}function q(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",12),d.Sc(1,H,1,0,"button",13),d.Yb(2,"span",14),d.Uc(3),d.Xb(),d.Yb(4,"span",15),d.Uc(5),d.nc(6,"date"),d.nc(7,"date"),d.nc(8,"date"),d.nc(9,"date"),d.Yb(10,"span",16),d.Tb(11,"i",17),d.Yb(12,"input",18,19),d.ic("input",function(e){return d.Lc(t),d.mc(),d.Ic(5).filterGlobal(e.target.value,"contains")}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(1),d.tc("ngIf",(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))&&t.slotStatus==t.bookingStatus[t.bookingStatus.Admitted]),d.Fb(2),d.Wc(" ",(null==t.lstAttendantDetails?null:t.lstAttendantDetails.length)>0?"Total Records: "+t.filteredValuesLength:""," "),d.Fb(2),d.Xc(" ","0001"==d.pc(6,4,t.slotperiodFrom,"yyyy")?"":d.pc(7,7,t.slotperiodFrom,t.customDateFormat.DEF_DATE)," to ","0001"==d.pc(8,10,t.slotperiodUpto,"yyyy")?"":d.pc(9,13,t.slotperiodUpto,t.customDateFormat.DEF_DATE)," ")}}function Z(t,e){if(1&t&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&t){const t=e.$implicit;d.Fb(1),d.Gb("colspan",null==t?null:t.length)}}function z(t,e){1&t&&(d.Yb(0,"colgroup"),d.Tb(1,"col",21),d.Tb(2,"col",22),d.Tb(3,"col",23),d.Tb(4,"col",21),d.Tb(5,"col",24),d.Tb(6,"col",24),d.Tb(7,"col",24),d.Tb(8,"col",24),d.Tb(9,"col",23),d.Xb())}function Q(t,e){1&t&&(d.Yb(0,"tr"),d.Yb(1,"th"),d.Uc(2,"Name"),d.Xb(),d.Yb(3,"th"),d.Uc(4,"Attendant No"),d.Xb(),d.Yb(5,"th"),d.Uc(6,"Age/Gender"),d.Xb(),d.Yb(7,"th"),d.Uc(8,"Relationship"),d.Xb(),d.Yb(9,"th"),d.Uc(10,"Contact No"),d.Xb(),d.Yb(11,"th"),d.Uc(12,"Check-In"),d.Xb(),d.Yb(13,"th"),d.Uc(14,"Check-Out"),d.Xb(),d.Yb(15,"th"),d.Uc(16,"Status"),d.Xb(),d.Yb(17,"th"),d.Uc(18,"Action"),d.Xb(),d.Xb())}function J(t,e){if(1&t){const t=d.Zb();d.Yb(0,"i",28),d.ic("click",function(){d.Lc(t);const e=d.mc().$implicit;return d.mc(2).PrintGatePass(e.PatientAttendantDetailsId)}),d.Xb()}}function K(t,e){if(1&t){const t=d.Zb();d.Yb(0,"i",29),d.ic("click",function(){d.Lc(t);const e=d.mc().$implicit;return d.mc(2).PrintAttIdCard(e.PatientAttendantDetailsId)}),d.Xb()}}function tt(t,e){if(1&t){const t=d.Zb();d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2),d.Xb(),d.Yb(3,"td"),d.Uc(4),d.Xb(),d.Yb(5,"td"),d.Uc(6),d.Xb(),d.Yb(7,"td"),d.Uc(8),d.Xb(),d.Yb(9,"td"),d.Uc(10),d.Xb(),d.Yb(11,"td"),d.Uc(12),d.nc(13,"date"),d.nc(14,"date"),d.Xb(),d.Yb(15,"td"),d.Uc(16),d.nc(17,"date"),d.nc(18,"date"),d.Xb(),d.Yb(19,"td"),d.Uc(20),d.Xb(),d.Yb(21,"td"),d.Yb(22,"i",25),d.ic("click",function(){d.Lc(t);const i=e.$implicit;return d.mc(2).GetAttendantDetailsById(i.PatientAttendantDetailsId)}),d.Xb(),d.Sc(23,J,1,0,"i",26),d.Sc(24,K,1,0,"i",27),d.Xb(),d.Xb()}if(2&t){const t=e.$implicit,i=d.mc(2);d.Fb(2),d.Vc(t.AttendantName),d.Fb(2),d.Vc(t.AttendantNumber),d.Fb(2),d.Xc("",t.Age,"/",t.Gender,""),d.Fb(2),d.Vc(t.AttendantRelationship),d.Fb(2),d.Vc(t.AttendantContactNo),d.Fb(2),d.Wc(" ","0001"==d.pc(13,11,t.CheckedInDate,"yyyy")?"":d.pc(14,14,t.CheckedInDate,i.customDateFormat.DEF_DATE_TIME),""),d.Fb(4),d.Wc(" ","0001"==d.pc(17,17,t.CheckedOutDate,"yyyy")?"":d.pc(18,20,t.CheckedOutDate,i.customDateFormat.DEF_DATE_TIME),""),d.Fb(4),d.Vc(i.bookingStatus[t.Status]),d.Fb(3),d.tc("ngIf",null==i.lstIAccessStr?null:i.lstIAccessStr.includes(i.ActionList.Print.toString())),d.Fb(1),d.tc("ngIf",null==i.lstIAccessStr?null:i.lstIAccessStr.includes(i.ActionList.Print.toString()))}}const et=function(){return["ClinicName","ContactDetails","OrderNo","Status"]};function it(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",1),d.Yb(1,"div",2),d.Yb(2,"div",3),d.Yb(3,"div",4),d.Yb(4,"p-table",5,6),d.ic("onFilter",function(e){d.Lc(t);const i=d.Ic(5);return d.mc().onFilter(e,i)}),d.Sc(6,q,14,16,"ng-template",7),d.Sc(7,Z,3,1,"ng-template",8),d.Sc(8,z,10,0,"ng-template",9),d.Sc(9,Q,19,0,"ng-template",10),d.Sc(10,tt,25,23,"ng-template",11),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(4),d.tc("value",t.lstAttendantDetails)("rowHover",!0)("globalFilterFields",d.yc(4,et))("scrollable",!0)}}function nt(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",33),d.Yb(1,"div",34),d.Yb(2,"label",35),d.Uc(3,"ID Proof Details "),d.Yb(4,"span",36),d.Uc(5,"*"),d.Xb(),d.Xb(),d.Yb(6,"input",54,55),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).AttendantDetails.AttendantIdProofNo=e})("keypress",function(e){return d.Lc(t),d.mc(2).validateTextNumeric(e)}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(6),d.tc("ngModel",t.AttendantDetails.AttendantIdProofNo)}}function ot(t,e){1&t&&(d.Yb(0,"div"),d.Uc(1,"Please Enter 10 digit Mobile Number."),d.Xb())}function st(t,e){if(1&t&&(d.Yb(0,"div",56),d.Sc(1,ot,2,0,"div",57),d.Xb()),2&t){d.mc();const t=d.Ic(46);d.Fb(1),d.tc("ngIf",t.errors.pattern)}}function at(t,e){1&t&&(d.Yb(0,"div"),d.Uc(1,"Please Enter Valid Email Id."),d.Xb())}function rt(t,e){if(1&t&&(d.Yb(0,"div",56),d.Sc(1,at,2,0,"div",57),d.Xb()),2&t){d.mc();const t=d.Ic(53);d.Fb(1),d.tc("ngIf",t.errors.pattern)}}const lt=function(){return{standalone:!0}};function ct(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",33),d.Yb(1,"div",34),d.Yb(2,"label",48),d.Uc(3,"Check-Out Time"),d.Xb(),d.Yb(4,"p-calendar",58),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).AttendantDetails.CheckedOutDate=e}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(4),d.tc("ngModel",t.AttendantDetails.CheckedOutDate)("minDate",t.AttendantDetails.CheckedInDate)("maxDate",null==t.maxUpto&&null==t.maxUpto?null:t.maxUpto)("ngModelOptions",d.yc(8,lt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0)("showTime",!0)}}function dt(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",59),d.ic("click",function(){return d.Lc(t),d.mc(2).SaveAttendantDetails()}),d.Uc(1,"Submit"),d.Xb()}if(2&t){d.mc();const t=d.Ic(5);d.tc("disabled",!t.form.valid)}}const ht=function(){return{width:"100%"}};function ut(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",1),d.Yb(1,"div",30),d.Yb(2,"div",3),d.Yb(3,"div",4),d.Yb(4,"form",null,31),d.Yb(6,"div",32),d.Yb(7,"div",33),d.Yb(8,"div",34),d.Yb(9,"label",35),d.Uc(10,"Attendant Name "),d.Yb(11,"span",36),d.Uc(12,"*"),d.Xb(),d.Xb(),d.Yb(13,"input",37),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().AttendantDetails.AttendantName=e})("keypress",function(e){return d.Lc(t),d.mc().validateText(e)}),d.Xb(),d.Xb(),d.Xb(),d.Yb(14,"div",33),d.Yb(15,"div",34),d.Yb(16,"label",35),d.Uc(17,"Age (in Year) "),d.Yb(18,"span",36),d.Uc(19,"*"),d.Xb(),d.Xb(),d.Yb(20,"p-inputNumber",38),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().AttendantDetails.Age=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(21,"div",33),d.Yb(22,"div",34),d.Yb(23,"label",35),d.Uc(24,"Gender "),d.Yb(25,"span",36),d.Uc(26,"*"),d.Xb(),d.Xb(),d.Yb(27,"p-dropdown",39),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().AttendantDetails.Gender=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(28,"div",33),d.Yb(29,"div",34),d.Yb(30,"label",35),d.Uc(31,"ID Proof "),d.Yb(32,"span",36),d.Uc(33,"*"),d.Xb(),d.Xb(),d.Yb(34,"p-dropdown",40),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().AttendantDetails.AttendantIdProof=e}),d.Xb(),d.Xb(),d.Xb(),d.Sc(35,nt,8,1,"div",41),d.Yb(36,"div",33),d.Yb(37,"div",34),d.Yb(38,"label",35),d.Uc(39,"Relationship "),d.Xb(),d.Yb(40,"input",42),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().AttendantDetails.AttendantRelationship=e})("keypress",function(e){return d.Lc(t),d.mc().validateText(e)}),d.Xb(),d.Xb(),d.Xb(),d.Yb(41,"div",33),d.Yb(42,"div",34),d.Yb(43,"label",35),d.Uc(44,"Mobile No"),d.Xb(),d.Yb(45,"input",43,44),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().AttendantDetails.AttendantContactNo=e})("keypress",function(e){return d.Lc(t),d.mc().validateNumber(e)}),d.Xb(),d.Sc(47,st,2,1,"div",45),d.Xb(),d.Xb(),d.Yb(48,"div",33),d.Yb(49,"div",34),d.Yb(50,"label",35),d.Uc(51,"Email"),d.Xb(),d.Yb(52,"input",46,47),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().AttendantDetails.AttendantEmail=e}),d.Xb(),d.Sc(54,rt,2,1,"div",45),d.Xb(),d.Xb(),d.Yb(55,"div",33),d.Yb(56,"div",34),d.Yb(57,"label",48),d.Uc(58,"Check-In Time "),d.Yb(59,"span",36),d.Uc(60,"*"),d.Xb(),d.Xb(),d.Yb(61,"p-calendar",49),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().AttendantDetails.CheckedInDate=e}),d.Xb(),d.Xb(),d.Xb(),d.Sc(62,ct,5,9,"div",41),d.Yb(63,"div",33),d.Yb(64,"div",34),d.Yb(65,"label",35),d.Uc(66,"Status"),d.Yb(67,"span",36),d.Uc(68,"*"),d.Xb(),d.Xb(),d.Yb(69,"p-dropdown",50),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().AttendantDetails.Status=e}),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(70,"div",51),d.Sc(71,dt,2,1,"button",52),d.Yb(72,"button",53),d.ic("click",function(){return d.Lc(t),d.mc().CloseModal()}),d.Uc(73,"Close"),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.Ic(46),e=d.Ic(53),i=d.mc();d.Fb(13),d.tc("ngModel",i.AttendantDetails.AttendantName),d.Fb(7),d.Pc(d.yc(43,ht)),d.tc("required",!0)("ngModel",i.AttendantDetails.Age)("min",0)("maxlength",2),d.Fb(7),d.Pc(d.yc(44,ht)),d.tc("required",!0)("options",i.stlstgender)("ngModel",i.AttendantDetails.Gender)("filter",!0),d.Fb(7),d.Pc(d.yc(45,ht)),d.tc("required",!0)("options",i.LstIdProofList)("ngModel",i.AttendantDetails.AttendantIdProof)("filter",!0),d.Fb(1),d.tc("ngIf",""!=i.AttendantDetails.AttendantIdProof),d.Fb(5),d.tc("ngModel",i.AttendantDetails.AttendantRelationship),d.Fb(5),d.tc("ngModel",i.AttendantDetails.AttendantContactNo),d.Fb(2),d.tc("ngIf",t.errors&&(t.touched||t.dirty)),d.Fb(5),d.tc("ngModel",i.AttendantDetails.AttendantEmail),d.Fb(2),d.tc("ngIf",e.errors&&(e.touched||e.dirty)),d.Fb(7),d.tc("required",!0)("ngModel",i.AttendantDetails.CheckedInDate)("minDate",null==i.minUpto&&null==i.minUpto?null:i.minUpto)("maxDate",null==i.maxUpto&&null==i.maxUpto?null:i.maxUpto)("ngModelOptions",d.yc(46,lt))("showIcon",!0)("dateFormat",i.customDateFormat.CalendarFormat)("readonlyInput",!0)("showTime",!0)("disabled","Edit"==i.Mode),d.Fb(1),d.tc("ngIf","Edit"==i.Mode),d.Fb(7),d.Pc(d.yc(47,ht)),d.tc("required",!0)("options",i.stlstbookingstatus)("ngModel",i.AttendantDetails.Status)("filter",!0),d.Fb(2),d.tc("ngIf",(null==i.lstIAccessStr?null:i.lstIAccessStr.includes(i.ActionList.ReadWrite.toString()))&&i.slotStatus==i.bookingStatus[i.bookingStatus.Admitted])}}let bt=(()=>{class t extends c.a{constructor(t,e,i,n,o,s,r){super(),this.cdRef=t,this.router=e,this.datepipe=i,this._MasterServices=n,this._ConstantServices=o,this._UtilityService=s,this._PatientServices=r,this.clinicId=null,this.slotBookingId=null,this.patientId=null,this.slotStatus=null,this.slotperiodFrom=null,this.slotperiodUpto=null,this.minUpto=null,this.maxUpto=null,this.filteredValuesLength=0,this.Mode=null,this.AttendantDetails={},this.LstIdProofList=[],this.stlstgender=[],this.stlstbookingstatus=[],this.bookingStatus=a.d,this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.UserTypeCurre=localStorage.getItem("userTypeId"),this.userTypes=a.s,this.customDateFormat=a.h,this.ActionList=a.a,this.lstIAccess=[],this.lstIAccessStr=[],this.stlstgender=[{name:"Male",code:"Male"},{name:"Female",code:"Female"},{name:"Other",code:"Other"}],this.stlstbookingstatus=[{name:this.bookingStatus[this.bookingStatus.Admitted],code:this.bookingStatus.Admitted},{name:this.bookingStatus[this.bookingStatus.Discharged],code:this.bookingStatus.Discharged}],this.getPageLevelAccess()}getPageLevelAccess(){var t,e,i=this.getUrlWithoutParams(),n=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==n?void 0:n.find(t=>t.MenuItemURL===i))&&(this.lstIAccess=null===(t=n.find(t=>t.MenuItemURL===i))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}getUrlWithoutParams(){let t=this.router.parseUrl(this.router.url);return t.queryParams={},t.fragment=null,t.toString()}ngOnInit(){this.LoadIdProofList()}ngOnChanges(t){this.clinicId=this.ClinicIdSelected,null!=this.slotperiodFrom&&null!=this.slotperiodFrom&&(this.minUpto=new Date(new Date(this.slotperiodFrom).getFullYear(),new Date(this.slotperiodFrom).getMonth(),new Date(this.slotperiodFrom).getDate(),0,0,0)),null!=this.slotperiodUpto&&null!=this.slotperiodUpto&&(this.maxUpto=new Date(new Date(this.slotperiodUpto).getFullYear(),new Date(this.slotperiodUpto).getMonth(),new Date(this.slotperiodUpto).getDate(),23,59,59)),this.GetAttendantDetails()}LoadIdProofList(){this.unsubscribe.add=this._MasterServices.GetIdProofMaster().subscribe(t=>{if(1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.LstIdProofList=e=e||[]}})}GetAttendantDetails(){null!=this.slotBookingId&&null!=this.slotBookingId&&""!=this.slotBookingId&&(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetAttendantDetails(this.slotBookingId).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);this.lstAttendantDetails=i=i||[],void 0!==this.filtr&&(this.filtr.nativeElement.value="",this.dataTable.reset(),this.filteredValuesLength=null===(e=this.lstAttendantDetails)||void 0===e?void 0:e.length),this.cdRef.detectChanges()}else this.lstAttendantDetails=[];this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}GetAttendantDetailsById(t){this.AttendantDetails={},this.Mode="Edit",this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetAttendantDetailsById(t).subscribe(t=>{var e,i;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var n=JSON.parse(t.actionResult.result);this.AttendantDetails=n=n||[],null!=this.AttendantDetails.CheckedInDate&&null!=this.AttendantDetails.CheckedInDate&&(this.AttendantDetails.CheckedInDate=new Date(null===(e=this.AttendantDetails)||void 0===e?void 0:e.CheckedInDate)),null!=this.AttendantDetails.CheckedOutDate&&null!=this.AttendantDetails.CheckedOutDate&&(this.AttendantDetails.CheckedOutDate=new Date(null===(i=this.AttendantDetails)||void 0===i?void 0:i.CheckedOutDate)),this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}SaveAttendantDetails(){if(this.AttendantDetails.ClinicId=this.clinicId,null==this.AttendantDetails.ClinicId||null==this.AttendantDetails.ClinicId||""==this.AttendantDetails.ClinicId)return void this._UtilityService.showWarningAlert("Please select center");let t=this.AttendantDetails.CheckedInDate,e=this.AttendantDetails.CheckedOutDate;if("Add"!=this.Mode||this.AttendantDetails.Status!=this.bookingStatus.Discharged){if("Edit"==this.Mode&&null==e||null==e){if(this.AttendantDetails.Status==this.bookingStatus.Discharged)return void this._UtilityService.showWarningAlert("Please select Check-Out Time")}else if("Edit"==this.Mode&&null!=e&&this.AttendantDetails.Status==this.bookingStatus.Admitted)return void this._UtilityService.showWarningAlert("Status should be Check-Out");this.AttendantDetails.CheckedInDate=new Date(Date.parse(this.datepipe.transform(t,"yyyy-MM-dd HH:mm:ss"))),this.AttendantDetails.CheckedOutDate=null==e||null==e?null:new Date(Date.parse(this.datepipe.transform(e,"yyyy-MM-dd HH:mm:ss"))),this.AttendantDetails.CreatedBy=localStorage.getItem("userId"),this.AttendantDetails.ModifiedBy=localStorage.getItem("userId"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddUpdateAttendantDetails(this.AttendantDetails).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.GetAttendantDetails(),this.Mode=null):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}else this._UtilityService.showWarningAlert("Status should be Check-In")}AddNewAttendantDetails(){this.ResetModel(),this.Mode="Add",this.cdRef.detectChanges(),this.myForm.resetForm()}ResetModel(){this.AttendantDetails={},this.AttendantDetails.SlotBookingId=this.slotBookingId,this.AttendantDetails.PatientId=this.patientId,this.AttendantDetails.CheckedInDate=new Date,this.AttendantDetails.Status=this.bookingStatus.Admitted}CloseModal(){this.Mode=null}PrintGatePass(t){window.open("#/print/gate-pass?UserId="+this.patientId+"&SlotBookingId="+this.slotBookingId+"&attendantId="+t)}PrintAttIdCard(t){window.open("#/print/attendent-id-card?UserId="+this.patientId+"&SlotBookingId="+this.slotBookingId+"&attendantId="+t)}onFilter(t,e){this.filteredValuesLength=t.filteredValue.length}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(d.h),d.Sb(o.i),d.Sb(n.f),d.Sb(h.a),d.Sb(a.f),d.Sb(S.a),d.Sb(g.a))},t.\u0275cmp=d.Mb({type:t,selectors:[["app-attendant-details"]],viewQuery:function(t,e){if(1&t&&(d.cd(W,1),d.cd(V,1),d.cd(j,1)),2&t){let t;d.Hc(t=d.jc())&&(e.myForm=t.first),d.Hc(t=d.jc())&&(e.dataTable=t.first),d.Hc(t=d.jc())&&(e.filtr=t.first)}},inputs:{clinicId:"clinicId",slotBookingId:"slotBookingId",patientId:"patientId",slotStatus:"slotStatus",slotperiodFrom:"slotperiodFrom",slotperiodUpto:"slotperiodUpto"},features:[d.Cb,d.Db],decls:2,vars:2,consts:[["class","row mt25",4,"ngIf"],[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 165px)",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],["pButton","","title","New","label","Add New","class","p-button-outlined","icon","pi pi-plus",3,"click",4,"ngIf"],[1,"pl-1","pt-3","mr-2","p-ml-left"],[1,"p-ml-auto"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined",3,"click"],[2,"width","100px"],[2,"width","120px"],[2,"width","90px"],[2,"width","140px"],["title","View/Edit",1,"fas","fa-fw","fa-pencil-alt","mr-2",3,"click"],["title","Print","class","fa fa-print mr-2",3,"click",4,"ngIf"],["title","Print ID Card","class","fa fa-print mr-2",3,"click",4,"ngIf"],["title","Print",1,"fa","fa-print","mr-2",3,"click"],["title","Print ID Card",1,"fa","fa-print","mr-2",3,"click"],[1,"col"],["myForm","ngForm"],[1,"row"],[1,"col","col-md-3","col-12"],[1,"form-group"],["for",""],[1,"required"],["required","","type","text","placeholder","Attendant Name","name","txtAttendantName",1,"form-control",3,"ngModel","ngModelChange","keypress"],["name","txtAge","mode","decimal",3,"required","ngModel","min","maxlength","ngModelChange"],["name","ddlGender","optionLabel","name","optionValue","code","placeholder","Please Select Gender",3,"required","options","ngModel","filter","ngModelChange"],["name","ddlIdProofName","appendTo","body","optionLabel","IdProofName","optionValue","IdProofId","placeholder","Please Select Id Proof",3,"required","options","ngModel","filter","ngModelChange"],["class","col col-md-3 col-12",4,"ngIf"],["type","text","placeholder","Relationship","name","txtRelship",1,"form-control",3,"ngModel","ngModelChange","keypress"],["type","text","maxlength","10","minlength","10","placeholder","Mobile Number","name","txtAttendantMobNo","pattern","[0-9]{10}$",1,"form-control",3,"ngModel","ngModelChange","keypress"],["attmobileref","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","email","placeholder","Email","name","txtEmailAdd","pattern","[A-za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,3}$",1,"form-control",3,"ngModel","ngModelChange"],["emailAttref","ngModel"],["for","",1,"form-label","bold"],["appendTo","body","inputId","icon","hourFormat","12",1,"iconcal",3,"required","ngModel","minDate","maxDate","ngModelOptions","showIcon","dateFormat","readonlyInput","showTime","disabled","ngModelChange"],["name","ddlbookingstatus","appendTo","body","optionLabel","name","optionValue","code","placeholder","Please Select Status",3,"required","options","ngModel","filter","ngModelChange"],[1,"row","justify-content-center"],["type","button","class","btn btn-new-primary mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-new-secondary",3,"click"],["required","","type","text","placeholder","ID number","name","txtFIdproof","maxlength","20",1,"form-control",3,"ngModel","ngModelChange","keypress"],["aadhaarAttref","ngModel"],[1,"alert","alert-danger"],[4,"ngIf"],["appendTo","body","inputId","icon","hourFormat","12",1,"iconcal",3,"ngModel","minDate","maxDate","ngModelOptions","showIcon","dateFormat","readonlyInput","showTime","ngModelChange"],["type","button",1,"btn","btn-new-primary","mr-2",3,"disabled","click"]],template:function(t,e){1&t&&(d.Sc(0,it,11,5,"div",0),d.Sc(1,ut,74,48,"div",0)),2&t&&(d.tc("ngIf",null==e.Mode),d.Fb(1),d.tc("ngIf",null!=e.Mode))},directives:[n.p,P.c,f.i,C.a,v.b,p.z,p.p,p.q,p.b,p.w,p.o,p.r,N.a,p.j,M.a,p.k,p.u,R.a],pipes:[n.f],styles:[""]}),t})();function mt(t,e){if(1&t&&(d.Yb(0,"label"),d.Uc(1),d.Xb()),2&t){const t=d.mc(2);d.Fb(1),d.Wc("(",t.BalanceType,")")}}function gt(t,e){if(1&t&&(d.Yb(0,"div",2),d.Yb(1,"h5",3),d.Yb(2,"span",7),d.Uc(3," \u20b9 "),d.Xb(),d.Uc(4),d.nc(5,"number"),d.Xb(),d.Xb()),2&t){const t=d.mc(2);d.Fb(4),d.Wc("Remaining Amount: ",d.pc(5,1,t.RemainingAmount,"1.1-2")," ")}}function pt(t,e){if(1&t&&(d.Yb(0,"div",1),d.Yb(1,"div",2),d.Yb(2,"h5",3),d.Yb(3,"span",4),d.Uc(4," account_balance_wallet "),d.Xb(),d.Uc(5),d.nc(6,"number"),d.Sc(7,mt,2,1,"label",5),d.Xb(),d.Xb(),d.Yb(8,"div",2),d.Yb(9,"h5",3),d.Yb(10,"span",4),d.Uc(11," account_balance_wallet "),d.Xb(),d.Uc(12),d.nc(13,"number"),d.Xb(),d.Xb(),d.Sc(14,gt,6,4,"div",6),d.Xb()),2&t){const t=d.mc();d.Fb(5),d.Wc("Account Balance : ",d.pc(6,4,t.CreditNoteBalanceAmount,"1.1-2")," "),d.Fb(2),d.tc("ngIf",t.BalanceType),d.Fb(5),d.Wc(" Credit Balance : ",d.pc(13,7,t.CreditNoteBalance,"1.1-2"),""),d.Fb(2),d.tc("ngIf",t.RemainingAmount>0||t.RemainingAmount<0)}}let St=(()=>{class t extends c.a{constructor(t,e,i){super(),this.cdRef=t,this._PatientServices=e,this._UtilityService=i,this.userSelected="",this.CreditNoteBalanceAmount=0,this.CreditLimit=0,this.CustomerInfoDetails={},this.MaxCreditLimit=0,this.MaxRefundAmount=0,this.todayDate=new Date,this.TotalDiscountAmount=0,this.BalanceType=null,this.RemainingAmount=0,this.CreditNoteBalance=0}ngOnInit(){this.LoadCrediNoteBalance()}LoadCrediNoteBalance(){this.RemainingAmount=0,this.BalanceType="",this.CreditNoteBalance=0,null!=this.userSelected&&""!=this.userSelected?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetCreditNoteBalAmount(this.userSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){if(this.CreditNoteBalance=parseFloat(t.actionResult.stringVal2),this.CreditNoteBalanceAmount=+t.actionResult.stringVal,this.RemainingAmount=t.actionResult.totalAmount,t.actionResult.stringVal.includes("-")?(this.BalanceType="Advance",this.MaxCreditLimit=+t.actionResult.stringVal,this.MaxRefundAmount=Math.abs(+t.actionResult.stringVal)):(this.MaxCreditLimit=+("-"+t.actionResult.stringVal),this.MaxRefundAmount=0,this.CreditNoteBalanceAmount>0&&(this.BalanceType="Dues")),t.actionResult.result.length>0){var e=JSON.parse(t.actionResult.result);this.CustomerInfoDetails=e=e||[],this.MaxCreditLimit=this.MaxCreditLimit+ +this.CustomerInfoDetails.CRLIMIT}this.MaxCreditLimit=Math.abs(this.MaxCreditLimit),this.cdRef.detectChanges()}else this.CreditNoteBalanceAmount=0,this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner()})):(this.CreditNoteBalanceAmount=0,this.cdRef.detectChanges())}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(d.h),d.Sb(g.a),d.Sb(S.a))},t.\u0275cmp=d.Mb({type:t,selectors:[["app-credit-note-balance"]],inputs:{userSelected:"userSelected"},features:[d.Cb],decls:1,vars:1,consts:[["class","row mt-4 balance",4,"ngIf"],[1,"row","mt-4","balance"],[1,"col-auto"],[1,"pt-1"],[1,"material-icons"],[4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"material-icons",2,"top","2px"]],template:function(t,e){1&t&&d.Sc(0,pt,15,10,"div",0),2&t&&d.tc("ngIf",null!=e.userSelected&&""!=e.userSelected)},directives:[n.p],pipes:[n.g],styles:[""]}),t})();const ft=["dt1"],yt=["filtr"],It=["AttBankslip1"],Mt=["AttRefAppslip1"],Ct=["fileInput"];function Pt(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",46),d.Yb(1,"div",51),d.Yb(2,"label",52),d.Uc(3,"Center "),d.Xb(),d.Yb(4,"span",53),d.Uc(5,"*"),d.Xb(),d.Xb(),d.Yb(6,"div",54),d.Yb(7,"app-center-dropdown",55),d.ic("onselectedClinic",function(e){return d.Lc(t),d.mc(2).onselectedClinic(e)}),d.Xb(),d.Xb(),d.Xb()}2&t&&(d.Fb(7),d.tc("isCenterLabel",!1)("mode","get"))}function kt(t,e){1&t&&(d.Yb(0,"div",63),d.Yb(1,"label",52),d.Uc(2,"Booking Type "),d.Yb(3,"span",53),d.Uc(4,"*"),d.Xb(),d.Xb(),d.Xb())}const vt=function(){return{width:"100%"}},Dt=function(){return{standalone:!0}};function Rt(t,e){if(1&t){const t=d.Zb();d.Yb(0,"p-dropdown",67),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(4).bookingtype=e})("onChange",function(){return d.Lc(t),d.mc(4).OnChangeBookingType()}),d.Xb()}if(2&t){const t=d.mc(4);d.Pc(d.yc(5,vt)),d.tc("options",t.stlstbookingtype)("ngModel",t.bookingtype)("ngModelOptions",d.yc(6,Dt))}}function Tt(t,e){if(1&t&&(d.Yb(0,"div",64),d.Yb(1,"div",65),d.Sc(2,Rt,1,7,"p-dropdown",66),d.Xb(),d.Xb()),2&t){const t=d.mc(3);d.Fb(2),d.tc("ngIf","BOTH"==(null==t.clinicType?null:t.clinicType.toUpperCase()))}}function At(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",69),d.Yb(1,"p-radioButton",70),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(4).IsAllGrouped=e})("onClick",function(){return d.Lc(t),d.mc(4).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(2,"label",71),d.Uc(3,"Individual"),d.Xb(),d.Yb(4,"p-radioButton",70),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(4).IsAllGrouped=e})("onClick",function(){return d.Lc(t),d.mc(4).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(5,"label",71),d.Uc(6,"Grouping"),d.Xb(),d.Yb(7,"p-radioButton",70),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(4).IsAllGrouped=e})("onClick",function(){return d.Lc(t),d.mc(4).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(8,"label",72),d.Uc(9,"All"),d.Xb(),d.Xb()}if(2&t){const t=d.mc(4);d.Fb(1),d.tc("value",1)("ngModel",t.IsAllGrouped),d.Fb(3),d.tc("value",2)("ngModel",t.IsAllGrouped),d.Fb(3),d.tc("value",0)("ngModel",t.IsAllGrouped)}}function Bt(t,e){if(1&t&&(d.Yb(0,"div",64),d.Sc(1,At,10,6,"div",68),d.Xb()),2&t){const t=d.mc(3);d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype)}}function Ut(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",73),d.ic("click",function(){return d.Lc(t),d.mc(3).exportToItemExcel()}),d.Xb()}}function Nt(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",56),d.Yb(1,"span",57),d.Uc(2),d.Xb(),d.Sc(3,kt,5,0,"div",58),d.Sc(4,Tt,3,1,"div",59),d.Sc(5,Bt,2,1,"div",59),d.Yb(6,"span",60),d.Sc(7,Ut,1,0,"button",61),d.Yb(8,"button",62),d.ic("click",function(){return d.Lc(t),d.mc(2).ngOnChanges()}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(2),d.Wc(" ",(null==t.LstRegistrationMainModelList?null:t.LstRegistrationMainModelList.length)>0?"Total Records: "+t.TotalRecords:""," "),d.Fb(1),d.tc("ngIf","BOTH"==(null==t.clinicType?null:t.clinicType.toUpperCase())),d.Fb(1),d.tc("ngIf","BOTH"==(null==t.clinicType?null:t.clinicType.toUpperCase())),d.Fb(1),d.tc("ngIf","BOTH"==(null==t.clinicType?null:t.clinicType.toUpperCase())||"IPD"==t.bookingtype),d.Fb(2),d.tc("ngIf",(null==t.LstRegistrationMainModelList?null:t.LstRegistrationMainModelList.length)>0&&(null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Download.toString())))}}function wt(t,e){1&t&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&t&&(d.Fb(1),d.Gb("colspan",3))}function Ft(t,e){1&t&&d.Tb(0,"col",79)}function Yt(t,e){1&t&&d.Tb(0,"col",89)}function Xt(t,e){1&t&&d.Tb(0,"col",89)}function Lt(t,e){1&t&&d.Tb(0,"col",89)}function Ot(t,e){1&t&&d.Tb(0,"col",77)}function xt(t,e){1&t&&d.Tb(0,"col",77)}function _t(t,e){1&t&&d.Tb(0,"col",83)}function Et(t,e){1&t&&d.Tb(0,"col",83)}function Gt(t,e){1&t&&d.Tb(0,"col",83)}function Wt(t,e){1&t&&d.Tb(0,"col",85)}function Vt(t,e){1&t&&d.Tb(0,"col",90)}function jt(t,e){1&t&&d.Tb(0,"col",90)}function Ht(t,e){1&t&&d.Tb(0,"col",90)}function qt(t,e){1&t&&d.Tb(0,"col",85)}function Zt(t,e){if(1&t&&(d.Yb(0,"colgroup"),d.Tb(1,"col",74),d.Tb(2,"col",75),d.Tb(3,"col",76),d.Tb(4,"col",77),d.Tb(5,"col",78),d.Tb(6,"col",79),d.Sc(7,Ft,1,0,"col",80),d.Tb(8,"col",76),d.Sc(9,Yt,1,0,"col",81),d.Tb(10,"col",79),d.Sc(11,Xt,1,0,"col",81),d.Sc(12,Lt,1,0,"col",81),d.Sc(13,Ot,1,0,"col",82),d.Sc(14,xt,1,0,"col",82),d.Tb(15,"col",83),d.Sc(16,_t,1,0,"col",84),d.Sc(17,Et,1,0,"col",84),d.Sc(18,Gt,1,0,"col",84),d.Tb(19,"col",85),d.Sc(20,Wt,1,0,"col",86),d.Sc(21,Vt,1,0,"col",87),d.Sc(22,jt,1,0,"col",87),d.Sc(23,Ht,1,0,"col",87),d.Sc(24,qt,1,0,"col",86),d.Tb(25,"col",88),d.Xb()),2&t){const t=d.mc(2);d.Fb(7),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(2),d.tc("ngIf","IPD"===t.bookingtype&&t.IsGuestBooking),d.Fb(2),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(2),d.tc("ngIf","IPD"==t.bookingtype&&t.clinicDetails.IsNABHPatientRegNumber),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype&&t.clinicDetails.IsNABHPatientRegNumber),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype&&t.clinicDetails.IsNABHPatientRegNumber),d.Fb(2),d.tc("ngIf",t.lsobjClinicMaster.IsPhysioPanel),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype)}}function $t(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Dis. Date"),d.Xb())}function zt(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Type"),d.Xb())}function Qt(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Room Type"),d.Xb())}function Jt(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Room No."),d.Xb())}function Kt(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Actual Adm. On"),d.Xb())}function te(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Actual Dis. On"),d.Xb())}function ee(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"IP No"),d.Xb())}function ie(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"OP No"),d.Xb())}function ne(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Annual No"),d.Xb())}function oe(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Refer to Physio"),d.Xb())}function se(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Suspended"),d.Xb())}function ae(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Companion"),d.Xb())}function re(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Insurance"),d.Xb())}function le(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Insurance Code"),d.Xb())}function ce(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"div",97),d.Yb(2,"p-calendar",103,99),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SerachPeriodToDate=e})("onClose",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)})("onSelect",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(2),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("ngModel",t.SerachPeriodToDate)("disabled",0==t.SerachStatusbooking)("ngModelOptions",d.yc(10,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0)}}function de(t,e){if(1&t&&(d.Yb(0,"option",104),d.Uc(1),d.Xb()),2&t){const t=e.$implicit;d.tc("ngValue",t.code),d.Fb(1),d.Wc("",t.name," ")}}function he(t,e){if(1&t&&(d.Yb(0,"option",104),d.Uc(1),d.Xb()),2&t){const t=e.$implicit;d.tc("ngValue",t.code),d.Fb(1),d.Wc("",t.name," ")}}function ue(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"select",105),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SerachPatientType=e})("change",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Sc(2,he,2,2,"option",101),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.tc("ngModel",t.SerachPatientType),d.Fb(1),d.tc("ngForOf",t.stlstpatienttype)}}function be(t,e){1&t&&d.Tb(0,"th")}function me(t,e){1&t&&d.Tb(0,"th")}function ge(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"div",97),d.Yb(2,"p-calendar",106,99),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SearchCheckedInDate=e})("onClose",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(2),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("ngModel",t.SearchCheckedInDate)("ngModelOptions",d.yc(9,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0)}}function pe(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"div",97),d.Yb(2,"p-calendar",107,99),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SearchCheckedOutDate=e})("onClose",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(2),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("ngModel",t.SearchCheckedOutDate)("ngModelOptions",d.yc(9,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0)}}function Se(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"input",108),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SearchIPNumber=e})("change",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(2,"span",93),d.ic("click",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Uc(3," filter_alt "),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.tc("ngModel",t.SearchIPNumber),d.Fb(1),d.Hb(null==t.SearchIPNumber||null==t.SearchIPNumber||""==t.SearchIPNumber?"material-icons Columnfilter":"material-icons ColumnfilterIconColorDefult")}}function fe(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"input",109),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SearchOPNumber=e})("change",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(2,"span",93),d.ic("click",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Uc(3," filter_alt "),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.tc("ngModel",t.SearchOPNumber),d.Fb(1),d.Hb(null==t.SearchOPNumber||null==t.SearchOPNumber||""==t.SearchOPNumber?"material-icons Columnfilter":"material-icons ColumnfilterIconColorDefult")}}function ye(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"input",109),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SearchANLNumber=e})("change",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(2,"span",93),d.ic("click",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Uc(3," filter_alt "),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.tc("ngModel",t.SearchANLNumber),d.Fb(1),d.Hb(null==t.SearchANLNumber||null==t.SearchANLNumber||""==t.SearchANLNumber?"material-icons Columnfilter":"material-icons ColumnfilterIconColorDefult")}}function Ie(t,e){1&t&&d.Tb(0,"th")}function Me(t,e){if(1&t&&(d.Yb(0,"option",104),d.Uc(1),d.Xb()),2&t){const t=e.$implicit;d.tc("ngValue",t.code),d.Fb(1),d.Wc("",t.name," ")}}function Ce(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"select",110),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SerachSuspended=e})("change",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Sc(2,Me,2,2,"option",101),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.tc("ngModel",t.SerachSuspended),d.Fb(1),d.tc("ngForOf",t.stlstsuspended)}}function Pe(t,e){if(1&t&&(d.Yb(0,"option",104),d.Uc(1),d.Xb()),2&t){const t=e.$implicit;d.tc("ngValue",t.code),d.Fb(1),d.Wc("",t.name," ")}}function ke(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"select",111),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SerachCompanion=e})("change",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Sc(2,Pe,2,2,"option",101),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.tc("ngModel",t.SerachCompanion),d.Fb(1),d.tc("ngForOf",t.stlstsuspended)}}function ve(t,e){if(1&t&&(d.Yb(0,"option",104),d.Uc(1),d.Xb()),2&t){const t=e.$implicit;d.tc("ngValue",t.InsuranceMasterId),d.Fb(1),d.Wc("",t.InsuranceCompanyName," ")}}function De(t,e){if(1&t){const t=d.Zb();d.Yb(0,"th"),d.Yb(1,"select",112),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).SerachCGHS=e})("change",function(){return d.Lc(t),d.mc(3).LoadOnlineRegistrationListByFilter(0,10)}),d.Sc(2,ve,2,2,"option",101),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.tc("ngModel",t.SerachCGHS),d.Fb(1),d.tc("ngForOf",t.lstInsuranceMaster)}}function Re(t,e){if(1&t){const t=d.Zb();d.Yb(0,"tr"),d.Yb(1,"th"),d.Uc(2,"Action"),d.Xb(),d.Yb(3,"th"),d.Uc(4,"Booking No"),d.Xb(),d.Yb(5,"th"),d.Uc(6,"Name"),d.Xb(),d.Yb(7,"th"),d.Uc(8,"MR No"),d.Xb(),d.Yb(9,"th"),d.Uc(10,"Contact No"),d.Xb(),d.Yb(11,"th"),d.Uc(12),d.Xb(),d.Sc(13,$t,2,0,"th",5),d.Yb(14,"th"),d.Uc(15,"Status"),d.Xb(),d.Sc(16,zt,2,0,"th",5),d.Sc(17,Qt,2,0,"th",5),d.Sc(18,Jt,2,0,"th",5),d.Yb(19,"th"),d.Uc(20,"Booked On"),d.Xb(),d.Sc(21,Kt,2,0,"th",5),d.Sc(22,te,2,0,"th",5),d.Yb(23,"th"),d.Uc(24,"Dr Name"),d.Xb(),d.Sc(25,ee,2,0,"th",5),d.Sc(26,ie,2,0,"th",5),d.Sc(27,ne,2,0,"th",5),d.Yb(28,"th"),d.Uc(29,"Refer to Dentist"),d.Xb(),d.Sc(30,oe,2,0,"th",5),d.Sc(31,se,2,0,"th",5),d.Sc(32,ae,2,0,"th",5),d.Sc(33,re,2,0,"th",5),d.Sc(34,le,2,0,"th",5),d.Yb(35,"th"),d.Uc(36,"Token"),d.Xb(),d.Xb(),d.Yb(37,"tr"),d.Yb(38,"th"),d.Yb(39,"button",91),d.ic("click",function(){return d.Lc(t),d.mc(2).ClearFilter()}),d.Xb(),d.Xb(),d.Yb(40,"th"),d.Yb(41,"input",92),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).SearchBookingNumber=e})("change",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(42,"span",93),d.ic("click",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Uc(43," filter_alt "),d.Xb(),d.Xb(),d.Yb(44,"th"),d.Yb(45,"input",94),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).SearchName=e})("change",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(46,"span",93),d.ic("click",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Uc(47," filter_alt "),d.Xb(),d.Xb(),d.Yb(48,"th"),d.Yb(49,"input",95),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).SearchMRNo=e})("change",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(50,"span",93),d.ic("click",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Uc(51," filter_alt "),d.Xb(),d.Xb(),d.Yb(52,"th"),d.Yb(53,"input",96),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).SearchContactNumber=e})("change",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(54,"span",93),d.ic("click",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Uc(55," filter_alt "),d.Xb(),d.Xb(),d.Yb(56,"th"),d.Yb(57,"div",97),d.Yb(58,"p-calendar",98,99),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).SerachPeriodFromDate=e})("onClose",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)})("onSelect",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Xb(),d.Xb(),d.Sc(60,ce,4,11,"th",5),d.Yb(61,"th"),d.Yb(62,"select",100),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).SerachStatusbooking=e})("change",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Sc(63,de,2,2,"option",101),d.Xb(),d.Xb(),d.Sc(64,ue,3,2,"th",5),d.Sc(65,be,1,0,"th",5),d.Sc(66,me,1,0,"th",5),d.Tb(67,"th"),d.Sc(68,ge,4,10,"th",5),d.Sc(69,pe,4,10,"th",5),d.Tb(70,"th"),d.Sc(71,Se,4,4,"th",5),d.Sc(72,fe,4,4,"th",5),d.Sc(73,ye,4,4,"th",5),d.Tb(74,"th"),d.Sc(75,Ie,1,0,"th",5),d.Sc(76,Ce,3,2,"th",5),d.Sc(77,ke,3,2,"th",5),d.Sc(78,De,3,2,"th",5),d.Yb(79,"th"),d.Yb(80,"input",102),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).SearchInsuranceNo=e})("change",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Xb(),d.Yb(81,"span",93),d.ic("click",function(){return d.Lc(t),d.mc(2).LoadOnlineRegistrationListByFilter(0,10)}),d.Uc(82," filter_alt "),d.Xb(),d.Xb(),d.Tb(83,"th"),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(12),d.Vc("IPD"===t.bookingtype?"Adm. Date":"Booking For"),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(3),d.tc("ngIf","IPD"===t.bookingtype&&t.IsGuestBooking),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(3),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(3),d.tc("ngIf","IPD"===t.bookingtype&&t.clinicDetails.IsNABHPatientRegNumber),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype&&t.clinicDetails.IsNABHPatientRegNumber),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype&&t.clinicDetails.IsNABHPatientRegNumber),d.Fb(3),d.tc("ngIf",t.lsobjClinicMaster.IsPhysioPanel),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(7),d.tc("ngModel",t.SearchBookingNumber),d.Fb(1),d.Hb(null==t.SearchBookingNumber||null==t.SearchBookingNumber||""==t.SearchBookingNumber?"material-icons Columnfilter":"material-icons ColumnfilterIconColorDefult"),d.Fb(3),d.tc("ngModel",t.SearchName),d.Fb(1),d.Hb(null==t.SearchName||null==t.SearchName||""==t.SearchName?"material-icons Columnfilter":"material-icons ColumnfilterIconColorDefult"),d.Fb(3),d.tc("ngModel",t.SearchMRNo),d.Fb(1),d.Hb(null==t.SearchMRNo||null==t.SearchMRNo||""==t.SearchMRNo?"material-icons Columnfilter":"material-icons ColumnfilterIconColorDefult"),d.Fb(3),d.tc("ngModel",t.SearchContactNumber),d.Fb(1),d.Hb(null==t.SearchContactNumber||null==t.SearchContactNumber||""==t.SearchContactNumber?"material-icons Columnfilter":"material-icons ColumnfilterIconColorDefult"),d.Fb(4),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("ngModel",t.SerachPeriodFromDate)("disabled",0==t.SerachStatusbooking)("ngModelOptions",d.yc(60,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),d.Fb(2),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(2),d.tc("ngModel",t.SerachStatusbooking),d.Fb(1),d.tc("ngForOf",t.stlstbookingstatus),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype&&t.IsGuestBooking),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype),d.Fb(2),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(2),d.tc("ngIf","IPD"==t.bookingtype&&t.clinicDetails.IsNABHPatientRegNumber),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype&&t.clinicDetails.IsNABHPatientRegNumber),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype&&t.clinicDetails.IsNABHPatientRegNumber),d.Fb(2),d.tc("ngIf",t.lsobjClinicMaster.IsPhysioPanel),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==t.bookingtype),d.Fb(2),d.tc("ngModel",t.SearchInsuranceNo),d.Fb(1),d.Hb(null==t.SearchInsuranceNo||null==t.SearchInsuranceNo||""==t.SearchInsuranceNo?"material-icons Columnfilter":"material-icons ColumnfilterIconColorDefult")}}function Te(t,e){if(1&t&&(d.Yb(0,"tr"),d.Yb(1,"td",121),d.Yb(2,"span"),d.Uc(3),d.Xb(),d.Xb(),d.Xb()),2&t){const t=d.mc().$implicit,e=d.mc(2);d.Fb(1),d.tc("colSpan",1==e.clinicDetails.IsNABHPatientRegNumber?25:22),d.Fb(2),d.Vc(t.GroupNumber)}}function Ae(t,e){if(1&t){const t=d.Zb();d.Yb(0,"a",122),d.ic("click",function(e){d.Lc(t);const i=d.mc().$implicit,n=d.Ic(5);return d.mc(2).toggleTieredMenu(n,e,i.SlotBookingId)}),d.Tb(1,"i",123),d.Xb()}}function Be(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.nc(2,"date"),d.nc(3,"date"),d.Xb()),2&t){const t=d.mc().$implicit,e=d.mc(2);d.Fb(1),d.Vc("0001"==d.pc(2,1,t.PeriodUpto,"yyyy")?"":d.pc(3,4,t.PeriodUpto,e.customDateFormat.DEF_DATE))}}function Ue(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(t.PatientType)}}function Ne(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(t.RoomTypeName)}}function we(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(t.RoomNumber)}}function Fe(t,e){if(1&t&&(d.Yb(0,"td",118),d.nc(1,"date"),d.nc(2,"date"),d.Uc(3),d.nc(4,"date"),d.nc(5,"date"),d.Xb()),2&t){const t=d.mc().$implicit,e=d.mc(2);d.uc("title","0001"==d.pc(1,2,t.CheckedInDate,"yyyy")?"":d.pc(2,5,t.CheckedInDate,e.customDateFormat.DEF_DATE_TIME)),d.Fb(3),d.Wc(" ","0001"==d.pc(4,8,t.CheckedInDate,"yyyy")?"":d.pc(5,11,t.CheckedInDate,e.customDateFormat.DEF_DATE),"")}}function Ye(t,e){if(1&t&&(d.Yb(0,"td",118),d.nc(1,"date"),d.nc(2,"date"),d.Uc(3),d.nc(4,"date"),d.nc(5,"date"),d.Xb()),2&t){const t=d.mc().$implicit,e=d.mc(2);d.uc("title","0001"==d.pc(1,2,t.CheckedOutDate,"yyyy")?"":d.pc(2,5,t.CheckedOutDate,e.customDateFormat.DEF_DATE_TIME)),d.Fb(3),d.Wc(" ","0001"==d.pc(4,8,t.CheckedOutDate,"yyyy")?"":d.pc(5,11,t.CheckedOutDate,e.customDateFormat.DEF_DATE),"")}}function Xe(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(t.ReviewerDoctor)}}function Le(t,e){if(1&t&&(d.Yb(0,"td",118),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.vc("title","Reviewer Dr.: ",t.ReviewerDoctor,""),d.Fb(1),d.Vc(t.DoctorName)}}function Oe(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(t.IPNumber)}}function xe(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(t.OPNumber)}}function _e(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(t.ANNumber)}}function Ee(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(1==t.IsPhysioTreatment?"Yes":"")}}function Ge(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(1==t.IsSuspended?"Yes":"")}}function We(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(1==t.IsCompanion?"Yes":"")}}function Ve(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(t.InsuranceCompanyName)}}function je(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(1),d.Vc(t.InsuranceNo)}}const He=function(t,e){return{color:t,"font-weight":e}},qe=function(t){return{"font-weight":t}};function Ze(t,e){if(1&t&&(d.Sc(0,Te,4,2,"tr",5),d.Yb(1,"tr",113),d.Yb(2,"td"),d.Sc(3,Ae,2,0,"a",114),d.Tb(4,"p-tieredMenu",115,116),d.Xb(),d.Yb(6,"td"),d.Yb(7,"span",117),d.Uc(8),d.Xb(),d.Xb(),d.Yb(9,"td"),d.Yb(10,"span",117),d.Uc(11),d.Xb(),d.Xb(),d.Yb(12,"td"),d.Uc(13),d.Xb(),d.Yb(14,"td"),d.Uc(15),d.Xb(),d.Yb(16,"td"),d.Uc(17),d.nc(18,"date"),d.nc(19,"date"),d.Xb(),d.Sc(20,Be,4,7,"td",5),d.Yb(21,"td"),d.Yb(22,"span"),d.Uc(23),d.Xb(),d.Xb(),d.Sc(24,Ue,2,1,"td",5),d.Sc(25,Ne,2,1,"td",5),d.Sc(26,we,2,1,"td",5),d.Yb(27,"td",118),d.nc(28,"date"),d.Uc(29),d.nc(30,"date"),d.Xb(),d.Sc(31,Fe,6,14,"td",119),d.Sc(32,Ye,6,14,"td",119),d.Sc(33,Xe,2,1,"td",5),d.Sc(34,Le,2,2,"td",119),d.Sc(35,Oe,2,1,"td",5),d.Sc(36,xe,2,1,"td",5),d.Sc(37,_e,2,1,"td",5),d.Yb(38,"td"),d.Uc(39),d.Xb(),d.Sc(40,Ee,2,1,"td",5),d.Sc(41,Ge,2,1,"td",5),d.Sc(42,We,2,1,"td",5),d.Sc(43,Ve,2,1,"td",5),d.Sc(44,je,2,1,"td",5),d.Yb(45,"td",120),d.Uc(46),d.Xb(),d.Xb()),2&t){const t=e.$implicit,i=e.rowIndex,n=d.mc(2);d.tc("ngIf","IPD"===n.bookingtype&&(0==n.IsAllGrouped||2==n.IsAllGrouped)&&n.rowGroupMetadata[t.GroupNumber].index==i),d.Fb(3),d.tc("ngIf",!(!t.IsValidDate&&"OPD"==t.BookingType&&t.BookingStatus==n.bookingStatus[n.bookingStatus.Booked])),d.Fb(1),d.tc("model",n.items)("popup",!0),d.Fb(3),d.tc("ngStyle",d.Ac(47,He,t.IsCGHS?"green":"#495057",t.IsCGHS?"bold":"normal")),d.Fb(1),d.Vc(t.BookingNumber),d.Fb(2),d.tc("ngStyle",d.zc(50,qe,t.IsGrouphead?"bold":"normal")),d.Fb(1),d.Vc(t.PaitentName),d.Fb(2),d.Vc(t.MRNo),d.Fb(2),d.Vc(t.ContactNumber),d.Fb(2),d.Vc("0001"==d.pc(18,35,t.PeriodFrom,"yyyy")?"":d.pc(19,38,t.PeriodFrom,n.customDateFormat.DEF_DATE)),d.Fb(3),d.tc("ngIf","IPD"===n.bookingtype),d.Fb(2),d.Hb(t.BookingStatus),d.Fb(1),d.Vc(t.BookingStatus),d.Fb(1),d.tc("ngIf","IPD"===n.bookingtype&&n.IsGuestBooking),d.Fb(1),d.tc("ngIf","IPD"===n.bookingtype),d.Fb(1),d.tc("ngIf","IPD"===n.bookingtype),d.Fb(1),d.uc("title",d.pc(28,41,t.SlotBookedOn,n.customDateFormat.DEF_DATE_TIME)),d.Fb(2),d.Wc(" ",d.pc(30,44,t.SlotBookedOn,n.customDateFormat.DEF_DATE),""),d.Fb(2),d.tc("ngIf","IPD"===n.bookingtype),d.Fb(1),d.tc("ngIf","IPD"===n.bookingtype),d.Fb(1),d.tc("ngIf",n.statusbooking==n.bookingStatus.ReferToDr),d.Fb(1),d.tc("ngIf",n.statusbooking!=n.bookingStatus.ReferToDr),d.Fb(1),d.tc("ngIf","IPD"===n.bookingtype&&n.clinicDetails.IsNABHPatientRegNumber),d.Fb(1),d.tc("ngIf","IPD"===n.bookingtype&&n.clinicDetails.IsNABHPatientRegNumber),d.Fb(1),d.tc("ngIf","IPD"===n.bookingtype&&n.clinicDetails.IsNABHPatientRegNumber),d.Fb(2),d.Vc(1==t.IsDentalTreatment?"Yes":""),d.Fb(1),d.tc("ngIf",n.lsobjClinicMaster.IsPhysioPanel),d.Fb(1),d.tc("ngIf","IPD"==n.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==n.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==n.bookingtype),d.Fb(1),d.tc("ngIf","IPD"==n.bookingtype),d.Fb(2),d.Vc(t.TokenNumber)}}const $e=function(){return["GroupNumber","BookingNumber","MRNo","PaitentName","ReviewerDoctor","DoctorName","BookingStatus","ContactNumber","RoomNumber"]};function ze(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",44),d.Yb(1,"div",45),d.Sc(2,Pt,8,2,"div",3),d.Yb(3,"div",46),d.Yb(4,"div",34),d.Yb(5,"div",47),d.Yb(6,"p-table",48,49),d.ic("onLazyLoad",function(e){return d.Lc(t),d.mc().loadPatientList(e)})("firstChange",function(e){return d.Lc(t),d.mc().first=e}),d.Sc(8,Nt,9,5,"ng-template",37),d.Sc(9,wt,3,1,"ng-template",50),d.Sc(10,Zt,26,14,"ng-template",38),d.Sc(11,Re,84,61,"ng-template",25),d.Sc(12,Ze,47,52,"ng-template",39),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(2),d.tc("ngIf",t.UserTypeCurre===t.userTypes.SuperAdmin),d.Fb(4),d.tc("value",t.LstRegistrationMainModelList)("lazy",!0)("rowHover",!0)("lazyLoadOnInit",!1)("globalFilterFields",d.yc(11,$e))("scrollable",!0)("paginator",!0)("rows",10)("totalRecords",t.TotalRecords)("first",t.first)}}function Qe(t,e){if(1&t){const t=d.Zb();d.Yb(0,"a",124),d.ic("click",function(){return d.Lc(t),d.mc().CloseModal()}),d.Tb(1,"i",125),d.Xb()}}function Je(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",46),d.Yb(1,"app-registration",126),d.ic("OnUpdateRegDetails",function(e){return d.Lc(t),d.mc().OnUpdateRegDetails(e)}),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(1),d.tc("RegistrationMainModel",t.RegistrationMainModel)("InputType",t.InputType)("IsValidDate",t.isValidDate)}}function Ke(t,e){1&t&&d.Uc(0),2&t&&d.Wc(" ",e.$implicit.ReasonName," ")}function ti(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",127),d.Yb(1,"div",128),d.Uc(2,"Room "),d.Yb(3,"span",53),d.Uc(4,"*"),d.Xb(),d.Xb(),d.Yb(5,"div",136),d.Yb(6,"p-multiSelect",137),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).lstSelectedRoom=e}),d.Xb(),d.Xb(),d.Yb(7,"div",138),d.Uc(8),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(6),d.Pc(d.yc(5,vt)),d.tc("options",t.lstRoomMster)("ngModel",t.lstSelectedRoom),d.Fb(2),d.Wc("Room Count: ",t.bookedRoomCount,"")}}function ei(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",127),d.Tb(1,"td",128),d.Yb(2,"td",139),d.Yb(3,"p-checkbox",140),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).LstPaitentMessageReplyLog.IsAllMemberSelect=e}),d.Xb(),d.Yb(4,"label",141),d.Uc(5,"Select All Members"),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(3),d.tc("ngModel",t.LstPaitentMessageReplyLog.IsAllMemberSelect)("binary",!0)}}function ii(t,e){1&t&&(d.Yb(0,"div",128),d.Uc(1,"Cancel Charge in %"),d.Xb())}function ni(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",138),d.Yb(1,"p-inputNumber",146),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).CancelCharge=e}),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.Pc(d.yc(6,vt)),d.tc("ngModel",t.CancelCharge)("min",0)("max",100)("maxlength",3)}}function oi(t,e){1&t&&(d.Yb(0,"div",128),d.Uc(1,"\xa0"),d.Xb())}function si(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",147),d.Yb(1,"p-checkbox",148),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).AutogenerateVoucher=e}),d.Xb(),d.Yb(2,"label",149),d.Uc(3,"Auto Generate Voucher"),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.tc("ngModel",t.AutogenerateVoucher)("binary",!0)}}function ai(t,e){if(1&t&&(d.Yb(0,"div",142),d.Sc(1,ii,2,0,"div",143),d.Sc(2,ni,2,7,"div",144),d.Sc(3,oi,2,0,"div",143),d.Sc(4,si,4,2,"div",145),d.Xb()),2&t){const t=d.mc(2);d.Fb(1),d.tc("ngIf",t.IsCancelCharge),d.Fb(1),d.tc("ngIf",t.IsCancelCharge),d.Fb(1),d.tc("ngIf","6131ff3d7008ed3c20eb80d2"===t.LstPaitentMessageReplyLog.ReasonId&&0==t.IsCancelCharge),d.Fb(1),d.tc("ngIf",100!=t.CancelCharge&&"6131ff3d7008ed3c20eb80d2"===t.LstPaitentMessageReplyLog.ReasonId)}}function ri(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",142),d.Yb(1,"div",128),d.Uc(2,"Discharged Date "),d.Yb(3,"span",53),d.Uc(4,"*"),d.Xb(),d.Xb(),d.Yb(5,"div",129),d.Yb(6,"p-calendar",150),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).CheckOutDate=e}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(6),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("minDate",t.PeriodFrom)("maxDate",t.maxDate)("ngModel",t.CheckOutDate)("ngModelOptions",d.yc(12,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1)("showTime",!0)}}function li(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",129),d.Yb(1,"p-dropdown",152),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).LstPaitentMessageReplyLog.DoctorId=e}),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.Pc(d.yc(5,vt)),d.tc("options",t.LstDoctorMster)("ngModel",t.LstPaitentMessageReplyLog.DoctorId)("filter",!0)}}function ci(t,e){if(1&t&&(d.Yb(0,"div",127),d.Yb(1,"div",128),d.Uc(2,"Select doctor "),d.Yb(3,"span",53),d.Uc(4,"*"),d.Xb(),d.Xb(),d.Sc(5,li,2,6,"div",151),d.Xb()),2&t){const t=d.mc(2);d.Fb(5),d.tc("ngIf",(null==t.LstDoctorMster?null:t.LstDoctorMster.length)>0)}}function di(t,e){1&t&&(d.Yb(0,"span",53),d.Uc(1,"*"),d.Xb())}function hi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",127),d.Yb(2,"div",128),d.Uc(3,"Action "),d.Yb(4,"span",53),d.Uc(5,"*"),d.Xb(),d.Xb(),d.Yb(6,"div",129),d.Yb(7,"p-dropdown",130),d.ic("onChange",function(){return d.Lc(t),d.mc().ddlReplyReasonChange()})("ngModelChange",function(e){return d.Lc(t),d.mc().LstPaitentMessageReplyLog.ReasonId=e}),d.Sc(8,Ke,1,1,"ng-template",131),d.Xb(),d.Xb(),d.Xb(),d.Sc(9,ti,9,6,"div",132),d.Sc(10,ei,6,2,"div",132),d.Sc(11,ai,5,4,"div",133),d.Sc(12,ri,7,13,"div",133),d.Sc(13,ci,6,1,"div",132),d.Yb(14,"div",46),d.Yb(15,"div",128),d.Uc(16,"Remarks "),d.Sc(17,di,2,0,"span",134),d.Xb(),d.Yb(18,"div",129),d.Yb(19,"textarea",135),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().LstPaitentMessageReplyLog.Remarks=e}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(7),d.Pc(d.yc(12,vt)),d.tc("options",t.LstReplyReason)("ngModel",t.LstPaitentMessageReplyLog.ReasonId)("filter",!0),d.Fb(2),d.tc("ngIf",t.status===t.bookingStatus[t.bookingStatus.Confirmed]&&"6131eabe7008ed3c20eb80cf"===t.LstPaitentMessageReplyLog.ReasonId),d.Fb(1),d.tc("ngIf",t.status===t.bookingStatus[t.bookingStatus.UnderReview]&&!0===t.IsGrouphead&&"60f94501513904c09133bc30"===t.LstPaitentMessageReplyLog.ReasonId),d.Fb(1),d.tc("ngIf",t.status===t.bookingStatus[t.bookingStatus.Confirmed]),d.Fb(1),d.tc("ngIf","IPD"===t.BookingType&&"6131eabe7008ed3c20eb80d0"===t.LstPaitentMessageReplyLog.ReasonId),d.Fb(1),d.tc("ngIf",t.IsSelectDoctor),d.Fb(4),d.tc("ngIf","608a60556ef8bc2976a92078"==t.LstPaitentMessageReplyLog.ReasonId),d.Fb(2),d.tc("ngModel",t.LstPaitentMessageReplyLog.Remarks)}}function ui(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",153),d.ic("click",function(){return d.Lc(t),d.mc().BeforSubmitReply()}),d.Uc(1,"Submit"),d.Xb()}}function bi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",46),d.Yb(2,"div",128),d.Uc(3,"Remarks "),d.Yb(4,"span",53),d.Uc(5,"*"),d.Xb(),d.Xb(),d.Yb(6,"div",129),d.Yb(7,"textarea",135),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().LstPaitentMessageReplyLog.Remarks=e}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(7),d.tc("ngModel",t.LstPaitentMessageReplyLog.Remarks)}}function mi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",154),d.ic("click",function(){return d.Lc(t),d.mc().AddAdditionalRemarks()}),d.Uc(1,"Submit"),d.Xb()}}function gi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"app-room-book-public",155),d.ic("roomBookClick",function(e){return d.Lc(t),d.mc().roomBookClick(e)})("EmitSelectedPackage",function(e){return d.Lc(t),d.mc().EmitSelectedPackage(e)})("EmitPermittedBy",function(e){return d.Lc(t),d.mc().EmitPermittedBy(e)}),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(1),d.tc("ClinicId",t.ClinicIdSelected)("SlotId",t.SlotBookingIdSelectedId)("BookingSource",t.BookingSource)("IsExtended",t.IsExtended)("GroupCount",t.GroupCount)("IsGrouped",t.IsGrouped)}}function pi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",153),d.ic("click",function(){return d.Lc(t),d.mc().awaitBookRoomm()}),d.Uc(1,"Book Room"),d.Xb()}}function Si(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"app-package-group-mapping",156),d.ic("PackgeMappingEmit",function(e){return d.Lc(t),d.mc().EmitSelectedMapping(e)}),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(1),d.tc("Packages",t.Package)("SlotBookingId",t.SlotBookingIdSelectedId)}}function fi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",46),d.Yb(2,"div",34),d.Yb(3,"app-razorpay",157),d.ic("GetPaymentStatusEmit",function(e){return d.Lc(t),d.mc().GetPaymentStatusEmit(e)}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(3),d.tc("OrderRes",t.OrderRes)("ItemPriceRes",t.ItemPriceRes)("PackageMapping",t.PackageMapping)("SlotBookingIdSelected",t.SlotBookingIdSelectedId)("IsSelectedItem",t.IsSelectedItem)("UserRes",t.UserRes)("BillWiseDiscountPer",t.BillWiseDiscountPer)("ReferredBy",t.ReferredBy)("RequestedBy",t.RequestedBy)("PayRequestFrom",t.PayRequestFrom)("ActualNetPayble",t.ActualNetPayble)("IsPartialPayment",t.IsPartialPayment)("CreditNoteNumber",t.CreditNoteNumber)("CreditNoteAmount",t.CreditNoteTranAmount)}}function yi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",159),d.ic("click",function(){d.Lc(t);const e=d.mc(2);return e.ChangeRoom(e.SlotBookingIdSelectedId)}),d.Uc(1,"Change Room"),d.Xb()}}function Ii(t,e){if(1&t&&d.Sc(0,yi,2,0,"button",158),2&t){const t=d.mc();d.tc("ngIf",t.IsIPD)}}function Mi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",46),d.Yb(2,"div",34),d.Yb(3,"app-worldline",160),d.ic("GetPaymentStatusEmit",function(e){return d.Lc(t),d.mc().GetWLPaymentStatusEmit(e)}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(3),d.tc("WLOrderRes",t.OrderRes)("ItemPriceRes",t.ItemPriceRes)("PackageMapping",t.PackageMapping)("SlotBookingIdSelected",t.SlotBookingIdSelectedId)("IsSelectedItem",t.IsSelectedItem)("UserRes",t.UserRes)("BillWiseDiscountPer",t.BillWiseDiscountPer)("ReferredBy",t.ReferredBy)("RequestedBy",t.RequestedBy)("PayRequestFrom",t.PayRequestFrom)("ActualNetPayble",t.ActualNetPayble)("IsPartialPayment",t.IsPartialPayment)("CreditNoteNumber",t.CreditNoteNumber)("CreditNoteAmount",t.CreditNoteTranAmount)}}function Ci(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",159),d.ic("click",function(){d.Lc(t);const e=d.mc(2);return e.ChangeRoom(e.SlotBookingIdSelectedId)}),d.Uc(1,"Change Room"),d.Xb()}}function Pi(t,e){if(1&t&&d.Sc(0,Ci,2,0,"button",158),2&t){const t=d.mc();d.tc("ngIf",t.IsIPD)}}function ki(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",172),d.Yb(1,"h3"),d.Uc(2),d.nc(3,"number"),d.Xb(),d.Yb(4,"div",127),d.Yb(5,"div",31),d.Uc(6,"Amount "),d.Yb(7,"span",173),d.Uc(8,"*"),d.Xb(),d.Xb(),d.Yb(9,"div",174),d.Yb(10,"p-inputNumber",175),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.CREDITAMT=e}),d.Xb(),d.Xb(),d.Xb(),d.Tb(11,"hr"),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(2),d.Wc("Credit Details (Credit Balance:",d.pc(3,7,t.CreditNoteBalanceAmount,"1.1-2"),")"),d.Fb(8),d.Pc(d.yc(10,vt)),d.tc("ngModel",t.TenderObj.CREDITAMT)("min",0)("max",t.CreditNoteBalanceAmount)("maxlength",5)}}function vi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",176),d.Yb(1,"h3"),d.Uc(2,"Cash Details"),d.Xb(),d.Yb(3,"div",127),d.Yb(4,"div",31),d.Uc(5,"Amount "),d.Yb(6,"span",173),d.Uc(7,"*"),d.Xb(),d.Xb(),d.Yb(8,"div",174),d.Yb(9,"p-inputNumber",177),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.CASH=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(10,"div",127),d.Yb(11,"div",31),d.Uc(12,"Received Date "),d.Yb(13,"span",173),d.Uc(14,"*"),d.Xb(),d.Xb(),d.Yb(15,"div",174),d.Yb(16,"p-calendar",178,179),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.CashRecdDate=e}),d.Xb(),d.Xb(),d.Xb(),d.Tb(18,"hr"),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(9),d.Pc(d.yc(15,vt)),d.tc("ngModel",t.TenderObj.CASH)("min",0)("maxlength",10),d.Fb(7),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.TenderObj.CashRecdDate)("ngModelOptions",d.yc(16,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1)}}function Di(t,e){if(1&t){const t=d.Zb();d.Yb(0,"a",187),d.ic("click",function(){return d.Lc(t),d.mc(4).AddCardPaymentDetails()}),d.Tb(1,"i",188),d.Xb()}}function Ri(t,e){if(1&t){const t=d.Zb();d.Yb(0,"a",187),d.ic("click",function(){d.Lc(t);const e=d.mc().index,i=d.mc(3);return i.RemoveCardPaymentDetails(i.lstCardPaymentTransactionDetails[e].Sequence)}),d.Tb(1,"i",189),d.Xb()}}function Ti(t,e){if(1&t){const t=d.Zb();d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2),d.Xb(),d.Yb(3,"td"),d.Yb(4,"input",183),d.ic("ngModelChange",function(t){return e.$implicit.CardNumber=t}),d.Xb(),d.Xb(),d.Yb(5,"td"),d.Yb(6,"input",183),d.ic("ngModelChange",function(t){return e.$implicit.CardHolderName=t}),d.Xb(),d.Xb(),d.Yb(7,"td"),d.Yb(8,"input",183),d.ic("ngModelChange",function(t){return e.$implicit.TransactionId=t}),d.Xb(),d.Xb(),d.Yb(9,"td"),d.Yb(10,"p-calendar",178,184),d.ic("ngModelChange",function(t){return e.$implicit.RecdDate=t}),d.Xb(),d.Xb(),d.Yb(12,"td"),d.Yb(13,"p-inputNumber",185),d.ic("onInput",function(i){d.Lc(t);const n=e.$implicit;return d.mc(3).CalculateTotalCardPayment(i,n.Sequence)})("onBlur",function(){return d.Lc(t),d.mc(3).CalculateTotalCardPaymentrev()})("ngModelChange",function(t){return e.$implicit.Amount=t}),d.Xb(),d.Xb(),d.Yb(14,"td"),d.Sc(15,Di,2,0,"a",186),d.Sc(16,Ri,2,0,"a",186),d.Xb(),d.Xb()}if(2&t){const t=e.$implicit,i=e.index,n=d.mc(3);d.Fb(2),d.Vc(i+1),d.Fb(2),d.Pc(d.yc(31,vt)),d.vc("name","txtTransactionCardNumber_",i,""),d.tc("ngModel",t.CardNumber),d.Fb(2),d.Pc(d.yc(32,vt)),d.vc("name","txtTransactionCardHolderName_",i,""),d.tc("ngModel",t.CardHolderName),d.Fb(2),d.Pc(d.yc(33,vt)),d.vc("name","txtTransactionIdCardPayment_",i,""),d.tc("ngModel",t.TransactionId),d.Fb(2),d.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",t.RecdDate)("ngModelOptions",d.yc(34,Dt))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!1),d.Fb(3),d.Pc(d.yc(35,vt)),d.vc("name","txtBankTFAmountTran_",i,""),d.tc("ngModel",t.Amount)("min",0)("max",n.NetPaybleTotal),d.Fb(2),d.tc("ngIf",(null==n.lstCardPaymentTransactionDetails?null:n.lstCardPaymentTransactionDetails.length)<10),d.Fb(1),d.tc("ngIf",1!==n.lstCardPaymentTransactionDetails[i].Sequence)}}function Ai(t,e){if(1&t&&(d.Yb(0,"div",180),d.Yb(1,"h3"),d.Uc(2,"Card Details"),d.Xb(),d.Yb(3,"div",127),d.Yb(4,"table",181),d.Yb(5,"thead"),d.Yb(6,"tr"),d.Yb(7,"th"),d.Uc(8,"S.No"),d.Xb(),d.Yb(9,"th"),d.Uc(10,"Card Number"),d.Xb(),d.Yb(11,"th"),d.Uc(12,"Card Holder Name"),d.Xb(),d.Yb(13,"th"),d.Uc(14,"Transaction Id "),d.Yb(15,"span",173),d.Uc(16,"*"),d.Xb(),d.Xb(),d.Yb(17,"th"),d.Uc(18,"Payment Rec. Date "),d.Yb(19,"span",173),d.Uc(20,"*"),d.Xb(),d.Xb(),d.Yb(21,"th"),d.Uc(22,"Amount "),d.Yb(23,"span",173),d.Uc(24,"*"),d.Xb(),d.Xb(),d.Yb(25,"th"),d.Uc(26,"Action"),d.Xb(),d.Xb(),d.Xb(),d.Yb(27,"tbody"),d.Sc(28,Ti,17,36,"tr",182),d.Xb(),d.Xb(),d.Xb(),d.Tb(29,"hr"),d.Xb()),2&t){const t=d.mc(2);d.Fb(28),d.tc("ngForOf",t.lstCardPaymentTransactionDetails)}}function Bi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"a",187),d.ic("click",function(){return d.Lc(t),d.mc(4).AddBankTransactionDetails()}),d.Tb(1,"i",188),d.Xb()}}function Ui(t,e){if(1&t){const t=d.Zb();d.Yb(0,"a",187),d.ic("click",function(){d.Lc(t);const e=d.mc().index,i=d.mc(3);return i.RemoveBankTransactionDetails(i.lstBankDepositTransactionDetails[e].Sequence)}),d.Tb(1,"i",189),d.Xb()}}function Ni(t,e){if(1&t){const t=d.Zb();d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2),d.Xb(),d.Yb(3,"td"),d.Yb(4,"input",183),d.ic("ngModelChange",function(t){return e.$implicit.BankName=t}),d.Xb(),d.Xb(),d.Yb(5,"td"),d.Yb(6,"input",183),d.ic("ngModelChange",function(t){return e.$implicit.TransactionId=t}),d.Xb(),d.Xb(),d.Yb(7,"td"),d.Yb(8,"p-calendar",178,184),d.ic("ngModelChange",function(t){return e.$implicit.RecdDate=t}),d.Xb(),d.Xb(),d.Yb(10,"td"),d.Yb(11,"p-inputNumber",185),d.ic("onInput",function(i){d.Lc(t);const n=e.$implicit;return d.mc(3).CalculateTotalBankTransaction(i,n.Sequence)})("onBlur",function(){return d.Lc(t),d.mc(3).CalculateTotalBankTransactionrev()})("ngModelChange",function(t){return e.$implicit.Amount=t}),d.Xb(),d.Xb(),d.Yb(12,"td"),d.Sc(13,Bi,2,0,"a",186),d.Sc(14,Ui,2,0,"a",186),d.Xb(),d.Xb()}if(2&t){const t=e.$implicit,i=e.index,n=d.mc(3);d.Fb(2),d.Vc(i+1),d.Fb(2),d.Pc(d.yc(27,vt)),d.vc("name","txtTransactionBankDepoName_",i,""),d.tc("ngModel",t.BankName),d.Fb(2),d.Pc(d.yc(28,vt)),d.vc("name","txtTransactionIdBankDepo_",i,""),d.tc("ngModel",t.TransactionId),d.Fb(2),d.wc("yearRange","",n.customDateFormat.MinYear,":",n.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",n.todayDate)("ngModel",t.RecdDate)("ngModelOptions",d.yc(29,Dt))("showIcon",!0)("dateFormat",n.customDateFormat.CalendarFormat)("readonlyInput",!1),d.Fb(3),d.Pc(d.yc(30,vt)),d.vc("name","txtBankTFAmountTran_",i,""),d.tc("ngModel",t.Amount)("min",0)("max",n.NetPaybleTotal),d.Fb(2),d.tc("ngIf",(null==n.lstBankDepositTransactionDetails?null:n.lstBankDepositTransactionDetails.length)<10),d.Fb(1),d.tc("ngIf",1!==n.lstBankDepositTransactionDetails[i].Sequence)}}function wi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",190),d.Yb(1,"h3"),d.Uc(2,"Bank Deposit Details"),d.Xb(),d.Tb(3,"hr"),d.Yb(4,"div",127),d.Yb(5,"table",181),d.Yb(6,"thead"),d.Yb(7,"tr"),d.Yb(8,"th"),d.Uc(9,"S.No"),d.Xb(),d.Yb(10,"th"),d.Uc(11,"Bank Name "),d.Yb(12,"span",173),d.Uc(13,"*"),d.Xb(),d.Xb(),d.Yb(14,"th"),d.Uc(15,"Transaction Id "),d.Yb(16,"span",173),d.Uc(17,"*"),d.Xb(),d.Xb(),d.Yb(18,"th"),d.Uc(19,"Payment Rec. Date "),d.Yb(20,"span",173),d.Uc(21,"*"),d.Xb(),d.Xb(),d.Yb(22,"th"),d.Uc(23,"Amount "),d.Yb(24,"span",173),d.Uc(25,"*"),d.Xb(),d.Xb(),d.Yb(26,"th"),d.Uc(27,"Action"),d.Xb(),d.Xb(),d.Xb(),d.Yb(28,"tbody"),d.Sc(29,Ni,15,31,"tr",182),d.Xb(),d.Xb(),d.Xb(),d.Tb(30,"hr"),d.Yb(31,"div",191),d.Yb(32,"div",31),d.Uc(33,"Amount "),d.Yb(34,"span",173),d.Uc(35,"*"),d.Xb(),d.Xb(),d.Yb(36,"div",174),d.Yb(37,"p-inputNumber",192),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.BANKTFAMOUNT=e}),d.Xb(),d.Xb(),d.Xb(),d.Tb(38,"hr"),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(29),d.tc("ngForOf",t.lstBankDepositTransactionDetails),d.Fb(8),d.Pc(d.yc(6,vt)),d.tc("ngModel",t.TenderObj.BANKTFAMOUNT)("min",0)("maxlength",10)}}function Fi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",193),d.Yb(1,"h3"),d.Uc(2,"Cheque Details"),d.Xb(),d.Yb(3,"div",127),d.Yb(4,"div",31),d.Uc(5,"Cheque Number "),d.Yb(6,"span",173),d.Uc(7,"*"),d.Xb(),d.Xb(),d.Yb(8,"div",31),d.Yb(9,"input",194),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.CHEQUENO=e}),d.Xb(),d.Xb(),d.Yb(10,"div",31),d.Uc(11,"Bank Name "),d.Yb(12,"span",173),d.Uc(13,"*"),d.Xb(),d.Xb(),d.Yb(14,"div",31),d.Yb(15,"input",195),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.BANK=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(16,"div",127),d.Yb(17,"div",31),d.Uc(18,"Received Date"),d.Yb(19,"span",173),d.Uc(20,"*"),d.Xb(),d.Xb(),d.Yb(21,"div",174),d.Yb(22,"p-calendar",196),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.ChequeRecdDate=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(23,"div",127),d.Yb(24,"div",31),d.Uc(25,"Cheque Date"),d.Yb(26,"span",173),d.Uc(27,"*"),d.Xb(),d.Xb(),d.Yb(28,"div",174),d.Yb(29,"p-calendar",196),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.ChequeIssueDate=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(30,"div",127),d.Yb(31,"div",31),d.Uc(32,"Amount "),d.Yb(33,"span",173),d.Uc(34,"*"),d.Xb(),d.Xb(),d.Yb(35,"div",31),d.Yb(36,"p-inputNumber",197),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.CHEQUEAMT=e}),d.Xb(),d.Xb(),d.Yb(37,"div",31),d.Uc(38,"Holder Name"),d.Xb(),d.Yb(39,"div",31),d.Yb(40,"input",198),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.ChequeHolderName=e}),d.Xb(),d.Xb(),d.Xb(),d.Tb(41,"hr"),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(9),d.Pc(d.yc(34,vt)),d.tc("ngModel",t.TenderObj.CHEQUENO),d.Fb(6),d.Pc(d.yc(35,vt)),d.tc("ngModel",t.TenderObj.BANK),d.Fb(7),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.TenderObj.ChequeRecdDate)("ngModelOptions",d.yc(36,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),d.Fb(7),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("maxDate",t.todayDate)("ngModel",t.TenderObj.ChequeIssueDate)("ngModelOptions",d.yc(37,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!0),d.Fb(7),d.Pc(d.yc(38,vt)),d.tc("ngModel",t.TenderObj.CHEQUEAMT)("min",0)("max",t.NetPaybleTotal),d.Fb(4),d.Pc(d.yc(39,vt)),d.tc("ngModel",t.TenderObj.ChequeHolderName)}}function Yi(t,e){if(1&t&&(d.Yb(0,"label"),d.Uc(1),d.Xb()),2&t){const t=d.mc(3);d.Fb(1),d.Vc(t.fileInputLabelAttBankslip1)}}function Xi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",199),d.Yb(1,"div",200),d.Uc(2,"Attach Supported Doc (max size - 5MB) (PDF, JPG, PNG)"),d.Xb(),d.Yb(3,"div",174),d.Yb(4,"input",201,202),d.ic("change",function(e){return d.Lc(t),d.mc(2).onFileSelectBankDepositSlip(e,"AttBankslip1")}),d.Xb(),d.Tb(6,"br"),d.Sc(7,Yi,2,1,"label",5),d.Xb(),d.Tb(8,"hr"),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(7),d.tc("ngIf",t.fileInputLabelAttBankslip1)}}function Li(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",28),d.Yb(1,"div",31),d.Uc(2,"Remarks"),d.Xb(),d.Yb(3,"div",174),d.Yb(4,"input",203),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.REMARKS=e}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(4),d.Pc(d.yc(3,vt)),d.tc("ngModel",t.TenderObj.REMARKS)}}function Oi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",204),d.Yb(1,"div",28),d.Yb(2,"div",29),d.Yb(3,"label"),d.Uc(4,"Select Trust"),d.Xb(),d.Yb(5,"p-dropdown",205),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.TrustId=e}),d.Xb(),d.Xb(),d.Yb(6,"div",31),d.Yb(7,"label"),d.Uc(8,"Select Member Type"),d.Xb(),d.Yb(9,"p-dropdown",206),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.TMemberTypeId=e}),d.Xb(),d.Xb(),d.Yb(10,"div",31),d.Yb(11,"label"),d.Uc(12,"Membership Number"),d.Xb(),d.Yb(13,"input",207),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).TenderObj.MemberShipNumber=e}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(5),d.Pc(d.yc(15,vt)),d.tc("options",t.lstTrustMaster)("ngModel",t.TenderObj.TrustId)("filter",!0)("showClear",!0),d.Fb(4),d.Pc(d.yc(16,vt)),d.tc("options",t.lstTrustMemberTypeMaster)("ngModel",t.TenderObj.TMemberTypeId)("filter",!0)("showClear",!0),d.Fb(4),d.Pc(d.yc(17,vt)),d.tc("ngModel",t.TenderObj.MemberShipNumber)}}function xi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",46),d.Yb(2,"div",34),d.Yb(3,"p-multiSelect",161),d.ic("onChange",function(){return d.Lc(t),d.mc().ShowSelectedItem()})("ngModelChange",function(e){return d.Lc(t),d.mc().selectedPaymodeCodes=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(4,"div",46),d.Yb(5,"div",34),d.Yb(6,"div",28),d.Yb(7,"div",162),d.Uc(8),d.nc(9,"number"),d.Xb(),d.Xb(),d.Sc(10,ki,12,11,"div",163),d.Sc(11,vi,19,17,"div",164),d.Sc(12,Ai,30,1,"div",165),d.Sc(13,wi,39,7,"div",166),d.Sc(14,Fi,42,40,"div",167),d.Sc(15,Xi,9,1,"div",168),d.Yb(16,"div",169),d.Sc(17,Li,5,4,"div",170),d.Xb(),d.Sc(18,Oi,14,18,"div",171),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(3),d.Pc(d.yc(16,vt)),d.tc("options",t.lstPayMode)("ngModel",t.selectedPaymodeCodes),d.Fb(5),d.Wc(" Total Amount: ",d.pc(9,13,t.NetPaybleTotal,"1.0-0")," "),d.Fb(2),d.tc("ngIf",t.SelectPaymodeArray.includes("LB1199")),d.Fb(1),d.tc("ngIf",t.SelectPaymodeArray.includes("AT01002")),d.Fb(1),d.tc("ngIf",t.SelectPaymodeArray.includes("AT999999")),d.Fb(1),d.tc("ngIf",t.SelectPaymodeArray.includes("BT01001")),d.Fb(1),d.tc("ngIf",t.SelectPaymodeArray.includes("DI01001")),d.Fb(1),d.tc("ngIf",t.SelectPaymodeArray.includes("AT01002")||t.SelectPaymodeArray.includes("AT999999")||t.SelectPaymodeArray.includes("BT01001")||t.SelectPaymodeArray.includes("DI01001")),d.Fb(2),d.tc("ngIf",(null==t.SelectPaymodeArray?null:t.SelectPaymodeArray.length)>0&&!t.SelectPaymodeArray.includes("ATONLN")&&!t.SelectPaymodeArray.includes("ATWLONLN")),d.Fb(1),d.tc("ngIf",!t.SelectPaymodeArray.includes("ATONLN")&&!t.SelectPaymodeArray.includes("ATWLONLN"))}}function _i(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",208),d.ic("click",function(){return d.Lc(t),d.mc().ClosePaymentMethod()}),d.Uc(1,"Close"),d.Xb(),d.Yb(2,"button",154),d.ic("click",function(){return d.Lc(t),d.mc().FireforPayment()}),d.Uc(3,"Submit"),d.Xb()}}function Ei(t,e){if(1&t){const t=d.Zb();d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2),d.Xb(),d.Yb(3,"td"),d.Uc(4),d.Xb(),d.Yb(5,"td"),d.Uc(6),d.Xb(),d.Yb(7,"td"),d.Uc(8),d.Xb(),d.Yb(9,"td"),d.Uc(10),d.Xb(),d.Yb(11,"td"),d.Yb(12,"p-inputNumber",228),d.ic("ngModelChange",function(t){return e.$implicit.DiscountPer=t})("onInput",function(i){d.Lc(t);const n=e.index;return d.mc(2).CalculateDiscount(i,n)})("onBlur",function(){d.Lc(t);const i=e.index;return d.mc(2).CalculateDiscountNew(i)}),d.Xb(),d.Xb(),d.Yb(13,"td"),d.Yb(14,"p-inputNumber",229),d.ic("ngModelChange",function(t){return e.$implicit.DiscountAmount=t})("onInput",function(i){d.Lc(t);const n=e.index;return d.mc(2).CalculateDiscountRev(i,n)})("onBlur",function(){d.Lc(t);const i=e.index;return d.mc(2).CalculateDiscountBlur(i)}),d.Xb(),d.Xb(),d.Yb(15,"td"),d.Uc(16),d.Xb(),d.Xb()}if(2&t){const t=e.$implicit;d.Fb(2),d.Vc(t.MCODE),d.Fb(2),d.Vc(null==t.Description?null:t.Description.split("~")[0]),d.Fb(2),d.Vc(t.MRP),d.Fb(2),d.Vc(t.Qty),d.Fb(2),d.Vc(t.GST),d.Fb(2),d.Pc(d.yc(18,vt)),d.tc("ngModel",t.DiscountPer)("min",0)("max",100)("maxlength",3),d.Fb(2),d.Pc(d.yc(19,vt)),d.tc("ngModel",t.DiscountAmount)("min",0)("max",t.Qty*t.MRP)("maxlength",5),d.Fb(2),d.Vc(t.PriceWithGST)}}function Gi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"td",217),d.Yb(1,"button",154),d.ic("click",function(){return d.Lc(t),d.mc(2).CheckCreditNote()}),d.Uc(2,"Check Balance"),d.Xb(),d.Xb()}}function Wi(t,e){if(1&t&&(d.Yb(0,"td"),d.Yb(1,"label",218),d.Uc(2,"Balance"),d.Xb(),d.Uc(3),d.Xb()),2&t){const t=d.mc(2);d.Fb(3),d.Wc(" ",t.MaxCreditNoteAmount," ")}}function Vi(t,e){1&t&&(d.Yb(0,"td"),d.Yb(1,"label",218),d.Uc(2,"Credit Note Amount"),d.Xb(),d.Xb())}function ji(t,e){if(1&t){const t=d.Zb();d.Yb(0,"td",215),d.Yb(1,"p-inputNumber",230),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).CreditNoteTranAmount=e})("onBlur",function(){return d.Lc(t),d.mc(2).CalculateNetPaybleAfterDiscount()}),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(1),d.Pc(d.yc(5,vt)),d.tc("ngModel",t.CreditNoteTranAmount)("min",0)("max",t.MaxCreditNoteAmount)}}function Hi(t,e){1&t&&(d.Yb(0,"p"),d.Yb(1,"b"),d.Uc(2,"Requested By"),d.Xb(),d.Xb())}function qi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"input",231),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).RequestedBy=e}),d.Xb()}if(2&t){const t=d.mc(2);d.tc("ngModel",t.RequestedBy)}}function Zi(t,e){1&t&&(d.Yb(0,"p"),d.Yb(1,"b"),d.Uc(2,"Authorized By"),d.Xb(),d.Xb())}function $i(t,e){if(1&t){const t=d.Zb();d.Yb(0,"p-dropdown",232),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).ReferredBy=e}),d.Xb()}if(2&t){const t=d.mc(2);d.Pc(d.yc(6,vt)),d.tc("options",t.lstAuthorizedMaster)("ngModel",t.ReferredBy)("showClear",!0)("filter",!0)}}function zi(t,e){1&t&&(d.Yb(0,"td",210),d.Uc(1,"Receive %"),d.Xb())}function Qi(t,e){if(1&t){const t=d.Zb();d.Yb(0,"td",211),d.Yb(1,"p-inputNumber",238),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).AmountRecPer=e})("onBlur",function(){return d.Lc(t),d.mc(3).CalculateReceiveAmount()})("onInput",function(e){return d.Lc(t),d.mc(3).CalculateReceiveAmountNew(e)}),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.Pc(d.yc(8,vt)),d.tc("disabled",0==t.NetPaybleTotal)("ngModel",t.AmountRecPer)("min",0)("max",100)("minFractionDigits",1)("maxFractionDigits",5)}}function Ji(t,e){1&t&&(d.Yb(0,"td",222),d.Yb(1,"b"),d.Uc(2,"Receive Amount"),d.Xb(),d.Xb())}function Ki(t,e){if(1&t){const t=d.Zb();d.Yb(0,"td",211),d.Yb(1,"p-inputNumber",239),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(3).ReceiveAmount=e})("onBlur",function(){return d.Lc(t),d.mc(3).CalculateReceivePer()})("onInput",function(e){return d.Lc(t),d.mc(3).CalculateReceivePerNew(e)}),d.Xb(),d.Xb()}if(2&t){const t=d.mc(3);d.Fb(1),d.tc("disabled",0==t.NetPaybleTotal)("ngModel",t.ReceiveAmount)("min",0)("max",t.NetPaybleTotal)("minFractionDigits",1)("maxFractionDigits",5)}}function tn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"tr"),d.Yb(1,"td",222),d.Yb(2,"label",233),d.Uc(3,"Partial Payment"),d.Xb(),d.Yb(4,"p-checkbox",234),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).IsPartialPayment=e}),d.Xb(),d.Xb(),d.Sc(5,zi,2,0,"td",235),d.Sc(6,Qi,2,9,"td",236),d.Sc(7,Ji,3,0,"td",237),d.Sc(8,Ki,2,6,"td",236),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(4),d.tc("ngModel",t.IsPartialPayment),d.Fb(1),d.tc("ngIf",t.IsPartialPayment),d.Fb(1),d.tc("ngIf",t.IsPartialPayment),d.Fb(1),d.tc("ngIf",t.IsPartialPayment),d.Fb(1),d.tc("ngIf",t.IsPartialPayment)}}function en(t,e){1&t&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&t&&(d.Fb(1),d.Gb("colspan",3))}function nn(t,e){1&t&&(d.Yb(0,"colgroup"),d.Tb(1,"col",88),d.Tb(2,"col",90),d.Tb(3,"col",245),d.Tb(4,"col",76),d.Tb(5,"col",90),d.Tb(6,"col",90),d.Tb(7,"col",90),d.Tb(8,"col",246),d.Tb(9,"col",246),d.Tb(10,"col",246),d.Xb())}function on(t,e){1&t&&(d.Yb(0,"tr"),d.Yb(1,"th"),d.Uc(2,"S.No"),d.Xb(),d.Yb(3,"th"),d.Uc(4,"Center"),d.Xb(),d.Yb(5,"th"),d.Uc(6,"Trust"),d.Xb(),d.Yb(7,"th"),d.Uc(8,"Member Type Name"),d.Xb(),d.Yb(9,"th"),d.Uc(10,"MemberShip No."),d.Xb(),d.Yb(11,"th"),d.Uc(12,"Health Seeker"),d.Xb(),d.Yb(13,"th"),d.Uc(14,"MR No"),d.Xb(),d.Yb(15,"th"),d.Uc(16,"Adm. Date"),d.Xb(),d.Yb(17,"th"),d.Uc(18,"Dis. Date"),d.Xb(),d.Yb(19,"th"),d.Uc(20,"Rec Date"),d.Xb(),d.Xb())}function sn(t,e){if(1&t&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2),d.Xb(),d.Yb(3,"td"),d.Uc(4),d.Xb(),d.Yb(5,"td"),d.Uc(6),d.Xb(),d.Yb(7,"td"),d.Uc(8),d.Xb(),d.Yb(9,"td"),d.Uc(10),d.Xb(),d.Yb(11,"td"),d.Uc(12),d.Xb(),d.Yb(13,"td"),d.Uc(14),d.Xb(),d.Yb(15,"td"),d.Uc(16),d.nc(17,"date"),d.Xb(),d.Yb(18,"td"),d.Uc(19),d.nc(20,"date"),d.Xb(),d.Yb(21,"td"),d.Uc(22),d.nc(23,"date"),d.Xb(),d.Xb()),2&t){const t=e.$implicit,i=e.rowIndex,n=d.mc(3);d.Fb(2),d.Vc(i+1),d.Fb(2),d.Vc(t.ClinicName),d.Fb(2),d.Vc(t.TrustName),d.Fb(2),d.Vc(t.MemberTypeName),d.Fb(2),d.Vc(t.MemberShipNumber),d.Fb(2),d.Vc(t.FullName),d.Fb(2),d.Vc(t.MRNo),d.Fb(2),d.Vc(d.pc(17,10,t.PeriodFrom,n.customDateFormat.DEF_DATE)),d.Fb(3),d.Vc(d.pc(20,13,t.PeriodUpto,n.customDateFormat.DEF_DATE)),d.Fb(3),d.Vc(d.pc(23,16,t.ReceivedDate,n.customDateFormat.DEF_DATE))}}function an(t,e){if(1&t&&(d.Yb(0,"div"),d.Tb(1,"hr",240),d.Yb(2,"h4"),d.Yb(3,"strong"),d.Uc(4,"Trust Details History"),d.Xb(),d.Xb(),d.Yb(5,"div",241),d.Yb(6,"div",242),d.Yb(7,"p-table",243,244),d.Sc(9,en,3,1,"ng-template",50),d.Sc(10,nn,11,0,"ng-template",38),d.Sc(11,on,21,0,"ng-template",25),d.Sc(12,sn,24,19,"ng-template",39),d.Xb(),d.Xb(),d.Xb(),d.Tb(13,"hr"),d.Xb()),2&t){const t=d.mc(2);d.Fb(7),d.tc("value",t.lstTrustHistory)("rowHover",!0)("scrollable",!0)}}function rn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",46),d.Yb(2,"div",34),d.Yb(3,"table",209),d.Yb(4,"thead"),d.Yb(5,"tr"),d.Yb(6,"th"),d.Uc(7,"MCODE"),d.Xb(),d.Yb(8,"th"),d.Uc(9,"Item Details"),d.Xb(),d.Yb(10,"th"),d.Uc(11,"Rate"),d.Xb(),d.Yb(12,"th"),d.Uc(13,"Qty"),d.Xb(),d.Yb(14,"th"),d.Uc(15,"GST"),d.Xb(),d.Yb(16,"th"),d.Uc(17,"Discount %"),d.Xb(),d.Yb(18,"th"),d.Uc(19,"Discount Amount"),d.Xb(),d.Yb(20,"th"),d.Uc(21,"Net Amount"),d.Xb(),d.Xb(),d.Xb(),d.Yb(22,"tbody"),d.Sc(23,Ei,17,20,"tr",182),d.Yb(24,"tr"),d.Yb(25,"td"),d.Uc(26,"Total"),d.Xb(),d.Yb(27,"td"),d.Uc(28,"\xa0"),d.Xb(),d.Yb(29,"td"),d.Uc(30,"\xa0"),d.Xb(),d.Yb(31,"td"),d.Uc(32,"\xa0"),d.Xb(),d.Yb(33,"td"),d.Uc(34,"\xa0"),d.Xb(),d.Yb(35,"td"),d.Uc(36,"\xa0"),d.Xb(),d.Yb(37,"td"),d.Uc(38,"\xa0"),d.Xb(),d.Yb(39,"td"),d.Uc(40),d.Xb(),d.Xb(),d.Yb(41,"tr"),d.Yb(42,"td",210),d.Uc(43,"Bill wise Discount %"),d.Xb(),d.Yb(44,"td",211),d.Yb(45,"p-inputNumber",212),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().BillWiseDiscountPer=e})("onBlur",function(){return d.Lc(t),d.mc().CalculateNetPaybleAfterDiscount()})("onInput",function(e){return d.Lc(t),d.mc().CalculateNetPaybleAfterDiscountNew(e)}),d.Xb(),d.Xb(),d.Yb(46,"td",210),d.Uc(47," Discount Amount "),d.Xb(),d.Yb(48,"td",211),d.Yb(49,"p-inputNumber",213),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().BillWiseDiscountAmount=e})("onBlur",function(){return d.Lc(t),d.mc().CalculateNetPaybleAfterDiscountReverse()})("onInput",function(e){return d.Lc(t),d.mc().CalculateNetPaybleAfterDiscountReverseNew(e)}),d.Xb(),d.Xb(),d.Yb(50,"td",214),d.Uc(51," Net Payable "),d.Xb(),d.Yb(52,"td",215),d.Uc(53),d.nc(54,"number"),d.Xb(),d.Xb(),d.Yb(55,"tr",216),d.Yb(56,"td",217),d.Yb(57,"label",218),d.Uc(58,"Credit Note Number"),d.Xb(),d.Xb(),d.Yb(59,"td"),d.Yb(60,"input",219),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().CreditNoteNumber=e}),d.Xb(),d.Xb(),d.Sc(61,Gi,3,0,"td",220),d.Sc(62,Wi,4,1,"td",5),d.Sc(63,Vi,3,0,"td",5),d.Sc(64,ji,2,6,"td",221),d.Xb(),d.Yb(65,"tr"),d.Yb(66,"td",222),d.Sc(67,Hi,3,0,"p",5),d.Xb(),d.Yb(68,"td",211),d.Sc(69,qi,1,1,"input",223),d.Xb(),d.Yb(70,"td",222),d.Sc(71,Zi,3,0,"p",5),d.Xb(),d.Yb(72,"td",211),d.Sc(73,$i,1,7,"p-dropdown",224),d.Xb(),d.Tb(74,"td",225),d.Xb(),d.Sc(75,tn,9,5,"tr",5),d.Yb(76,"tr"),d.Yb(77,"td",210),d.Uc(78,"Membership No."),d.Xb(),d.Yb(79,"td",226),d.Yb(80,"input",207),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().TenderObj.MemberShipNumber=e}),d.Xb(),d.Xb(),d.Yb(81,"td",227),d.Yb(82,"button",154),d.ic("click",function(){return d.Lc(t),d.mc().GetTrustDetailsHistory()}),d.Uc(83,"Check Trust History"),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Sc(84,an,14,3,"div",5),d.Xb()}if(2&t){const t=d.mc();d.Fb(23),d.tc("ngForOf",t.ItemPriceRes),d.Fb(17),d.Vc(t.TotalPaybleAmount),d.Fb(5),d.Pc(d.yc(37,vt)),d.tc("disabled",0==t.TotalPaybleAmount)("ngModel",t.BillWiseDiscountPer)("min",0)("max",100)("minFractionDigits",0)("maxFractionDigits",5),d.Fb(4),d.tc("disabled",0==t.TotalPaybleAmount)("ngModel",t.BillWiseDiscountAmount)("min",0)("max",t.TotalPaybleAmount)("minFractionDigits",0)("maxFractionDigits",5),d.Fb(4),d.Wc(" ",d.pc(54,34,t.NetPaybleTotal,"1.0-0")," "),d.Fb(7),d.Pc(d.yc(38,vt)),d.tc("disabled",t.MaxCreditNoteAmount>0)("ngModel",t.CreditNoteNumber),d.Fb(1),d.tc("ngIf",0==t.MaxCreditNoteAmount),d.Fb(1),d.tc("ngIf",t.MaxCreditNoteAmount>0),d.Fb(1),d.tc("ngIf",t.MaxCreditNoteAmount>0),d.Fb(1),d.tc("ngIf",t.MaxCreditNoteAmount>0),d.Fb(3),d.tc("ngIf",t.ItemTotalDiscount+t.BillWiseDiscountAmount>0),d.Fb(2),d.tc("ngIf",t.ItemTotalDiscount+t.BillWiseDiscountAmount>0),d.Fb(2),d.tc("ngIf",t.ItemTotalDiscount+t.BillWiseDiscountAmount>0),d.Fb(2),d.tc("ngIf",t.ItemTotalDiscount+t.BillWiseDiscountAmount>0),d.Fb(2),d.tc("ngIf",t.NetPaybleTotal>0),d.Fb(5),d.Pc(d.yc(39,vt)),d.tc("ngModel",t.TenderObj.MemberShipNumber),d.Fb(4),d.tc("ngIf",t.lstTrustHistory.length>0)}}function ln(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",159),d.ic("click",function(){d.Lc(t);const e=d.mc(2);return e.ChangeRoom(e.SlotBookingIdSelectedId)}),d.Uc(1,"Change Room"),d.Xb()}}function cn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",247),d.ic("click",function(){return d.Lc(t),d.mc().SlotBookingPayByCash()}),d.Uc(1,"Pay"),d.Xb(),d.Sc(2,ln,2,0,"button",158)}if(2&t){const t=d.mc();d.Fb(2),d.tc("ngIf",t.IsIPD)}}function dn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",248),d.Yb(2,"div",136),d.Yb(3,"h5"),d.Uc(4,"Credit Note Amount"),d.Xb(),d.Yb(5,"p-inputNumber",249),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().CreditNoteAmount=e}),d.Xb(),d.Xb(),d.Tb(6,"div",136),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(5),d.tc("ngModel",t.CreditNoteAmount)("minFractionDigits",2)("maxFractionDigits",5)}}function hn(t,e){}function un(t,e){1&t&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&t&&(d.Fb(1),d.Gb("colspan",8))}function bn(t,e){1&t&&d.Tb(0,"col",79)}function mn(t,e){if(1&t&&(d.Yb(0,"colgroup"),d.Tb(1,"col",76),d.Tb(2,"col",83),d.Tb(3,"col",77),d.Tb(4,"col",79),d.Sc(5,bn,1,0,"col",80),d.Tb(6,"col",76),d.Tb(7,"col",252),d.Tb(8,"col",253),d.Xb()),2&t){const t=d.mc(2);d.Fb(5),d.tc("ngIf","IPD"===t.bookingtype)}}function gn(t,e){1&t&&(d.Yb(0,"th"),d.Uc(1,"Dis. Date"),d.Xb())}function pn(t,e){if(1&t&&(d.Yb(0,"tr"),d.Yb(1,"th"),d.Uc(2,"Booking No"),d.Xb(),d.Yb(3,"th"),d.Uc(4,"Name"),d.Xb(),d.Yb(5,"th"),d.Uc(6,"MR No"),d.Xb(),d.Yb(7,"th"),d.Uc(8),d.Xb(),d.Sc(9,gn,2,0,"th",5),d.Yb(10,"th"),d.Uc(11,"Status"),d.Xb(),d.Yb(12,"th"),d.Uc(13,"MR Number"),d.Xb(),d.Yb(14,"th"),d.Uc(15,"Action"),d.Xb(),d.Xb()),2&t){const t=d.mc(2);d.Fb(8),d.Vc("IPD"===t.bookingtype?"Adm. Date":"Booking For"),d.Fb(1),d.tc("ngIf","IPD"===t.bookingtype)}}function Sn(t,e){if(1&t&&(d.Yb(0,"tr"),d.Yb(1,"td",258),d.Yb(2,"span"),d.Uc(3),d.Xb(),d.Xb(),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(3),d.Vc(t.GroupNumber)}}function fn(t,e){if(1&t&&(d.Yb(0,"td"),d.Uc(1),d.nc(2,"date"),d.nc(3,"date"),d.Xb()),2&t){const t=d.mc().$implicit,e=d.mc(2);d.Fb(1),d.Vc("0001"==d.pc(2,1,t.PeriodUpto,"yyyy")?"":d.pc(3,4,t.PeriodUpto,e.customDateFormat.DEF_DATE))}}function yn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"input",259),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().$implicit.NewMRNumber=e}),d.Xb()}if(2&t){const t=d.mc().$implicit;d.vc("name","txtMrNumber_",t.BookingNumber,""),d.tc("maxlength",20)("ngModel",t.NewMRNumber)}}function In(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",260),d.ic("click",function(){d.Lc(t);const e=d.mc().$implicit;return d.mc(2).ValidateMRNO(e.SlotBookingId,e.NewMRNumber)}),d.Xb()}}function Mn(t,e){1&t&&(d.Yb(0,"label",261),d.Uc(1,"Verified"),d.Xb())}function Cn(t,e){1&t&&(d.Yb(0,"label",261),d.Uc(1,"Updated"),d.Xb())}function Pn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",262),d.ic("click",function(){d.Lc(t);const e=d.mc().$implicit;return d.mc(2).UpdateGroupMember(e.SlotBookingId,e.NewMRNumber)}),d.Xb()}}function kn(t,e){if(1&t&&(d.Sc(0,Sn,4,1,"tr",5),d.Yb(1,"tr"),d.Yb(2,"td"),d.Uc(3),d.Xb(),d.Yb(4,"td"),d.Yb(5,"span",117),d.Uc(6),d.Xb(),d.Xb(),d.Yb(7,"td"),d.Uc(8),d.Xb(),d.Yb(9,"td"),d.Uc(10),d.nc(11,"date"),d.nc(12,"date"),d.Xb(),d.Sc(13,fn,4,7,"td",5),d.Yb(14,"td"),d.Yb(15,"span"),d.Uc(16),d.Xb(),d.Xb(),d.Yb(17,"td"),d.Sc(18,yn,1,3,"input",254),d.Xb(),d.Yb(19,"td"),d.Sc(20,In,1,0,"button",255),d.Sc(21,Mn,2,0,"label",256),d.Sc(22,Cn,2,0,"label",256),d.Sc(23,Pn,1,0,"button",257),d.Xb(),d.Xb()),2&t){const t=e.$implicit,i=e.rowIndex,n=d.mc(2);d.tc("ngIf","IPD"===n.bookingtype&&(0==n.IsAllGrouped||2==n.IsAllGrouped)&&0==i),d.Fb(3),d.Vc(t.BookingNumber),d.Fb(2),d.tc("ngStyle",d.zc(22,qe,t.IsGrouphead?"bold":"normal")),d.Fb(1),d.Vc(t.PaitentName),d.Fb(2),d.Vc(t.MRNo),d.Fb(2),d.Vc("0001"==d.pc(11,16,t.PeriodFrom,"yyyy")?"":d.pc(12,19,t.PeriodFrom,n.customDateFormat.DEF_DATE)),d.Fb(3),d.tc("ngIf","IPD"===n.bookingtype),d.Fb(2),d.Hb(t.BookingStatus),d.Fb(1),d.Vc(t.BookingStatus),d.Fb(2),d.tc("ngIf",0==t.IsGrouphead&&0==t.IsUpdated&&(t.BookingStatus===n.bookingStatus[n.bookingStatus.Approved]||t.BookingStatus===n.bookingStatus[n.bookingStatus.Confirmed])),d.Fb(2),d.tc("ngIf",0==t.Isverfied&&0==t.IsGrouphead&&(t.BookingStatus===n.bookingStatus[n.bookingStatus.Approved]||t.BookingStatus===n.bookingStatus[n.bookingStatus.Confirmed])),d.Fb(1),d.tc("ngIf",t.Isverfied&&0==t.IsUpdated),d.Fb(1),d.tc("ngIf",t.IsUpdated&&t.Isverfied),d.Fb(1),d.tc("ngIf",1==t.Isverfied&&0==t.IsGrouphead&&0==t.IsUpdated&&(t.BookingStatus===n.bookingStatus[n.bookingStatus.Approved]||t.BookingStatus===n.bookingStatus[n.bookingStatus.Confirmed]))}}function vn(t,e){if(1&t&&(d.Yb(0,"div"),d.Yb(1,"p-table",250,251),d.Sc(3,un,3,1,"ng-template",50),d.Sc(4,mn,9,1,"ng-template",38),d.Sc(5,pn,16,2,"ng-template",25),d.Sc(6,kn,24,24,"ng-template",39),d.Xb(),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.tc("value",t.filterGroup)("rowHover",!0)("scrollable",!0)}}function Dn(t,e){1&t&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Uc(2," No records found "),d.Xb(),d.Xb()),2&t&&(d.Fb(1),d.Gb("colspan",7))}function Rn(t,e){1&t&&(d.Yb(0,"colgroup"),d.Tb(1,"col",76),d.Tb(2,"col",83),d.Tb(3,"col",77),d.Tb(4,"col",79),d.Tb(5,"col",79),d.Tb(6,"col",76),d.Tb(7,"col",90),d.Xb())}function Tn(t,e){if(1&t&&(d.Yb(0,"tr"),d.Yb(1,"th"),d.Uc(2,"Booking No"),d.Xb(),d.Yb(3,"th"),d.Uc(4,"Name"),d.Xb(),d.Yb(5,"th"),d.Uc(6,"MR No"),d.Xb(),d.Yb(7,"th"),d.Uc(8),d.Xb(),d.Yb(9,"th"),d.Uc(10,"Dis. Date"),d.Xb(),d.Yb(11,"th"),d.Uc(12,"Status"),d.Xb(),d.Yb(13,"th"),d.Uc(14,"Action"),d.Xb(),d.Xb()),2&t){const t=d.mc(2);d.Fb(8),d.Vc("IPD"===t.bookingtype?"Adm. Date":"Booking For")}}function An(t,e){if(1&t&&(d.Yb(0,"tr"),d.Yb(1,"td",263),d.Yb(2,"span"),d.Uc(3),d.Xb(),d.Xb(),d.Xb()),2&t){const t=d.mc().$implicit;d.Fb(3),d.Vc(t.GroupNumber)}}function Bn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",262),d.ic("click",function(){d.Lc(t);const e=d.mc().$implicit;return d.mc(2).UpdateGroupHead(e.SlotBookingId)}),d.Xb()}}function Un(t,e){if(1&t&&(d.Sc(0,An,4,1,"tr",5),d.Yb(1,"tr"),d.Yb(2,"td"),d.Uc(3),d.Xb(),d.Yb(4,"td"),d.Yb(5,"span",117),d.Uc(6),d.Xb(),d.Xb(),d.Yb(7,"td"),d.Uc(8),d.Xb(),d.Yb(9,"td"),d.Uc(10),d.nc(11,"date"),d.nc(12,"date"),d.Xb(),d.Yb(13,"td"),d.Uc(14),d.nc(15,"date"),d.nc(16,"date"),d.Xb(),d.Yb(17,"td"),d.Yb(18,"span"),d.Uc(19),d.Xb(),d.Xb(),d.Yb(20,"td"),d.Sc(21,Bn,1,0,"button",257),d.Xb(),d.Xb()),2&t){const t=e.$implicit,i=e.rowIndex,n=d.mc(2);d.tc("ngIf","IPD"===n.bookingtype&&(0==n.IsAllGrouped||2==n.IsAllGrouped)&&0==i),d.Fb(3),d.Vc(t.BookingNumber),d.Fb(2),d.tc("ngStyle",d.zc(24,qe,t.IsGrouphead?"bold":"normal")),d.Fb(1),d.Vc(t.PaitentName),d.Fb(2),d.Vc(t.MRNo),d.Fb(2),d.Vc("0001"==d.pc(11,12,t.PeriodFrom,"yyyy")?"":d.pc(12,15,t.PeriodFrom,n.customDateFormat.DEF_DATE)),d.Fb(4),d.Vc("0001"==d.pc(15,18,t.PeriodUpto,"yyyy")?"":d.pc(16,21,t.PeriodUpto,n.customDateFormat.DEF_DATE)),d.Fb(4),d.Hb(t.BookingStatus),d.Fb(1),d.Vc(t.BookingStatus),d.Fb(2),d.tc("ngIf",1==t.IsGrouped&&0==t.IsGrouphead&&(t.BookingStatus===n.bookingStatus[n.bookingStatus.Confirmed]||t.BookingStatus===n.bookingStatus[n.bookingStatus.Admitted]))}}function Nn(t,e){if(1&t&&(d.Yb(0,"div"),d.Yb(1,"p-table",250,251),d.Sc(3,Dn,3,1,"ng-template",50),d.Sc(4,Rn,8,0,"ng-template",38),d.Sc(5,Tn,15,1,"ng-template",25),d.Sc(6,Un,22,26,"ng-template",39),d.Xb(),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.tc("value",t.filterGroup)("rowHover",!0)("scrollable",!0)}}function wn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",271),d.Yb(1,"div",200),d.Uc(2),d.Xb(),d.Yb(3,"div",174),d.Yb(4,"p-inputNumber",273),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).prepostCharge=e})("ngModelChange",function(){return d.Lc(t),d.mc(2).GetPerponePostponeChargeDetails()}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(2),d.Vc(t.IsPostpone?"Postpone Charge %":"Prepone Charge %"),d.Fb(2),d.Pc(d.yc(6,vt)),d.tc("ngModel",t.prepostCharge)("min",0)("maxlength",2)}}function Fn(t,e){if(1&t&&(d.Yb(0,"div",31),d.Yb(1,"label",274),d.Uc(2),d.Xb(),d.Xb()),2&t){const t=d.mc(3);d.Fb(2),d.Wc("Net Payble: ",t.NetPaybleTotal,"")}}function Yn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",271),d.Yb(1,"div",31),d.Yb(2,"label",274),d.Uc(3,"Partial Payment"),d.Xb(),d.Uc(4,"\xa0"),d.Yb(5,"p-checkbox",275),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).IsPartialPayment=e})("onChange",function(){return d.Lc(t),d.mc(2).GetPerponePostponeChargeDetails()}),d.Xb(),d.Xb(),d.Sc(6,Fn,3,1,"div",276),d.Tb(7,"div",136),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(5),d.tc("ngModel",t.IsPartialPayment),d.Fb(1),d.tc("ngIf",t.IsPartialPayment)}}function Xn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",271),d.Yb(1,"div",277),d.Uc(2,"Receive %"),d.Xb(),d.Yb(3,"div",31),d.Yb(4,"p-inputNumber",238),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).AmountRecPer=e})("onBlur",function(){return d.Lc(t),d.mc(2).CalculateReceiveAmount()})("onInput",function(e){return d.Lc(t),d.mc(2).CalculateReceiveAmountNew(e)}),d.Xb(),d.Xb(),d.Yb(5,"div",277),d.Uc(6,"Receive Amount"),d.Xb(),d.Yb(7,"div",31),d.Yb(8,"p-inputNumber",239),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc(2).ReceiveAmount=e})("onBlur",function(){return d.Lc(t),d.mc(2).CalculateReceivePer()})("onInput",function(e){return d.Lc(t),d.mc(2).CalculateReceivePerNew(e)}),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc(2);d.Fb(4),d.Pc(d.yc(14,vt)),d.tc("disabled",0==t.NetPaybleTotal)("ngModel",t.AmountRecPer)("min",0)("max",100)("minFractionDigits",1)("maxFractionDigits",5),d.Fb(4),d.tc("disabled",0==t.NetPaybleTotal)("ngModel",t.ReceiveAmount)("min",0)("max",t.NetPaybleTotal)("minFractionDigits",1)("maxFractionDigits",5)}}function Ln(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",46),d.Yb(2,"div",200),d.Uc(3,"Change Start Date "),d.Yb(4,"span",173),d.Uc(5,"*"),d.Xb(),d.Xb(),d.Yb(6,"div",31),d.Yb(7,"p-calendar",264,265),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().changeDate=e})("onClose",function(){return d.Lc(t),d.mc().ChangePeriodDate()}),d.Xb(),d.Xb(),d.Yb(9,"div",266),d.Uc(10,"Change Period Count: "),d.Yb(11,"b"),d.Uc(12),d.Xb(),d.Xb(),d.Yb(13,"div",267),d.Yb(14,"a",268),d.ic("click",function(){d.Lc(t);const e=d.mc();return e.ShowInvoiceList(e.SlotBookingIdSelectedId,!1)}),d.Tb(15,"i",269),d.Xb(),d.Xb(),d.Xb(),d.Sc(16,wn,5,7,"div",270),d.Sc(17,Yn,8,2,"div",270),d.Sc(18,Xn,9,15,"div",270),d.Yb(19,"div",271),d.Yb(20,"div",200),d.Uc(21,"Remarks "),d.Yb(22,"span",173),d.Uc(23,"*"),d.Xb(),d.Xb(),d.Yb(24,"div",174),d.Yb(25,"textarea",272),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().remarks=e}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(7),d.wc("yearRange","",t.customDateFormat.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("minDate",t.todayDate)("ngModel",t.changeDate)("ngModelOptions",d.yc(15,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1),d.Fb(5),d.Vc(t.changedCount),d.Fb(4),d.tc("ngIf",t.IsPrepone||t.IsPostpone),d.Fb(1),d.tc("ngIf",(t.IsPrepone||t.IsPostpone)&&t.prepostCharge>0),d.Fb(1),d.tc("ngIf",(t.IsPrepone||t.IsPostpone)&&t.prepostCharge>0&&t.IsPartialPayment),d.Fb(7),d.tc("ngModel",t.remarks)}}function On(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",153),d.ic("click",function(){return d.Lc(t),d.mc(2).ChangePeriod()}),d.Uc(1,"Submit"),d.Xb()}}function xn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",153),d.ic("click",function(){return d.Lc(t),d.mc(2).ChangePeriodWithPayment()}),d.Uc(1,"Pay"),d.Xb()}}function _n(t,e){if(1&t&&(d.Sc(0,On,2,0,"button",278),d.Sc(1,xn,2,0,"button",278)),2&t){const t=d.mc();d.tc("ngIf",0===t.prepostCharge),d.Fb(1),d.tc("ngIf",0!==t.prepostCharge)}}function En(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",46),d.Yb(2,"div",31),d.Uc(3,"Add Member "),d.Yb(4,"span",173),d.Uc(5,"*"),d.Xb(),d.Xb(),d.Yb(6,"div",136),d.Yb(7,"p-dropdown",279),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().newslotBookingId=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(8,"div",280),d.Yb(9,"div",31),d.Uc(10,"Remarks "),d.Yb(11,"span",53),d.Uc(12,"*"),d.Xb(),d.Xb(),d.Yb(13,"div",136),d.Yb(14,"textarea",135),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().remarks=e}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(7),d.Pc(d.yc(7,vt)),d.tc("options",t.approvedUserList)("ngModel",t.newslotBookingId)("filter",!0)("showClear",!0),d.Fb(7),d.tc("ngModel",t.remarks)}}function Gn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",153),d.ic("click",function(e){return d.Lc(t),d.mc().confirm(e)}),d.Uc(1,"Submit"),d.Xb()}}function Wn(t,e){if(1&t&&(d.Yb(0,"h6",283),d.Uc(1),d.Xb()),2&t){const t=d.mc(2);d.Fb(1),d.Wc("Assigned Token for today Consultant is : ",t.CurrentAssignedToken,"")}}function Vn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Sc(1,Wn,2,1,"h6",281),d.Yb(2,"p-dropdown",282),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().SelectedDoctorIdToken=e}),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(1),d.tc("ngIf",t.CurrentAssignedToken),d.Fb(1),d.Pc(d.yc(7,vt)),d.tc("showClear",!0)("options",t.lstDoctorWithCountAllot)("ngModel",t.SelectedDoctorIdToken)("filter",!0)}}function jn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",153),d.ic("click",function(){return d.Lc(t),d.mc(2).GenerateManualToken()}),d.Uc(1,"Generate Manual"),d.Xb()}}function Hn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",153),d.ic("click",function(){return d.Lc(t),d.mc(2).GenerateAutoToken()}),d.Uc(1,"Generate Automatic"),d.Xb()}}function qn(t,e){if(1&t&&(d.Sc(0,jn,2,0,"button",278),d.Sc(1,Hn,2,0,"button",278)),2&t){const t=d.mc();d.tc("ngIf",t.SelectedDoctorIdToken),d.Fb(1),d.tc("ngIf",!t.SelectedDoctorIdToken)}}function Zn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",127),d.Yb(2,"div",31),d.Uc(3,"Amount "),d.Yb(4,"span",173),d.Uc(5,"*"),d.Xb(),d.Xb(),d.Yb(6,"div",174),d.Yb(7,"p-inputNumber",284),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().TenderObj.CREDITAMT=e}),d.Xb(),d.Xb(),d.Xb(),d.Yb(8,"div",280),d.Yb(9,"div",31),d.Uc(10,"Purpose "),d.Yb(11,"span",53),d.Uc(12,"*"),d.Xb(),d.Xb(),d.Yb(13,"div",174),d.Yb(14,"textarea",285),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().remarks=e}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(7),d.Pc(d.yc(6,vt)),d.tc("ngModel",t.TenderObj.CREDITAMT)("min",0)("maxlength",5),d.Fb(7),d.tc("ngModel",t.remarks)}}function $n(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",153),d.ic("click",function(){return d.Lc(t),d.mc().GenerateCreditNote()}),d.Uc(1,"Generate"),d.Xb()}}function zn(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"app-allot-doctor",286),d.ic("AllotSuccess",function(e){return d.Lc(t),d.mc().AllotSuccess(e)}),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(1),d.tc("slotBookingId",t.SlotBookingIdSelectedId)("clinicId",t.ClinicIdSelected)}}function Qn(t,e){if(1&t&&(d.Yb(0,"div"),d.Tb(1,"app-individual-change-status-remarks",287),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.tc("slotBookingId",t.SlotBookingIdSelectedId)}}function Jn(t,e){if(1&t&&(d.Yb(0,"div"),d.Tb(1,"app-individual-invoice-list",288),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.tc("slotBookingId",t.SlotBookingIdSelectedId)("IsGrouped",t.IsGroupedSelected)("BookingType",t.bookingtype)}}function Kn(t,e){if(1&t&&(d.Yb(0,"h3"),d.Uc(1),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.Vc(t.HeaderName)}}function to(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"app-file-upload",289),d.ic("FileSuccess",function(e){return d.Lc(t),d.mc().FileSuccessUpload(e)}),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(1),d.tc("FormType",t.FormType)("SlotBookingId",t.SlotBookingIdSelectedId)}}function eo(t,e){if(1&t&&(d.Yb(0,"h3"),d.Uc(1),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.Vc(t.HeaderName)}}function io(t,e){if(1&t&&(d.Yb(0,"div"),d.Tb(1,"app-file-download",290),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.tc("FormType",t.FormType)("SlotBookingId",t.SlotBookingIdSelectedId)}}function no(t,e){1&t&&(d.Yb(0,"h5"),d.Uc(1,"Memebership Details"),d.Xb())}function oo(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",293),d.ic("click",function(){return d.Lc(t),d.mc(2).UpdateMemberShipDetailsBySlotId()}),d.Xb()}if(2&t){const t=d.mc(2);d.tc("label",!0===t.UserMemberShipDetails.update?"Update":"Add")("disabled",t.UserMemberShipDetails.bookingStatus)}}function so(t,e){if(1&t){const t=d.Zb();d.Sc(0,oo,1,2,"button",291),d.Yb(1,"button",292),d.ic("click",function(){return d.Lc(t),d.mc().CloseMemberShipModel()}),d.Xb()}if(2&t){const t=d.mc();d.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))}}function ao(t,e){1&t&&(d.Yb(0,"h5"),d.Uc(1,"Tariff Details"),d.Xb())}function ro(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",294),d.Yb(1,"span",295),d.Tb(2,"i",296),d.Yb(3,"input",297),d.ic("input",function(e){return d.Lc(t),d.mc(),d.Ic(81).filterGlobal(e.target.value,"contains")}),d.Xb(),d.Xb(),d.Xb()}}function lo(t,e){1&t&&(d.Yb(0,"tr",215),d.Yb(1,"th"),d.Uc(2,"S.No"),d.Xb(),d.Yb(3,"th"),d.Uc(4,"MCODE"),d.Xb(),d.Yb(5,"th"),d.Uc(6,"Description"),d.Xb(),d.Yb(7,"th"),d.Uc(8,"MRP"),d.Xb(),d.Yb(9,"th"),d.Uc(10,"Selling Price"),d.Xb(),d.Yb(11,"th"),d.Uc(12,"Other Charges"),d.Xb(),d.Yb(13,"th"),d.Uc(14,"Extra Bed Charges"),d.Xb(),d.Yb(15,"th"),d.Uc(16,"Extra Bed Other Charges"),d.Xb(),d.Yb(17,"th"),d.Uc(18,"Start Date"),d.Xb(),d.Yb(19,"th"),d.Uc(20,"End Date"),d.Xb(),d.Xb())}function co(t,e){1&t&&(d.Yb(0,"colgroup"),d.Tb(1,"col",245),d.Tb(2,"col",246),d.Tb(3,"col",253),d.Tb(4,"col",78),d.Tb(5,"col",78),d.Tb(6,"col",78),d.Tb(7,"col",78),d.Tb(8,"col",78),d.Tb(9,"col",298),d.Tb(10,"col",298),d.Xb())}function ho(t,e){if(1&t&&(d.Yb(0,"td",301),d.Uc(1),d.Xb()),2&t){const t=d.mc().$implicit;d.tc("rowSpan",t.rowspan),d.Fb(1),d.Vc(t.MCODE)}}function uo(t,e){if(1&t&&(d.Yb(0,"tr",215),d.Yb(1,"td"),d.Uc(2),d.Xb(),d.Sc(3,ho,2,2,"td",299),d.Yb(4,"td",300),d.Uc(5),d.Xb(),d.Yb(6,"td"),d.Uc(7),d.Xb(),d.Yb(8,"td"),d.Uc(9),d.Xb(),d.Yb(10,"td"),d.Uc(11),d.Xb(),d.Yb(12,"td"),d.Uc(13),d.Xb(),d.Yb(14,"td"),d.Uc(15),d.Xb(),d.Yb(16,"td"),d.Uc(17),d.nc(18,"date"),d.nc(19,"date"),d.Xb(),d.Yb(20,"td"),d.Uc(21),d.nc(22,"date"),d.nc(23,"date"),d.Xb(),d.Xb()),2&t){const t=e.$implicit,i=e.rowIndex,n=d.mc();d.Fb(2),d.Vc(i+1),d.Fb(1),d.tc("ngIf",t.rowgroup),d.Fb(2),d.Vc(t.DESCA),d.Fb(2),d.Vc(t.MRP),d.Fb(2),d.Vc(t.RATE_A),d.Fb(2),d.Vc(t.RoomOtherCharges),d.Fb(2),d.Vc(t.ExtraBedMRP),d.Fb(2),d.Vc(t.ExtraBedOtherCharges),d.Fb(2),d.Vc("1900"==d.pc(18,10,t.StartDate,"yyyy")?"":d.pc(19,13,t.StartDate,n.customDateFormat.DEF_DATE)),d.Fb(4),d.Wc("","1900"==d.pc(22,16,t.EndDate,"yyyy")?"":d.pc(23,19,t.EndDate,n.customDateFormat.DEF_DATE)," ")}}function bo(t,e){if(1&t&&(d.Yb(0,"div"),d.Tb(1,"app-prescription-save-details",287),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.tc("slotBookingId",t.SlotBookingIdSelectedId)}}function mo(t,e){if(1&t&&(d.Yb(0,"div"),d.Tb(1,"app-attendant-details",302),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.tc("clinicId",t.ClinicIdSelected)("slotBookingId",t.SlotBookingIdSelectedId)("patientId",t.UserIdSelectedId)("slotStatus",t.slotStatus)("slotperiodFrom",t.slotperiodFrom)("slotperiodUpto",t.slotperiodUpto)}}function go(t,e){if(1&t&&(d.Yb(0,"div"),d.Tb(1,"app-credit-note-balance",303),d.Xb()),2&t){const t=d.mc();d.Fb(1),d.tc("userSelected",t.SlotBookingIdSelectedId)}}function po(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div"),d.Yb(1,"div",46),d.Yb(2,"div",304),d.Yb(3,"div",305),d.Yb(4,"label",52),d.Uc(5,"Admission Date: "),d.Yb(6,"span",53),d.Uc(7,"*"),d.Xb(),d.Xb(),d.Yb(8,"p-calendar",306,307),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().dFromReduceP=e})("onClose",function(){return d.Lc(t),d.mc().calculateDiff(!0)}),d.Xb(),d.Xb(),d.Xb(),d.Yb(10,"div",304),d.Yb(11,"div",305),d.Yb(12,"label",52),d.Uc(13,"Discharge Date:"),d.Xb(),d.Yb(14,"p-calendar",308,307),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().dToReduceP=e})("onClose",function(){return d.Lc(t),d.mc().calculateDiff(!1)}),d.Xb(),d.Xb(),d.Xb(),d.Yb(16,"div",304),d.Yb(17,"div",305),d.Yb(18,"label",52),d.Uc(19,"No of Nights:"),d.Xb(),d.Yb(20,"p-inputNumber",309),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().noofdays=e})("onBlur",function(){return d.Lc(t),d.mc().OnInputDaysChange()}),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(21,"div",271),d.Yb(22,"div",310),d.Yb(23,"label",52),d.Uc(24,"Remarks: "),d.Yb(25,"span",173),d.Uc(26,"*"),d.Xb(),d.Xb(),d.Yb(27,"textarea",272),d.ic("ngModelChange",function(e){return d.Lc(t),d.mc().remarksReduce=e}),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.mc();d.Fb(8),d.Pc(d.yc(33,vt)),d.wc("yearRange","",t.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("minDate",t.today)("ngModel",t.dFromReduceP)("ngModelOptions",d.yc(34,Dt))("disabled",!0)("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1),d.Fb(6),d.Pc(d.yc(35,vt)),d.wc("yearRange","",t.MinYear,":",t.MaxYear,""),d.tc("yearNavigator",!0)("monthNavigator",!0)("minDate",t.today)("maxDate",t.maxUptoReduce)("ngModel",t.dToReduceP)("ngModelOptions",d.yc(36,Dt))("showIcon",!0)("dateFormat",t.customDateFormat.CalendarFormat)("readonlyInput",!1),d.Fb(6),d.tc("disabled","Patient"==t.BookingSource)("ngModel",t.noofdays)("min",1)("max",t.MaxNights)("useGrouping",!1)("ngModelOptions",d.yc(37,Dt)),d.Fb(7),d.tc("ngModel",t.remarksReduce)}}function So(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",153),d.ic("click",function(){return d.Lc(t),d.mc(2).ReducePeriod()}),d.Uc(1,"Submit"),d.Xb()}}function fo(t,e){if(1&t&&d.Sc(0,So,2,0,"button",278),2&t){const t=d.mc();d.tc("ngIf",0===t.prepostCharge)}}const yo=function(){return{width:"90vw"}},Io=function(){return{width:"70vw"}},Mo=function(){return{width:"50vw"}},Co=function(){return["MCODE","DESCA"]},Po=[{path:"",component:(()=>{class t extends c.a{constructor(t,e,i,n,o,s,r,c,d,h,u,b,m,g){var p,S;super(),this.cdRef=t,this.router=e,this._ConstantServices=i,this._MasterServices=n,this._RegistrationServices=o,this._DoctorServices=s,this._RoomServices=r,this._PatientServices=c,this.datepipe=d,this.formBuilder=h,this._UtilityService=u,this.confirmationService=b,this.route=m,this.encryptDecryptService=g,this.lsobjClinicMaster=JSON.parse(localStorage.getItem("objClinicMaster"))||null,this.OtherAction=localStorage.getItem("UserAuthorizationOtherAction"),this.UserTypeCurre=localStorage.getItem("userTypeId"),this.clinicType=null,this.stlstpatienttype=[],this.stlstsuspended=[],this.statusbooking=0,this.searchtxt=null,this.IsAllGrouped=0,this.today=new Date,this.dFrom=null,this.dTo=null,this.Isdisabled=!1,this.rangeDates=[],this.IsIPD=!1,this.IsSelectDoctor=!1,this.SlotBookingIdSelectedId=null,this.ClinicIdSelected=null,this.UserIdSelectedId=null,this.GroupCount=1,this.IsGrouped=!1,this.roomBookIngMaster=[],this.slotBookingMaster={},this.bookingMainModel={},this.PayRequestFrom="Frontdesk",this.lstAuthorizedMaster=[],this.InputType=3,this.isValidDate=!0,this.TotalPaybleAmount=0,this.UserType=null,this.SlotIdCatched=null,this.RegMode=null,this.RegistrationMainModel={},this.LstPaitentMessageReplyLog={},this.LstDoctorMster=[],this.bookingtype=null,this.loginUserId=null,this.PaymentMethodSelected=null,this.OrderRes={},this.UserRes={},this.ItemPriceRes=[],this.otherActionList=a.n,this.patienttype=a.p,this.bookingStatus=a.d,this.userTypes=a.s,this.customDateFormat=a.h,this.defaultItemMCODE=a.i,this.lstPayMode=[],this.SelectPaymodeArray=[],this.lstTenderModel=[],this.TenderObj={},this.NewItemDetails=[],this.TenderModel={},this.ItemCheckedTotal=0,this.BillWiseDiscountPer=0,this.BillWiseDiscountAmount=0,this.NetPaybleTotal=0,this.ReferredBy="",this.RequestedBy="",this.IsSelectedItem=!1,this.BookingSource="Frontdesk",this.ItemTotalDiscount=0,this.CreditNoteAmount=0,this.CreditNoteBalanceAmount=0,this.RemainingAmount=0,this.BankDepositSlip1Att=null,this.lstGroupMember=[],this.lstBankDepositTransactionDetails=[],this.BankDepTrnCounter=1,this.CardTrnCounter=1,this.PaymentTransactionDetails=[],this.todayDate=new Date,this.IsExtended=!1,this.AmountRecPer=0,this.ReceiveAmount=0,this.IsPartialPayment=!1,this.ActualNetPayble=0,this.filteredValuesLength=0,this.changedCount=0,this.approvedUserList=[],this.SelectedInvType=null,this.SearchBookingNumber=null,this.SearchName=null,this.first=0,this.SearchMRNo=null,this.SearchContactNumber=null,this.SearchANLNumber=null,this.SearchOPNumber=null,this.SearchIPNumber=null,this.MaxYear=(new Date).getFullYear()+2,this.SerachStatusbooking=0,this.SerachPatientType=a.p.Patient,this.SerachSuspended=0,this.SerachCompanion=0,this.SerachCGHS="0",this.SearchInsuranceNo=null,this.lstDoctorWithCountAllot=[],this.SelectedDoctorIdToken=null,this.CurrentAssignedToken=null,this.SelectedBookingType=null,this.AttRefundSlip1Att=null,this.lstAlotedToken=[],this.SelectedTokenDoctor=null,this.lstSignedConsentForm=[],this.RegistrationFormDetails={},this.lstCardPaymentTransactionDetails=[],this.lstTrustMaster=[],this.lstTrustMemberTypeMaster=[],this.lstInsuranceMaster=[],this.lstTrustHistory=[],this.CheckOutDate=new Date,this.PeriodFrom=new Date,this.PeriodUpto=new Date,this.BookingType=null,this.showMembershipDetails=!1,this.lstUserMemberShipDetails=[],this.UserMemberShipDetails={},this.showTeriffMRPDetails=!1,this.lstTeriffDeyails=[],this.ShowAttachedFormModel=!1,this.ShowDownloadFormModel=!1,this.FormType=0,this.HeaderName=null,this.MaxCreditNoteAmount=0,this.CreditNoteTranAmount=0,this.CreditNoteNumber=null,this.ShowRoomBookingModel=!1,this.ShowAllotDoctorModel=!1,this.ShowRemarksModel=!1,this.ShowInvoiceListModel=!1,this.ShowPrescriptionSaveModel=!1,this.ShowAttendantDetailsModel=!1,this.slotStatus=null,this.slotperiodFrom=null,this.slotperiodUpto=null,this.ShowCreditNoteBalance=!1,this.ShowPackageModel=!1,this.PackageMapping=[],this.ShowAdditionalRemarksModel=!1,this.ShowItemPriceModel=!1,this.ShowPaymentMethodModel=!1,this.ShowRazorPayModel=!1,this.ShowWLPayModel=!1,this.ShowGroupModel=!1,this.ShowPeriodChangeModel=!1,this.IsPrepone=!1,this.IsPostpone=!1,this.IsCancelCharge=!1,this.prepostCharge=0,this.ShowMemberAddModel=!1,this.ShowHeadGroupModel=!1,this.ShowNewDoctorAllModel=!1,this.ShowGenerateCreditModel=!1,this.ShowCreditNoteModel=!1,this.ShowReplyModel=!1,this.ActionList=a.a,this.lstIAccess=[],this.lstIAccessStr=[],this.AutogenerateVoucher=!1,this.CancelCharge=0,this.ShowReduceBookingModel=!1,this.checkMaxUpto=!1,this.maxUpto=this._UtilityService.CUR_SERVER_TIME,this.MinYear=this._UtilityService.CUR_SERVER_TIME.getFullYear(),this.MaxNights=0,this.remarksReduce=null,this.Package={},this.IsGroupedSelected=!1,this.IsGuestBooking=!1,this.clinicDetails={},this.lstRoomMster=[],this.bookedRoomCount=0,this.lstSelectedRoom=[],this.lstOnlinePayModAccess=[],this.permittedBy=null,this._ConstantServices.ActiveMenuName="Patient Booking Details",this.IsGuestBooking=1==(null===(p=this.lsobjClinicMaster)||void 0===p?void 0:p.IsGuestBooking),this.lstOnlinePayModAccess=(null===(S=this.lsobjClinicMaster)||void 0===S?void 0:S.lstOnlinePaymentModes)||[],this.stlstbookingtype=[{name:"IPD",code:"IPD"},{name:"OPD",code:"OPD"}],this.stlstpatienttype=[{name:"All",code:0},{name:"Patient",code:a.p.Patient},{name:"Guest",code:a.p.Guest}],this.stlstsuspended=[{name:"All",code:0},{name:"Yes",code:1},{name:"No",code:2}],this.dFrom=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.dTo=this.datepipe.transform(Object(l.a)(new Date,1),"yyyy-MM-dd"),this.SerachPeriodFromDate=new Date(this.dFrom),this.SerachPeriodToDate=new Date(this.dTo)}ngOnInit(){var t;this.loadTrusMaster(),this.loadTrusMemberTypeMaster(),this.LoadInsuranceMaster(),this.TenderList(),this.fileUploadAttBankslip1=this.formBuilder.group({AttBankslip1:[""]}),this.fileUploadAttRefslip1=this.formBuilder.group({AttRefAppslip1:[""]}),this.UserType=localStorage.getItem("userTypeId"),this.loginUserId=localStorage.getItem("userId"),a.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.LoadClinicMasterById(this.ClinicIdSelected),this.clinicType=null===(t=this.lsobjClinicMaster)||void 0===t?void 0:t.ClinicType,this.unsubscribe.add=this.route.queryParams.subscribe(t=>{var e;this.SearchBookingNumber=t.BookingNumber,null!=this.SearchBookingNumber?(this.SearchBookingNumber.includes("OPD")?this.bookingtype="OPD":(this.SerachPatientType=0,this.SerachSuspended=0,this.SerachCompanion=0,this.SerachCGHS="0",this.SerachStatusbooking=0,this.bookingtype="IPD"),this.BookingStatus()):(this.bookingtype="BOTH"==(null===(e=this.clinicType)||void 0===e?void 0:e.toUpperCase())?"IPD":this.clinicType,this.BookingStatus())}))}ngOnChanges(){this.loadTrusMaster(),this.loadTrusMemberTypeMaster(),this.Isdisabled=!1,this.statusbooking=0,this.searchtxt="",this.LoadOnlineRegistrationListByFilter(0,10)}ngAfterViewChecked(){var t;0==(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)&&this.getPageLevelAccess()}getPageLevelAccess(){var t,e,i=this.getUrlWithoutParams();"/common-dashboard"==i&&(i="/patient/health-seekeer-registration");var n=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==n?void 0:n.find(t=>t.MenuItemURL===i))&&(this.lstIAccess=null===(t=n.find(t=>t.MenuItemURL===i))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}getUrlWithoutParams(){let t=this.router.parseUrl(this.router.url);return t.queryParams={},t.fragment=null,t.toString()}toggleTieredMenu(t,e,i){var n,o,s,r,l,c,d,h,u,b,m,g,p,S,f,y,I,M,C,P,k,v,D,R,T,A,B,U,N,w;this.IsExtended=!1,this.IsPrepone=!1,this.IsPostpone=!1,this.IsGrouped=!1,this.prepostCharge=0,this.TenderList(),this.items=[],this.filteritems=[],this.GroupCount=1,this.filteritems=this.LstRegistrationMainModelList.filter(t=>t.SlotBookingId==i),this.filteritems[0].IsValidDate&&"IPD"===this.bookingtype&&(this.items=[...this.items,{label:"View/Edit",icon:"pi pi-eye",command:()=>{this.LoadPaitentDetails(i+"-"+this.filteritems[0].UserId,this.filteritems[0].IsValidDate)}}]),(null===(n=this.lstIAccessStr)||void 0===n?void 0:n.includes(this.ActionList.ReadWrite.toString()))&&!this.filteritems[0].IsSuspended&&this.filteritems[0].IsValidDate&&this.OtherAction.includes(this.otherActionList.IsSuspended)&&"IPD"===this.bookingtype&&(0==this.filteritems[0].IsGrouped||1==this.filteritems[0].IsGrouphead)&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]&&(this.items=[...this.items,{label:"Suspend Booking",icon:"pi pi-reply",command:()=>{this.SuspendBooking(this.filteritems[0].SlotBookingId)}}]),(null===(o=this.lstIAccessStr)||void 0===o?void 0:o.includes(this.ActionList.ReadWrite.toString()))&&this.filteritems[0].IsValidDate&&"IPD"===this.bookingtype&&1==this.filteritems[0].IsGrouped&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]&&(this.items=[...this.items,{label:"Companion Booking",icon:"pi pi-reply",command:()=>{var t=null==this.filteritems[0].IsCompanion||!this.filteritems[0].IsCompanion;t&&1==(null!=this.filteritems[0].IsPrescription&&this.filteritems[0].IsPrescription)&&0==(null!=this.filteritems[0].IsDischargePresc&&this.filteritems[0].IsDischargePresc)?this._UtilityService.showWarningAlert("Please create discharge summary first"):this.ReferToCompanion(this.filteritems[0].SlotBookingId,t)}}]),(null===(s=this.lstIAccessStr)||void 0===s?void 0:s.includes(this.ActionList.ReadWrite.toString()))&&this.filteritems[0].IsValidDate&&"OPD"===this.bookingtype&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]&&0==this.filteritems[0].IsUnBillItem&&(this.items=[...this.items,{label:"Change Status",icon:"pi pi-reply",command:()=>{this.ReplyPaitent(this.filteritems[0].UserId,this.filteritems[0].SlotBookingId,this.filteritems[0].BookingStatus,this.filteritems[0].PeriodFrom,this.filteritems[0].PeriodUpto,this.filteritems[0].BookingType,this.filteritems[0].IsGrouphead)}}]),!(null===(r=this.lstIAccessStr)||void 0===r?void 0:r.includes(this.ActionList.ReadWrite.toString()))||"IPD"!==this.bookingtype||this.filteritems[0].IsSuspended||0!=this.filteritems[0].IsGrouped&&1!=this.filteritems[0].Groupheadstatus&&1!=this.filteritems[0].IsGrouphead||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.UnderReview]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Approved]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Confirmed]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.ReferToDr]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Pending]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Discharged]||(this.items=this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]&&this.filteritems[0].IsUnBillItem?[...this.items,{label:"Change Status (PP)",icon:"pi pi-reply",command:()=>{this._UtilityService.showWarningAlert("It is mandatory to balance the account before marking discharged.")}}]:[...this.items,{label:"Change Status",icon:"pi pi-reply",command:()=>{this.ReplyPaitent(this.filteritems[0].UserId,this.filteritems[0].SlotBookingId,this.filteritems[0].BookingStatus,this.filteritems[0].PeriodFrom,this.filteritems[0].PeriodUpto,this.filteritems[0].BookingType,this.filteritems[0].IsGrouphead)}}]),(null===(l=this.lstIAccessStr)||void 0===l?void 0:l.includes(this.ActionList.ReadWrite.toString()))&&"IPD"===this.bookingtype&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]&&(this.items=[...this.items,{label:"Additional Remarks",icon:"pi pi-reply",command:()=>{this.AdditionalRemarks(this.filteritems[0].UserId,this.filteritems[0].SlotBookingId)}}]),(null===(c=this.lstIAccessStr)||void 0===c?void 0:c.includes(this.ActionList.ReadWrite.toString()))&&this.filteritems[0].IsValidDate&&("IPD"===this.bookingtype&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&(this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]||this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted])||"OPD"===this.bookingtype&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed])&&(this.items=[...this.items,{label:"Allot Doctor",icon:"pi pi-user-edit",command:()=>{this.AllotDoctor(this.filteritems[0].SlotBookingId)}}]),(null===(d=this.lstIAccessStr)||void 0===d?void 0:d.includes(this.ActionList.ReadWrite.toString()))&&!this.filteritems[0].IsDentalTreatment&&this.filteritems[0].IsValidDate&&("IPD"===this.bookingtype&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]||"OPD"===this.bookingtype&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed])&&(this.items=[...this.items,{label:"Refer to Dentist",icon:"pi pi-user-edit",command:()=>{this.ReferToDentist(this.filteritems[0].SlotBookingId)}}]),this.lsobjClinicMaster.IsPhysioPanel&&(null===(h=this.lstIAccessStr)||void 0===h?void 0:h.includes(this.ActionList.ReadWrite.toString()))&&!this.filteritems[0].IsPhysioTreatment&&this.filteritems[0].IsValidDate&&("IPD"===this.bookingtype&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]||"OPD"===this.bookingtype&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed])&&(this.items=[...this.items,{label:"Refer to Physio",icon:"pi pi-user-edit",command:()=>{this.ReferToPhysio(this.filteritems[0].SlotBookingId)}}]),this.items=[...this.items,{label:"Remarks",icon:"pi pi-comments",command:()=>{this.GetSlotRemarks(i)}}],(null===(u=this.lstIAccessStr)||void 0===u?void 0:u.includes(this.ActionList.Download.toString()))&&this.filteritems[0].IsBillItem&&"IPD"===this.bookingtype&&(this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]||this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]||this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Discharged])&&(this.items=[...this.items,{label:"Download Booking Voucher",icon:"pi pi-file",command:()=>{this.DownloadVoucher(i)}}]),this.items=[...this.items,{label:"View Invoices",icon:"pi pi-file",command:()=>{this.ShowInvoiceList(i,this.filteritems[0].IsGrouped)}}],this.filteritems[0].IsBillItem&&(this.items=[...this.items,{label:"Complete Invoices",icon:"pi pi-file",command:()=>{window.open("#/print/combined-invoice-print?SlotBookingId="+i+"&UserId="+this.filteritems[0].UserId)}}]),!(null===(b=this.lstIAccessStr)||void 0===b?void 0:b.includes(this.ActionList.ReadWrite.toString()))||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Discharged]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Confirmed]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Cancelled]||(this.items=[...this.items,{label:"Account Balance",icon:"pi pi-wallet",command:()=>{this.ShowCreditBalanceModel(this.filteritems[0].SlotBookingId)}}]),!(null===(m=this.lstIAccessStr)||void 0===m?void 0:m.includes(this.ActionList.ReadWrite.toString()))||"IPD"!==this.bookingtype||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Confirmed]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]||0!=this.filteritems[0].IsGrouped&&(1!=this.filteritems[0].IsGrouped||1!=this.filteritems[0].IsGrouphead||1!=this.filteritems[0].OtherGroupstatus)||(this.items=[...this.items,{label:"Extend Period",icon:"pi pi-calendar-plus",command:()=>{this.ShowBookingModel(this.filteritems[0].SlotBookingId,this.filteritems[0].UserId,this.filteritems[0].ClinicId,"New",!0)}}]),!(null===(g=this.lstIAccessStr)||void 0===g?void 0:g.includes(this.ActionList.ReadWrite.toString()))||"IPD"!==this.bookingtype||this.filteritems[0].PatientType!==this.patienttype[this.patienttype.Patient]||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Discharged]||(this.items=[...this.items,{label:"Add Attendant",icon:"pi pi-calendar-plus",command:()=>{this.ShowAttendantDeatils(this.filteritems[0].SlotBookingId,this.filteritems[0].UserId,this.filteritems[0].ClinicId,this.filteritems[0].BookingStatus,this.filteritems[0].PeriodFrom,this.filteritems[0].PeriodUpto)}}]),!(null===(p=this.lstIAccessStr)||void 0===p?void 0:p.includes(this.ActionList.ReadWrite.toString()))||"IPD"!==this.bookingtype||this.filteritems[0].PatientType!==this.patienttype[this.patienttype.Patient]||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Discharged]||(this.items=[...this.items,{label:"Medical Certificate",icon:"pi pi-star",command:()=>{window.open("#/print/print-medical-certificate?SlotBookingId="+i)}}]),(null===(S=this.lstIAccessStr)||void 0===S?void 0:S.includes(this.ActionList.ReadWrite.toString()))&&this.filteritems[0].IsValidDate&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Booked]&&(this.items=[...this.items,{label:"Pay",icon:"pi pi-credit-card",command:()=>{this.ShowPriceModelOPD(this.filteritems[0].SlotBookingId,this.filteritems[0].UserId)}}]),(null===(f=this.lstIAccessStr)||void 0===f?void 0:f.includes(this.ActionList.ReadWrite.toString()))&&this.filteritems[0].IsValidDate&&"IPD"===this.bookingtype&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&(this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Approved]||this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed])&&1==this.filteritems[0].IsGrouped&&1==this.filteritems[0].IsGrouphead&&1==this.filteritems[0].OtherGroupstatus&&(this.items=[...this.items,{label:"Change Group Member",icon:"pi pi-user-edit",command:()=>{this.ShowGroupMemberModel(this.filteritems[0].GroupNumber)}}]),!(null===(y=this.lstIAccessStr)||void 0===y?void 0:y.includes(this.ActionList.ReadWrite.toString()))||"IPD"!==this.bookingtype||this.filteritems[0].PatientType!==this.patienttype[this.patienttype.Patient]||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Confirmed]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]||1!=this.filteritems[0].IsGrouped||1!=this.filteritems[0].IsGrouphead||(this.items=[...this.items,{label:"Change Group Head",icon:"pi pi-user-edit",command:()=>{this.ShowGroupHeadModel(this.filteritems[0].SlotBookingId,this.filteritems[0].GroupNumber)}}]),(null===(I=this.lstIAccessStr)||void 0===I?void 0:I.includes(this.ActionList.Download.toString()))&&("IPD"===this.bookingtype&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]||"OPD"===this.bookingtype&&"OPD"==this.filteritems[0].BookingType&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed])&&(this.items=[...this.items,{label:"Download IPD Adm Form",icon:"pi pi-user-edit",command:()=>{window.open("#/print/print-ipd-admission-form?SlotBookingId="+this.filteritems[0].SlotBookingId)}}]);var F=[];(null===(M=this.lstIAccessStr)||void 0===M?void 0:M.includes(this.ActionList.ReadWrite.toString()))&&"IPD"===this.bookingtype&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Approved]&&(0==this.filteritems[0].IsGrouped||1==this.filteritems[0].IsGrouped&&1==this.filteritems[0].IsGrouphead&&1==this.filteritems[0].OtherGroupstatus)&&(F=[...F,{label:"Book Room",icon:"pi pi-calendar-plus",command:()=>{this.GroupCount=this.filteritems[0].IsGrouped?this.filteritems[0].GroupCount:this.GroupCount,this.IsGrouped=!!this.filteritems[0].IsGrouped&&this.filteritems[0].IsGrouped,this.ShowBookingModel(this.filteritems[0].SlotBookingId,this.filteritems[0].UserId,this.filteritems[0].ClinicId,"New")}}]),(null===(C=this.lstIAccessStr)||void 0===C?void 0:C.includes(this.ActionList.ReadWrite.toString()))&&"IPD"===this.bookingtype&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]&&(0==this.filteritems[0].IsGrouped||1==this.filteritems[0].IsGrouped&&1==this.filteritems[0].IsGrouphead&&1==this.filteritems[0].OtherGroupstatus)&&(F=[...F,{label:"Change Period",icon:"pi pi-calendar-plus",command:()=>{this.ShowChangePeriodModel(this.filteritems[0].SlotBookingId,this.filteritems[0].UserId,this.filteritems[0].ClinicId,this.filteritems[0].ChangedCount,"New")}}]),!(null===(P=this.lstIAccessStr)||void 0===P?void 0:P.includes(this.ActionList.ReadWrite.toString()))||"IPD"!==this.bookingtype||0!=this.filteritems[0].IsCGHS||this.filteritems[0].PatientType!==this.patienttype[this.patienttype.Patient]||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Confirmed]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]||0!=this.filteritems[0].IsGrouped&&(1!=this.filteritems[0].IsGrouped||1!=this.filteritems[0].IsGrouphead)||(F=[...F,{label:"Add Member",icon:"pi pi-user-edit",command:()=>{this.ShowAddMemberModel(this.filteritems[0].SlotBookingId,this.filteritems[0].UserId,this.filteritems[0].ClinicId,"New")}}]),"IPD"===this.bookingtype&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]&&(F=[...F,{label:"Tariff Details",icon:"pi pi-user-edit",command:()=>{this.ShowTeriff()}}]),"IPD"!==this.bookingtype||this.filteritems[0].PatientType!==this.patienttype[this.patienttype.Patient]||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Confirmed]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Discharged]||0!=this.filteritems[0].IsGrouped&&(1!=this.filteritems[0].IsGrouped||1!=this.filteritems[0].IsGrouphead||1!=this.filteritems[0].OtherGroupstatus)||(F=[...F,{label:"Membership Details",icon:"pi pi-user-edit",command:()=>{this.ViewMemberShipDetailsBySlotId(this.filteritems[0].SlotBookingId)}}]),F.length>0&&(this.items=[...this.items,{label:"Booking",icon:"pi pi-file-o",items:F}]);var Y=[];(null===(k=this.lstIAccessStr)||void 0===k?void 0:k.includes(this.ActionList.ReadWrite.toString()))&&this.filteritems[0].IsValidDate&&("IPD"===this.bookingtype&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]||"OPD"===this.bookingtype&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed])&&(Y=[...Y,{label:"Add Medical Details",icon:"pi pi-file-o",command:()=>{this.ShowPatientDetails(this.filteritems[0].UserId,this.filteritems[0].SlotBookingId,this.bookingtype)}}]),!(null===(v=this.lstIAccessStr)||void 0===v?void 0:v.includes(this.ActionList.Print.toString()))||"IPD"!=this.filteritems[0].BookingType||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Discharged]||(Y=[...Y,{label:"View OPD Prescription",icon:"pi pi-print",command:()=>{this.PrintPrescription(this.filteritems[0].UserId,this.filteritems[0].SlotBookingId,"OPDIPD")}},{label:"View Prescription",icon:"pi pi-print",command:()=>{this.PrintPrescription(this.filteritems[0].UserId,this.filteritems[0].SlotBookingId,this.filteritems[0].BookingType)}},{label:"View Discharge Summary",icon:"pi pi-print",command:()=>{this.PrintPrescription(this.filteritems[0].UserId,this.filteritems[0].SlotBookingId,"IDS")}}]),(null===(D=this.lstIAccessStr)||void 0===D?void 0:D.includes(this.ActionList.Print.toString()))&&"OPD"==this.filteritems[0].BookingType&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]&&(Y=[...Y,{label:"View Prescription",icon:"pi pi-print",command:()=>{this.PrintPrescription(this.filteritems[0].UserId,this.filteritems[0].SlotBookingId,this.filteritems[0].BookingType)}}]),(null===(R=this.lstIAccessStr)||void 0===R?void 0:R.includes(this.ActionList.Print.toString()))&&1==this.filteritems[0].IsDentalTreatment&&(Y=[...Y,{label:"View Dental Prescription",icon:"pi pi-print",command:()=>{window.open("#/print/print-dental-prescription?SlotBookingId="+i+"&tag="+this.filteritems[0].BookingType)}}]),(null===(T=this.lstIAccessStr)||void 0===T?void 0:T.includes(this.ActionList.Print.toString()))&&1==this.filteritems[0].IsPhysioTreatment&&(Y=[...Y,{label:"View Physio Prescription",icon:"pi pi-print",command:()=>{window.open("#/print/print-physiotherpy-prescription?SlotBookingId="+i+"&tag="+this.filteritems[0].BookingType)}}]),("OPD"==this.filteritems[0].BookingType&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]||"IPD"==this.filteritems[0].BookingType&&(this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]||this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Discharged]))&&(Y=[...Y,{label:"View Doctor Logs",icon:"pi pi-comments",command:()=>{this.GetPrescriptionSaveDetails(i)}}]),Y.length>0&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&(this.items=[...this.items,{label:"Prescription",icon:"pi pi-file-o",items:Y}]);var X=[];"IPD"===this.bookingtype&&(X=[...X,{label:"Registration Form",icon:"pi pi-file-o",items:[{label:"Download Form",icon:"pi pi-user-edit",command:()=>{window.open("#/print/patient-detail-form?UserId="+this.filteritems[0].UserId+"&SlotBookingId="+this.filteritems[0].SlotBookingId)}},{label:"Attached Signed Reg Form",icon:"pi pi-user-edit",command:()=>{this.AttachedSignedForm(this.filteritems[0].SlotBookingId,a.k.PatientRegistrationForm,"Attached Registration Form")}},{label:"Download Signed Reg Form",icon:"pi pi-user-edit",command:()=>{this.LoadAttachedSignedForm(this.filteritems[0].SlotBookingId,a.k.PatientRegistrationForm,"Patient Registration Form List")}}]}]),("OPD"==this.filteritems[0].BookingType&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]||"IPD"==this.filteritems[0].BookingType)&&(X=[...X,{label:"Consent Form",icon:"pi pi-file-o",items:[{label:"Download Consent Form",icon:"pi pi-user-edit",command:()=>{window.open("#/print/consent-form?UserId="+this.filteritems[0].UserId+"&SlotBookingId="+this.filteritems[0].SlotBookingId)}},{label:"Attached Signed Consent Form",icon:"pi pi-user-edit",command:()=>{this.AttachedSignedForm(this.filteritems[0].SlotBookingId,a.k.ConsentForm,"Upload Signed Consent Form")}},{label:"Download Signed Consent Form",icon:"pi pi-user-edit",command:()=>{this.LoadAttachedSignedForm(this.filteritems[0].SlotBookingId,a.k.ConsentForm,"Download Signed Consent Form")}}]}]),"IPD"===this.bookingtype&&(X=[...X,{label:"Case Sheet",icon:"pi pi-file-o",items:[{label:"Print Case Sheet",icon:"pi pi-eye",command:()=>{window.open("#/print/print-ipd-registration-form?UserId="+this.filteritems[0].UserId+"&SlotBookingId="+this.filteritems[0].SlotBookingId)}},{label:"Attached Signed Case Sheet",icon:"pi pi-user-edit",command:()=>{this.AttachedSignedForm(this.filteritems[0].SlotBookingId,a.k.IPDForm,"Upload Signed Case Sheet")}},{label:"Download Signed Case Sheet",icon:"pi pi-user-edit",command:()=>{this.LoadAttachedSignedForm(this.filteritems[0].SlotBookingId,a.k.IPDForm,"Download Signed Case Sheet")}}]},{label:"Pain Assessment",icon:"pi pi-file-o",items:[{label:"View Pain Ass ",icon:"pi pi-print",command:()=>{window.open("#/print/print-pain-assessment?SlotBookingId="+this.filteritems[0].SlotBookingId+"&tag="+this.filteritems[0].BookingType)}},{label:"Attached Pain Ass Form",icon:"pi pi-user-edit",command:()=>{this.AttachedSignedForm(this.filteritems[0].SlotBookingId,a.k.PainAssessmentForm,"Upload Signed Pain Assessment Form")}},{label:"Download Signed Pain Ass Form",icon:"pi pi-user-edit",command:()=>{this.LoadAttachedSignedForm(this.filteritems[0].SlotBookingId,a.k.PainAssessmentForm,"Download Signed Pain Assessment Form")}}]}]),"IPD"===this.bookingtype&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&(X=[...X,{label:"Print Rogi Soochee",icon:"pi pi-file-o",command:()=>{window.open("#/print/print-rogi-soochee-form?SlotBookingId="+this.filteritems[0].SlotBookingId)}}]),(null===(A=this.lstIAccessStr)||void 0===A?void 0:A.includes(this.ActionList.Download.toString()))&&X.length>0&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&(this.items=[...this.items,{label:"Form",icon:"pi pi-file-o",items:X}]),(null===(B=this.lstIAccessStr)||void 0===B?void 0:B.includes(this.ActionList.ReadWrite.toString()))&&("IPD"==this.filteritems[0].BookingType&&this.filteritems[0].PatientType===this.patienttype[this.patienttype.Patient]&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]||"OPD"==this.filteritems[0].BookingType&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed])&&(this.items=[...this.items,{label:"Add to Waiting Room",icon:"pi pi-user-edit",command:()=>{this.ShowWaitingRoom(this.filteritems[0].UserId,this.filteritems[0].SlotBookingId)}}]),!(null===(U=this.lstIAccessStr)||void 0===U?void 0:U.includes(this.ActionList.Download.toString()))||"IPD"!==this.bookingtype||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Discharged]||(this.items=[...this.items,{label:"Download Gate Pass",icon:"pi pi-file",command:()=>{window.open("#/print/gate-pass?UserId="+this.filteritems[0].UserId+"&SlotBookingId="+this.filteritems[0].SlotBookingId)}}]),(null===(N=this.lstIAccessStr)||void 0===N?void 0:N.includes(this.ActionList.ReadWrite.toString()))&&("IPD"===this.bookingtype&&(this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]||this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed])||"OPD"===this.bookingtype&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed])&&(this.items=[...this.items,{label:"Go To Billing",icon:"pi pi-file",command:()=>{window.open("#/payment/extra-item-entry?id="+this.filteritems[0].SlotBookingId)}}]),!(null===(w=this.lstIAccessStr)||void 0===w?void 0:w.includes(this.ActionList.ReadWrite.toString()))||"IPD"!==this.bookingtype||(1!=this.filteritems[0].IsGrouped||1!=this.filteritems[0].IsGrouphead)&&0!=this.filteritems[0].IsGrouped||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Confirmed]||(this.items=[...this.items,{label:"Reduce Booking",icon:"pi pi-file",command:()=>{this.ShowReduceBooking(this.filteritems[0].SlotBookingId,this.filteritems[0].PeriodFrom,this.filteritems[0].PeriodUpto)}}]),"IPD"!=this.filteritems[0].BookingType||this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Admitted]&&this.filteritems[0].BookingStatus!==this.bookingStatus[this.bookingStatus.Discharged]||(this.items=[...this.items,{label:"Patient Record",icon:"pi pi-file-o",command:()=>{window.open("#/print/patient-record?UserId="+this.filteritems[0].UserId+"&SlotBookingId="+this.filteritems[0].SlotBookingId+"&tag="+this.filteritems[0].BookingType)}}]),"IPD"==this.filteritems[0].BookingType&&!0===this.filteritems[0].IsCGHS&&null!=this.filteritems[0].CGHSAttachment&&null!=this.filteritems[0].CGHSAttachment&&""!=this.filteritems[0].CGHSAttachment&&(this.items=[...this.items,{label:"View Insurance Attachment",icon:"pi pi-user-edit",command:()=>{window.open(this._ConstantServices.BaseURIFileServer+"MedicalTest/"+this.filteritems[0].CGHSAttachment)}}]),t.toggle(e)}loadTrusMaster(){this.lstTrustMaster=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetTrustMasterActive().subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstTrustMaster=e=e||[]}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}),this.cdRef.detectChanges()}loadTrusMemberTypeMaster(){this.lstTrustMemberTypeMaster=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetTrustMemberTypeMasterActive().subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstTrustMemberTypeMaster=e=e||[]}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}),this.cdRef.detectChanges()}LoadInsuranceMaster(){this.lstInsuranceMaster=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetInsuranceList().subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstInsuranceMaster=e=e||[],this.lstInsuranceMaster.unshift({InsuranceMasterId:"2",InsuranceCompanyName:"Without Insured",Status:1}),this.lstInsuranceMaster.unshift({InsuranceMasterId:"1",InsuranceCompanyName:"Only Insured",Status:1}),this.lstInsuranceMaster.unshift({InsuranceMasterId:"0",InsuranceCompanyName:"All",Status:1}),console.log("this.lstInsuranceMaster",this.lstInsuranceMaster),this.cdRef.detectChanges()}else this.lstInsuranceMaster=[],this.lstInsuranceMaster.unshift({InsuranceMasterId:"2",InsuranceCompanyName:"Without Insured",Status:1}),this.lstInsuranceMaster.unshift({InsuranceMasterId:"1",InsuranceCompanyName:"Only Insured",Status:1}),this.lstInsuranceMaster.unshift({InsuranceMasterId:"0",InsuranceCompanyName:"All",Status:1}),this.cdRef.detectChanges()})}BookingStatus(){this.stlstbookingstatus=[],"IPD"==this.bookingtype?(this.stlstbookingstatus=[{name:"All",code:0},{name:this.bookingStatus[this.bookingStatus.UnderReview],code:this.bookingStatus.UnderReview},{name:this.bookingStatus[this.bookingStatus.ReferToDr],code:this.bookingStatus.ReferToDr},{name:this.bookingStatus[this.bookingStatus.Approved],code:this.bookingStatus.Approved},{name:this.bookingStatus[this.bookingStatus.Confirmed],code:this.bookingStatus.Confirmed},{name:this.bookingStatus[this.bookingStatus.Admitted],code:this.bookingStatus.Admitted},{name:this.bookingStatus[this.bookingStatus.Discharged],code:this.bookingStatus.Discharged},{name:this.bookingStatus[this.bookingStatus.Rejected],code:this.bookingStatus.Rejected},{name:this.bookingStatus[this.bookingStatus.Cancelled],code:this.bookingStatus.Cancelled},{name:this.bookingStatus[this.bookingStatus.Pending],code:this.bookingStatus.Pending}],this.IsAllGrouped=0,this.statusbooking=this.bookingStatus.Confirmed,null!=this.SearchBookingNumber&&null!=this.SearchBookingNumber&&""!=this.SearchBookingNumber||(this.SerachStatusbooking=this.bookingStatus.Confirmed)):this.stlstbookingstatus="OPD"==this.bookingtype?[{name:"All",code:0},{name:this.bookingStatus[this.bookingStatus.Booked],code:this.bookingStatus.Booked},{name:this.bookingStatus[this.bookingStatus.Confirmed],code:this.bookingStatus.Confirmed}]:[],this.LoadOnlineRegistrationListByFilter(0,10)}onselectedClinic(t){var e;a.s.SuperAdmin===localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=t.ClinicId,this.clinicType=null==t?void 0:t.ClinicType,this.bookingtype="BOTH"==(null===(e=this.clinicType)||void 0===e?void 0:e.toUpperCase())?"IPD":this.clinicType,this.lstOnlinePayModAccess=(null==t?void 0:t.lstOnlinePaymentModes)||[],this.LoadClinicMasterById(this.ClinicIdSelected)),this.BookingStatus()}OnChangeBookingType(){this.IsAllGrouped=0,this.Isdisabled=!1,this.statusbooking=0,this.SerachStatusbooking=0,this.BookingStatus(),this.cdRef.detectChanges()}dateRangeChange(t,e){""!=t.value&&""!=e.value&&this.LoadOnlineRegistrationListByFilter(0,10)}OnChangeStatus(){this.Isdisabled=!1,"IPD"==this.bookingtype&&this.statusbooking>0&&this.statusbooking<5&&(this.Isdisabled=!0)}LoadCrediNoteBalance(){this.RemainingAmount=0,null!=this.SlotBookingIdSelectedId&&""!=this.SlotBookingIdSelectedId?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetCreditNoteBalAmount(this.SlotBookingIdSelectedId).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this.CreditNoteBalanceAmount=Math.abs(+t.actionResult.stringVal),this.RemainingAmount=t.actionResult.totalAmount,this.cdRef.detectChanges()):(this.CreditNoteBalanceAmount=0,this.cdRef.detectChanges())},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):(this.CreditNoteBalanceAmount=0,this.cdRef.detectChanges())}CalculateDiscount(t,e){var i,n,o=this.ItemPriceRes[e];this.ItemPriceRes[e].DiscountAmount=n=(i=o.MRP*o.Qty)*t.value/100,this.ItemPriceRes[e].PriceWithGST=i-n,this.ItemTotalDiscount=0,this.ItemPriceRes.map(t=>{this.ItemTotalDiscount=this.ItemTotalDiscount+t.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscount(),this.cdRef.detectChanges()}CalculateDiscountNew(t){var e,i,n=this.ItemPriceRes[t];this.ItemPriceRes[t].DiscountAmount=i=(e=n.MRP*n.Qty)*n.DiscountPer/100,this.ItemPriceRes[t].PriceWithGST=e-i,this.ItemTotalDiscount=0,this.ItemPriceRes.map(t=>{this.ItemTotalDiscount=this.ItemTotalDiscount+t.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscount(),this.cdRef.detectChanges()}CalculateDiscountRev(t,e){var i,n,o,s=this.ItemPriceRes[e];n=(o=t.value)/(i=s.MRP*s.Qty)*100,this.ItemPriceRes[e].DiscountAmount=o,this.ItemPriceRes[e].DiscountPer=n,this.ItemPriceRes[e].DiscountPerUI=Math.round(n),this.ItemPriceRes[e].PriceWithGST=i-o,this.ItemTotalDiscount=0,this.ItemPriceRes.map(t=>{this.ItemTotalDiscount=this.ItemTotalDiscount+t.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscount()}CalculateDiscountBlur(t){var e,i,n,o=this.ItemPriceRes[t];i=(n=o.DiscountAmount)/(e=o.MRP*o.Qty)*100,this.ItemPriceRes[t].DiscountAmount=n,this.ItemPriceRes[t].DiscountPer=i,this.ItemPriceRes[t].DiscountPerUI=Math.round(i),this.ItemPriceRes[t].PriceWithGST=e-n,this.ItemTotalDiscount=0,this.ItemPriceRes.map(t=>{this.ItemTotalDiscount=this.ItemTotalDiscount+t.DiscountAmount}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscount()}CalculateTotalItemPrice(){if(null!=this.ItemPriceRes.filter(t=>1==t.IsChecked)){var t=this.ItemPriceRes.filter(t=>1==t.IsChecked),e=0;t.length>0&&t.map(t=>{e+=t.PriceWithGST}),this.ItemCheckedTotal=e,this.TotalPaybleAmount=e,this.cdRef.detectChanges()}this.CalculateNetPaybleAfterDiscount()}CalculateNetPaybleAfterDiscount(){if(this.ItemCheckedTotal>0)if(this.BillWiseDiscountPer>0&&0==this.IsPrepone&&0==this.IsPostpone){var t=this.ItemCheckedTotal*this.BillWiseDiscountPer/100;this.BillWiseDiscountAmount=t,this.NetPaybleTotal=this.ItemCheckedTotal-t,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)}else this.BillWiseDiscountAmount=0,this.NetPaybleTotal=this.ItemCheckedTotal,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0);else this.NetPaybleTotal=0;this.CalculateReceivePer()}CalculateNetPaybleAfterDiscountNew(t){if(this.ItemCheckedTotal>0)if(t.value>0){var e=this.ItemCheckedTotal*t.value/100;this.BillWiseDiscountAmount=e,this.NetPaybleTotal=this.ItemCheckedTotal-e,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)}else this.BillWiseDiscountAmount=0,this.NetPaybleTotal=this.ItemCheckedTotal,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0);else this.NetPaybleTotal=0;this.CalculateReceivePer()}CalculateNetPaybleAfterDiscountReverseNew(t){this.ItemCheckedTotal>0?t.value>0?(this.BillWiseDiscountPer=100*t.value/this.ItemCheckedTotal,this.NetPaybleTotal=this.ItemCheckedTotal-t.value,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):(this.BillWiseDiscountPer=0,this.NetPaybleTotal=this.ItemCheckedTotal,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):this.NetPaybleTotal=0,this.CalculateReceivePer()}CalculateNetPaybleAfterDiscountReverse(){this.ItemCheckedTotal>0?this.BillWiseDiscountAmount>0?(this.BillWiseDiscountPer=100*this.BillWiseDiscountAmount/this.ItemCheckedTotal,this.NetPaybleTotal=this.ItemCheckedTotal-this.BillWiseDiscountAmount,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):(this.BillWiseDiscountPer=0,this.NetPaybleTotal=this.ItemCheckedTotal,this.NetPaybleTotal=this.NetPaybleTotal-(this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0)):this.NetPaybleTotal=0,this.CalculateReceivePer()}CalculateTotalBankTransaction(t,e){if(t.value>0){null!=this.TenderObj.BANKTFAMOUNT&&null!=this.TenderObj.BANKTFAMOUNT||(this.TenderObj.BANKTFAMOUNT=0);var i=0;(null==(n=this.lstBankDepositTransactionDetails.filter(t=>t.Sequence!=e))?void 0:n.length)>0&&n.map(t=>{i+=t.Amount}),this.TenderObj.BANKTFAMOUNT=i+t.value,this.cdRef.detectChanges()}else{var n;null!=this.TenderObj.BANKTFAMOUNT&&null!=this.TenderObj.BANKTFAMOUNT||(this.TenderObj.BANKTFAMOUNT=0),i=0,(null==(n=this.lstBankDepositTransactionDetails.filter(t=>t.Sequence!=e))?void 0:n.length)>0&&n.map(t=>{i+=t.Amount}),this.TenderObj.BANKTFAMOUNT=i,this.cdRef.detectChanges()}}CalculateTotalBankTransactionrev(){var t=0;this.lstBankDepositTransactionDetails.map(e=>{t+=e.Amount}),this.TenderObj.BANKTFAMOUNT=t,this.cdRef.detectChanges()}LoadItemPriceTotal(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetItemPriceWithGST(this.SlotBookingIdSelectedId).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.ItemPriceRes=e=e||[];var i=JSON.parse(t.actionResult.result2);this.ItemCheckedTotal=i=i||[],this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscount()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}UploadBankDepositSlip(t,e){const i=new FormData;this.fileUploadAttBankslip1.get("AttBankslip1").value&&(i.append(this.BankDepositSlip1Att,this.fileUploadAttBankslip1.get("AttBankslip1").value),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UploadBankDepositSlip(i,t,e).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success&&this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}TenderList(){var t,e;if(this.lstPayMode=r.a.filter(t=>"LB1199"!==t.ACID),this.IsExtended||this.IsPrepone||this.IsPostpone||0==(null===(t=this.lstOnlinePayModAccess)||void 0===t?void 0:t.length))this.lstPayMode=this.lstPayMode.filter(t=>"ATONLN"!==t.ACID),this.lstPayMode=this.lstPayMode.filter(t=>"ATWLONLN"!==t.ACID);else if((null===(e=this.lstOnlinePayModAccess)||void 0===e?void 0:e.length)>0){this.lstPayMode=r.a.filter(t=>"ATONLN"!==t.ACID&&"ATWLONLN"!==t.ACID&&"LB1199"!==t.ACID);const t=r.a.filter(t=>this.lstOnlinePayModAccess.includes(t.ACID));this.lstPayMode=[...t,...this.lstPayMode]}}ShowAttendantDeatils(t,e,i,n,o,s){this.SlotBookingIdSelectedId=t,this.UserIdSelectedId=e,this.ClinicIdSelected=i,this.slotStatus=n,this.slotperiodFrom=o,this.slotperiodUpto=s,this.ShowAttendantDetailsModel=!0}ShowPriceModelOPD(t,e){this.SlotBookingIdSelectedId=t,this.UserIdSelectedId=e,this.LoadItemPriceTotal(),this.LoadAuthorizedMaster(),this.ShowItemPriceModel=!0}ShowAddCreditNoteModel(t,e,i,n){this.SlotBookingIdSelectedId=t,this.UserIdSelectedId=e,this.CreditNoteAmount=0,this.ShowCreditNoteModel=!0}clearPaymentMethod(){this.TenderObj={},this.TenderModel={},this.SelectPaymodeArray=[],this.selectedPaymodeCodes=null}LoadOnlineRegistrationListByFilter(t,e){var i;if(this.first=parseInt(t),""==this.ClinicIdSelected||null==this.ClinicIdSelected||null==this.ClinicIdSelected)return void this._UtilityService.showWarningAlert("Please select center");if(""==this.bookingtype||null==this.bookingtype||null==this.bookingtype)return void this._UtilityService.showWarningAlert("Please select Booking Type");""!=(null===(i=this.searchtxt)||void 0===i?void 0:i.trim())&&null!=this.searchtxt&&null!=this.searchtxt||(this.searchtxt=""),null!=this.dFrom&&null!=this.dFrom&&(this.dFrom=this.datepipe.transform(this.dFrom,"yyyy-MM-dd")),null!=this.dTo&&null!=this.dTo&&(this.dTo=this.datepipe.transform(this.dTo,"yyyy-MM-dd"));let n={};n.clinicId=this.ClinicIdSelected,n.bookingtype=this.bookingtype,n.dFrom=new Date(this.datepipe.transform(this.dFrom,"yyyy-MM-dd")),n.dTo=new Date(this.datepipe.transform(this.dTo,"yyyy-MM-dd")),n.IsAllGrouped=this.IsAllGrouped,n.bookingStatus=this.statusbooking,n.searchtxt=this.searchtxt,n.first=t.toString(),n.rows=e.toString(),n.IsSkipPaging=!1;let o=[];null!=this.SearchBookingNumber&&null!=this.SearchBookingNumber&&""!=this.SearchBookingNumber&&o.push({SearchBy:"BookingNumber",SearchVal:this.SearchBookingNumber.trim()}),null!=this.SearchName&&null!=this.SearchName&&""!=this.SearchName&&o.push({SearchBy:"FullName",SearchVal:this.SearchName.trim()}),null!=this.SearchMRNo&&null!=this.SearchMRNo&&""!=this.SearchMRNo&&o.push({SearchBy:"MRNo",SearchVal:this.SearchMRNo.trim()}),null!=this.SearchContactNumber&&null!=this.SearchContactNumber&&""!=this.SearchContactNumber&&o.push({SearchBy:"ContactNumber",SearchVal:this.SearchContactNumber.trim()}),null!=this.SearchANLNumber&&null!=this.SearchANLNumber&&""!=this.SearchANLNumber&&o.push({SearchBy:"AnnualNumber",SearchVal:this.SearchANLNumber.trim()}),null!=this.SearchOPNumber&&null!=this.SearchOPNumber&&""!=this.SearchOPNumber&&o.push({SearchBy:"OPNumber",SearchVal:this.SearchOPNumber.trim()}),null!=this.SearchIPNumber&&null!=this.SearchIPNumber&&""!=this.SearchIPNumber&&o.push({SearchBy:"IPNumber",SearchVal:this.SearchIPNumber.trim()}),null!=this.SerachPeriodFromDate&&null!=this.SerachPeriodFromDate&&o.push({SearchBy:"PeriodFrom",SearchVal:this.datepipe.transform(this.SerachPeriodFromDate,"yyyy-MM-dd")}),null!=this.SerachPeriodToDate&&null!=this.SerachPeriodToDate&&"IPD"==this.bookingtype&&o.push({SearchBy:"PeriodUpto",SearchVal:this.datepipe.transform(this.SerachPeriodToDate,"yyyy-MM-dd")}),null!=this.SerachStatusbooking&&null!=this.SerachStatusbooking&&0!=this.SerachStatusbooking&&o.push({SearchBy:"BookingStatus",SearchVal:this.SerachStatusbooking.toString()}),null!=this.SerachPatientType&&null!=this.SerachPatientType&&0!=this.SerachPatientType&&o.push({SearchBy:"PatientType",SearchVal:this.SerachPatientType.toString()}),null!=this.SearchCheckedInDate&&null!=this.SearchCheckedInDate&&"IPD"==this.bookingtype&&o.push({SearchBy:"CheckedIn",SearchVal:this.datepipe.transform(this.SearchCheckedInDate,"yyyy-MM-dd")}),null!=this.SearchCheckedOutDate&&null!=this.SearchCheckedOutDate&&"IPD"==this.bookingtype&&o.push({SearchBy:"CheckedOut",SearchVal:this.datepipe.transform(this.SearchCheckedOutDate,"yyyy-MM-dd")}),null!=this.SerachSuspended&&null!=this.SerachSuspended&&0!=this.SerachSuspended&&o.push({SearchBy:"IsSuspended",SearchVal:this.SerachSuspended.toString()}),null!=this.SerachCompanion&&null!=this.SerachCompanion&&0!=this.SerachCompanion&&o.push({SearchBy:"IsCompanion",SearchVal:this.SerachCompanion.toString()}),null!=this.SerachCGHS&&null!=this.SerachCGHS&&"0"!=this.SerachCGHS&&o.push({SearchBy:"IsCGHS",SearchVal:this.SerachCGHS.toString()}),null!=this.SearchInsuranceNo&&null!=this.SearchInsuranceNo&&""!=this.SearchInsuranceNo&&o.push({SearchBy:"InsuranceNo",SearchVal:this.SearchInsuranceNo.trim()}),n.SearchList=o,this._UtilityService.showSpinner(),this.unsubscribe.add=this._RegistrationServices.GetOnlineRegistrationListByFilter(n).subscribe(i=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==i.actionResult.success){var n=JSON.parse(i.actionResult.result);this.LstRegistrationMainModelList=n=n||[],this.TotalRecords=JSON.parse(i.actionResult.result2),this.updateRowGroupMetaData(t,e)}else this.TotalRecords=0,this.LstRegistrationMainModelList=[],this.rowGroupMetadata={},this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}updateRowGroupMetaData(t,e){var i;if(this.rowGroupMetadata={},this.LstRegistrationMainModelList)for(let n=0;n<this.LstRegistrationMainModelList.length;n++){let e=this.LstRegistrationMainModelList[n].GroupNumber;0==n?this.rowGroupMetadata[e]={index:t,size:1}:e===this.LstRegistrationMainModelList[n-1].GroupNumber?this.rowGroupMetadata[e].size++:this.rowGroupMetadata[e]={index:Number(t)+n,size:1}}void 0!==this.filtr&&(this.filtr.nativeElement.value="",this.dataTable.reset(),this.filteredValuesLength=null===(i=this.LstRegistrationMainModelList)||void 0===i?void 0:i.length),this.cdRef.detectChanges()}loadPatientList(t){this.LstRegistrationMainModelList&&this.LoadOnlineRegistrationListByFilter(t.first,t.rows)}LoadPaitentDetails(t,e){this._UtilityService.showSpinner(),this.unsubscribe.add=this._RegistrationServices.GetOnlineRegistrationDetailsById(t.split("-")[0],t.split("-")[1]).subscribe(i=>{var n,o,s;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==i.actionResult.success){this.isValidDate=e,this.InputType="OPD"==this.bookingtype?4:3;var a=JSON.parse(i.actionResult.result);this.RegistrationMainModel=a=a||[],null!=(null===(n=this.RegistrationMainModel)||void 0===n?void 0:n.DateOfBirth)&&null!=(null===(o=this.RegistrationMainModel)||void 0===o?void 0:o.DateOfBirth)&&(this.RegistrationMainModel.DateOfBirth=new Date(null===(s=this.RegistrationMainModel)||void 0===s?void 0:s.DateOfBirth)),this.RegistrationMainModel.SlotBookingId=t.split("-")[0],this.RegMode="update",this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}CloseModal(){this.RegMode=null}OnUpdateRegDetails(t){"Update"==t&&(this.RegMode=null,this.LoadOnlineRegistrationListByFilter(0,10))}ReplyPaitent(t,e,i,n,o,s,a){if(this.maxDate=new Date(new Date(o).getFullYear(),new Date(o).getMonth(),new Date(o).getDate(),23,59,59),this.IsSelectDoctor=!1,this.status=i,this.LoadReplyReason(i),this.LstPaitentMessageReplyLog.UserId=t,this.LstPaitentMessageReplyLog.RepliedBy=this.loginUserId,this.LstPaitentMessageReplyLog.RepliedOn=new Date,this.LstPaitentMessageReplyLog.ReasonId="",this.LstPaitentMessageReplyLog.Remarks="",this.LstPaitentMessageReplyLog.SlotBookingId=e,this.LstPaitentMessageReplyLog.IsAllMemberSelect=!1,this.IsGrouphead=a,this.BookingType=s,"IPD"===this.BookingType)if(this.PeriodFrom=new Date(n),new Date(this.datepipe.transform(new Date(o),"yyyy-MM-dd"))>new Date(this.datepipe.transform(new Date,"yyyy-MM-dd")))this.PeriodUpto=new Date,this.CheckOutDate=new Date;else{this.PeriodUpto=new Date(o),this.CheckOutDate=new Date(o);var r=new Date;this.CheckOutDate.setHours(r.getHours()),this.CheckOutDate.setMinutes(r.getMinutes()),this.CheckOutDate.setSeconds(r.getSeconds()),this.CheckOutDate.setMilliseconds(r.getMilliseconds())}this.cdRef.detectChanges(),this.LoadDoctorListByClinic(e)}LoadDoctorListByClinic(t,e=""){this.CancelCharge=0,this.AutogenerateVoucher=!1,this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetAvailableDoctor(t,this.ClinicIdSelected,"other").subscribe(e=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var i=JSON.parse(e.actionResult.result);this.LstDoctorMster=i=i||[],this.cdRef.detectChanges(),this.ShowReplyModel=!0,this.SlotBookingIdSelectedId=t,this.LoadCrediNoteBalance()}else this._UtilityService.showWarningAlert(e.actionResult.errMsg),this.LstDoctorMster=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadRoomListBySlotId(t){this._UtilityService.showSpinner(),this.unsubscribe.add=this._RoomServices.GetRoomListBySlotId(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstRoomMster=e=e||[],null!=t.actionResult.stringVal&&null!=t.actionResult.stringVal&&(this.bookedRoomCount=t.actionResult.stringVal),this.cdRef.detectChanges()}else this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.lstRoomMster=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadReplyReason(t){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetReplyReasonMaster(t,this.bookingtype,this.ClinicIdSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);e=e||[],1==this.filteritems[0].IsGrouped&&0==this.filteritems[0].IsGrouphead&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]&&(e=e.filter(t=>t.BookingStatus!==this.bookingStatus.Admitted)),this.LstReplyReason=e,this.cdRef.detectChanges()}else this.LstReplyReason=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ddlReplyReasonChange(){var t;this.lstSelectedRoom=[],this.bookedRoomCount=0,this.IsCancelCharge=!1,this.prepostCharge=0,this.IsSelectDoctor=(this.status!=this.bookingStatus[this.bookingStatus.UnderReview]||"60f94501513904c09133bc30"!=this.LstPaitentMessageReplyLog.ReasonId)&&this.status==this.bookingStatus[this.bookingStatus.UnderReview],"6131ff3d7008ed3c20eb80d2"==this.LstPaitentMessageReplyLog.ReasonId&&1==(null===(t=this.lsobjClinicMaster)||void 0===t?void 0:t.IsCancelCharge)&&(this.IsCancelCharge=!0),"6131eabe7008ed3c20eb80cf"==this.LstPaitentMessageReplyLog.ReasonId&&this.LoadRoomListBySlotId(this.LstPaitentMessageReplyLog.SlotBookingId)}BeforSubmitReply(){this.filteritems=[],this.filteritems=this.LstRegistrationMainModelList.filter(t=>t.SlotBookingId==this.LstPaitentMessageReplyLog.SlotBookingId);var t=new Date(this.datepipe.transform(this.filteritems[0].PeriodFrom,"yyyy-MM-dd")),e=new Date(this.datepipe.transform(this.filteritems[0].PeriodUpto,"yyyy-MM-dd"));(this.RemainingAmount>0||new Date(this.datepipe.transform(this.filteritems[0].TodayDate,"yyyy-MM-dd"))>new Date(t)&&new Date(this.datepipe.transform(this.filteritems[0].TodayDate,"yyyy-MM-dd"))<new Date(e))&&"6131eabe7008ed3c20eb80cf"==this.LstPaitentMessageReplyLog.ReasonId?this.confirmationService.confirm({header:"Confirmation",message:this.RemainingAmount>0&&new Date(this.datepipe.transform(this.filteritems[0].TodayDate,"yyyy-MM-dd"))>new Date(t)&&new Date(this.datepipe.transform(this.filteritems[0].TodayDate,"yyyy-MM-dd"))<new Date(e)?"Patient admission date is "+this.datepipe.transform(this.filteritems[0].PeriodFrom,"yyyy-MM-dd")+". & Payment not settled  - Are you sure you want to continue?":this.RemainingAmount>0?"Payment not settled  - Are you sure you want to continue?":"Patient admission date is "+this.datepipe.transform(this.filteritems[0].PeriodFrom,"yyyy-MM-dd")+". - Are you sure you want to continue?",icon:"pi pi-exclamation-triangle",accept:()=>{this.SubmitReply()},reject:()=>{new Date(this.datepipe.transform(this.filteritems[0].TodayDate,"yyyy-MM-dd"))>new Date(t)&&new Date(this.datepipe.transform(this.filteritems[0].TodayDate,"yyyy-MM-dd"))<new Date(e)&&"6131eabe7008ed3c20eb80cf"==this.LstPaitentMessageReplyLog.ReasonId&&this.ShowChangePeriodModel(this.filteritems[0].SlotBookingId,this.filteritems[0].UserId,this.filteritems[0].ClinicId,this.filteritems[0].ChangedCount,"New")}}):this.SubmitReply()}SubmitReply(){var t,e;this.filteritems=[],this.filteritems=this.LstRegistrationMainModelList.filter(t=>t.SlotBookingId==this.LstPaitentMessageReplyLog.SlotBookingId);var i=new Date(this.datepipe.transform(this.filteritems[0].PeriodFrom,"yyyy-MM-dd")),n=new Date(this.datepipe.transform(this.filteritems[0].PeriodUpto,"yyyy-MM-dd"));if(n.setDate(n.getDate()+7),this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Discharged]&&"6131eabe7008ed3c20eb80cf"==this.LstPaitentMessageReplyLog.ReasonId){if(new Date(n)<new Date(this.datepipe.transform(this.filteritems[0].TodayDate,"yyyy-MM-dd")))return void this._UtilityService.showWarningAlert("Invalid Admitted date")}else if("6131eabe7008ed3c20eb80d0"==this.LstPaitentMessageReplyLog.ReasonId);else{if("6131ff3d7008ed3c20eb80d2"!=this.LstPaitentMessageReplyLog.ReasonId&&!this.filteritems[0].IsValidDate)return void this._UtilityService.showWarningAlert("Invalid date to take action");if(null==this.LstPaitentMessageReplyLog.ReasonId||""==this.LstPaitentMessageReplyLog.ReasonId)return void this._UtilityService.showWarningAlert("Please Select Action");if(this.status==this.bookingStatus[this.bookingStatus.UnderReview]&&"60f94501513904c09133bc30"!=this.LstPaitentMessageReplyLog.ReasonId&&(null==this.LstPaitentMessageReplyLog.DoctorId||""==this.LstPaitentMessageReplyLog.DoctorId))return void this._UtilityService.showWarningAlert("Please Select Doctor");if("6131eabe7008ed3c20eb80cf"==this.LstPaitentMessageReplyLog.ReasonId&&new Date(i)>new Date(this.datepipe.transform(this.filteritems[0].TodayDate,"yyyy-MM-dd")))return void this._UtilityService.showWarningAlert("Invalid Admitted date");if("6131eabe7008ed3c20eb80cf"==this.LstPaitentMessageReplyLog.ReasonId&&0==(null===(t=this.lstSelectedRoom)||void 0===t?void 0:t.length))return void this._UtilityService.showWarningAlert("Please select Room");if("6131eabe7008ed3c20eb80cf"==this.LstPaitentMessageReplyLog.ReasonId&&(null===(e=this.lstSelectedRoom)||void 0===e?void 0:e.length)!=this.bookedRoomCount)return void this._UtilityService.showWarningAlert("Please select only required Rooms");if("608a60556ef8bc2976a92078"==this.LstPaitentMessageReplyLog.ReasonId&&this.LstPaitentMessageReplyLog.Remarks.length<=0&&(this.userTypes.Doctor==this.UserType||this.userTypes.CallCenter==this.UserType))return void this._UtilityService.showWarningAlert("Please enter Remarks");if("6131eabe7008ed3c20eb80d0"==this.LstPaitentMessageReplyLog.ReasonId&&(null==this.CheckOutDate||null==this.CheckOutDate))return void this._UtilityService.showWarningAlert("Please Select Discharged Date");if(!0===this.filteritems[0].IsPrescription&&"OPD"===this.filteritems[0].BookingType&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]&&"6131ff3d7008ed3c20eb80d2"==this.LstPaitentMessageReplyLog.ReasonId)return void this._UtilityService.showWarningAlert("Prescription already generated/saved for this booking. It can't be cancelled.")}if("6131eabe7008ed3c20eb80d0"==this.LstPaitentMessageReplyLog.ReasonId)this.confirmationService.confirm({header:"Confirmation",message:"Discharge Summary is mandatory before Discharged - Are you sure you want to Discharged?",icon:"pi pi-exclamation-triangle",accept:()=>{this.LstPaitentMessageReplyLog.CheckOutDate=this.CheckOutDate;var t={};t.replyLog=this.LstPaitentMessageReplyLog,t.CancelCharge=this._ConstantServices.nullToZeroConverter(this.CancelCharge),t.AutogenerateVoucher=this.AutogenerateVoucher,this._UtilityService.showSpinner(),this.unsubscribe.add=this._RegistrationServices.PaitentReplyMessage(t).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.ShowReplyModel=!1,this.LoadOnlineRegistrationListByFilter(0,10)):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}});else{var o={};o.replyLog=this.LstPaitentMessageReplyLog,o.CancelCharge=this._ConstantServices.nullToZeroConverter(this.CancelCharge),o.AutogenerateVoucher=this.AutogenerateVoucher,"6131eabe7008ed3c20eb80cf"==this.LstPaitentMessageReplyLog.ReasonId&&(o.lstRooms=this.lstSelectedRoom),this._UtilityService.showSpinner(),this.unsubscribe.add=this._RegistrationServices.PaitentReplyMessage(o).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.ShowReplyModel=!1,this.LoadOnlineRegistrationListByFilter(0,10),"60f94501513904c09133bc30"==this.LstPaitentMessageReplyLog.ReasonId&&this.ConfirmBookRoom(this.LstPaitentMessageReplyLog.SlotBookingId)):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}}ConfirmBookRoom(t){this.filteritems=[],this.filteritems=this.LstRegistrationMainModelList.filter(e=>e.SlotBookingId==t),this.GroupCount=this.filteritems[0].IsGrouped?this.filteritems[0].GroupCount:this.GroupCount,this.IsGrouped=!!this.filteritems[0].IsGrouped&&this.filteritems[0].IsGrouped,(0==this.filteritems[0].IsGrouped||1==this.filteritems[0].IsGrouped&&1==this.filteritems[0].IsGrouphead&&1==this.LstPaitentMessageReplyLog.IsAllMemberSelect)&&this.confirmationService.confirm({message:"want to book room ?",accept:()=>{this.ShowBookingModel(this.filteritems[0].SlotBookingId,this.filteritems[0].UserId,this.filteritems[0].ClinicId,"New")}})}AdditionalRemarks(t,e){this.LstPaitentMessageReplyLog.UserId=t,this.LstPaitentMessageReplyLog.RepliedBy=this.loginUserId,this.LstPaitentMessageReplyLog.RepliedOn=new Date,this.LstPaitentMessageReplyLog.ReasonId="643648844564cfe3f5938715",this.LstPaitentMessageReplyLog.Remarks="",this.LstPaitentMessageReplyLog.SlotBookingId=e,this.LstPaitentMessageReplyLog.IsAllMemberSelect=!1,this.ShowAdditionalRemarksModel=!0}AddAdditionalRemarks(){this.LstPaitentMessageReplyLog.Remarks.length<=0?this._UtilityService.showWarningAlert("Please enter Remarks"):(this._UtilityService.showSpinner(),this.unsubscribe.add=this._RegistrationServices.AddAdditionalRemarks(this.LstPaitentMessageReplyLog).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.ShowAdditionalRemarksModel=!1,this.LoadOnlineRegistrationListByFilter(0,10))},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}AllotDoctor(t){this.SlotBookingIdSelectedId=t,this.ShowAllotDoctorModel=!0}AllotSuccess(t){this.ShowAllotDoctorModel=!1,this.SlotBookingIdSelectedId=null,this._UtilityService.showSuccessAlert(null==t?void 0:t.Message),this.LoadOnlineRegistrationListByFilter(0,10)}ReferToDentist(t){this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.ReferToDentist(!0,t,this.loginUserId).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadOnlineRegistrationListByFilter(0,10)):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}SuspendBooking(t){this.confirmationService.confirm({header:"Confirmation",message:"Are you sure want to Suspend Booking?",icon:"pi pi-exclamation-triangle",accept:()=>{this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.SuspendBooking(!0,t,this.loginUserId).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadOnlineRegistrationListByFilter(0,10)):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}})}ReferToCompanion(t,e){this.confirmationService.confirm({header:"Confirmation",message:"Are you sure want to change booking into "+(1==e?"Companion":"non Companion"),icon:"pi pi-exclamation-triangle",accept:()=>{this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.ReferToCompanion(e,t,this.loginUserId).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadOnlineRegistrationListByFilter(0,10)):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}})}GetSlotRemarks(t){this.SlotBookingIdSelectedId=t,this.ShowRemarksModel=!0}DownloadVoucher(t){this._UtilityService.showSpinner(),this._PatientServices.DownloadBookingVoucher(t),this._UtilityService.hideSpinner()}ShowInvoiceList(t,e){this.SlotBookingIdSelectedId=t,this.IsGroupedSelected=e,this.ShowInvoiceListModel=!0}GetTrustDetailsHistory(){if(null==this.TenderObj.MemberShipNumber||null==this.TenderObj.MemberShipNumber||""==this.TenderObj.MemberShipNumber)return this.lstTrustHistory=[],void this._UtilityService.showWarningAlert("Please enter membership number");this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetTrustDetailsHistory(this.TenderObj.MemberShipNumber).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstTrustHistory=e=e||[],this.cdRef.detectChanges()}else this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.lstTrustHistory=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ShowCreditBalanceModel(t){this.SlotBookingIdSelectedId=t,this.ShowCreditNoteBalance=!0}ShowBookingModel(t,e,i,n,o=!1){if(this.ClinicIdSelected=i,this.SlotBookingIdSelectedId=t,this.UserIdSelectedId=e,this.LoadCrediNoteBalance(),"New"===n&&(localStorage.removeItem("BookRoomPeriodFrom"),localStorage.removeItem("BookRoomPeriodUpto")),o){this.IsExtended=!0,this.TenderList(),localStorage.removeItem("BookRoomPeriodFrom");var s=this.datepipe.transform(this.filteritems[0].PeriodUpto,"yyyy-MM-dd");localStorage.setItem("BookRoomPeriodFrom",s)}-330===this._ConstantServices.timeZoneOffset?this.ShowRoomBookingModel=!0:this._UtilityService.showWarningAlert("Your System's Time zone is incorrect. This can cause data discrepancy. Please go to Windows Setting and set it to (UTC+5:30).")}EmitPermittedBy(t){this.permittedBy=t,null!=this.permittedBy&&null!=this.permittedBy&&""!=this.permittedBy||this._UtilityService.showWarningAlert("Permitted By is required"),null!=this.roomBookIngMaster&&null!=this.roomBookIngMaster&&this.roomBookIngMaster.length>0&&this.roomBookIngMaster.forEach(t=>{t.PermittedBy=this.permittedBy,this.cdRef.detectChanges()})}roomBookClick(t){if(null==t)this.roomBookIngMaster=[];else if(0==t.Status||0==t.RequiredRooms||null==t.RequiredRooms)this.roomBookIngMaster=this.roomBookIngMaster.filter(e=>e.Index!==t.Index);else if(t.RequiredRooms>0&&(0==t.RequiredExtraBed||null==t.RequiredExtraBed)){this.upsert(this.roomBookIngMaster,t);var e=this.roomBookIngMaster.findIndex(e=>e.Index==t.Index);null!=e&&null!=e&&(this.roomBookIngMaster[e].RequiredExtraBed=0)}else t.RequiredRooms>0&&this.upsert(this.roomBookIngMaster,t)}upsert(t,e){const i=t.findIndex(t=>t.Index===e.Index);i>-1?t[i]=e:t.push(e)}LoadAuthorizedMaster(){var t="";this.UserTypeCurre!==a.s.SuperAdmin&&(t=this.ClinicIdSelected),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetAuthorizedMaster(t,!0).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstAuthorizedMaster=e=e||[],this.cdRef.detectChanges()}else this.lstAuthorizedMaster=[]},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}awaitBookRoomm(){var t,e;this.PackageMapping=[],(null===(t=this.Package)||void 0===t?void 0:t.length)>0&&this.IsGrouped?this.ShowPackageModel=!0:(null===(e=this.Package)||void 0===e?void 0:e.length)>0&&!this.IsGrouped?(this.Package.forEach(t=>{let e={};e.MemberSlotId=this.SlotBookingIdSelectedId,e.MCODE=t.pckg.MCODE,this.PackageMapping.push(e)}),this.BookRoom()):this.BookRoom()}EmitSelectedMapping(t){this._UtilityService.showSuccessAlert("Assigned Package Successfully."),this.PackageMapping=t,this.ShowPackageModel=!1,this.BookRoom()}BookRoom(){var t,e,i,n;return Object(s.a)(this,void 0,void 0,function*(){this.CreditNoteNumber=null,this.CreditNoteTranAmount=0,this.MaxCreditNoteAmount=0,this.BillWiseDiscountPer=0,this.BillWiseDiscountAmount=0,this.ReferredBy="",this.RequestedBy="";var o=1,s=0,r=null;{const e=yield this._PatientServices.GetTotalGroupMemberBySlotId(this.SlotBookingIdSelectedId).toPromise();if(1==e.actionResult.success&&(o=e.actionResult.stringVal,null!=e.actionResult.result2&&null!=e.actionResult.result2&&(null===(t=e.actionResult.result2)||void 0===t?void 0:t.length)>0)){var l=JSON.parse(e.actionResult.result2);r=l=l||[]}}if(this.roomBookIngMaster.map(t=>{s=s+(t.RequiredRooms*t.DefaultBed||0)+(t.RequiredExtraBed||0)}),null!=this.roomBookIngMaster&&null!=this.roomBookIngMaster)if(0!=(null===(e=this.roomBookIngMaster)||void 0===e?void 0:e.length))if((null===(i=this.roomBookIngMaster)||void 0===i?void 0:i.length)>1)this._UtilityService.showWarningAlert("Please select room only one category for booking");else if(this.IsExtended&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Confirmed]&&null!=r&&null!=r&&(null==r?void 0:r.length)>0&&(1!=(null==r?void 0:r.length)||r[0].Count!=this.roomBookIngMaster[0].RequiredRooms||this.roomBookIngMaster[0].RoomTypeId!=r[0].RoomTypeId))this._UtilityService.showWarningAlert("Room Category should be same for extend period in confirmed state.");else if(this.roomBookIngMaster[0].DaysCount<1)this._UtilityService.showWarningAlert("IPD Should be minimum 1 Days");else if(!this.IsExtended||null!=this.roomBookIngMaster[0].PermittedBy&&null!=this.roomBookIngMaster[0].PermittedBy&&""!=this.roomBookIngMaster[0].PermittedBy)if(s<o)this._UtilityService.showWarningAlert("Selected bed ("+s+") count is less than applied occupancy ("+o+").");else{this.slotBookingMaster.SlotBookingId=this.SlotBookingIdSelectedId,this.slotBookingMaster.SlotBookedBy=localStorage.getItem("userId"),this.slotBookingMaster.PeriodFrom=new Date(Date.parse(this.datepipe.transform(this.roomBookIngMaster[0].RoomBookFromDate,"yyyy-MM-dd"))),this.slotBookingMaster.PeriodUpto=new Date(Date.parse(this.datepipe.transform(this.roomBookIngMaster[0].RoomBookToDate,"yyyy-MM-dd"))),localStorage.setItem("BookRoomPeriodFrom",this.datepipe.transform(this.roomBookIngMaster[0].RoomBookFromDate,"yyyy-MM-dd")),localStorage.setItem("BookRoomPeriodUpto",this.datepipe.transform(this.roomBookIngMaster[0].RoomBookToDate,"yyyy-MM-dd")),this.bookingMainModel.ClinicId=this.ClinicIdSelected,this.bookingMainModel.RoomBooking=this.roomBookIngMaster;var c=[];if(c.push(this.slotBookingMaster),this.bookingMainModel.SlotBooking=c,this.ItemCheckedTotal=0,this.roomBookIngMaster.map(t=>{this.ItemCheckedTotal=this.ItemCheckedTotal+t.RoomPrice*t.DaysCount*t.RequiredRooms}),this.ItemPriceRes=[],"IPD"==this.bookingtype){var d=0;this.roomBookIngMaster.map(t=>{this.IsExtended||0!=d||0==t.IPDRegPriceWithGST||null==t.IPDRegPriceWithGST||null==t.IPDRegPriceWithGST||this.ItemPriceRes.push({BillItemId:"",MCODE:a.i.IPDRegistrationCharge,Description:"Registration Charges",Qty:o,UNIT:"PCS",MRP:t.IPDRegPriceWithGST,GST:0,PriceWithGST:t.IPDRegPriceWithGST*o,DiscountAmount:0,IsChecked:!0,DiscountPer:0,NETAMOUNT:t.IPDRegPriceWithGST*o}),this.ItemPriceRes.push({BillItemId:"",MCODE:t.MCODE,Description:t.RoomTypeName,Qty:t.DaysCount*t.RequiredRooms,UNIT:"PCS",MRP:t.RoomPrice-t.RoomOtherCharges,GST:t.GST,PriceWithGST:(t.PriceWithGST-t.RoomOtherCharges)*t.DaysCount*t.RequiredRooms,DiscountAmount:t.DiscountAmount,IsChecked:!0,DiscountPer:0,NETAMOUNT:(t.PriceWithGST-t.RoomOtherCharges)*t.DaysCount*t.RequiredRooms}),0!=t.RoomOtherCharges&&null!=t.RoomOtherCharges&&null!=t.RoomOtherCharges&&(d+=1,this.ItemPriceRes.push({BillItemId:"",MCODE:a.i.TreatmentOtherCharge,Description:"Treatment, Therapies & Medicated Food Charges~"+t.MCODE,Qty:t.DaysCount*t.RequiredRooms,UNIT:"PCS",MRP:t.RoomOtherCharges,GST:t.GST,PriceWithGST:t.RoomOtherCharges*t.DaysCount*t.RequiredRooms,DiscountAmount:t.DiscountAmount,IsChecked:!0,DiscountPer:0,NETAMOUNT:t.RoomOtherCharges*t.DaysCount*t.RequiredRooms})),0!=t.RequiredExtraBed&&null!=t.RequiredExtraBed&&null!=t.RequiredExtraBed&&(d+=1,this.ItemPriceRes.push({BillItemId:"",MCODE:this.roomBookIngMaster[0].ExbedMCODE,Description:"Extra Bed Charges~"+t.MCODE,Qty:t.DaysCount*t.RequiredExtraBed,UNIT:"PCS",MRP:t.ExbedPriceWithGST-t.RoomOtherChargesExb,GST:0,PriceWithGST:(t.ExbedPriceWithGST-t.RoomOtherChargesExb)*t.DaysCount*t.RequiredExtraBed,DiscountAmount:0,IsChecked:!0,DiscountPer:0,NETAMOUNT:(t.ExbedPriceWithGST-t.RoomOtherChargesExb)*t.DaysCount*t.RequiredExtraBed}),0!=t.RoomOtherChargesExb&&null!=t.RoomOtherChargesExb&&null!=t.RoomOtherChargesExb&&(d+=1,this.ItemPriceRes.push({BillItemId:"",MCODE:a.i.TreatmentOtherCharge,Description:"Treatment, Therapies & Medicated Food Charges~"+t.MCODE+","+t.ExbedMCODE,Qty:t.DaysCount*t.RequiredExtraBed,UNIT:"PCS",MRP:t.RoomOtherChargesExb,GST:0,PriceWithGST:t.RoomOtherChargesExb*t.DaysCount*t.RequiredExtraBed,DiscountAmount:0,IsChecked:!0,DiscountPer:0,NETAMOUNT:t.RoomOtherChargesExb*t.DaysCount*t.RequiredExtraBed}))),d+=1}),null!=this.Package&&(null===(n=this.Package)||void 0===n?void 0:n.length)>0&&this.Package.map(t=>{this.ItemPriceRes.push({BillItemId:"",MCODE:t.pckg.MCODE,Description:t.pckg.PackageName,Qty:t.pckg.Qty,UNIT:"PCS",MRP:t.pckg.SellingPrice,GST:0,PriceWithGST:t.pckg.Qty*t.pckg.SellingPrice,DiscountAmount:0,IsChecked:!0,DiscountPer:0,NETAMOUNT:t.pckg.SellingPrice})})}this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscount(),this.IsPartialPayment=!1,this.AmountRecPer=0,this.ReceiveAmount=0,this.cdRef.detectChanges(),this.TenderObj.MemberShipNumber=null,this.lstTrustHistory=[],this.LoadAuthorizedMaster(),this.ShowItemPriceModel=!0}else this._UtilityService.showWarningAlert("Permitted By is required");else this._UtilityService.showWarningAlert("Please Select Any Room for Booking");else this._UtilityService.showWarningAlert("Please Select Any Room for Booking")})}ShowSelectedItem(){var t;if((null===(t=this.selectedPaymodeCodes)||void 0===t?void 0:t.length)>0){const t=this.selectedPaymodeCodes.indexOf("ATONLN"),e=this.selectedPaymodeCodes.indexOf("ATWLONLN");t>-1?this.selectedPaymodeCodes=this.selectedPaymodeCodes.filter(function(t){return"ATONLN"==t}):e>-1&&(this.selectedPaymodeCodes=this.selectedPaymodeCodes.filter(function(t){return"ATWLONLN"==t})),this.SelectPaymodeArray=this.selectedPaymodeCodes.toString().split(",")}else this.SelectPaymodeArray=[]}PayPackageFirstStep(t,e){this.BankDepTrnCounter=1,this.CardTrnCounter=1,this.lstBankDepositTransactionDetails=[],this.lstCardPaymentTransactionDetails=[],this.SlotBookingIdSelectedId=t,this.UserIdSelectedId=e,this.LoadItemPriceTotal(),this.lstBankDepositTransactionDetails.push({Sequence:this.BankDepTrnCounter,BankName:"",TransactionId:"",RecdDate:null,Amount:0}),this.lstCardPaymentTransactionDetails.push({Sequence:this.CardTrnCounter,CardNumber:"",CardholderName:"",TransactionId:"",RecdDate:null,Amount:0}),this.TenderObj.TrustId=null,this.TenderObj.TMemberTypeId=null,this.TenderObj.MemberShipNumber=null,this.cdRef.detectChanges(),this.clearPaymentMethod(),this.ShowPaymentMethodModel=!0}FireforPayment(){var t,e,i,n,o,s,a,r,l,c;if(this.PaymentTransactionDetails=[],this.lstTenderModel=[],0!=(null===(t=this.SelectPaymodeArray)||void 0===t?void 0:t.length)){var d=0;if(this.SelectPaymodeArray.includes("AT01002")){if((null==this.TenderObj.CASH||null==this.TenderObj.CASH||this.TenderObj.CASH<=0)&&this.NetPaybleTotal>0&&0==this.IsPartialPayment)return void this._UtilityService.showWarningAlert("Please enter Cash Tender Amount");if(null==this.TenderObj.CashRecdDate||null==this.TenderObj.CashRecdDate)return void this._UtilityService.showWarningAlert("Please enter Cash Tender Amount Received Date");(S={ACCOUNT:"AT01002"}).AMOUNT=this.TenderObj.CASH,S.APPROVALCODE="",S.TRNMODE="Cash",S.REMARKS=this.TenderObj.REMARKS,S.CreditNoteNumber=this.CreditNoteTranAmount>0?this.CreditNoteNumber:null,S.CreditNoteAmount=this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0,this.lstTenderModel.push(S),this.PaymentTransactionDetails.push({TrnMode:"Cash",Remarks:this.TenderObj.REMARKS,ReceivedDate:this.TenderObj.CashRecdDate,Amount:this.TenderObj.CASH,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),d+=this.TenderObj.CASH}if(this.SelectPaymodeArray.includes("AT999999")){for(var h=!0,u=0;u<this.lstCardPaymentTransactionDetails.length;u++)(null==this.lstCardPaymentTransactionDetails[u].TransactionId||null==this.lstCardPaymentTransactionDetails[u].TransactionId||""==this.lstCardPaymentTransactionDetails[u].TransactionId||null==this.lstCardPaymentTransactionDetails[u].RecdDate||null==this.lstCardPaymentTransactionDetails[u].RecdDate||""==this.lstCardPaymentTransactionDetails[u].RecdDate||null==(null===(e=this.lstCardPaymentTransactionDetails[u])||void 0===e?void 0:e.Amount)||null==(null===(i=this.lstCardPaymentTransactionDetails[u])||void 0===i?void 0:i.Amount)||(null===(n=this.lstCardPaymentTransactionDetails[u])||void 0===n?void 0:n.Amount)<=0)&&1==h&&(h=!1);if(0==h)return void this._UtilityService.showWarningAlert("Please enter Transaction Details Properly");if(null==this.TenderObj.CARDAMT||null==this.TenderObj.CARDAMT||this.TenderObj.CARDAMT<=0)return void this._UtilityService.showWarningAlert("Please enter Card tender Amount");var b="",m="",g="";this.lstCardPaymentTransactionDetails.map(t=>{this.PaymentTransactionDetails.push({TrnMode:"Card",Remarks:this.TenderObj.REMARKS,CardNo:t.CardNumber,CardHolderName:t.CardHolderName,TransactionId:t.TransactionId,ReceivedDate:t.RecdDate,Amount:t.Amount,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),b=b+t.TransactionId+",",g=g+t.CardHolderName+",",m=m+t.CardNumber+","}),(S={ACCOUNT:"AT999999"}).AMOUNT=this.TenderObj.CARDAMT,S.APPROVALCODE="",S.TRNMODE="Card",S.REMARKS=this.TenderObj.REMARKS,S.CARDNO=null==m?void 0:m.trimEnd(),S.CARDHOLDERNAME=null==g?void 0:g.trimEnd(),S.TRANSACTIONID=null==b?void 0:b.trimEnd(),S.CreditNoteNumber=this.CreditNoteTranAmount>0?this.CreditNoteNumber:null,S.CreditNoteAmount=this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0,this.lstTenderModel.push(S),d+=this.TenderObj.CARDAMT}if(this.SelectPaymodeArray.includes("LB1199")){if(null==this.TenderObj.CREDITAMT||null==this.TenderObj.CREDITAMT||this.TenderObj.CREDITAMT<=0)return void this._UtilityService.showWarningAlert("Please enter Credit Amount");(S={ACCOUNT:"LB1199"}).AMOUNT=this.TenderObj.CREDITAMT,S.APPROVALCODE="",S.TRNMODE="Credit",S.REMARKS=this.TenderObj.REMARKS,this.lstTenderModel.push(S),S.CreditNoteNumber=this.CreditNoteTranAmount>0?this.CreditNoteNumber:null,S.CreditNoteAmount=this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0,this.PaymentTransactionDetails.push({TrnMode:"Credit",Remarks:this.TenderObj.REMARKS,ReceivedDate:new Date,Amount:this.TenderObj.CREDITAMT,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),d+=this.TenderObj.CREDITAMT}if(this.SelectPaymodeArray.includes("BT01001")){for(h=!0,u=0;u<this.lstBankDepositTransactionDetails.length;u++)(null==this.lstBankDepositTransactionDetails[u].BankName||null==this.lstBankDepositTransactionDetails[u].BankName||""==this.lstBankDepositTransactionDetails[u].BankName||null==this.lstBankDepositTransactionDetails[u].TransactionId||null==this.lstBankDepositTransactionDetails[u].TransactionId||""==this.lstBankDepositTransactionDetails[u].TransactionId||null==this.lstBankDepositTransactionDetails[u].RecdDate||null==this.lstBankDepositTransactionDetails[u].RecdDate||""==this.lstBankDepositTransactionDetails[u].RecdDate||null==this.lstBankDepositTransactionDetails[u].Amount||null==this.lstBankDepositTransactionDetails[u].Amount||(null===(o=this.lstBankDepositTransactionDetails[u])||void 0===o?void 0:o.Amount)<=0)&&1==h&&(h=!1);if(0==h)return void this._UtilityService.showWarningAlert("Please enter Transaction Details Properly");if(null==this.TenderObj.BANKTFAMOUNT||null==this.TenderObj.BANKTFAMOUNT||this.TenderObj.BANKTFAMOUNT<=0)return void this._UtilityService.showWarningAlert("Please enter Bank Deposit Amount");b="";var p="";this.lstBankDepositTransactionDetails.map(t=>{this.PaymentTransactionDetails.push({TrnMode:"Bank Transfer",Remarks:this.TenderObj.REMARKS,BankName:t.BankName,TransactionId:t.TransactionId,ReceivedDate:t.RecdDate,Amount:t.Amount,TrustId:this.TenderObj.TrustId,TMemberTypeId:this.TenderObj.TMemberTypeId,MemberShipNumber:this.TenderObj.MemberShipNumber}),b=b+t.TransactionId+",",p=p+t.BankName+","}),(S={ACCOUNT:"BT01001"}).AMOUNT=this.TenderObj.BANKTFAMOUNT,S.APPROVALCODE="",S.TRNMODE="BANK TRANSFER",S.REMARKS=this.TenderObj.REMARKS,S.TRANSACTIONID=b.trimEnd(),S.CARDHOLDERNAME=p.trimEnd(),S.CreditNoteNumber=this.CreditNoteTranAmount>0?this.CreditNoteNumber:null,S.CreditNoteAmount=this.CreditNoteTranAmount>0?this.CreditNoteTranAmount:0,this.lstTenderModel.push(S),d+=this.TenderObj.BANKTFAMOUNT}if(this.SelectPaymodeArray.includes("DI01001")){if(null==this.TenderObj.CHEQUEAMT||null==this.TenderObj.CHEQUEAMT||this.TenderObj.CHEQUEAMT<=0)return void this._UtilityService.showWarningAlert("Please enter Cheque tender Amount");if(null==this.TenderObj.CHEQUENO||null==this.TenderObj.CHEQUENO||(null===(s=this.TenderObj.CHEQUENO)||void 0===s?void 0:s.length)<=0)return void this._UtilityService.showWarningAlert("Please enter Cheque Number");if(null==this.TenderObj.BANK||null==this.TenderObj.BANK||(null===(a=this.TenderObj.BANK)||void 0===a?void 0:a.length)<=0)return void this._UtilityService.showWarningAlert("Please enter Cheque Issued Bank Name");if(null==this.TenderObj.ChequeRecdDate||null==this.TenderObj.ChequeRecdDate)return void this._UtilityService.showWarningAlert("Please enter Cheque Received Date");if(null==this.TenderObj.ChequeIssueDate||null==this.TenderObj.ChequeIssueDate)return void this._UtilityService.showWarningAlert("Please enter Cheque Issued Date");var S;this.PaymentTransactionDetails.push({TrnMode:"Cheque",Remarks:this.TenderObj.REMARKS,IssueDate:this.TenderObj.ChequeIssueDate,ReceivedDate:this.TenderObj.ChequeRecdDate,Amount:this.TenderObj.CHEQUEAMT,DepositedBy:this.TenderObj.DepositedBy,BankName:this.TenderObj.BANK,ChequeNumber:this.TenderObj.CHEQUENO,ChequeHolderName:this.TenderObj.ChequeHolderName}),(S={ACCOUNT:"DI01001"}).AMOUNT=this.TenderObj.CHEQUEAMT,S.APPROVALCODE="",S.TRNMODE="Cheque",S.REMARKS=this.TenderObj.REMARKS,S.CARDNO=null===(r=this.TenderObj.CHEQUENO)||void 0===r?void 0:r.trimEnd(),S.CARDHOLDERNAME=null===(l=this.TenderObj.BANK)||void 0===l?void 0:l.trimEnd(),this.lstTenderModel.push(S),d+=this.TenderObj.CHEQUEAMT}if((null===(c=this.lstTenderModel)||void 0===c?void 0:c.length)>0){if(Math.round(d)<Math.round(this.NetPaybleTotal)&&0==this.IsPartialPayment||Math.round(d)<Math.round(this.NetPaybleTotal)&&1==this.IsPartialPayment&&this.ReceiveAmount>0)return void this._UtilityService.showWarningAlert("Input Amount not match with Total Amount");if(Math.round(d)>Math.round(this.NetPaybleTotal)&&0==this.IsPartialPayment||Math.round(d)>Math.round(this.NetPaybleTotal)&&1==this.IsPartialPayment&&this.ReceiveAmount>0)return void this._UtilityService.showWarningAlert("Input Amount not match with Total Amount")}if(!this.SelectPaymodeArray.includes("ATONLN")&&!this.SelectPaymodeArray.includes("ATWLONLN")){if(null!=this.TenderObj.TrustId||null!=this.TenderObj.TrustId){if(null==this.TenderObj.TMemberTypeId||null==this.TenderObj.TMemberTypeId)return void this._UtilityService.showWarningAlert("Please select member type");if(null==this.TenderObj.MemberShipNumber||null==this.TenderObj.MemberShipNumber||""==this.TenderObj.MemberShipNumber)return void this._UtilityService.showWarningAlert("Please enter membership number")}if(null!=this.TenderObj.TMemberTypeId||null!=this.TenderObj.TMemberTypeId){if(null==this.TenderObj.TrustId||null==this.TenderObj.TrustId)return void this._UtilityService.showWarningAlert("Please select trust type");if(null==this.TenderObj.MemberShipNumber||null==this.TenderObj.MemberShipNumber||""==this.TenderObj.MemberShipNumber)return void this._UtilityService.showWarningAlert("Please enter membership number")}if(this.TenderObj.MemberShipNumber){if(null==this.TenderObj.TrustId||null==this.TenderObj.TrustId)return void this._UtilityService.showWarningAlert("Please select trust type");if(null==this.TenderObj.TMemberTypeId||null==this.TenderObj.TMemberTypeId)return void this._UtilityService.showWarningAlert("Please select member type")}}this.IsExtended?this.RoomExtend():this.IsPrepone||this.IsPostpone?this.ChangeBookingPeriodPayByCash():this.IsCancelCharge?this.SubmitReply():this.BookingPayment(),this.Package={}}else this._UtilityService.showWarningAlert("Please select payment mode")}onFileSelectBankDepositSlip(t,e){var i;if((null===(i=t.target.files)||void 0===i?void 0:i.length)>0){const i=t.target.files[0];[".jpg",".png",".jpeg",".pdf"].includes("."+i.type.split("/")[1])?i.size>5242880?($("#"+e).val(""),"AttBankslip1"==e&&(this.fileInputLabelAttBankslip1="",this.BankDepositSlip1Att=""),this._UtilityService.showWarningAlert("Maximum 5 MB file can be Uploaded")):"AttBankslip1"==e&&(this.fileInputLabelAttBankslip1=i.name,this.fileUploadAttBankslip1.get("AttBankslip1").setValue(i)):($("#"+e).val(""),"AttBankslip1"==e&&(this.fileInputLabelAttBankslip1="",this.BankDepositSlip1Att=""),this._UtilityService.showWarningAlert("Only jpg, png and pdf Allowed!")),this.cdRef.detectChanges()}}BookingPayment(){"IPD"==this.bookingtype?(this.IsIPD=!0,this.RoomBooking()):"OPD"==this.bookingtype&&(this.IsIPD=!1,this.OPDBookingPayment(this.SlotBookingIdSelectedId))}RoomBooking(){this.NewItemDetails=[],this.TotalPaybleAmount=0,this.bookingMainModel.PayMode=this.SelectPaymodeArray.includes("ATONLN")?"Online":this.SelectPaymodeArray.includes("ATWLONLN")?"WLOnline":"Other",this.bookingMainModel.PaybleAmount=Math.round(this.NetPaybleTotal),this.bookingMainModel.ActualNetPayble=this.ActualNetPayble,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.SaveRoomBookingDetails(this.bookingMainModel).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){this.ShowRoomBookingModel=!1;var e=JSON.parse(t.actionResult.result);(e=e||[]).map(t=>{var e=this.ItemPriceRes.findIndex(e=>e.MCODE==t.MCODE);this.ItemPriceRes[e].BillItemId=t.BillItemId});var i=JSON.parse(t.actionResult.result2);this.OrderRes=i=i||[];var n=JSON.parse(t.actionResult.result3);this.UserRes=n=n||[],this.SelectPaymodeArray.includes("ATONLN")?this.HitforPayment():this.SelectPaymodeArray.includes("ATWLONLN")?this.HitforWLPayment():(this.ItemPriceRes.map(t=>{this.TotalPaybleAmount=this.TotalPaybleAmount+t.PriceWithGST}),this.ItemPriceRes.map(t=>{this.NewItemDetails.push({BillItemId:t.BillItemId,MCODE:t.MCODE,Description:t.Description,MRP:t.MRP,SELLINGPRICE:t.MRP,Qty:t.Qty,INDDISCOUNTRATE:this.nullToZeroConverter(t.DiscountPer),DCRATE:this.nullToZeroConverter(this.BillWiseDiscountPer),lstTenderModel:this.lstTenderModel})}),this.SlotBookingPayOtherMode())}else this._UtilityService.showWarningAlert(t.actionResult.errMsg)})}ChangeRoom(t){this.ShowItemPriceModel=!1,this.ShowRazorPayModel=!1,this.ShowWLPayModel=!1,this.ShowBookingModel(t,localStorage.getItem("userId"),this.ClinicIdSelected,"Edit")}OPDBookingPayment(t){this.NewItemDetails=[],this.TotalPaybleAmount=0;var e="Other";this.SelectPaymodeArray.includes("ATONLN")?e="Online":this.SelectPaymodeArray.includes("ATWLONLN")&&(e="WLOnline"),this.SlotBookingIdSelectedId=t,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.OPDBookingPayment(t,e,Math.round(this.NetPaybleTotal)).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);(e=e||[]).map(t=>{var e=this.ItemPriceRes.findIndex(e=>e.MCODE==t.MCODE);this.ItemPriceRes[e].BillItemId=t.BillItemId});var i=JSON.parse(t.actionResult.result2);this.OrderRes=i=i||[];var n=JSON.parse(t.actionResult.result3);this.UserRes=n=n||[],this.SelectPaymodeArray.includes("ATONLN")?this.HitforPayment():this.SelectPaymodeArray.includes("ATWLONLN")?this.HitforWLPayment():(this.TotalPaybleAmount=this.NetPaybleTotal,this.ItemPriceRes.map(t=>{this.NewItemDetails.push({BillItemId:t.BillItemId,MCODE:t.MCODE,Description:t.Description,MRP:t.MRP,SELLINGPRICE:t.MRP,INDDISCOUNTRATE:this.nullToZeroConverter(t.DiscountPer),DCRATE:this.nullToZeroConverter(this.BillWiseDiscountPer),Qty:t.Qty,lstTenderModel:this.lstTenderModel})}),this.SlotBookingPayOtherMode())}else this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}HitforWLPayment(){this.ShowWLPayModel=!0}GetWLPaymentStatusEmit(t){t.includes("~")&&"Success"===t.split("~")[0]&&(this.ShowWLPayModel=!1,this.ShowPaymentMethodModel=!1,this.ShowItemPriceModel=!1,this.LoadOnlineRegistrationListByFilter(0,10),this.LoadCrediNoteBalance())}HitforPayment(){this.ShowRazorPayModel=!0}GetPaymentStatusEmit(t){t.includes("~")&&"Success"===t.split("~")[0]&&(this.ShowRazorPayModel=!1,this.ShowPaymentMethodModel=!1,this.ShowItemPriceModel=!1,this.LoadOnlineRegistrationListByFilter(0,10),this.LoadCrediNoteBalance())}SlotBookingPayByCash(){this.BankDepTrnCounter=1,this.lstBankDepositTransactionDetails=[],this.lstCardPaymentTransactionDetails=[],this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.ReferredBy||""==this.ReferredBy||null==this.ReferredBy)||this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.ReferredBy.trim().length<=0?this._UtilityService.showWarningAlert("Please enter Authorized By"):this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&(null==this.RequestedBy||""==this.RequestedBy||null==this.RequestedBy)||this.ItemTotalDiscount+this.BillWiseDiscountAmount>0&&this.RequestedBy.trim().length<=0?this._UtilityService.showWarningAlert("Please enter Requested By"):this.IsPartialPayment&&this.ReceiveAmount<=0&&1!=this.clinicDetails.IsPartialBooking100?this._UtilityService.showWarningAlert("Receive Amount Should be Greater than Zero"):(this.lstBankDepositTransactionDetails.push({Sequence:this.BankDepTrnCounter,BankName:"",TransactionId:"",RecdDate:null,Amount:0}),this.lstCardPaymentTransactionDetails.push({Sequence:this.CardTrnCounter,CardNumber:"",CardholderName:"",TransactionId:"",RecdDate:null,Amount:0}),this.ActualNetPayble=this.NetPaybleTotal,this.NetPaybleTotal=this.IsPartialPayment&&this.ReceiveAmount>0?this.ReceiveAmount:this.IsPartialPayment&&this.ReceiveAmount<=0?0:this.NetPaybleTotal,this.TenderObj.TrustId=null,this.TenderObj.TMemberTypeId=null,this.TenderObj.MemberShipNumber=null,this.cdRef.detectChanges(),this.clearPaymentMethod(),this.NetPaybleTotal<=0?(this.selectedPaymodeCodes=["AT01002"],this.SelectPaymodeArray=this.selectedPaymodeCodes.toString().split(","),this.TenderObj.CASH=0,this.TenderObj.CashRecdDate=new Date,this.cdRef.detectChanges(),this.FireforPayment()):this.ShowPaymentMethodModel=!0)}AddCardPaymentDetails(){this.CardTrnCounter++,this.lstCardPaymentTransactionDetails.push({Sequence:this.CardTrnCounter,CardNumber:"",CardHolderName:"",TransactionId:"",RecdDate:null,Amount:0}),this.cdRef.detectChanges()}RemoveCardPaymentDetails(t){this.lstCardPaymentTransactionDetails=this.lstCardPaymentTransactionDetails.filter(e=>e.Sequence!==t),this.CalculateTotalCardPaymentrev(),this.cdRef.detectChanges()}CalculateTotalCardPayment(t,e){if(t.value>0){null!=this.TenderObj.CARDAMT&&null!=this.TenderObj.CARDAMT||(this.TenderObj.CARDAMT=0);var i=0;(null==(n=this.lstCardPaymentTransactionDetails.filter(t=>t.Sequence!=e))?void 0:n.length)>0&&n.map(t=>{i+=t.Amount}),this.TenderObj.CARDAMT=i+t.value,this.cdRef.detectChanges()}else{var n;null!=this.TenderObj.CARDAMT&&null!=this.TenderObj.CARDAMT||(this.TenderObj.CARDAMT=0),i=0,(null==(n=this.lstCardPaymentTransactionDetails.filter(t=>t.Sequence!=e))?void 0:n.length)>0&&n.map(t=>{i+=t.Amount}),this.TenderObj.CARDAMT=i,this.cdRef.detectChanges()}}CalculateTotalCardPaymentrev(){var t=0;this.lstCardPaymentTransactionDetails.map(e=>{t+=e.Amount}),this.TenderObj.CARDAMT=t,this.cdRef.detectChanges()}ShowGenerateCreditNote(t,e,i){this.remarks=null,this.TenderObj.CREDITAMT=0,this.SlotBookingIdSelectedId=e,this.SelectedBookingType=i,this.cdRef.detectChanges(),this.ShowGenerateCreditModel=!0}GenerateCreditNote(){if(null!=this.TenderObj.CREDITAMT&&null!=this.TenderObj.CREDITAMT&&0!=this.TenderObj.CREDITAMT)if(null!=this.remarks&&null!=this.remarks&&0!=this.remarks.trim().length){var t={};t.Amount=this.TenderObj.CREDITAMT,t.SlotBookingId=this.SlotBookingIdSelectedId,t.Purpose=this.remarks.trim(),t.CreatedBy=localStorage.getItem("userId"),t.ModifiedBy=localStorage.getItem("userId"),t.ClinicId=this.ClinicIdSelected,t.RequestType="Credit",this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddEditCreditRefundApproval(t).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.ShowGenerateCreditModel=!1)},t=>{this._UtilityService.hideSpinner()})}else this._UtilityService.showWarningAlert("Please enter Purpose");else this._UtilityService.showWarningAlert("Please Enter Credit Amount")}onFileSelectRefundAppSlip(t,e){var i;if((null===(i=t.target.files)||void 0===i?void 0:i.length)>0){const i=t.target.files[0];[".jpg",".png",".jpeg",".pdf"].includes("."+i.type.split("/")[1])?i.size>5242880?($("#"+e).val(""),"AttRefAppslip1"==e&&(this.fileInputLabelAttRefAppslip1="",this.AttRefundSlip1Att=""),this._UtilityService.showWarningAlert("Maximum 5 MB file can be Uploaded")):"AttRefAppslip1"==e&&(this.fileInputLabelAttRefAppslip1=i.name,this.fileUploadAttRefslip1.get("AttRefAppslip1").setValue(i)):($("#"+e).val(""),"AttRefAppslip1"==e&&(this.fileInputLabelAttRefAppslip1="",this.AttRefundSlip1Att=""),this._UtilityService.showWarningAlert("Only jpg, png and pdf Allowed!")),this.cdRef.detectChanges()}}UploadRefundApprovalSlip(t,e){const i=new FormData;this.fileUploadAttRefslip1.get("AttRefAppslip1").value&&(i.append(this.AttRefundSlip1Att,this.fileUploadAttRefslip1.get("AttRefAppslip1").value),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UploadBankDepositSlip(i,t,e,"Refund").subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success&&this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}CheckCreditNote(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetNetBalanceCreditNote(this.ClinicIdSelected,this.SlotBookingIdSelectedId,this.CreditNoteNumber).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?this.MaxCreditNoteAmount=t.actionResult.totalAmount:(this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.MaxCreditNoteAmount=0)},t=>{this._UtilityService.hideSpinner(),this.MaxCreditNoteAmount=0}),this.cdRef.detectChanges()}SlotBookingPayOtherMode(){var t={};t.ItemPriceRes=this.ItemPriceRes,t.NetPayble=this.NetPaybleTotal,t.SlotBookingId=this.SlotBookingIdSelectedId,t.TenderDetails=this.NewItemDetails,t.ReferredBy=this.ReferredBy,t.RequestedBy=this.RequestedBy,t.BillWiseDiscountPer=this.BillWiseDiscountPer,t.PaymentTransactionDetails=this.PaymentTransactionDetails,t.ActualNetPayble=this.ActualNetPayble,t.ModifiedBy=localStorage.getItem("userId"),t.userTypeId=localStorage.getItem("userTypeId"),t.PackageMapping=this.PackageMapping;const e=new FormData;this.fileUploadAttBankslip1.get("AttBankslip1").value&&e.append("BookingSlipAtt",this.fileUploadAttBankslip1.get("AttBankslip1").value),e.append("data",this.encryptDecryptService.encryptUsingAES256(JSON.stringify(t))),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.SlotBookingPayByCash(e).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?this._UtilityService.showSuccessAlert(t.actionResult.errMsg):this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.ShowPaymentMethodModel=!1,this.ShowItemPriceModel=!1,this.LoadOnlineRegistrationListByFilter(0,10),this.LoadCrediNoteBalance()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}UpdateTransactionDetails(t,e){var i;(null===(i=this.PaymentTransactionDetails)||void 0===i?void 0:i.length)>0&&(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UpdateTransactionDetails(this.PaymentTransactionDetails,e,t).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}nullToZeroConverter(t){return null==t||null==t||""==t||"Infinity"==t||"NaN"==t||isNaN(parseFloat(t))?0:parseFloat(t)}AddBankTransactionDetails(){this.BankDepTrnCounter++,this.lstBankDepositTransactionDetails.push({Sequence:this.BankDepTrnCounter,BankName:"",TransactionId:"",RecdDate:null,Amount:0}),this.cdRef.detectChanges()}RemoveBankTransactionDetails(t){this.lstBankDepositTransactionDetails=this.lstBankDepositTransactionDetails.filter(e=>e.Sequence!==t),this.CalculateTotalBankTransactionrev(),this.cdRef.detectChanges()}RoomExtend(){this.NewItemDetails=[],this.TotalPaybleAmount=0,this.bookingMainModel.PayMode=this.SelectPaymodeArray.includes("ATONLN")?"Online":this.SelectPaymodeArray.includes("ATWLONLN")?"WLOnline":"Other",this.bookingMainModel.PaybleAmount=Math.round(this.NetPaybleTotal),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.SaveExtendRoomBookingDetails(this.bookingMainModel).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){this.ShowRoomBookingModel=!1;var e=JSON.parse(t.actionResult.result);(e=e||[]).map(t=>{var e=this.ItemPriceRes.findIndex(e=>e.MCODE==t.MCODE);this.ItemPriceRes[e].BillItemId=t.BillItemId});var i=JSON.parse(t.actionResult.result2);this.OrderRes=i=i||[];var n=JSON.parse(t.actionResult.result3);this.UserRes=n=n||[],this.SelectPaymodeArray.includes("ATONLN")?this.HitforPayment():this.SelectPaymodeArray.includes("ATWLONLN")?this.HitforWLPayment():(this.ItemPriceRes.map(t=>{this.TotalPaybleAmount=this.TotalPaybleAmount+t.PriceWithGST}),this.ItemPriceRes.map(t=>{this.NewItemDetails.push({BillItemId:t.BillItemId,MRP:t.MRP,SELLINGPRICE:t.MRP,Qty:t.Qty,MCODE:t.MCODE,Description:t.Description,INDDISCOUNTRATE:this.nullToZeroConverter(t.DiscountPer),DCRATE:this.nullToZeroConverter(this.BillWiseDiscountPer),lstTenderModel:this.lstTenderModel})}),this.SlotExtendBookingPayByCash())}else this._UtilityService.showWarningAlert(t.actionResult.errMsg)})}SlotExtendBookingPayByCash(){var t={};t.ItemPriceRes=this.ItemPriceRes,t.NetPayble=this.NetPaybleTotal,t.SlotBookingId=this.SlotBookingIdSelectedId,t.TenderDetails=this.NewItemDetails,t.ReferredBy=this.ReferredBy,t.RequestedBy=this.RequestedBy,t.BillWiseDiscountPer=this.BillWiseDiscountPer,t.PaymentTransactionDetails=this.PaymentTransactionDetails,t.ActualNetPayble=this.ActualNetPayble,t.ModifiedBy=localStorage.getItem("userId"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.SlotExtendBookingPayByCash(t).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.SelectPaymodeArray.includes("BT01001")&&this.UploadBankDepositSlip(t.actionResult.stringVal,this.SlotBookingIdSelectedId)):this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.ShowPaymentMethodModel=!1,this.ShowItemPriceModel=!1,1==t.actionResult.success&&this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Admitted]?window.open("#/room-management/room-reserve-date-wise?bookingNo="+this.filteritems[0].BookingNumber,"_self"):(this.LoadOnlineRegistrationListByFilter(0,10),this.LoadCrediNoteBalance())},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}CalculateReceiveAmount(){this.ReceiveAmount=this.NetPaybleTotal>0&&this.AmountRecPer>0?this.NetPaybleTotal*this.AmountRecPer/100:0}CalculateReceiveAmountNew(t){this.ReceiveAmount=this.NetPaybleTotal>0&&t.value>0?this.NetPaybleTotal*t.value/100:0}CalculateReceivePer(){this.NetPaybleTotal>0?(this.ReceiveAmount>this.NetPaybleTotal&&(this.ReceiveAmount=this.NetPaybleTotal),this.AmountRecPer=this.ReceiveAmount>0?100*this.ReceiveAmount/this.NetPaybleTotal:0):this.AmountRecPer=0}CalculateReceivePerNew(t){this.AmountRecPer=this.NetPaybleTotal>0&&t.value>0?100*t.value/this.NetPaybleTotal:0}ClosePaymentMethod(){this.ShowPaymentMethodModel=!1,this.CalculateNetPaybleAfterDiscount(),this.IsPartialPayment&&this.CalculateReceivePer()}ShowGroupMemberModel(t){this.filterGroup=[],this.filterGroup=this.LstRegistrationMainModelList.filter(e=>e.GroupNumber==t),this.filterGroup.map(t=>{t.Isverfied=!1,t.IsUpdated=!1,t.NewMRNumber=null}),this.ShowGroupModel=!0}ValidateMRNO(t,e){this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.ValidateMRNumberandBooking(t,e).subscribe(e=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var i=this.filterGroup.findIndex(e=>e.SlotBookingId===t);this.filterGroup[i].Isverfied=!0,this._UtilityService.showSuccessAlert(e.actionResult.errMsg)}else this._UtilityService.showWarningAlert(e.actionResult.errMsg),this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}UpdateGroupMember(t,e){this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UpdateNewGroupMember(t,e).subscribe(e=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var i=e.actionResult.result[0],n=this.filterGroup.findIndex(e=>e.SlotBookingId===t);this.filterGroup[n].IsUpdated=!0,this.filterGroup[n].PaitentName=i.fullName,this.filterGroup[n].MRNo=i.mrNo,this.filterGroup[n].ContactNumber=i.contactNumber,this.cdRef.detectChanges(),this.confirmationService.confirm({header:"Confirmation",message:e.actionResult.errMsg,icon:"pi pi-exclamation-triangle",accept:()=>{this.ShowGroupModel=!1,this.SearchMRNo=i.mrNo,this.LoadOnlineRegistrationListByFilter(0,10)},reject:()=>{this.ShowGroupModel=!1,this.LoadOnlineRegistrationListByFilter(0,10)}})}else this._UtilityService.showWarningAlert(e.actionResult.errMsg),this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ShowGroupHeadModel(t,e){this.filterGroup=[],this.filterGroup=this.LstRegistrationMainModelList.filter(t=>t.GroupNumber==e),this.SlotBookingIdSelectedId=t,this.ShowHeadGroupModel=!0}UpdateGroupHead(t){this.confirmationService.confirm({header:"Confirmation",message:"Are you sure want to Change Group Head?",icon:"pi pi-exclamation-triangle",accept:()=>{this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UpdateNewGroupHead(this.SlotBookingIdSelectedId,t).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success?(this.ShowHeadGroupModel=!1,this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadOnlineRegistrationListByFilter(0,10)):(this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.cdRef.detectChanges())},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}})}ShowChangePeriodModel(t,e,i,n,o){new Date(this.datepipe.transform(this.filteritems[0].PeriodUpto,"yyyy-MM-dd"))<new Date("2022-08-01")?this._UtilityService.showWarningAlert("you can not change period which booking had done befor 01-08-2022. Please cancel this booking and create new booking for same"):(this.CreditNoteNumber=null,this.CreditNoteTranAmount=0,this.MaxCreditNoteAmount=0,this.ItemTotalDiscount=0,this.BillWiseDiscountPer=0,this.BillWiseDiscountAmount=0,this.ReferredBy="",this.RequestedBy="",this.IsPrepone=!1,this.IsPostpone=!1,this.prepostCharge=0,this.ClinicIdSelected=i,this.SlotBookingIdSelectedId=t,this.UserIdSelectedId=e,this.changedCount=n,this.changeDate=null,this.remarks=null,this.IsPartialPayment=!1,this.ShowPeriodChangeModel=!0,this.cdRef.detectChanges())}ChangePeriodDate(){var t,e;this.IsPrepone=!1,this.IsPostpone=!1,this.datepipe.transform(this.filteritems[0].PeriodFrom,"yyyy-MM-dd")!==this.datepipe.transform(this.changeDate,"yyyy-MM-dd")?(new Date(this.datepipe.transform(this.filteritems[0].PeriodFrom,"yyyy-MM-dd"))<new Date(this.datepipe.transform(this.changeDate,"yyyy-MM-dd"))?1==(null===(t=this.lsobjClinicMaster)||void 0===t?void 0:t.IsPostPoneCharge)&&(this.IsPostpone=!0):new Date(this.datepipe.transform(this.filteritems[0].PeriodFrom,"yyyy-MM-dd"))>new Date(this.datepipe.transform(this.changeDate,"yyyy-MM-dd"))&&(null===(e=this.lsobjClinicMaster)||void 0===e?void 0:e.IsPreponeCharge)&&(this.IsPrepone=!0),this.TenderList()):this._UtilityService.showWarningAlert("Please change existing date")}ChangePeriod(){var t;if(""==this.changeDate||null==this.changeDate||null==this.changeDate)return void this._UtilityService.showWarningAlert("Please select change start date");if(""==(null===(t=this.remarks)||void 0===t?void 0:t.trim())||null==this.remarks||null==this.remarks)return void this._UtilityService.showWarningAlert("Please enter remarks");if(null!=this.changeDate&&null!=this.changeDate&&(this.changeDate=this.datepipe.transform(this.changeDate,"yyyy-MM-dd")),this.datepipe.transform(this.filteritems[0].PeriodFrom,"yyyy-MM-dd")===this.datepipe.transform(this.changeDate,"yyyy-MM-dd"))return void this._UtilityService.showWarningAlert("Please change existing date");let e={};e.clinicId=this.ClinicIdSelected,e.slotBookingId=this.SlotBookingIdSelectedId,e.dFrom=new Date(this.datepipe.transform(this.changeDate,"yyyy-MM-dd")),e.createdBy=this.loginUserId,e.remarks=this.remarks,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.ChangeBookingPeriod(e).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success?(this.ShowPeriodChangeModel=!1,this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadOnlineRegistrationListByFilter(0,10)):this._UtilityService.showWarningAlert(t.actionResult.errMsg)})}ChangePeriodWithPayment(){var t;if(""!=(null===(t=this.remarks)||void 0===t?void 0:t.trim())&&null!=this.remarks&&null!=this.remarks)if(null!=this.changeDate&&null!=this.changeDate&&(this.changeDate=this.datepipe.transform(this.changeDate,"yyyy-MM-dd")),this.datepipe.transform(this.filteritems[0].PeriodFrom,"yyyy-MM-dd")!==this.datepipe.transform(this.changeDate,"yyyy-MM-dd"))if(0==this.IsPartialPayment){let t={};t.slotBookingId=this.SlotBookingIdSelectedId,t.percentage=this.prepostCharge,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.CalculateBookingChargesPercentage(t).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success?(this.ItemPriceRes=[],this.ItemPriceRes.push({BillItemId:"",MCODE:this.IsPostpone?a.i.PostPoneCharge:a.i.PreponeCharge,Description:this.IsPostpone?"Postpone Charges":"Prepone Charges",Qty:1,UNIT:"PCS",MRP:t.actionResult.stringVal,GST:0,PriceWithGST:t.actionResult.stringVal,DiscountAmount:0,IsChecked:!0,DiscountPer:0,NETAMOUNT:t.actionResult.stringVal}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscount(),this.IsPartialPayment=!1,this.AmountRecPer=0,this.ReceiveAmount=0,this.cdRef.detectChanges(),this.TenderObj.MemberShipNumber=null,this.lstTrustHistory=[],this.SlotBookingPayByCash()):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}else this.ReceiveAmount>0?this.SlotBookingPayByCash():(this.ActualNetPayble=this._ConstantServices.nullToZeroConverter(this.NetPaybleTotal),this.NetPaybleTotal=this.IsPartialPayment&&this._ConstantServices.nullToZeroConverter(this.ReceiveAmount)<=0?this._ConstantServices.nullToZeroConverter(0):this._ConstantServices.nullToZeroConverter(this.NetPaybleTotal),this.selectedPaymodeCodes=["AT01002"],this.SelectPaymodeArray=this.selectedPaymodeCodes.toString().split(","),this.TenderObj.CASH=0,this.TenderObj.CashRecdDate=new Date,this.cdRef.detectChanges(),this.FireforPayment());else this._UtilityService.showWarningAlert("Please change existing date");else this._UtilityService.showWarningAlert("Please enter remarks")}ChangeBookingPeriodPayByCash(){this.NewItemDetails=[],this.ItemPriceRes.map(t=>{this.NewItemDetails.push({BillItemId:t.BillItemId,MRP:t.MRP,SELLINGPRICE:t.MRP,Qty:t.Qty,MCODE:t.MCODE,Description:t.Description,INDDISCOUNTRATE:this.nullToZeroConverter(t.DiscountPer),DCRATE:this.nullToZeroConverter(this.BillWiseDiscountPer),lstTenderModel:this.lstTenderModel})});var t={};t.ItemPriceRes=this.ItemPriceRes,t.NetPayble=this.NetPaybleTotal,t.SlotBookingId=this.SlotBookingIdSelectedId,t.TenderDetails=this.NewItemDetails,t.ReferredBy=this.ReferredBy,t.RequestedBy=this.RequestedBy,t.BillWiseDiscountPer=this.BillWiseDiscountPer,t.PaymentTransactionDetails=this.PaymentTransactionDetails,t.ActualNetPayble=this.ActualNetPayble,t.ModifiedBy=localStorage.getItem("userId"),t.dFrom=new Date(this.datepipe.transform(this.changeDate,"yyyy-MM-dd")),t.percentageCharge=this.prepostCharge,t.remarks=this.remarks,t.userTypeId=localStorage.getItem("userTypeId"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.ChangeBookingPeriodPayByCash(t).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.SelectPaymodeArray.includes("BT01001")&&this.UploadBankDepositSlip(t.actionResult.stringVal,this.SlotBookingIdSelectedId)):this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.ShowPaymentMethodModel=!1,this.ShowItemPriceModel=!1,this.ShowPeriodChangeModel=!1,this.LoadOnlineRegistrationListByFilter(0,10),this.LoadCrediNoteBalance()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ShowAddMemberModel(t,e,i,n){this.ClinicIdSelected=i,this.SlotBookingIdSelectedId=t,this.UserIdSelectedId=e,this.newslotBookingId=null,this.LoadIndividualApprovedListByFilter(),this.remarks=null,this.ShowMemberAddModel=!0}LoadIndividualApprovedListByFilter(){let t={};t.clinicId=this.ClinicIdSelected,t.bookingtype="IPD",t.dFrom=new Date(this.datepipe.transform(this.dFrom,"yyyy-MM-dd")),t.dTo=new Date(this.datepipe.transform(this.dTo,"yyyy-MM-dd")),t.IsAllGrouped=1,t.bookingStatus=this.bookingStatus.Approved,t.first="0",t.rows="10",t.IsSkipPaging=!0;let e=[];null!=this.SerachPeriodFromDate&&null!=this.SerachPeriodFromDate&&e.push({SearchBy:"PeriodFrom",SearchVal:this.datepipe.transform(this.SerachPeriodFromDate,"yyyy-MM-dd")}),null!=this.SerachPeriodToDate&&null!=this.SerachPeriodToDate&&"IPD"==this.bookingtype&&e.push({SearchBy:"PeriodUpto",SearchVal:this.datepipe.transform(this.SerachPeriodToDate,"yyyy-MM-dd")}),e.push({SearchBy:"BookingStatus",SearchVal:this.bookingStatus.Approved.toString()}),e.push({SearchBy:"PatientType",SearchVal:"1"}),e.push({SearchBy:"IsCGHS",SearchVal:"2"}),t.SearchList=e,t.searchtxt="",this._UtilityService.showSpinner(),this.unsubscribe.add=this._RegistrationServices.GetOnlineRegistrationListByFilter(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.approvedUserList=e=e||[],this.cdRef.detectChanges()}else this.approvedUserList=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}confirm(t){(""!=this.newslotBookingId&&null!=this.newslotBookingId&&null!=this.newslotBookingId||""!=this.remarks)&&null!=this.remarks&&null!=this.remarks?(this.ShowMemberAddModel=!1,this.confirmationService.confirm({target:t.target,header:"Confirmation",message:"Do you want to navigate 'billing service' page for payment?",icon:"pi pi-exclamation-triangle",accept:()=>{this.AddNewGroupMember(!0)},reject:()=>{this.AddNewGroupMember(!1)}})):this._UtilityService.showWarningAlert("Please select new member and write remarks.")}AddNewGroupMember(t){let e={};e.clinicId=this.ClinicIdSelected,e.slotBookingId=this.SlotBookingIdSelectedId,e.newslotBookingId=this.newslotBookingId,e.createdBy=this.loginUserId,e.remarks=this.remarks,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddNewGroupMember(e).subscribe(e=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success?(this.ShowMemberAddModel=!1,t&&window.open("#/payment/extra-item-entry?id="+this.SlotBookingIdSelectedId),this._UtilityService.showSuccessAlert(e.actionResult.errMsg),this.LoadOnlineRegistrationListByFilter(0,10)):this._UtilityService.showWarningAlert(e.actionResult.errMsg)})}ShowTeriff(){this.lstTeriffDeyails=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetFutureRoomPriceDateWise(this.ClinicIdSelected).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstTeriffDeyails=e=e||[],this.showTeriffMRPDetails=!0}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}),this.cdRef.detectChanges()}ViewMemberShipDetailsBySlotId(t){this.showMembershipDetails=!0,this.SlotBookingIdSelectedId=t,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.ViewMemberShipDetailsBySlotId(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.UserMemberShipDetails=e=e||[],this.UserMemberShipDetails.update=!0,this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Discharged]&&(this.UserMemberShipDetails.bookingStatus=!0),this.cdRef.detectChanges()}else this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.UserMemberShipDetails={},this.filteritems[0].BookingStatus===this.bookingStatus[this.bookingStatus.Discharged]&&(this.UserMemberShipDetails.bookingStatus=!0),this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}UpdateMemberShipDetailsBySlotId(){null!=this.UserMemberShipDetails.MemberShipNumber&&null!=this.UserMemberShipDetails.MemberShipNumber&&""!=this.UserMemberShipDetails.MemberShipNumber&&null!=this.UserMemberShipDetails.TrustId&&null!=this.UserMemberShipDetails.TrustId&&""!=this.UserMemberShipDetails.TrustId&&null!=this.UserMemberShipDetails.TMemberTypeId&&null!=this.UserMemberShipDetails.TMemberTypeId&&""!=this.UserMemberShipDetails.TMemberTypeId?(this.showMembershipDetails=!0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.UpdateMemberShipDetailsBySlotId(this.SlotBookingIdSelectedId,this.UserMemberShipDetails.TrustId,this.UserMemberShipDetails.TMemberTypeId,this.UserMemberShipDetails.MemberShipNumber).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.showMembershipDetails=!1,this.SlotBookingIdSelectedId=null,this.UserMemberShipDetails={},this.cdRef.detectChanges()):(this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.UserMemberShipDetails={},this.SlotBookingIdSelectedId=null,this.cdRef.detectChanges())},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this._UtilityService.showWarningAlert("Please Fill All Membership Details")}CloseMemberShipModel(){this.showMembershipDetails=!1,this.TenderObj.TrustId=null,this.TenderObj.TMemberTypeId=null,this.TenderObj.MemberShipNumber=null}ShowPatientDetails(t,e,i=""){"OPD"==i?window.open("#/doctor/opd-prescription?PatientId="+t+"&SlotBookingId="+e+"&tag="+i,"_self"):window.open("#/doctor/ipd-new-prescription?PatientId="+t+"&SlotBookingId="+e+"&tag="+i,"_self")}PrintPrescription(t,e,i){"OPDIPD"==i?window.open("#/print/opd-ipd-print-prescription?SlotBookingId="+e):"IPD"==i?window.open("#/print/ipd-print-prescription?UserId="+t+"&SlotBookingId="+e+"&tag="+i):window.open("#/print/patient-print-prescription?UserId="+t+"&SlotBookingId="+e+"&tag="+i)}GetPrescriptionSaveDetails(t){this.SlotBookingIdSelectedId=t,this.ShowPrescriptionSaveModel=!0}AttachedSignedForm(t,e,i){this.FormType=e,this.HeaderName=i,this.SlotBookingIdSelectedId=t,this.ShowAttachedFormModel=!0}FileSuccessUpload(t){this.ShowAttachedFormModel=!1,this.FormType=0,this.HeaderName=null,this.SlotBookingIdSelectedId=null,this._UtilityService.showSuccessAlert(t)}LoadAttachedSignedForm(t,e,i){this.FormType=e,this.HeaderName=i,this.SlotBookingIdSelectedId=t,this.ShowDownloadFormModel=!0}closeDialog(){this.FormType=0,this.HeaderName=null,this.SlotBookingIdSelectedId=null}ShowWaitingRoom(t,e){this.lstDoctorWithCountAllot=[],this.SlotBookingIdSelectedId=e,this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetDoctoListWaitingCount(this.datepipe.transform(new Date,"yyyy-MM-dd").toString(),e,this.ClinicIdSelected).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);if(this.lstDoctorWithCountAllot=i=i||[],null!=t.actionResult.result2&&null!=t.actionResult.result2&&(null===(e=t.actionResult.result2)||void 0===e?void 0:e.length)>0){var n=JSON.parse(t.actionResult.result2);this.SelectedDoctorIdToken=(n=n||[])[0].DoctorId,this.CurrentAssignedToken=n[0].RoomNumber}else this.CurrentAssignedToken=null,this.SelectedDoctorIdToken=null;this.ShowNewDoctorAllModel=!0}else this.lstDoctorWithCountAllot=[]},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}),this.cdRef.detectChanges()}GenerateManualToken(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GenerateConsultToken(this.SlotBookingIdSelectedId,this.SelectedDoctorIdToken,this.datepipe.transform(new Date,"yyyy-MM-dd").toString(),localStorage.getItem("userId"),"true",this.ClinicIdSelected).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.LoadOnlineRegistrationListByFilter(0,10),this.SelectedDoctorIdToken=null,this.ShowNewDoctorAllModel=!1)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}GenerateAutoToken(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GenerateConsultToken(this.SlotBookingIdSelectedId,this.SelectedDoctorIdToken,this.datepipe.transform(new Date,"yyyy-MM-dd").toString(),localStorage.getItem("userId"),"false",this.ClinicIdSelected).subscribe(t=>{this._UtilityService.hideSpinner(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.LoadOnlineRegistrationListByFilter(0,10),this.SelectedDoctorIdToken=null,this.ShowNewDoctorAllModel=!1)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}onFilter(t,e){this.filteredValuesLength=t.filteredValue.length}ClearFilter(){this.SearchBookingNumber=null,this.SearchName=null,this.SearchMRNo=null,this.SearchContactNumber=null,this.SearchANLNumber=null,this.SearchOPNumber=null,this.SearchIPNumber=null,this.SerachPeriodFromDate=null,this.SerachPeriodToDate=null,this.SerachStatusbooking=0,this.SerachPatientType=0,this.SerachSuspended=0,this.SerachCompanion=0,this.SerachCGHS="0",this.SearchInsuranceNo=null,this.SearchCheckedInDate=null,this.SearchCheckedOutDate=null,this.LoadOnlineRegistrationListByFilter(0,10)}exportToItemExcel(){let t={reportname:"HealthSeekerBooking",filename:"HealthSeekerBooking"};t.clinicId=this.ClinicIdSelected,t.bookingtype=this.bookingtype,t.dFrom=new Date(this.datepipe.transform(this.dFrom,"yyyy-MM-dd")),t.dTo=new Date(this.datepipe.transform(this.dTo,"yyyy-MM-dd")),t.IsAllGrouped=this.IsAllGrouped,t.bookingStatus=this.statusbooking,t.searchtxt=this.searchtxt,t.first="0",t.rows="10",t.IsSkipPaging=!0,t.isExcel=!0;let e=[];null!=this.SearchBookingNumber&&null!=this.SearchBookingNumber&&""!=this.SearchBookingNumber&&e.push({SearchBy:"BookingNumber",SearchVal:this.SearchBookingNumber.trim()}),null!=this.SearchName&&null!=this.SearchName&&""!=this.SearchName&&e.push({SearchBy:"FullName",SearchVal:this.SearchName.trim()}),null!=this.SearchMRNo&&null!=this.SearchMRNo&&""!=this.SearchMRNo&&e.push({SearchBy:"MRNo",SearchVal:this.SearchMRNo.trim()}),null!=this.SearchContactNumber&&null!=this.SearchContactNumber&&""!=this.SearchContactNumber&&e.push({SearchBy:"ContactNumber",SearchVal:this.SearchContactNumber.trim()}),null!=this.SearchANLNumber&&null!=this.SearchANLNumber&&""!=this.SearchANLNumber&&e.push({SearchBy:"AnnualNumber",SearchVal:this.SearchANLNumber.trim()}),null!=this.SearchOPNumber&&null!=this.SearchOPNumber&&""!=this.SearchOPNumber&&e.push({SearchBy:"OPNumber",SearchVal:this.SearchOPNumber.trim()}),null!=this.SearchIPNumber&&null!=this.SearchIPNumber&&""!=this.SearchIPNumber&&e.push({SearchBy:"IPNumber",SearchVal:this.SearchIPNumber.trim()}),null!=this.SerachPeriodFromDate&&null!=this.SerachPeriodFromDate&&e.push({SearchBy:"PeriodFrom",SearchVal:this.datepipe.transform(this.SerachPeriodFromDate,"yyyy-MM-dd")}),null!=this.SerachPeriodToDate&&null!=this.SerachPeriodToDate&&"IPD"==this.bookingtype&&e.push({SearchBy:"PeriodUpto",SearchVal:this.datepipe.transform(this.SerachPeriodToDate,"yyyy-MM-dd")}),null!=this.SerachStatusbooking&&null!=this.SerachStatusbooking&&0!=this.SerachStatusbooking&&e.push({SearchBy:"BookingStatus",SearchVal:this.SerachStatusbooking.toString()}),null!=this.SerachPatientType&&null!=this.SerachPatientType&&0!=this.SerachPatientType&&e.push({SearchBy:"PatientType",SearchVal:this.SerachPatientType.toString()}),null!=this.SearchCheckedInDate&&null!=this.SearchCheckedInDate&&"IPD"==this.bookingtype&&e.push({SearchBy:"CheckedIn",SearchVal:this.datepipe.transform(this.SearchCheckedInDate,"yyyy-MM-dd")}),null!=this.SearchCheckedOutDate&&null!=this.SearchCheckedOutDate&&"IPD"==this.bookingtype&&e.push({SearchBy:"CheckedOut",SearchVal:this.datepipe.transform(this.SearchCheckedOutDate,"yyyy-MM-dd")}),null!=this.SerachSuspended&&null!=this.SerachSuspended&&0!=this.SerachSuspended&&e.push({SearchBy:"IsSuspended",SearchVal:this.SerachSuspended.toString()}),null!=this.SerachCompanion&&null!=this.SerachCompanion&&0!=this.SerachCompanion&&e.push({SearchBy:"IsCompanion",SearchVal:this.SerachCompanion.toString()}),null!=this.SerachCGHS&&null!=this.SerachCGHS&&"0"!=this.SerachCGHS&&e.push({SearchBy:"IsCGHS",SearchVal:this.SerachCGHS.toString()}),null!=this.SearchInsuranceNo&&null!=this.SearchInsuranceNo&&""!=this.SearchInsuranceNo&&e.push({SearchBy:"InsuranceNo",SearchVal:this.SearchInsuranceNo.trim()}),t.SearchList=e,this._MasterServices.downloadReport(t)}GetPerponePostponeChargeDetails(){if(this.prepostCharge>0&&1==this.IsPartialPayment){let t={};t.slotBookingId=this.SlotBookingIdSelectedId,t.percentage=this.prepostCharge,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.CalculateBookingChargesPercentage(t).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success?(this.ItemPriceRes=[],this.ItemPriceRes.push({BillItemId:"",MCODE:this.IsPostpone?a.i.PostPoneCharge:a.i.PreponeCharge,Description:this.IsPostpone?"Postpone Charges":"Prepone Charges",Qty:1,UNIT:"PCS",MRP:t.actionResult.stringVal,GST:0,PriceWithGST:t.actionResult.stringVal,DiscountAmount:0,IsChecked:!0,DiscountPer:0,NETAMOUNT:t.actionResult.stringVal}),this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscount(),this.IsPartialPayment=!0,this.AmountRecPer=0,this.ReceiveAmount=0,this.cdRef.detectChanges(),this.TenderObj.MemberShipNumber=null,this.lstTrustHistory=[]):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}else this.ItemPriceRes=[],this.CalculateTotalItemPrice(),this.CalculateNetPaybleAfterDiscount(),this.IsPartialPayment=!1,this.AmountRecPer=0,this.ReceiveAmount=0,this.cdRef.detectChanges(),this.TenderObj.MemberShipNumber=null,this.lstTrustHistory=[]}ShowReduceBooking(t,e,i){this.SlotBookingIdSelectedId=t,this.dFromReduceP=new Date(e),this.dToReduceP=new Date(i),this.maxUptoReduce=new Date(i),this.remarksReduce=null,this.calculateDiff(!1),this.MaxNights=this.noofdays,this.cdRef.detectChanges(),this.ShowReduceBookingModel=!0}ReducePeriod(){var t,e;if(null==this.dFromReduceP||null==this.dFromReduceP)return void this._UtilityService.showWarningAlert("Please select Admission date");if(null==this.dToReduceP||null==this.dToReduceP)return void this._UtilityService.showWarningAlert("Please select Discharge date");if(""==(null===(t=this.remarksReduce)||void 0===t?void 0:t.trim())||null==this.remarksReduce||null==this.remarksReduce)return void this._UtilityService.showWarningAlert("Please enter remarks");if(this.datepipe.transform(this.filteritems[0].PeriodUpto,"yyyy-MM-dd")===this.datepipe.transform(this.dToReduceP,"yyyy-MM-dd"))return void this._UtilityService.showWarningAlert("Please change existing date");let i={};i.slotBookingId=this.SlotBookingIdSelectedId,i.dFrom=new Date(this.datepipe.transform(this.dFromReduceP,"yyyy-MM-dd")),i.dTo=new Date(this.datepipe.transform(this.dToReduceP,"yyyy-MM-dd")),i.UpdatedBy=localStorage.getItem("userId"),i.remarks=null===(e=this.remarksReduce)||void 0===e?void 0:e.trim(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.ReducePeriod(i).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadOnlineRegistrationListByFilter(0,10),this.ShowReduceBookingModel=!1):(this._UtilityService.showErrorAlert(t.actionResult.errMsg),this.ShowReduceBookingModel=!0)})}calculateDiff(t){var e=this.dFromReduceP;t&&null!=this.dFromReduceP&&null!=this.dFromReduceP&&(this.dToReduceP=new Date(this.dFromReduceP),this.dToReduceP.setDate(this.dFromReduceP.getDate()+7),this.checkMaxUpto=!0);var i=this.dToReduceP;if(null!=e&&null!=e){var n=new Date(new Date(this.dFromReduceP));n.setDate(n.getDate()+("Frontdesk"==this.BookingSource?1:7)),this.maxUpto=n,this.MaxYear=this.maxUpto.getFullYear()+1}if(null!=e&&null!=e&&null!=i&&null!=i){e>i&&(e=i,this.dFromReduceP=i);var o=new Date(this.datepipe.transform(this.dFromReduceP,"yyyy-MM-dd")),s=new Date(this.datepipe.transform(this.dToReduceP,"yyyy-MM-dd")),a=Math.floor((s-o)/864e5);this.noofdays=a,this.cdRef.detectChanges()}}OnInputDaysChange(){var t;this._ConstantServices.nullToZeroConverter(this.noofdays)<=0?(this.dFromReduceP=this.dFromReduceP=new Date,(t=new Date(this.dFromReduceP)).setDate(t.getDate()+1),this.dToReduceP=t,this.calculateDiff(!1)):(null!=this.dFromReduceP&&null!=this.dFromReduceP||(this.dFromReduceP=new Date),(t=new Date(this.dFromReduceP)).setDate(t.getDate()+this._ConstantServices.nullToZeroConverter(this.noofdays)),this.dToReduceP=t,this.calculateDiff(!1))}EmitSelectedPackage(t){this.Package=t.Package,this.cdRef.detectChanges(),console.log("Package Details ",this.Package)}LoadClinicMasterById(t){this.clinicDetails={},this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetClinicMasterById(t).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.clinicDetails=e=e||[],this.cdRef.detectChanges()}else this.clinicDetails={},this.cdRef.detectChanges()})}ReferToPhysio(t){this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.ReferToPhysio(!0,t,this.loginUserId).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadOnlineRegistrationListByFilter(0,10)):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(d.h),d.Sb(o.i),d.Sb(a.f),d.Sb(h.a),d.Sb(u.a),d.Sb(b.a),d.Sb(m.a),d.Sb(g.a),d.Sb(n.f),d.Sb(p.d),d.Sb(S.a),d.Sb(f.a),d.Sb(o.a),d.Sb(y.a))},t.\u0275cmp=d.Mb({type:t,selectors:[["app-health-seekeer-registration"]],viewQuery:function(t,e){if(1&t&&(d.cd(ft,1),d.cd(yt,1),d.cd(It,1),d.cd(Mt,1),d.cd(Ct,1)),2&t){let t;d.Hc(t=d.jc())&&(e.dataTable=t.first),d.Hc(t=d.jc())&&(e.filtr=t.first),d.Hc(t=d.jc())&&(e.AttBankslip1=t.first),d.Hc(t=d.jc())&&(e.AttRefAppslip1=t.first),d.Hc(t=d.jc())&&(e.fileInput=t.first)}},features:[d.Cb,d.Db],decls:95,vars:208,consts:[["class","card mt25",4,"ngIf"],[1,"row","d-flex"],["class","ml-auto close",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["header","Reply to Patient",3,"modal","visible","visibleChange"],[4,"ngIf"],["pTemplate","footer"],["header","Additional Remarks",3,"modal","visible","maximizable","closeOnEscape","draggable","resizable","visibleChange"],["header","Room Booking",3,"modal","visible","visibleChange"],["header","Assign Package",3,"modal","visible","visibleChange"],["header","Initiate Payment RazorPay",3,"modal","visible","visibleChange"],["header","Initiate Payment WorldLine",3,"modal","visible","visibleChange"],["header","Select Payment Method",3,"modal","visible","visibleChange"],["header","Item Price Details",3,"modal","visible","visibleChange"],["header","Add Credit Note",3,"modal","visible","visibleChange"],["header","Change Group Member",3,"modal","visible","visibleChange"],["header","Change Group Head",3,"modal","visible","visibleChange"],["header","Change Period",3,"modal","visible","visibleChange"],["header","Add Member",3,"modal","visible","visibleChange"],["header","Generate Token for Consultant",3,"modal","visible","visibleChange"],["header","Generate Credit Note",3,"modal","visible","visibleChange"],["header","Allot Doctor",3,"modal","visible","visibleChange"],["header","Remarks",3,"modal","visible","visibleChange"],["header","Voucher List",3,"modal","visible","visibleChange"],["id","ShowAttachedFormModel",3,"visible","modal","maximizable","closeOnEscape","closable","draggable","resizable","onHide","visibleChange"],["pTemplate","header"],["id","ShowDownloadFormModel",3,"visible","modal","maximizable","closeOnEscape","closable","draggable","resizable","onHide","visibleChange"],[3,"visible","modal","maximizable","closeOnEscape","closable","draggable","resizable","visibleChange"],[1,"row","mt-3"],[1,"col-md-3","ml-3"],["appendTo","body","optionLabel","TrustName","optionValue","TrustMasterId","placeholder","Select Trust",3,"options","ngModel","filter","showClear","disabled","ngModelChange"],[1,"col-md-3"],["appendTo","body","optionLabel","MemberTypeName","optionValue","TrustMemberTypeMasterId","placeholder","Select Trust Member Type",3,"options","ngModel","filter","showClear","disabled","ngModelChange"],["type","text","pInputText","","placeholder","MemberShip Number",3,"ngModel","disabled","ngModelChange"],[1,"col-md-12"],["responsiveLayout","scroll","scrollHeight","250px",3,"value","rowHover","scrollable","globalFilterFields"],["dt99",""],["pTemplate","caption"],["pTemplate","colgroup"],["pTemplate","body"],["header","Doctor Logs",3,"modal","visible","visibleChange"],["header","Attendant Details",3,"modal","visible","visibleChange"],["header","Account Balance",3,"modal","visible","visibleChange"],["header","Reduce Booking",3,"modal","visible","visibleChange"],[1,"card","mt25"],[1,"card-body"],[1,"row"],[1,"filter-box","mt-3"],["dataKey","GroupNumber","scrollHeight","calc(100vh - 300px)","responsiveLayout","scroll",1,"ColumnFilterTable",3,"value","lazy","rowHover","lazyLoadOnInit","globalFilterFields","scrollable","paginator","rows","totalRecords","first","onLazyLoad","firstChange"],["dt1",""],["pTemplate","emptymessage"],[1,"col","col-md-1","col-12","mt-2","mt0"],["for",""],[1,"required"],[1,"col","col-md-3","col-12"],[3,"isCenterLabel","mode","onselectedClinic"],[1,"p-d-flex"],[1,"p-ml-left","mt-2"],["class","col-auto mt-2",4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"p-ml-auto"],["pButton","","matTooltip","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],["pButton","","matTooltip","Refresh","label"," ","icon","pi pi-refresh",1,"p-button-outlined","mr-2",3,"click"],[1,"col-auto","mt-2"],[1,"col-auto"],[1,"form-group","mb-0"],["optionLabel","name","optionValue","code",3,"options","ngModel","ngModelOptions","style","ngModelChange","onChange",4,"ngIf"],["optionLabel","name","optionValue","code",3,"options","ngModel","ngModelOptions","ngModelChange","onChange"],["class","field-radiobutton mb10",4,"ngIf"],[1,"field-radiobutton","mb10"],["name","rbIsAllGrouped",3,"value","ngModel","ngModelChange","onClick"],[1,"pl-1","mr-2","radiolabel"],[1,"pl-1","radiolabel"],["pButton","","matTooltip","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[2,"width","60px"],[2,"width","135px"],[2,"width","130px"],[2,"width","125px"],[2,"width","90px"],[2,"width","95px"],["style","width:95px",4,"ngIf"],["style","width:85px",4,"ngIf"],["style","width:125px",4,"ngIf"],[2,"width","150px"],["style","width:150px",4,"ngIf"],[2,"width","120px"],["style","width:120px",4,"ngIf"],["style","width:100px",4,"ngIf"],[2,"width","50px"],[2,"width","85px"],[2,"width","100px"],["pButton","","matTooltip","Clear","label","","icon","pi pi-filter-slash",1,"p-button-outlined",3,"click"],["type","text","name","txtsearchBookingNumber",1,"form-control","mr-1",3,"ngModel","ngModelChange","change"],["matTooltip","Filter",3,"click"],["type","text","name","txtsearchName",1,"form-control","mr-1",3,"ngModel","ngModelChange","change"],["type","text","name","txtsearchMRNo",1,"form-control","mr-1",3,"ngModel","ngModelChange","change"],["type","text","name","txtsearchContactNumber",1,"form-control","mr-1",3,"ngModel","ngModelChange","change"],[1,"input-group","date"],["appendTo","body","name","SerachPeriodFromDate","inputId","icon",3,"yearNavigator","monthNavigator","yearRange","ngModel","disabled","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onClose","onSelect"],["dobref","ngModel"],["name","ddlSearchStatus",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","name","txtsearchInsuranceNo",1,"form-control","mr-1",3,"ngModel","ngModelChange","change"],["appendTo","body","name","SerachPeriodToDate","inputId","icon",3,"yearNavigator","monthNavigator","yearRange","ngModel","disabled","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onClose","onSelect"],[3,"ngValue"],["name","ddlPatienttype",1,"form-control",3,"ngModel","ngModelChange","change"],["appendTo","body","name","SearchCheckedInDate","inputId","icon",3,"yearNavigator","monthNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onClose"],["appendTo","body","name","SearchCheckedOutDate","inputId","icon",3,"yearNavigator","monthNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onClose"],["type","text","name","txtsearchIPNumber",1,"form-control","mr-1",3,"ngModel","ngModelChange","change"],["type","text","name","txtsearchOPNumber",1,"form-control","mr-1",3,"ngModel","ngModelChange","change"],["name","ddlSuspended",1,"form-control",3,"ngModel","ngModelChange","change"],["name","ddlCompanion",1,"form-control",3,"ngModel","ngModelChange","change"],["name","ddllstInsuranceMaster",1,"form-control",3,"ngModel","ngModelChange","change"],[2,"height","34px"],["matTooltip","Action",3,"click",4,"ngIf"],["appendTo","body",3,"model","popup"],["menu",""],[3,"ngStyle"],[3,"title"],[3,"title",4,"ngIf"],[2,"font-size","10px"],[2,"background-color","#ebedf3","font-weight","bold","height","34px",3,"colSpan"],["matTooltip","Action",3,"click"],[1,"fas","fa-ellipsis-h"],[1,"ml-auto","close",3,"click"],[1,"fas","fa-window-close"],[3,"RegistrationMainModel","InputType","IsValidDate","OnUpdateRegDetails"],[1,"row","mb-3"],[1,"col-md-2"],[1,"col-md-10"],["appendTo","body","name","ddlReplyReason","optionLabel","ReasonName","optionValue","ReasonId","placeholder","Select Action",3,"options","ngModel","filter","onChange","ngModelChange"],["pTemplate","item"],["class","row mb-3",4,"ngIf"],["class","row mb-2",4,"ngIf"],["class","required",4,"ngIf"],["name","txtRemarks","cols","5","rows","4",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-6"],["appendTo","body","optionLabel","RoomNumber","optionValue","RoomMasterID",3,"options","ngModel","ngModelChange"],[1,"col-md-4"],[1,"col-md-10","pt-2","field-checkbox"],["inputId","binary",3,"ngModel","binary","ngModelChange"],["for","binary",1,"ml-2"],[1,"row","mb-2"],["class","col-md-2",4,"ngIf"],["class","col-md-4",4,"ngIf"],["class","col-md-6 field-checkbox",4,"ngIf"],["name","txtCancelCharge","mode","decimal",3,"ngModel","min","max","maxlength","ngModelChange"],[1,"col-md-6","field-checkbox"],["name","chk_AutoGenerateVoucher","inputId","binary",3,"ngModel","binary","ngModelChange"],[1,"ml-2"],["appendTo","body","inputId","icon","hourFormat","12",1,"iconcal",3,"yearNavigator","monthNavigator","yearRange","minDate","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","showTime","ngModelChange"],["class","col-md-10",4,"ngIf"],["appendTo","body","name","ddlDoctorList","optionLabel","DoctorName","optionValue","DoctorId","placeholder","Select doctor",3,"options","ngModel","filter","ngModelChange"],["type","button",1,"btn","btn-new-primary","mr-2",3,"click"],["type","button",1,"btn","btn-new-primary",3,"click"],[3,"ClinicId","SlotId","BookingSource","IsExtended","GroupCount","IsGrouped","roomBookClick","EmitSelectedPackage","EmitPermittedBy"],[3,"Packages","SlotBookingId","PackgeMappingEmit"],[3,"OrderRes","ItemPriceRes","PackageMapping","SlotBookingIdSelected","IsSelectedItem","UserRes","BillWiseDiscountPer","ReferredBy","RequestedBy","PayRequestFrom","ActualNetPayble","IsPartialPayment","CreditNoteNumber","CreditNoteAmount","GetPaymentStatusEmit"],["type","button","class","btn btn-new-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-new-secondary",3,"click"],[3,"WLOrderRes","ItemPriceRes","PackageMapping","SlotBookingIdSelected","IsSelectedItem","UserRes","BillWiseDiscountPer","ReferredBy","RequestedBy","PayRequestFrom","ActualNetPayble","IsPartialPayment","CreditNoteNumber","CreditNoteAmount","GetPaymentStatusEmit"],["appendTo","body","optionLabel","TenderName","optionValue","ACID","placeholder","Please select payment option",3,"options","ngModel","onChange","ngModelChange"],[1,"col-md-12","text-right","bold"],["id","dvCreditTender",4,"ngIf"],["id","dvCashTender",4,"ngIf"],["id","dvCardTender",4,"ngIf"],["id","dvBankTfTender",4,"ngIf"],["id","dvChequeTender",4,"ngIf"],["class","row mb-3 m-2",4,"ngIf"],["id","dvRemarks"],["class","row mt-3",4,"ngIf"],["id","dvTrustDetails",4,"ngIf"],["id","dvCreditTender"],[1,"required",2,"color","red"],[1,"col-md-9"],["name","txtCreditAmount","mode","decimal",3,"ngModel","min","max","maxlength","ngModelChange"],["id","dvCashTender"],["name","txtCashAmount","mode","decimal",3,"ngModel","min","maxlength","ngModelChange"],["appendTo","body","inputId","icon",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange"],["CashRecdDate",""],["id","dvCardTender"],[1,"table","table-striped","table-bordered",2,"width","100%"],[4,"ngFor","ngForOf"],["type","text","pInputText","",3,"name","ngModel","ngModelChange"],["BankDepRecdDate",""],["mode","decimal",3,"name","ngModel","min","max","onInput","onBlur","ngModelChange"],["class","add-btn mr-2","href","javascript: void(0);",3,"click",4,"ngIf"],["href","javascript: void(0);",1,"add-btn","mr-2",3,"click"],[1,"fa","fa-plus"],[1,"fa","fa-minus"],["id","dvBankTfTender"],[1,"row","mb-3","mt-2"],["name","txtBankTFAmount","disabled","","mode","decimal",3,"ngModel","min","maxlength","ngModelChange"],["id","dvChequeTender"],["type","text","name","txtCardNumber","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","txtChequeBankName","pInputText","",3,"ngModel","ngModelChange"],["appendTo","body","inputId","icon",1,"iconcal",3,"yearNavigator","monthNavigator","yearRange","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange"],["name","txtChequeAmount","mode","decimal",3,"ngModel","min","max","ngModelChange"],["type","text","name","txtChequeHolderName","pInputText","",3,"ngModel","ngModelChange"],[1,"row","mb-3","m-2"],[1,"col-md-3","bold"],["type","file","id","AttBankslip1","name","AttMedicalTest1","accept",".JPEG,.JPG,.PNG,.PDF",1,"custom-file-upload","mr-2",3,"change"],["AttMedicalTest1",""],["type","text","name","txtRemarks","pInputText","",3,"ngModel","ngModelChange"],["id","dvTrustDetails"],["appendTo","body","optionLabel","TrustName","optionValue","TrustMasterId","placeholder","Select Trust",3,"options","ngModel","filter","showClear","ngModelChange"],["appendTo","body","optionLabel","MemberTypeName","optionValue","TrustMemberTypeMasterId","placeholder","Select Trust Member Type",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","ngOn","","placeholder","MemberShip Number",3,"ngModel","ngModelChange"],["type","button","id","closePaymentMethod",1,"btn","btn-new-secondary",3,"click"],[1,"table","table-bordered"],["colspan","2",1,"text-right","bold"],[1,"widpinput"],["name","txtBillWiseDiscountPer","mode","decimal",3,"disabled","ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onBlur","onInput"],["name","txtBillWiseDiscountAmount","mode","decimal",3,"disabled","ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onBlur","onInput"],[1,"text-right","bold"],[1,"text-center"],[2,"display","none"],[1,"text-right"],[1,"bold"],["type","text","name","txtCreditNoteNumber","pInputText","",3,"disabled","ngModel","ngModelChange"],["class","text-right",4,"ngIf"],["class","text-center",4,"ngIf"],["colspan","2",1,"text-right"],["type","text","class","ref-input","pInputText","","name","txtRequestedBy","minlength","3","maxlength","150",3,"ngModel","ngModelChange",4,"ngIf"],["style","text-align:left;","required","true","name","txtAuthorizedBy","optionLabel","Name","optionValue","Name","placeholder","Select Authorized Name",3,"options","ngModel","showClear","filter","style","ngModelChange",4,"ngIf"],["colspan","2"],["colspan","2",1,"widpinput"],["colspan","4"],["name","txtItemWiseDiscountPer","mode","decimal",3,"ngModel","min","max","maxlength","ngModelChange","onInput","onBlur"],["name","txtItemWiseDiscountAmount","mode","decimal",3,"ngModel","min","max","maxlength","ngModelChange","onInput","onBlur"],["name","txtCreditNoteTranAmount","mode","decimal",3,"ngModel","min","max","ngModelChange","onBlur"],["type","text","pInputText","","name","txtRequestedBy","minlength","3","maxlength","150",1,"ref-input",3,"ngModel","ngModelChange"],["required","true","name","txtAuthorizedBy","optionLabel","Name","optionValue","Name","placeholder","Select Authorized Name",2,"text-align","left",3,"options","ngModel","showClear","filter","ngModelChange"],["for","ny",1,"text-right","pt-1","mr-2","bold"],["binary","true","inputId","binary",3,"ngModel","ngModelChange"],["colspan","2","class","text-right bold",4,"ngIf"],["class","widpinput",4,"ngIf"],["colspan","2","class","text-right",4,"ngIf"],["name","txtAmountRecPer","mode","decimal",3,"disabled","ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onBlur","onInput"],["name","txtReceiveAmount","mode","decimal",3,"disabled","ngModel","min","max","minFractionDigits","maxFractionDigits","ngModelChange","onBlur","onInput"],[1,"mt-3","mb-2"],[1,"row","m-0","mt-3"],[1,"col-md-12","pl-0","pr-0"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","250px",3,"value","rowHover","scrollable"],["dt",""],[2,"width","70px"],[2,"width","80px"],[1,"btn","btn-new-primary",3,"click"],[1,"row","m-0"],["name","txtCreditAmount","mode","decimal",3,"ngModel","minFractionDigits","maxFractionDigits","ngModelChange"],["dataKey","GroupNumber","scrollHeight","400px","responsiveLayout","scroll",3,"value","rowHover","scrollable"],["dt7",""],[2,"width","175px"],[2,"width","200px"],["type","text","pInputText","",3,"name","maxlength","ngModel","ngModelChange",4,"ngIf"],["class","mr-2","icon","pi pi-check","style","font-size: 1rem;background: #2DB163;height: 30px;width: 97px;","label","Validate","pButton","","class","btn","title","Validate MR No",3,"click",4,"ngIf"],["class","mr-2","style","color: green;font-weight: bold;",4,"ngIf"],["class","mr-2","icon","pi pi-check","style","font-size: 1rem;background: #2DB163;height: 30px;width: 97px;","label","Update","pButton","","class","btn","title","Update",3,"click",4,"ngIf"],["colspan","8",2,"background-color","#ebedf3","font-weight","bold"],["type","text","pInputText","",3,"name","maxlength","ngModel","ngModelChange"],["icon","pi pi-check","label","Validate","pButton","","title","Validate MR No",1,"btn",2,"font-size","1rem","background","#2DB163","height","30px","width","97px",3,"click"],[1,"mr-2",2,"color","green","font-weight","bold"],["icon","pi pi-check","label","Update","pButton","","title","Update",1,"btn",2,"font-size","1rem","background","#2DB163","height","30px","width","97px",3,"click"],["colspan","7",2,"background-color","#ebedf3","font-weight","bold"],["appendTo","body","inputId","icon",3,"yearNavigator","monthNavigator","yearRange","minDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onClose"],["PeriodFromDate",""],[1,"col-auto","bold"],[1,"col-md-1"],["matTooltip","View Invoice",3,"click"],[1,"fas","fa-file"],["class","row pt-3",4,"ngIf"],[1,"row","pt-3"],["name","txtChangePeriodRemarks","cols","5","rows","4",1,"form-control",3,"ngModel","ngModelChange"],["name","txtPrePostpone","mode","decimal",3,"ngModel","min","maxlength","ngModelChange"],["for","ny",1,"text-left","pt-1","mr-2","bold"],["binary","true","inputId","binary",3,"ngModel","ngModelChange","onChange"],["class","col-md-3",4,"ngIf"],[1,"col-md-3","text-left","bold"],["type","button","class","btn btn-new-primary mr-2",3,"click",4,"ngIf"],["appendTo","body","optionLabel","SearchName","optionValue","SlotBookingId","placeholder","Select Health Seeker",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"row","mt-2"],["class","modal-title mb-2",4,"ngIf"],["appendTo","body","name","ddlDoctorListNewAllot","optionLabel","FullName","optionValue","UserId","placeholder","Select doctor",3,"showClear","options","ngModel","filter","ngModelChange"],[1,"modal-title","mb-2"],["name","txtCreditAmount","mode","decimal",3,"ngModel","min","maxlength","ngModelChange"],["name","txtRemarks","cols","10","rows","4",1,"form-control",3,"ngModel","ngModelChange"],[3,"slotBookingId","clinicId","AllotSuccess"],[3,"slotBookingId"],[3,"slotBookingId","IsGrouped","BookingType"],[3,"FormType","SlotBookingId","FileSuccess"],[3,"FormType","SlotBookingId"],["pButton","","type","button","class","btn btn-new-primary",3,"label","disabled","click",4,"ngIf"],["pButton","","type","button","label","Close",1,"btn","btn-new-secondary",3,"click"],["pButton","","type","button",1,"btn","btn-new-primary",3,"label","disabled","click"],[1,"table-header"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search",3,"input"],[2,"width","110px"],[3,"rowSpan",4,"ngIf"],[2,"word-wrap","break-word"],[3,"rowSpan"],[3,"clinicId","slotBookingId","patientId","slotStatus","slotperiodFrom","slotperiodUpto"],[3,"userSelected"],[1,"col","col-md-4","col-12"],[1,"form-group"],["appendTo","body","inputId","icon","name","dFrom",3,"yearNavigator","monthNavigator","yearRange","minDate","ngModel","ngModelOptions","disabled","showIcon","dateFormat","readonlyInput","ngModelChange","onClose"],["calendar",""],["appendTo","body","inputId","icon","name","dTo",3,"yearNavigator","monthNavigator","yearRange","minDate","maxDate","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onClose"],["mode","decimal",1,"w-100",3,"disabled","ngModel","min","max","useGrouping","ngModelOptions","ngModelChange","onBlur"],[1,"col-md-12","bold"]],template:function(t,e){1&t&&(d.Sc(0,ze,13,12,"div",0),d.Yb(1,"div",1),d.Sc(2,Qe,2,0,"a",2),d.Xb(),d.Sc(3,Je,2,3,"div",3),d.Yb(4,"p-dialog",4),d.ic("visibleChange",function(t){return e.ShowReplyModel=t}),d.Sc(5,hi,20,13,"div",5),d.Sc(6,ui,2,0,"ng-template",6),d.Xb(),d.Yb(7,"p-dialog",7),d.ic("visibleChange",function(t){return e.ShowAdditionalRemarksModel=t}),d.Sc(8,bi,8,1,"div",5),d.Sc(9,mi,2,0,"ng-template",6),d.Xb(),d.Yb(10,"p-dialog",8),d.ic("visibleChange",function(t){return e.ShowRoomBookingModel=t}),d.Sc(11,gi,2,6,"div",5),d.Sc(12,pi,2,0,"ng-template",6),d.Xb(),d.Yb(13,"p-dialog",9),d.ic("visibleChange",function(t){return e.ShowPackageModel=t}),d.Sc(14,Si,2,2,"div",5),d.Xb(),d.Yb(15,"p-dialog",10),d.ic("visibleChange",function(t){return e.ShowRazorPayModel=t}),d.Sc(16,fi,4,14,"div",5),d.Sc(17,Ii,1,1,"ng-template",6),d.Xb(),d.Yb(18,"p-dialog",11),d.ic("visibleChange",function(t){return e.ShowWLPayModel=t}),d.Sc(19,Mi,4,14,"div",5),d.Sc(20,Pi,1,1,"ng-template",6),d.Xb(),d.Yb(21,"p-dialog",12),d.ic("visibleChange",function(t){return e.ShowPaymentMethodModel=t}),d.Sc(22,xi,19,17,"div",5),d.Sc(23,_i,4,0,"ng-template",6),d.Xb(),d.Yb(24,"p-dialog",13),d.ic("visibleChange",function(t){return e.ShowItemPriceModel=t}),d.Sc(25,rn,85,40,"div",5),d.Sc(26,cn,3,1,"ng-template",6),d.Xb(),d.Yb(27,"p-dialog",14),d.ic("visibleChange",function(t){return e.ShowCreditNoteModel=t}),d.Sc(28,dn,7,3,"div",5),d.Sc(29,hn,0,0,"ng-template",6),d.Xb(),d.Yb(30,"p-dialog",15),d.ic("visibleChange",function(t){return e.ShowGroupModel=t}),d.Sc(31,vn,7,3,"div",5),d.Xb(),d.Yb(32,"p-dialog",16),d.ic("visibleChange",function(t){return e.ShowHeadGroupModel=t}),d.Sc(33,Nn,7,3,"div",5),d.Xb(),d.Yb(34,"p-dialog",17),d.ic("visibleChange",function(t){return e.ShowPeriodChangeModel=t}),d.Sc(35,Ln,26,16,"div",5),d.Sc(36,_n,2,2,"ng-template",6),d.Xb(),d.Yb(37,"p-dialog",18),d.ic("visibleChange",function(t){return e.ShowMemberAddModel=t}),d.Sc(38,En,15,8,"div",5),d.Sc(39,Gn,2,0,"ng-template",6),d.Xb(),d.Yb(40,"p-dialog",19),d.ic("visibleChange",function(t){return e.ShowNewDoctorAllModel=t}),d.Sc(41,Vn,3,8,"div",5),d.Sc(42,qn,2,2,"ng-template",6),d.Xb(),d.Yb(43,"p-dialog",20),d.ic("visibleChange",function(t){return e.ShowGenerateCreditModel=t}),d.Sc(44,Zn,15,7,"div",5),d.Sc(45,$n,2,0,"ng-template",6),d.Xb(),d.Yb(46,"p-dialog",21),d.ic("visibleChange",function(t){return e.ShowAllotDoctorModel=t}),d.Sc(47,zn,2,2,"div",5),d.Xb(),d.Yb(48,"p-dialog",22),d.ic("visibleChange",function(t){return e.ShowRemarksModel=t}),d.Sc(49,Qn,2,1,"div",5),d.Xb(),d.Yb(50,"p-dialog",23),d.ic("visibleChange",function(t){return e.ShowInvoiceListModel=t}),d.Sc(51,Jn,2,3,"div",5),d.Xb(),d.Yb(52,"p-dialog",24),d.ic("onHide",function(){return e.closeDialog()})("visibleChange",function(t){return e.ShowAttachedFormModel=t}),d.Sc(53,Kn,2,1,"ng-template",25),d.Sc(54,to,2,2,"div",5),d.Xb(),d.Yb(55,"p-dialog",26),d.ic("onHide",function(){return e.closeDialog()})("visibleChange",function(t){return e.ShowDownloadFormModel=t}),d.Sc(56,eo,2,1,"ng-template",25),d.Sc(57,io,2,2,"div",5),d.Xb(),d.Yb(58,"p-dialog",27),d.ic("visibleChange",function(t){return e.showMembershipDetails=t}),d.Sc(59,no,2,0,"ng-template",25),d.Yb(60,"div"),d.Yb(61,"div",28),d.Yb(62,"div",29),d.Yb(63,"label"),d.Uc(64,"Select Trust"),d.Xb(),d.Yb(65,"p-dropdown",30),d.ic("ngModelChange",function(t){return e.UserMemberShipDetails.TrustId=t}),d.Xb(),d.Xb(),d.Yb(66,"div",31),d.Yb(67,"label"),d.Uc(68,"Select Member Type"),d.Xb(),d.Yb(69,"p-dropdown",32),d.ic("ngModelChange",function(t){return e.UserMemberShipDetails.TMemberTypeId=t}),d.Xb(),d.Xb(),d.Yb(70,"div",31),d.Yb(71,"label"),d.Uc(72,"Membership Number"),d.Xb(),d.Yb(73,"input",33),d.ic("ngModelChange",function(t){return e.UserMemberShipDetails.MemberShipNumber=t}),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Sc(74,so,2,1,"ng-template",6),d.Xb(),d.Yb(75,"p-dialog",27),d.ic("visibleChange",function(t){return e.showTeriffMRPDetails=t}),d.Sc(76,ao,2,0,"ng-template",25),d.Yb(77,"div"),d.Yb(78,"div",28),d.Yb(79,"div",34),d.Yb(80,"p-table",35,36),d.Sc(82,ro,4,0,"ng-template",37),d.Sc(83,lo,21,0,"ng-template",25),d.Sc(84,co,11,0,"ng-template",38),d.Sc(85,uo,24,22,"ng-template",39),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(86,"p-dialog",40),d.ic("visibleChange",function(t){return e.ShowPrescriptionSaveModel=t}),d.Sc(87,bo,2,1,"div",5),d.Xb(),d.Yb(88,"p-dialog",41),d.ic("visibleChange",function(t){return e.ShowAttendantDetailsModel=t}),d.Sc(89,mo,2,6,"div",5),d.Xb(),d.Yb(90,"p-dialog",42),d.ic("visibleChange",function(t){return e.ShowCreditNoteBalance=t}),d.Sc(91,go,2,1,"div",5),d.Xb(),d.Yb(92,"p-dialog",43),d.ic("visibleChange",function(t){return e.ShowReduceBookingModel=t}),d.Sc(93,po,28,38,"div",5),d.Sc(94,fo,1,1,"ng-template",6),d.Xb()),2&t&&(d.tc("ngIf","update"!=e.RegMode),d.Fb(2),d.tc("ngIf","update"==e.RegMode),d.Fb(1),d.tc("ngIf","update"==e.RegMode),d.Fb(1),d.Pc(d.yc(178,yo)),d.tc("modal",!0)("visible",e.ShowReplyModel),d.Fb(1),d.tc("ngIf",e.ShowReplyModel),d.Fb(2),d.Pc(d.yc(179,Io)),d.tc("modal",!0)("visible",e.ShowAdditionalRemarksModel)("modal",!0)("maximizable",!0)("closeOnEscape",!1)("draggable",!1)("resizable",!1),d.Fb(1),d.tc("ngIf",e.ShowAdditionalRemarksModel),d.Fb(2),d.Pc(d.yc(180,yo)),d.tc("modal",!0)("visible",e.ShowRoomBookingModel),d.Fb(1),d.tc("ngIf",e.ShowRoomBookingModel),d.Fb(2),d.Pc(d.yc(181,Mo)),d.tc("modal",!0)("visible",e.ShowPackageModel),d.Fb(1),d.tc("ngIf",e.ShowPackageModel),d.Fb(1),d.Pc(d.yc(182,yo)),d.tc("modal",!0)("visible",e.ShowRazorPayModel),d.Fb(1),d.tc("ngIf",e.ShowRazorPayModel),d.Fb(2),d.Pc(d.yc(183,yo)),d.tc("modal",!0)("visible",e.ShowWLPayModel),d.Fb(1),d.tc("ngIf",e.ShowWLPayModel),d.Fb(2),d.Pc(d.yc(184,yo)),d.tc("modal",!0)("visible",e.ShowPaymentMethodModel),d.Fb(1),d.tc("ngIf",e.ShowPaymentMethodModel),d.Fb(2),d.Pc(d.yc(185,yo)),d.tc("modal",!0)("visible",e.ShowItemPriceModel),d.Fb(1),d.tc("ngIf",e.ShowItemPriceModel),d.Fb(2),d.Pc(d.yc(186,yo)),d.tc("modal",!0)("visible",e.ShowCreditNoteModel),d.Fb(1),d.tc("ngIf",e.ShowCreditNoteModel),d.Fb(2),d.Pc(d.yc(187,yo)),d.tc("modal",!0)("visible",e.ShowGroupModel),d.Fb(1),d.tc("ngIf",e.ShowGroupModel),d.Fb(1),d.Pc(d.yc(188,yo)),d.tc("modal",!0)("visible",e.ShowHeadGroupModel),d.Fb(1),d.tc("ngIf",e.ShowHeadGroupModel),d.Fb(1),d.Pc(d.yc(189,yo)),d.tc("modal",!0)("visible",e.ShowPeriodChangeModel),d.Fb(1),d.tc("ngIf",e.ShowPeriodChangeModel),d.Fb(2),d.Pc(d.yc(190,yo)),d.tc("modal",!0)("visible",e.ShowMemberAddModel),d.Fb(1),d.tc("ngIf",e.ShowMemberAddModel),d.Fb(2),d.Pc(d.yc(191,yo)),d.tc("modal",!0)("visible",e.ShowNewDoctorAllModel),d.Fb(1),d.tc("ngIf",e.ShowNewDoctorAllModel),d.Fb(2),d.Pc(d.yc(192,yo)),d.tc("modal",!0)("visible",e.ShowGenerateCreditModel),d.Fb(1),d.tc("ngIf",e.ShowGenerateCreditModel),d.Fb(2),d.Pc(d.yc(193,yo)),d.tc("modal",!0)("visible",e.ShowAllotDoctorModel),d.Fb(1),d.tc("ngIf",e.ShowAllotDoctorModel),d.Fb(1),d.Pc(d.yc(194,yo)),d.tc("modal",!0)("visible",e.ShowRemarksModel),d.Fb(1),d.tc("ngIf",e.ShowRemarksModel),d.Fb(1),d.Pc(d.yc(195,yo)),d.tc("modal",!0)("visible",e.ShowInvoiceListModel),d.Fb(1),d.tc("ngIf",e.ShowInvoiceListModel),d.Fb(1),d.Pc(d.yc(196,Io)),d.tc("visible",e.ShowAttachedFormModel)("modal",!0)("maximizable",!0)("closeOnEscape",!1)("closable",!0)("draggable",!1)("resizable",!0),d.Fb(2),d.tc("ngIf",e.ShowAttachedFormModel),d.Fb(1),d.Pc(d.yc(197,Io)),d.tc("visible",e.ShowDownloadFormModel)("modal",!0)("maximizable",!0)("closeOnEscape",!1)("closable",!0)("draggable",!1)("resizable",!0),d.Fb(2),d.tc("ngIf",e.ShowDownloadFormModel),d.Fb(1),d.Pc(d.yc(198,Io)),d.tc("visible",e.showMembershipDetails)("modal",!0)("maximizable",!1)("closeOnEscape",!1)("closable",!1)("draggable",!1)("resizable",!1),d.Fb(7),d.Pc(d.yc(199,vt)),d.tc("options",e.lstTrustMaster)("ngModel",e.UserMemberShipDetails.TrustId)("filter",!0)("showClear",!0)("disabled",e.UserMemberShipDetails.bookingStatus),d.Fb(4),d.Pc(d.yc(200,vt)),d.tc("options",e.lstTrustMemberTypeMaster)("ngModel",e.UserMemberShipDetails.TMemberTypeId)("filter",!0)("showClear",!0)("disabled",e.UserMemberShipDetails.bookingStatus),d.Fb(4),d.Pc(d.yc(201,vt)),d.tc("ngModel",e.UserMemberShipDetails.MemberShipNumber)("disabled",e.UserMemberShipDetails.bookingStatus),d.Fb(2),d.Pc(d.yc(202,Io)),d.tc("visible",e.showTeriffMRPDetails)("modal",!0)("maximizable",!0)("closeOnEscape",!0)("closable",!0)("draggable",!1)("resizable",!1),d.Fb(5),d.tc("value",e.lstTeriffDeyails)("rowHover",!0)("scrollable",!0)("globalFilterFields",d.yc(203,Co)),d.Fb(6),d.Pc(d.yc(204,yo)),d.tc("modal",!0)("visible",e.ShowPrescriptionSaveModel),d.Fb(1),d.tc("ngIf",e.ShowPrescriptionSaveModel),d.Fb(1),d.Pc(d.yc(205,yo)),d.tc("modal",!0)("visible",e.ShowAttendantDetailsModel),d.Fb(1),d.tc("ngIf",e.ShowAttendantDetailsModel),d.Fb(1),d.Pc(d.yc(206,yo)),d.tc("modal",!0)("visible",e.ShowCreditNoteBalance),d.Fb(1),d.tc("ngIf",e.ShowCreditNoteBalance),d.Fb(1),d.Pc(d.yc(207,yo)),d.tc("modal",!0)("visible",e.ShowReduceBookingModel),d.Fb(1),d.tc("ngIf",e.ShowReduceBookingModel))},directives:[n.p,I.a,f.i,M.a,p.o,p.r,p.b,C.a,P.c,k.a,v.b,D.a,R.a,p.x,n.o,p.s,p.A,T.a,n.q,A.a,B.a,U.a,N.a,p.j,w.a,F.a,Y.a,X.a,p.k,p.w,L.a,O.a,x.a,_.a,E.a,G.a,bt,St],pipes:[n.f,n.g],styles:[""]}),t})()}];let ko=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({imports:[[o.l.forChild(Po)],o.l]}),t})();var vo=i("fCr0"),Do=i("305l"),Ro=i("Ql+Z"),To=i("4Tty"),Ao=i("kcK2"),Bo=i("V/Gj"),Uo=i("Jg0Z"),No=i("Om0Y"),wo=i("Nf9I"),Fo=i("JpZ1"),Yo=i("T2Aj");const Xo=[{path:"",component:bt}];let Lo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({imports:[[o.l.forChild(Xo)],o.l]}),t})();var Oo=i("Q4Mo");let xo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({imports:[[n.c,Lo,p.i,p.v,P.f,v.c,Oo.b,M.b,C.b,N.b,Yo.a,R.b]]}),t})();const _o=[{path:"",component:St}];let Eo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({imports:[[o.l.forChild(_o)],o.l]}),t})(),Go=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({imports:[[n.c,Eo]]}),t})();var Wo=i("OUA+");let Vo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({imports:[[n.c,ko,p.i,P.f,v.c,M.b,C.b,R.b,D.b,T.b,vo.CommonModuleModule,Do.AuthModule,B.b,N.b,Ro.a,To.a,Ao.a,Bo.a,Uo.a,I.b,No.a,wo.b,U.b,Fo.a,Yo.a,xo,Go,Wo.a]]}),t})()},xjJ3:function(t,e,i){"use strict";i.d(e,"a",function(){return S});var n=i("CwUn"),o=i("Nach"),s=i("fXoL"),a=i("NLkC"),r=i("G+wY"),l=i("rEr+"),c=i("7zfz"),d=i("7kUa"),h=i("ofXK");function u(t,e){if(1&t){const t=s.Zb();s.Yb(0,"div",6),s.Tb(1,"span",7),s.Yb(2,"span",8),s.Yb(3,"span",9),s.Tb(4,"i",10),s.Yb(5,"input",11),s.ic("input",function(e){return s.Lc(t),s.mc(),s.Ic(1).filterGlobal(e.target.value,"contains")}),s.Xb(),s.Xb(),s.Xb(),s.Xb()}}function b(t,e){if(1&t&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Uc(2," No records found "),s.Xb(),s.Xb()),2&t){const t=e.$implicit;s.Fb(1),s.Gb("colspan",null==t?null:t.length)}}function m(t,e){1&t&&(s.Yb(0,"tr"),s.Yb(1,"th"),s.Uc(2,"S.No"),s.Xb(),s.Yb(3,"th"),s.Uc(4,"Role"),s.Xb(),s.Yb(5,"th"),s.Uc(6,"Action By"),s.Xb(),s.Yb(7,"th"),s.Uc(8,"Action On"),s.Xb(),s.Yb(9,"th"),s.Uc(10,"Remarks"),s.Xb(),s.Yb(11,"th"),s.Uc(12,"Status"),s.Xb(),s.Xb())}function g(t,e){if(1&t&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Uc(2),s.Xb(),s.Yb(3,"td"),s.Uc(4),s.Xb(),s.Yb(5,"td"),s.Uc(6),s.Xb(),s.Yb(7,"td"),s.Uc(8),s.nc(9,"date"),s.Xb(),s.Yb(10,"td"),s.Uc(11),s.Xb(),s.Yb(12,"td"),s.Uc(13),s.Xb(),s.Xb()),2&t){const t=e.$implicit,i=e.rowIndex,n=s.mc();s.Fb(2),s.Vc(i+1),s.Fb(2),s.Vc(t.UserType),s.Fb(2),s.Vc(t.RepliedBy),s.Fb(2),s.Vc(s.pc(9,6,t.RepliedOn,n.customDateFormat.DEF_DATE_TIME)),s.Fb(3),s.Vc(t.Remarks),s.Fb(2),s.Vc(t.BookingStatus)}}const p=function(){return["UserType","RepliedBy","Remarks","BookingStatus"]};let S=(()=>{class t extends n.a{constructor(t,e,i){super(),this.cdRef=t,this._UtilityService=e,this._PatientServices=i,this.slotBookingId=null,this.customDateFormat=o.h,this.lstRemarks=[]}ngOnInit(){}ngOnChanges(t){this.GetPatientRemarks()}GetPatientRemarks(){null!=this.slotBookingId&&null!=this.slotBookingId&&""!=this.slotBookingId?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.GetPatientRemarks(this.slotBookingId).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstRemarks=e=e||[]}else this.lstRemarks=[];this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})):this._UtilityService.showWarningAlert("No record found")}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(s.h),s.Sb(a.a),s.Sb(r.a))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-individual-change-status-remarks"]],inputs:{slotBookingId:"slotBookingId"},features:[s.Cb,s.Db],decls:6,vars:5,consts:[["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","250px",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"p-ml-auto"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"]],template:function(t,e){1&t&&(s.Yb(0,"p-table",0,1),s.Sc(2,u,6,0,"ng-template",2),s.Sc(3,b,3,1,"ng-template",3),s.Sc(4,m,13,0,"ng-template",4),s.Sc(5,g,14,9,"ng-template",5),s.Xb()),2&t&&s.tc("value",e.lstRemarks)("rowHover",!0)("globalFilterFields",s.yc(4,p))("scrollable",!0)},directives:[l.c,c.i,d.a],pipes:[h.f],styles:[""]}),t})()},yd5W:function(t,e,i){"use strict";i.d(e,"a",function(){return g});var n=i("fXoL"),o=i("G+wY"),s=i("NLkC"),a=i("rEr+"),r=i("7zfz"),l=i("lVkt"),c=i("3Pt+");function d(t,e){1&t&&(n.Yb(0,"tr"),n.Yb(1,"th",4),n.Uc(2,"Package"),n.Xb(),n.Yb(3,"th",4),n.Uc(4,"Qty"),n.Xb(),n.Yb(5,"th",4),n.Uc(6,"Select Health Seeker"),n.Xb(),n.Xb())}const h=function(){return{width:"100%"}};function u(t,e){if(1&t&&(n.Yb(0,"tr"),n.Yb(1,"td"),n.Uc(2),n.Xb(),n.Yb(3,"td"),n.Uc(4),n.Xb(),n.Yb(5,"td"),n.Yb(6,"p-multiSelect",5),n.ic("ngModelChange",function(t){return e.$implicit.pckg.SelectMembers=t}),n.Xb(),n.Xb(),n.Xb()),2&t){const t=e.$implicit,i=n.mc();n.Fb(2),n.Wc(" ",t.pckg.PackageName," "),n.Fb(2),n.Wc(" ",t.pckg.Qty," "),n.Fb(2),n.Pc(n.yc(7,h)),n.tc("options",i.lstGroupMember)("ngModel",t.pckg.SelectMembers)("selectionLimit",t.pckg.Qty)}}function b(t,e){if(1&t){const t=n.Zb();n.Yb(0,"button",6),n.ic("click",function(){return n.Lc(t),n.mc().ProceedToBookRoom()}),n.Uc(1,"Done"),n.Xb()}}const m=function(){return{"min-width":"50rem"}};let g=(()=>{class t{constructor(t,e,i){this._PatientServices=t,this._UtilityService=e,this.cdRef=i,this.Packages={},this.SlotBookingId=null,this.PackgeMappingEmit=new n.o,this.lstGroupMember=[]}ngOnInit(){this.Packages=JSON.parse(JSON.stringify(this.Packages)),this.cdRef.detectChanges(),this.LoadGroupMembersBySlotId()}LoadGroupMembersBySlotId(){this._UtilityService.showSpinner(),this._PatientServices.GetTotalGroupMemberBySlotId(this.SlotBookingId).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstGroupMember=e=e||[],this.cdRef.detectChanges()}else this.lstGroupMember=[]})}ProceedToBookRoom(){var t;console.log(this.Packages);var e=[];let i=!0;for(let n of this.Packages)if(n.pckg.Qty!=(null===(t=n.pckg.SelectMembers)||void 0===t?void 0:t.length)){this._UtilityService.showWarningAlert("Please select "+n.pckg.Qty+" Health Seeker for "+n.pckg.PackageName+"."),i=!1;break}i&&(this.Packages.forEach(t=>{t.pckg.SelectMembers.forEach(i=>{let n={};n.MemberSlotId=i,n.MCODE=t.pckg.MCODE,e.push(n)})}),this.PackgeMappingEmit.emit(e))}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(o.a),n.Sb(s.a),n.Sb(n.h))},t.\u0275cmp=n.Mb({type:t,selectors:[["app-package-group-mapping"]],inputs:{Packages:"Packages",SlotBookingId:"SlotBookingId"},outputs:{PackgeMappingEmit:"PackgeMappingEmit"},decls:5,vars:3,consts:[["dataKey","id",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[2,"width","20%"],["appendTo","body","optionLabel","FullName","optionValue","SlotBookingId",3,"options","ngModel","selectionLimit","ngModelChange"],["type","button",1,"btn","btn-new-primary","mt-2","mr-2",3,"click"]],template:function(t,e){1&t&&(n.Yb(0,"div"),n.Yb(1,"p-table",0),n.Sc(2,d,7,0,"ng-template",1),n.Sc(3,u,7,8,"ng-template",2),n.Sc(4,b,2,0,"ng-template",3),n.Xb(),n.Xb()),2&t&&(n.Fb(1),n.tc("value",e.Packages)("tableStyle",n.yc(2,m)))},directives:[a.c,r.i,l.a,c.o,c.r],styles:[""]}),t})()}}]);