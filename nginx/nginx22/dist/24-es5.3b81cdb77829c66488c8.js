!function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,n){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,n)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var c=o(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{QQvb:function(e,t,n){"use strict";n.r(t),n.d(t,"TherapyDashboardModule",function(){return T});var i,o,c=n("ofXK"),a=n("tyNb"),l=n("iVOs"),s=n("fXoL"),d=[{path:"",component:l.a}],u=((i=function e(){r(this,e)}).\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.Qb({type:i}),i.\u0275inj=s.Pb({imports:[[a.l.forChild(d)],a.l]}),i),b=n("3Pt+"),p=n("rEr+"),h=n("jIHw"),m=n("arFO"),f=n("7kUa"),g=n("eO1q"),y=n("Ks7X"),v=n("LuMj"),S=n("lVkt"),C=n("T2Aj"),T=((o=function e(){r(this,e)}).\u0275fac=function(e){return new(e||o)},o.\u0275mod=s.Qb({type:o}),o.\u0275inj=s.Pb({imports:[[c.c,u,b.i,p.f,h.c,m.b,f.b,g.b,y.b,v.b,S.b,C.a]]}),o)},iVOs:function(i,o,c){"use strict";c.d(o,"a",function(){return ce});var a=c("Nach"),l=c("CwUn"),s=c("fXoL"),d=c("tyNb"),u=c("A1d6"),b=c("ReGW"),p=c("ofXK"),h=c("dcBc"),m=c("NLkC"),f=c("arFO"),g=c("3Pt+"),y=c("lVkt"),v=c("LuMj"),S=c("rEr+"),C=c("7zfz"),T=c("AAHA"),I=c("eO1q"),P=c("7kUa"),w=c("jIHw"),D=["dt"],X=["filtr"],Y=["calendar"];function M(e,t){if(1&e){var n=s.Zb();s.Yb(0,"div",5),s.Yb(1,"div",29),s.Yb(2,"label",30),s.Uc(3,"Center "),s.Yb(4,"span",8),s.Uc(5,"*"),s.Xb(),s.Xb(),s.Xb(),s.Yb(6,"div",31),s.Yb(7,"app-center-dropdown",32),s.ic("onclinicSelect",function(e){return s.Lc(n),s.mc().onclinicSelect(e)}),s.Xb(),s.Xb(),s.Xb()}2&e&&(s.Fb(7),s.tc("isCenterLabel",!1)("mode","get"))}function k(e,t){if(1&e){var n=s.Zb();s.Yb(0,"div",6),s.Yb(1,"label",14),s.Uc(2,"OPD Type"),s.Xb(),s.Yb(3,"div",15),s.Yb(4,"p-radioButton",33),s.ic("ngModelChange",function(e){return s.Lc(n),s.mc().OPDType=e})("onClick",function(){return s.Lc(n),s.mc().ShowTherapyList()}),s.Xb(),s.Yb(5,"label",17),s.Uc(6,"Billing"),s.Xb(),s.Yb(7,"p-radioButton",34),s.ic("ngModelChange",function(e){return s.Lc(n),s.mc().OPDType=e})("onClick",function(){return s.Lc(n),s.mc().ShowTherapyList()}),s.Xb(),s.Yb(8,"label",17),s.Uc(9,"Prescription"),s.Xb(),s.Xb(),s.Xb()}if(2&e){var i=s.mc();s.Fb(4),s.tc("ngModel",i.OPDType),s.Fb(3),s.tc("ngModel",i.OPDType)}}var F=function(){return{width:"100%"}};function U(e,t){if(1&e){var n=s.Zb();s.Yb(0,"div",6),s.Yb(1,"div",35),s.Yb(2,"label"),s.Uc(3,"Time Period"),s.Xb(),s.Yb(4,"span",8),s.Uc(5,"*"),s.Xb(),s.Yb(6,"p-multiSelect",36),s.ic("ngModelChange",function(e){return s.Lc(n),s.mc().TimeId=e})("onChange",function(e){return s.Lc(n),s.mc().onChangeItems(e.value)}),s.Xb(),s.Xb(),s.Xb()}if(2&e){var i=s.mc();s.Fb(6),s.Pc(s.yc(4,F)),s.tc("options",i.lstPrescriptionTimeMaster)("ngModel",i.TimeId)}}function L(e,t){if(1&e){var n=s.Zb();s.Yb(0,"div",6),s.Yb(1,"div",35),s.Yb(2,"label"),s.Uc(3,"Patient Condition"),s.Xb(),s.Yb(4,"p-multiSelect",37),s.ic("ngModelChange",function(e){return s.Lc(n),s.mc().lstPatientConditionItems=e})("onChange",function(e){return s.Lc(n),s.mc().onChangeCondition(e.value)}),s.Xb(),s.Xb(),s.Xb()}if(2&e){var i=s.mc();s.Fb(4),s.Pc(s.yc(4,F)),s.tc("options",i.stlstpatientcondition)("ngModel",i.lstPatientConditionItems)}}var A=function(){return{standalone:!0}};function O(e,t){if(1&e){var n=s.Zb();s.Yb(0,"div",38),s.Yb(1,"label",39),s.Uc(2,"From / To"),s.Xb(),s.Yb(3,"span",8),s.Uc(4,"*"),s.Xb(),s.Yb(5,"div",35),s.Yb(6,"p-calendar",40,41),s.ic("ngModelChange",function(e){return s.Lc(n),s.mc().rangeDates=e})("onSelect",function(){return s.Lc(n),s.mc().dateRangeChange()}),s.Xb(),s.Xb(),s.Xb()}if(2&e){var i=s.mc();s.Fb(6),s.wc("yearRange","",i.customDateFormat.MinYear,":",i.MaxYear,""),s.tc("monthNavigator",!0)("yearNavigator",!0)("ngModel",i.rangeDates)("ngModelOptions",s.yc(9,A))("showIcon",!0)("dateFormat",i.customDateFormat.CalendarFormat)("readonlyInput",!0)}}function x(e,t){if(1&e){var n=s.Zb();s.Yb(0,"div",38),s.Yb(1,"div",35),s.Yb(2,"label",42),s.Uc(3,"Admission Date"),s.Yb(4,"span",8),s.Uc(5,"*"),s.Xb(),s.Xb(),s.Yb(6,"div"),s.Yb(7,"p-calendar",43,41),s.ic("onSelect",function(){return s.Lc(n),s.mc().admDateChange()})("ngModelChange",function(e){return s.Lc(n),s.mc().selectAdmDate=e}),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&e){var i=s.mc();s.Fb(7),s.wc("yearRange","",i.customDateFormat.MinYear,":",i.MaxYear,""),s.tc("monthNavigator",!0)("yearNavigator",!0)("ngModel",i.selectAdmDate)("ngModelOptions",s.yc(9,A))("showIcon",!0)("dateFormat",i.customDateFormat.CalendarFormat)("readonlyInput",!1)}}function R(e,t){if(1&e){var n=s.Zb();s.Yb(0,"button",55),s.ic("click",function(){return s.Lc(n),s.mc(2).exportToItemExcel("")}),s.Xb()}}function N(e,t){if(1&e){var n=s.Zb();s.Yb(0,"button",56),s.ic("click",function(){return s.Lc(n),s.mc(2).exportToItemExcel("all")}),s.Xb()}}function B(e,t){if(1&e){var n=s.Zb();s.Yb(0,"button",57),s.ic("click",function(){return s.Lc(n),s.mc(2).exportToItemExcel("allCount")}),s.Xb()}}function G(e,t){if(1&e){var n=s.Zb();s.Yb(0,"button",58),s.ic("click",function(){return s.Lc(n),s.mc(2).exportToItemExcel("timeSlotWise")}),s.Xb()}}function _(e,t){if(1&e){var n=s.Zb();s.Yb(0,"div",44),s.Yb(1,"span",45),s.Uc(2),s.Xb(),s.Yb(3,"span",46),s.Sc(4,R,1,0,"button",47),s.Sc(5,N,1,0,"button",48),s.Sc(6,B,1,0,"button",49),s.Sc(7,G,1,0,"button",50),s.Yb(8,"span",51),s.Tb(9,"i",52),s.Yb(10,"input",53,54),s.ic("input",function(e){return s.Lc(n),s.mc(),s.Ic(45).filterGlobal(e.target.value,"contains")}),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&e){var i=s.mc();s.Fb(2),s.Wc(" ",(null==i.LstTreatmentClinicSchedulePrescription?null:i.LstTreatmentClinicSchedulePrescription.length)>0?"Total Treatment: "+i.filteredValuesLength+", All Patient - "+i.allPatientCount+", M - "+i.malePatientCount+", F - "+i.femalePatientCount:""," "),s.Fb(2),s.tc("ngIf",(null==i.lstIAccessStr?null:i.lstIAccessStr.includes(i.ActionList.Download.toString()))&&(null==i.LstTreatmentClinicSchedulePrescription?null:i.LstTreatmentClinicSchedulePrescription.length)>0),s.Fb(1),s.tc("ngIf",(null==i.lstIAccessStr?null:i.lstIAccessStr.includes(i.ActionList.Download.toString()))&&(null==i.LstTreatmentClinicSchedulePrescription?null:i.LstTreatmentClinicSchedulePrescription.length)>0),s.Fb(1),s.tc("ngIf",(null==i.lstIAccessStr?null:i.lstIAccessStr.includes(i.ActionList.Download.toString()))&&(null==i.LstTreatmentClinicSchedulePrescription?null:i.LstTreatmentClinicSchedulePrescription.length)>0),s.Fb(1),s.tc("ngIf",(null==i.lstIAccessStr?null:i.lstIAccessStr.includes(i.ActionList.Download.toString()))&&(null==i.LstTreatmentClinicSchedulePrescription?null:i.LstTreatmentClinicSchedulePrescription.length)>0)}}function V(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Uc(2," No records found "),s.Xb(),s.Xb()),2&e){var n=s.mc();s.Fb(1),s.Gb("colspan","OPD"!=n.bookingtype?12:9)}}function E(e,t){1&e&&s.Tb(0,"col",59)}function j(e,t){1&e&&s.Tb(0,"col",59)}function H(e,t){1&e&&s.Tb(0,"col",59)}function W(e,t){1&e&&s.Tb(0,"col",67)}function Z(e,t){if(1&e&&(s.Yb(0,"colgroup"),s.Tb(1,"col",59),s.Tb(2,"col",60),s.Tb(3,"col",61),s.Tb(4,"col",62),s.Tb(5,"col",61),s.Tb(6,"col",61),s.Tb(7,"col",63),s.Sc(8,E,1,0,"col",64),s.Sc(9,j,1,0,"col",64),s.Sc(10,H,1,0,"col",64),s.Tb(11,"col",65),s.Sc(12,W,1,0,"col",66),s.Tb(13,"col",62),s.Xb()),2&e){var n=s.mc();s.Fb(8),s.tc("ngIf","IPD"==n.bookingtype),s.Fb(1),s.tc("ngIf","IPD"==n.bookingtype),s.Fb(1),s.tc("ngIf","IPD"==n.bookingtype),s.Fb(2),s.tc("ngIf","IPD"==n.bookingtype)}}function z(e,t){1&e&&(s.Yb(0,"th"),s.Uc(1,"Time Period"),s.Xb())}function J(e,t){1&e&&(s.Yb(0,"th"),s.Uc(1,"Cond."),s.Xb())}function $(e,t){1&e&&(s.Yb(0,"th"),s.Uc(1,"Adm. Date"),s.Xb())}function Q(e,t){1&e&&(s.Yb(0,"th"),s.Uc(1,"Remarks"),s.Xb())}function q(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"th"),s.Uc(2,"Name"),s.Xb(),s.Yb(3,"th"),s.Uc(4,"MR No"),s.Xb(),s.Yb(5,"th"),s.Uc(6,"Contact No"),s.Xb(),s.Yb(7,"th"),s.Uc(8,"Gender"),s.Xb(),s.Yb(9,"th"),s.Uc(10,"Category"),s.Xb(),s.Yb(11,"th"),s.Uc(12,"Treatment Name"),s.Xb(),s.Yb(13,"th"),s.Uc(14),s.Xb(),s.Sc(15,z,2,0,"th",68),s.Sc(16,J,2,0,"th",68),s.Sc(17,$,2,0,"th",68),s.Yb(18,"th"),s.Uc(19,"Status"),s.Xb(),s.Sc(20,Q,2,0,"th",68),s.Yb(21,"th"),s.Uc(22,"Action"),s.Xb(),s.Xb()),2&e){var n=s.mc();s.Fb(14),s.Vc("IPD"==n.bookingtype||"OPD"==n.bookingtype&&"Prescription"==n.OPDType?"Presc. Date":"Purchase Date"),s.Fb(1),s.tc("ngIf","IPD"==n.bookingtype),s.Fb(1),s.tc("ngIf","IPD"===n.bookingtype),s.Fb(1),s.tc("ngIf","IPD"===n.bookingtype),s.Fb(3),s.tc("ngIf","IPD"==n.bookingtype)}}function K(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"td",71),s.Yb(2,"span"),s.Uc(3),s.Xb(),s.Xb(),s.Xb()),2&e){var n=s.mc().$implicit,i=s.mc();s.Fb(1),s.Gb("colspan","OPD"!=i.bookingtype?12:9),s.Fb(2),s.Vc(n.PatientName)}}function ee(e,t){if(1&e&&(s.Yb(0,"td"),s.Uc(1),s.Xb()),2&e){var n=s.mc().$implicit;s.Fb(1),s.Vc(n.TimeDetails)}}function te(e,t){if(1&e&&(s.Yb(0,"td"),s.Uc(1),s.Xb()),2&e){var n=s.mc().$implicit;s.Fb(1),s.Vc(n.PatientConditionCode)}}function ne(e,t){if(1&e&&(s.Yb(0,"td"),s.Uc(1),s.Xb()),2&e){var n=s.mc().$implicit;s.Fb(1),s.Vc(n.Remarks)}}function ie(e,t){if(1&e){var n=s.Zb();s.Yb(0,"button",72),s.ic("click",function(){s.Lc(n);var e=s.mc().$implicit;return s.mc().DoneAppointment(e.Id)}),s.Tb(1,"i",73),s.Xb()}}function oe(e,t){if(1&e&&(s.Sc(0,K,4,2,"tr",68),s.Yb(1,"tr",69),s.Yb(2,"td"),s.Uc(3),s.Xb(),s.Yb(4,"td"),s.Uc(5),s.Xb(),s.Yb(6,"td"),s.Uc(7),s.Xb(),s.Yb(8,"td"),s.Uc(9),s.Xb(),s.Yb(10,"td"),s.Uc(11),s.Xb(),s.Yb(12,"td"),s.Uc(13),s.Xb(),s.Yb(14,"td"),s.Uc(15),s.nc(16,"date"),s.Xb(),s.Sc(17,ee,2,1,"td",68),s.Sc(18,te,2,1,"td",68),s.Yb(19,"td"),s.Uc(20),s.Xb(),s.Yb(21,"td"),s.Uc(22),s.Xb(),s.Sc(23,ne,2,1,"td",68),s.Yb(24,"td"),s.Sc(25,ie,2,0,"button",70),s.Xb(),s.Xb()),2&e){var n=t.$implicit,i=t.rowIndex,o=s.mc();s.tc("ngIf",(null==o.rowGroupMetadata[n.UserId]?null:o.rowGroupMetadata[n.UserId].index)==i),s.Fb(3),s.Vc(n.PatientName),s.Fb(2),s.Vc(n.MRNo),s.Fb(2),s.Vc(n.ContactNumber),s.Fb(2),s.Vc(n.Gender),s.Fb(2),s.Vc(n.HCategoryName),s.Fb(2),s.Vc(n.TreatmentName),s.Fb(2),s.Vc(s.pc(16,14,n.PrescriptionDate,o.customDateFormat.DEF_DATE)),s.Fb(2),s.tc("ngIf","IPD"==o.bookingtype),s.Fb(1),s.tc("ngIf","IPD"==o.bookingtype),s.Fb(2),s.Vc(n.AdmDate),s.Fb(2),s.Vc(n.StatusText),s.Fb(1),s.tc("ngIf","IPD"==o.bookingtype),s.Fb(2),s.tc("ngIf",(null==o.lstIAccessStr?null:o.lstIAccessStr.includes(o.ActionList.ReadWrite.toString()))&&1==n.Status&&n.IsValidDate&&o.UserTypeCurre===o.userTypes.Therapist)}}var re=function(){return["BookingNumber","MRNo","ContactNumber","PatientName","Gender","HCategoryName","TreatmentName","Remarks","TimeDetails","StatusText"]},ce=function(){var i=function(i){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(d,i);var o,c,l,s=n(d);function d(e,t,n,i,o,c,l,u){var b;return r(this,d),(b=s.call(this)).cdRef=e,b.router=t,b._ClinicServices=n,b._DoctorServices=i,b.datepipe=o,b._ConstantServices=c,b._MasterServices=l,b._UtilityService=u,b.UserTypeCurre=localStorage.getItem("userTypeId"),b.userTypes=a.s,b.customDateFormat=a.h,b.ClinicIdSelected=null,b.rangeDates=[],b.MaxYear=(new Date).getFullYear()+2,b.FromDtSelected=null,b.UptoDtSelected=null,b.LstTreatmentClinicSchedulePrescription=[],b.lstTreatmentCategory=[],b.lstPrescriptionTimeMaster=[],b.LstTretScPresCommon=[],b.TimeId=[],b.SelectedTreatCategory=[],b.GenderSelcted="All",b.filteredValuesLength=0,b.allPatientCount=0,b.malePatientCount=0,b.femalePatientCount=0,b.bookingtype="IPD",b.OPDType="Billing",b.filterBy="TreatPeriod",b.stlstpatientcondition=[],b.lstPatientConditionItems=[],b.ActionList=a.a,b.lstIAccess=[],b.lstIAccessStr=[],b._ConstantServices.ActiveMenuName="Therapy Monitoring List",b.rangeDates=[new Date,new Date],b.selectAdmDate=new Date,b.stlstbookingtype=[{name:"IPD",code:"IPD"},{name:"OPD",code:"OPD"}],b.stlstfilterby=[{name:"Treat. Period",code:"TreatPeriod"},{name:"Adm. Date",code:"AdmDate"}],b.stlstpatientcondition=[{PatientCondition:"Critical Patient",PatientConditionCode:"CP"},{PatientCondition:"Wheel Chair Patient",PatientConditionCode:"WCP"},{PatientCondition:"Need Assistance",PatientConditionCode:"NA"},{PatientCondition:"Detoxification",PatientConditionCode:"DETOX"}],b}return o=d,(c=[{key:"ngAfterViewChecked",value:function(){var e;0==(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)&&this.getPageLevelAccess()}},{key:"getPageLevelAccess",value:function(){var e,t,n=this,i=this.getUrlWithoutParams();"/common-dashboard"==i&&(i="/therapy-dashboard");var o=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==o?void 0:o.find(function(e){return e.MenuItemURL===i}))&&(this.lstIAccess=null===(e=o.find(function(e){return e.MenuItemURL===i}))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(function(e){n.lstIAccessStr.push(e.ActionId.toString())}))}},{key:"getUrlWithoutParams",value:function(){var e=this.router.parseUrl(this.router.url);return e.queryParams={},e.fragment=null,e.toString()}},{key:"ngOnInit",value:function(){this.LoadTreatmentCategory(),this.GetPrescriptionTimeList(),a.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.ShowTherapyList())}},{key:"onclinicSelect",value:function(e){this.ClinicIdSelected=e,this.ShowTherapyList()}},{key:"LoadTreatmentCategory",value:function(){var e=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetTreatmentCategory().subscribe(function(t){var n;if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);if(e.lstTreatmentCategory=i=i||[],e.lstTreatmentCategory.length>0)for(var o=0;o<(null===(n=e.lstTreatmentCategory)||void 0===n?void 0:n.length);o++)e.SelectedTreatCategory=e.SelectedTreatCategory.concat(e.lstTreatmentCategory[o].HCategoryName);e.cdRef.detectChanges()}},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"GetPrescriptionTimeList",value:function(){var e=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPrescriptionTimeMasterActive("Treatment").subscribe(function(t){var n;if(e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);if(e.lstPrescriptionTimeMaster=i=i||[],e.lstPrescriptionTimeMaster=e.lstPrescriptionTimeMaster.filter(function(e){return!(e.TimeId==a.r.Time2||e.TimeId==a.r.Time3)}),e.lstPrescriptionTimeMaster.length>0)for(var o=0;o<(null===(n=e.lstPrescriptionTimeMaster)||void 0===n?void 0:n.length);o++)e.TimeId=e.TimeId.concat(e.lstPrescriptionTimeMaster[o].TimeId);e.cdRef.detectChanges()}else e.lstPrescriptionTimeMaster=[],e.cdRef.detectChanges()},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"tabClick",value:function(e){e.index>=0&&this.updateRowGroupMetaData(this.LstTretScPresCommon[e.index].TreatList)}},{key:"onChangeCategory",value:function(e){this.SelectedTreatCategory=e,this.ShowTherapyList()}},{key:"onChangeItems",value:function(e){this.TimeId=e,this.ShowTherapyList()}},{key:"onChangeCondition",value:function(e){this.lstPatientConditionItems=e,this.ShowTherapyList()}},{key:"onChangeFilterBy",value:function(e){this.ShowTherapyList()}},{key:"ShowTherapyList",value:function(){var e,t,n,i=this;if(""!=this.ClinicIdSelected&&null!=this.ClinicIdSelected&&null!=this.ClinicIdSelected){this.LstTreatmentClinicSchedulePrescription=[],this.LstTretScPresCommon=[];var o={};o.clinicId=this.ClinicIdSelected,o.bookingType=this.bookingtype,o.filterByDate=this.filterBy,o.dFrom=new Date(this.datepipe.transform(this.rangeDates[0],"yyyy-MM-dd")),o.dTo=new Date(this.datepipe.transform(this.rangeDates[1],"yyyy-MM-dd")),o.TranDate=new Date(this.datepipe.transform(this.selectAdmDate,"yyyy-MM-dd")),o.gender=this.GenderSelcted,o.prescriptionType=this.OPDType;for(var r=[],c=0;c<(null===(e=this.SelectedTreatCategory)||void 0===e?void 0:e.length);c++)r.push({id:this.SelectedTreatCategory[c]});var a=[];for(c=0;c<(null===(t=this.TimeId)||void 0===t?void 0:t.length);c++)a.push({id:this.TimeId[c]});var l=[];for(c=0;c<(null===(n=this.lstPatientConditionItems)||void 0===n?void 0:n.length);c++)l.push({id:this.lstPatientConditionItems[c]});o.lstCommonId2=r,o.lstCommonId=a,o.lstCommonId3=l,this.cdRef.detectChanges(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._ClinicServices.GetTreatmentScheduleForTherapy(o).subscribe(function(e){if(i._UtilityService.hideSpinner(),i.cdRef.detectChanges(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);i.LstTreatmentClinicSchedulePrescription=t=t||[],i.updateRowGroupMetaData(i.LstTreatmentClinicSchedulePrescription)}else i.LstTreatmentClinicSchedulePrescription=[],i.cdRef.detectChanges()},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})}else this._UtilityService.showWarningAlert("Please select center")}},{key:"updateRowGroupMetaData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.rowGroupMetadata={},e)for(var t=0;t<e.length;t++){var n=e[t].UserId;0==t?this.rowGroupMetadata[n]={index:0,size:1}:n===e[t-1].UserId?this.rowGroupMetadata[n].size++:this.rowGroupMetadata[n]={index:t,size:1}}void 0!==this.filtr&&(this.filtr.nativeElement.value="",this.dataTable.reset(),this.filteredValuesLength=null==e?void 0:e.length,this.allPatientCount=new Set(e.map(function(e){return e.BookingNumber})).size,this.malePatientCount=new Set(e.filter(function(e){return"Male"===e.Gender}).map(function(e){return e.BookingNumber})).size,this.femalePatientCount=new Set(e.filter(function(e){return"Female"===e.Gender}).map(function(e){return e.BookingNumber})).size),this.cdRef.detectChanges()}},{key:"dateRangeChange",value:function(){this.rangeDates[0]&&this.rangeDates[1]&&(void 0!==this.calendar&&(this.calendar.overlayVisible=!1),this.ShowTherapyList())}},{key:"admDateChange",value:function(){this.selectAdmDate&&(void 0!==this.calendar&&(this.calendar.overlayVisible=!1),this.ShowTherapyList())}},{key:"DoneAppointment",value:function(e){var t=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._ClinicServices.UpdateTreatmentScheduleMonitoring(e,this.bookingtype,this.OPDType).subscribe(function(e){t._UtilityService.hideSpinner(),t._UtilityService.showSuccessAlert(e.actionResult.errMsg),1==e.actionResult.success&&t.ShowTherapyList()},function(e){t._UtilityService.hideSpinner(),t._UtilityService.showErrorAlert(e.message)})}},{key:"exportToItemExcel",value:function(e){var t,n,i={reportname:"therapydashboard",filename:"therapydashboard"};i.clinicId=this.ClinicIdSelected,i.bookingtype=this.bookingtype,i.filterByDate=this.filterBy,i.dFrom=new Date(this.datepipe.transform(this.rangeDates[0],"yyyy-MM-dd")),i.dTo=new Date(this.datepipe.transform(this.rangeDates[1],"yyyy-MM-dd")),i.TranDate=new Date(this.datepipe.transform(this.selectAdmDate,"yyyy-MM-dd")),i.gender=this.GenderSelcted,i.prescriptionType=this.OPDType,i.reportType=e;for(var o=[],r=0;r<(null===(t=this.lstPatientConditionItems)||void 0===t?void 0:t.length);r++)o.push({id:this.lstPatientConditionItems[r]});var c=[];for(r=0;r<(null===(n=this.TimeId)||void 0===n?void 0:n.length);r++)c.push({id:this.TimeId[r]});i.lstCommonId3=o,i.lstCommonId2=[],i.lstCommonId=c,this._MasterServices.downloadReport(i)}},{key:"onFilter",value:function(e,t){this.filteredValuesLength=e.filteredValue.length,this.allPatientCount=new Set(e.filteredValue.map(function(e){return e.BookingNumber})).size,this.malePatientCount=new Set(e.filteredValue.filter(function(e){return"Male"===e.Gender}).map(function(e){return e.BookingNumber})).size,this.femalePatientCount=new Set(e.filteredValue.filter(function(e){return"Female"===e.Gender}).map(function(e){return e.BookingNumber})).size}}])&&e(o.prototype,c),l&&e(o,l),d}(l.a);return i.\u0275fac=function(e){return new(e||i)(s.Sb(s.h),s.Sb(d.i),s.Sb(u.a),s.Sb(b.a),s.Sb(p.f),s.Sb(a.f),s.Sb(h.a),s.Sb(m.a))},i.\u0275cmp=s.Mb({type:i,selectors:[["app-therapy-dashboard"]],viewQuery:function(e,t){var n;(1&e&&(s.cd(D,1),s.cd(X,1),s.cd(Y,1)),2&e)&&(s.Hc(n=s.jc())&&(t.dataTable=n.first),s.Hc(n=s.jc())&&(t.filtr=n.first),s.Hc(n=s.jc())&&(t.calendar=n.first))},features:[s.Cb],decls:51,vars:37,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["class","row mb-2",4,"ngIf"],[1,"row","mb-2"],[1,"col-md-2"],["for",""],[1,"required"],["optionLabel","name","optionValue","code",3,"options","ngModel","ngModelOptions","ngModelChange","onChange"],["class","col-md-2",4,"ngIf"],[1,"col-md-3"],["appendTo","body","optionLabel","HCategoryName","optionValue","HCategoryName",3,"options","ngModel","overlayVisible","ngModelChange","onChange"],["class","col-md-auto",4,"ngIf"],[1,"bold"],[1,"field-radiobutton","mb5"],["name","rbGenderSelcted","value","All",3,"ngModel","ngModelChange","onClick"],[1,"pl-1","mr-2","radiolabel"],["name","rbGenderSelcted","value","Male",3,"ngModel","ngModelChange","onClick"],["name","rbGenderSelcted","value","Female",3,"ngModel","ngModelChange","onClick"],[1,"pl-1","radiolabel"],[1,"row"],["responsiveLayout","scroll","dataKey","UserId","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 250px)",3,"value","rowHover","globalFilterFields","scrollable","rows","virtualScroll","virtualRowHeight","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[1,"col","col-md-1","pr-0"],["for","",1,"pt-2"],[1,"col","col-md-3"],[3,"isCenterLabel","mode","onclinicSelect"],["name","rbOPDTypeSelcted","value","Billing",3,"ngModel","ngModelChange","onClick"],["name","rbOPDTypeSelcted","value","Prescription",3,"ngModel","ngModelChange","onClick"],[1,"form-group"],["appendTo","body","optionLabel","TimeDetails","optionValue","TimeId",3,"options","ngModel","ngModelChange","onChange"],["appendTo","body","optionLabel","PatientCondition","optionValue","PatientConditionCode",3,"options","ngModel","ngModelChange","onChange"],[1,"col-md-auto"],["for","",2,"font-weight","bold !important"],["selectionMode","range","inputId","icon","name","rangeDates",3,"monthNavigator","yearNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],[1,"mr-2"],["inputId","icon",3,"monthNavigator","yearNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","onSelect","ngModelChange"],[1,"p-d-flex"],[1,"p-ml-left"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],["pButton","","title","Export All Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],["pButton","","title","Export With Data Count","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],["pButton","","title","Export Time-slot Wise","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],["pButton","","title","Export All Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],["pButton","","title","Export With Data Count","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],["pButton","","title","Export Time-slot Wise","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],[2,"width","130px"],[2,"width","125px"],[2,"width","120px"],[2,"width","60px"],[2,"width","105px"],["style","width:130px",4,"ngIf"],[2,"width","70px"],["style","width:80px",4,"ngIf"],[2,"width","80px"],[4,"ngIf"],[2,"height","34px"],["matTooltip","Appointment Done","class","btn btn-new-primary",3,"click",4,"ngIf"],[2,"background-color","#ebedf3","font-weight","bold","height","34px"],["matTooltip","Appointment Done",1,"btn","btn-new-primary",3,"click"],[1,"pi","pi-check",2,"color","white"]],template:function(e,t){if(1&e){var n=s.Zb();s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Sc(4,M,8,2,"div",4),s.Yb(5,"div",5),s.Yb(6,"div",6),s.Yb(7,"label",7),s.Uc(8,"Booking Type "),s.Yb(9,"span",8),s.Uc(10,"*"),s.Xb(),s.Xb(),s.Yb(11,"p-dropdown",9),s.ic("ngModelChange",function(e){return t.bookingtype=e})("onChange",function(){return t.ShowTherapyList()}),s.Xb(),s.Xb(),s.Sc(12,k,10,2,"div",10),s.Yb(13,"div",11),s.Yb(14,"label"),s.Uc(15,"Treatment Category"),s.Xb(),s.Yb(16,"span",8),s.Uc(17,"*"),s.Xb(),s.Yb(18,"p-multiSelect",12),s.ic("ngModelChange",function(e){return t.SelectedTreatCategory=e})("onChange",function(e){return t.onChangeCategory(e.value)}),s.Xb(),s.Xb(),s.Sc(19,U,7,5,"div",10),s.Sc(20,L,5,5,"div",10),s.Yb(21,"div",6),s.Yb(22,"label",7),s.Uc(23,"Filter By"),s.Yb(24,"span",8),s.Uc(25,"*"),s.Xb(),s.Xb(),s.Yb(26,"p-dropdown",9),s.ic("ngModelChange",function(e){return t.filterBy=e})("onChange",function(e){return t.onChangeFilterBy(e.value)}),s.Xb(),s.Xb(),s.Sc(27,O,8,10,"div",13),s.Sc(28,x,9,10,"div",13),s.Yb(29,"div",6),s.Yb(30,"label",14),s.Uc(31,"Gender"),s.Xb(),s.Yb(32,"div",15),s.Yb(33,"p-radioButton",16),s.ic("ngModelChange",function(e){return t.GenderSelcted=e})("onClick",function(){return t.ShowTherapyList()}),s.Xb(),s.Yb(34,"label",17),s.Uc(35,"All"),s.Xb(),s.Yb(36,"p-radioButton",18),s.ic("ngModelChange",function(e){return t.GenderSelcted=e})("onClick",function(){return t.ShowTherapyList()}),s.Xb(),s.Yb(37,"label",17),s.Uc(38,"Male"),s.Xb(),s.Yb(39,"p-radioButton",19),s.ic("ngModelChange",function(e){return t.GenderSelcted=e})("onClick",function(){return t.ShowTherapyList()}),s.Xb(),s.Yb(40,"label",20),s.Uc(41,"Female"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(42,"div",21),s.Yb(43,"div",1),s.Yb(44,"p-table",22,23),s.ic("onFilter",function(e){s.Lc(n);var i=s.Ic(45);return t.onFilter(e,i)}),s.Sc(46,_,12,5,"ng-template",24),s.Sc(47,V,3,1,"ng-template",25),s.Sc(48,Z,14,4,"ng-template",26),s.Sc(49,q,23,5,"ng-template",27),s.Sc(50,oe,26,17,"ng-template",28),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()}2&e&&(s.Fb(4),s.tc("ngIf",t.UserTypeCurre===t.userTypes.SuperAdmin),s.Fb(7),s.Pc(s.yc(31,F)),s.tc("options",t.stlstbookingtype)("ngModel",t.bookingtype)("ngModelOptions",s.yc(32,A)),s.Fb(1),s.tc("ngIf","OPD"==t.bookingtype),s.Fb(6),s.Pc(s.yc(33,F)),s.tc("options",t.lstTreatmentCategory)("ngModel",t.SelectedTreatCategory)("overlayVisible",!1),s.Fb(1),s.tc("ngIf","IPD"==t.bookingtype),s.Fb(1),s.tc("ngIf","IPD"==t.bookingtype),s.Fb(6),s.Pc(s.yc(34,F)),s.tc("options",t.stlstfilterby)("ngModel",t.filterBy)("ngModelOptions",s.yc(35,A)),s.Fb(1),s.tc("ngIf","TreatPeriod"==t.filterBy),s.Fb(1),s.tc("ngIf","AdmDate"==t.filterBy),s.Fb(5),s.tc("ngModel",t.GenderSelcted),s.Fb(3),s.tc("ngModel",t.GenderSelcted),s.Fb(3),s.tc("ngModel",t.GenderSelcted),s.Fb(5),s.tc("value",t.LstTreatmentClinicSchedulePrescription)("rowHover",!0)("globalFilterFields",s.yc(36,re))("scrollable",!0)("rows",15)("virtualScroll",!0)("virtualRowHeight",34))},directives:[p.p,f.a,g.o,g.r,y.a,v.a,S.c,C.i,T.a,I.a,P.a,w.b],pipes:[p.f],styles:[""]}),i}()}}])}();