(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"X/Io":function(t,i,e){"use strict";e.d(i,"a",function(){return h});var o=e("ofXK"),s=e("tyNb"),n=e("x5zU"),c=e("fXoL");const r=[{path:"",component:n.a}];let l=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.Qb({type:t}),t.\u0275inj=c.Pb({imports:[[s.l.forChild(r)],s.l]}),t})();var a=e("3Pt+"),b=e("rEr+"),d=e("jIHw"),u=e("/RsI"),p=e("vcJ/");let h=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.Qb({type:t}),t.\u0275inj=c.Pb({imports:[[o.c,l,a.i,b.f,d.c,u.b,p.a]]}),t})()},"qC/m":function(t,i,e){"use strict";e.r(i),e.d(i,"FrontdeskBookingModule",function(){return J});var o=e("ofXK"),s=e("tyNb"),n=e("Nach"),c=e("CwUn"),r=e("fXoL"),l=e("7zfz"),a=e("dcBc"),b=e("eRWq"),d=e("NLkC"),u=e("G+wY"),p=e("/RsI"),h=e("3Pt+"),g=e("58k3"),m=e("rEr+"),f=e("7kUa"),I=e("x5zU"),S=e("aXlx");function y(t,i){if(1&t){const t=r.Zb();r.Yb(0,"button",17),r.ic("click",function(){return r.Lc(t),r.mc(2).NewRegistration()}),r.Uc(1," New Registration "),r.Xb()}}function v(t,i){if(1&t){const t=r.Zb();r.Yb(0,"div",9),r.Yb(1,"div",10),r.Yb(2,"div",11),r.Yb(3,"div",12),r.Yb(4,"input",13),r.ic("ngModelChange",function(i){return r.Lc(t),r.mc().searchtxt=i}),r.Xb(),r.Xb(),r.Yb(5,"div"),r.Yb(6,"button",14),r.ic("click",function(){return r.Lc(t),r.mc().LoadPatientList()}),r.Uc(7," Search "),r.Xb(),r.Xb(),r.Yb(8,"div",15),r.Sc(9,y,2,0,"button",16),r.Xb(),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=r.mc();r.Fb(4),r.tc("ngModel",t.searchtxt),r.Fb(5),r.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))}}function w(t,i){if(1&t){const t=r.Zb();r.Yb(0,"div"),r.Yb(1,"app-registration",18),r.ic("RegMRNo",function(i){return r.Lc(t),r.mc().ReceiveMRno(i)}),r.Xb(),r.Xb()}if(2&t){const t=r.mc();r.Fb(1),r.tc("InputType",t.InputType)("RegInputType",t.RegInputType)}}function P(t,i){if(1&t){const t=r.Zb();r.Yb(0,"div",30),r.Yb(1,"span",31),r.Tb(2,"i",32),r.Yb(3,"input",33),r.ic("input",function(i){return r.Lc(t),r.mc(),r.Ic(6).filterGlobal(i.target.value,"contains")}),r.Xb(),r.Xb(),r.Xb()}}function R(t,i){1&t&&(r.Yb(0,"tr"),r.Yb(1,"td"),r.Uc(2," No records found "),r.Xb(),r.Xb()),2&t&&(r.Fb(1),r.Gb("colspan",7))}function k(t,i){1&t&&(r.Yb(0,"colgroup"),r.Tb(1,"col",34),r.Tb(2,"col",35),r.Tb(3,"col",36),r.Tb(4,"col",36),r.Tb(5,"col",37),r.Tb(6,"col",38),r.Tb(7,"col",39),r.Xb())}function M(t,i){1&t&&(r.Yb(0,"tr"),r.Yb(1,"th"),r.Uc(2,"MR NO"),r.Xb(),r.Yb(3,"th"),r.Uc(4,"Name"),r.Xb(),r.Yb(5,"th"),r.Uc(6,"Id Proof"),r.Xb(),r.Yb(7,"th"),r.Uc(8,"Email"),r.Xb(),r.Yb(9,"th"),r.Uc(10,"Mobile"),r.Xb(),r.Yb(11,"th"),r.Uc(12,"Address"),r.Xb(),r.Yb(13,"th"),r.Uc(14,"Action"),r.Xb(),r.Xb())}function U(t,i){1&t&&(r.Yb(0,"span"),r.Uc(1,", "),r.Xb())}function X(t,i){if(1&t){const t=r.Zb();r.Yb(0,"a",44),r.Yb(1,"img",45),r.ic("click",function(){r.Lc(t);const i=r.mc().$implicit;return r.mc(2).NewBooking(i.UserId,i.Gender)}),r.Xb(),r.Xb()}}function C(t,i){if(1&t){const t=r.Zb();r.Yb(0,"i",46),r.ic("click",function(){r.Lc(t);const i=r.mc().$implicit;return r.mc(2).showPatientRegistaration(i.UserId)}),r.Xb()}}function Y(t,i){if(1&t){const t=r.Zb();r.Yb(0,"i",47),r.ic("click",function(){r.Lc(t);const i=r.mc().$implicit;return r.mc(2).SaveSlotBooking(i.UserId)}),r.Xb()}}function L(t,i){if(1&t){const t=r.Zb();r.Yb(0,"tr"),r.Yb(1,"td"),r.Uc(2),r.Xb(),r.Yb(3,"td"),r.Uc(4),r.Xb(),r.Yb(5,"td"),r.Uc(6),r.Xb(),r.Yb(7,"td"),r.Uc(8),r.Xb(),r.Yb(9,"td"),r.Uc(10),r.Xb(),r.Yb(11,"td"),r.Uc(12),r.Sc(13,U,2,0,"span",2),r.Uc(14),r.Xb(),r.Yb(15,"td"),r.Sc(16,X,2,0,"a",40),r.Sc(17,C,1,0,"i",41),r.Yb(18,"i",42),r.ic("click",function(){r.Lc(t);const e=i.$implicit;return r.mc(2).showPatientPrescriptionHistory(e.UserId)}),r.Xb(),r.Sc(19,Y,1,0,"i",43),r.Xb(),r.Xb()}if(2&t){const t=i.$implicit,e=r.mc(2);r.Fb(2),r.Vc(t.MRNo),r.Fb(2),r.Xc("",t.FirstName," ",t.LastName,""),r.Fb(2),r.Xc("",t.IdProofName," - ",t.IdProofNumber,""),r.Fb(2),r.Vc(t.Email),r.Fb(2),r.Vc(t.ContactNumber),r.Fb(2),r.Vc(t.AddressLine1),r.Fb(1),r.tc("ngIf",""!=(null==t?null:t.AddressLine1)&&null!=(null==t?null:t.AddressLine1)),r.Fb(1),r.Zc("",t.City,", ",t.State,", ",t.CountryName," - ",t.ZipCode,""),r.Fb(2),r.tc("ngIf",null==e.lstIAccessStr?null:e.lstIAccessStr.includes(e.ActionList.ReadWrite.toString())),r.Fb(1),r.tc("ngIf",null==e.lstIAccessStr?null:e.lstIAccessStr.includes(e.ActionList.ReadWrite.toString())),r.Fb(2),r.tc("ngIf",e.IsGuestBooking&&(null==e.lstIAccessStr?null:e.lstIAccessStr.includes(e.ActionList.ReadWrite.toString())))}}const T=function(){return["MRNo","FirstName","LastName","IdProofName","IdProofNumber","Email","ContactNumber","City","State","CountryName"]};function N(t,i){if(1&t&&(r.Yb(0,"div",19),r.Yb(1,"div",20),r.Yb(2,"div",21),r.Yb(3,"div",22),r.Yb(4,"div",23),r.Yb(5,"p-table",24,25),r.Sc(7,P,4,0,"ng-template",26),r.Sc(8,R,3,1,"ng-template",27),r.Sc(9,k,8,0,"ng-template",28),r.Sc(10,M,15,0,"ng-template",5),r.Sc(11,L,20,16,"ng-template",29),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t){const t=r.mc();r.Fb(5),r.tc("value",t.lstUserMaster)("rowHover",!0)("globalFilterFields",r.yc(4,T))("scrollable",!0)}}function B(t,i){if(1&t&&(r.Yb(0,"h5"),r.Uc(1),r.Xb()),2&t){const t=r.mc();r.Fb(1),r.Wc("Visit History - Total Visits ",t.totalVisitPrescriptionCount,"")}}function F(t,i){if(1&t){const t=r.Zb();r.Yb(0,"div"),r.Yb(1,"app-patient-all-prescription-history",48),r.ic("TotalVisitPrescriptionCount",function(i){return r.Lc(t),r.mc().VisitPrescriptionCount(i)}),r.Xb(),r.Xb()}if(2&t){const t=r.mc();r.Fb(1),r.tc("PatientId",t.selectedPatientId)}}function A(t,i){if(1&t){const t=r.Zb();r.Yb(0,"button",49),r.ic("click",function(){return r.Lc(t),r.mc().hidePrescriptionHistory()}),r.Uc(1," Close "),r.Xb()}}function D(t,i){if(1&t){const t=r.Zb();r.Yb(0,"a",50),r.ic("click",function(){return r.Lc(t),r.mc().CloseModal()}),r.Tb(1,"i",51),r.Xb()}}function x(t,i){if(1&t&&(r.Yb(0,"div"),r.Tb(1,"app-book-appointment",52),r.Xb()),2&t){const t=r.mc();r.Fb(1),r.tc("bookingclinicId",t.bookingclinicId)("gender",t.gender)("patientId",t.patientId)("loginUserId",t.loginUserId)("InputClinicList",t.InputClinicList)}}function O(t,i){1&t&&(r.Yb(0,"h5"),r.Uc(1,"Registration Details"),r.Xb())}function _(t,i){if(1&t){const t=r.Zb();r.Yb(0,"div"),r.Yb(1,"app-registration",53),r.ic("OnUpdateRegDetails",function(i){return r.Lc(t),r.mc().OnUpdateRegDetails(i)}),r.Xb(),r.Xb()}if(2&t){const t=r.mc();r.Fb(1),r.tc("RegistrationMainModel",t.RegistrationMainModel)("InputType",t.ViewEditInputType)}}const V=function(){return{width:"70vw"}},z=[{path:"",component:(()=>{class t extends c.a{constructor(t,i,e,o,s,c,r,l,a){var b;super(),this.cdRef=t,this.router=i,this.confirmationService=e,this._MasterServices=o,this._ConstantServices=s,this._RegistrationServices=c,this._UtilityService=r,this.datepipe=l,this._PatientServices=a,this.lsobjClinicMaster=JSON.parse(localStorage.getItem("objClinicMaster"))||null,this.mode=null,this.bookingclinicId=localStorage.getItem("ClinicId"),this.loginUserId=localStorage.getItem("userId"),this.InputClinicList=[],this.showNewRegistration=!1,this.RegMRNo=null,this.InputType=1,this.RegInputType=0,this.totalVisitPrescriptionCount=0,this.showModalPrescriptionHistory=!1,this.showModalPatientRegistaration=!1,this.RegistrationMainModel={},this.ViewEditInputType=5,this.selectedPatientId=null,this.UserTypes=n.s,this.userTypeId=localStorage.getItem("userTypeId"),this.patienttype=n.p,this.lstslotBookingMaster=[],this.bookingMainModel={},this.IsGuestBooking=!1,this.ActionList=n.a,this.lstIAccess=[],this.lstIAccessStr=[],this.IsGuestBooking=1==(null===(b=this.lsobjClinicMaster)||void 0===b?void 0:b.IsGuestBooking),this.getPageLevelAccess()}getPageLevelAccess(){var t,i,e=this.getUrlWithoutParams(),o=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==o?void 0:o.find(t=>t.MenuItemURL===e))&&(this.lstIAccess=null===(t=o.find(t=>t.MenuItemURL===e))||void 0===t?void 0:t.ActionIAccess,(null===(i=this.lstIAccess)||void 0===i?void 0:i.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}getUrlWithoutParams(){let t=this.router.parseUrl(this.router.url);return t.queryParams={},t.fragment=null,t.toString()}ngOnInit(){this._ConstantServices.ActiveMenuName="New Booking",this.LoadClinicList(),this.cdRef.detectChanges()}LoadClinicList(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetClinicMaster().subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);this.InputClinicList=i=i||[]}else this.InputClinicList=null;this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadPatientList(){var t;""!=(null===(t=this.searchtxt)||void 0===t?void 0:t.trim())&&null!=this.searchtxt&&null!=this.searchtxt?(this._UtilityService.showSpinner(),this.unsubscribe.add=this._RegistrationServices.GetPaitentRegistrtionDetailsByFilter(this.searchtxt).subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);this.lstUserMaster=i=i||[],this.searchtxt="",this.mode=null,this.cdRef.detectChanges()}else this.lstUserMaster=null,this.searchtxt="",this.mode=null})):this._UtilityService.showWarningAlert("Please enter MR No.")}showPatientPrescriptionHistory(t){this.selectedPatientId=t,this.showModalPrescriptionHistory=!0}hidePrescriptionHistory(){this.selectedPatientId=null,this.showModalPrescriptionHistory=!1}VisitPrescriptionCount(t){this.totalVisitPrescriptionCount=t}NewBooking(t,i){this.mode="booking",this.patientId=t,this.gender=i}CloseModal(){this.mode=null}NewRegistration(){this.showNewRegistration=!0}ReceiveMRno(t){let i={};if(this.userTypeId!=this.UserTypes.SuperAdmin&&(i=this.InputClinicList.find(t=>t.ClinicId==localStorage.getItem("ClinicId"))),null==i||"OPD"!=i.ClinicType||1!=i.IsChikitsalaya||0!=i.IsOPDChargeable&&null!=i.IsOPDChargeable)this._UtilityService.showSuccessAlert("Patient (MRNo : "+t.split("~")[0]+") registered successfully."),this.searchtxt=t.split("~")[0],$("#clickSearch").click();else{var e={PayType:1};e.ClinicId=localStorage.getItem("ClinicId");let i=[{SlotBookingId:null,PackageMasterId:null,ReviewerDoctorId:null,PeriodFrom:new Date(this.datepipe.transform(new Date,"yyyy-MM-dd")),BookModifiedOn:new Date,BookingModifiedBy:null,ClinicId:localStorage.getItem("ClinicId"),BookingType:"OPD",BookingFor:"Chikitsalay Direct Booking on Registration",BookingStatus:9,CreatedBy:localStorage.getItem("userId"),CreatedOn:new Date,ModifiedBy:localStorage.getItem("userId"),ModifiedOn:new Date,SlotBookedOn:new Date,SlotBookedBy:localStorage.getItem("userId"),PatientId:t.split("~")[1],IsGrouped:!1,IsGrouphead:!1,GroupNumber:null}];e.SlotBooking=i,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddSlotBooking(e).subscribe(i=>{this._UtilityService.hideSpinner(),1==i.actionResult.success?(alert(i.actionResult.errMsg),this.router.navigateByUrl(this.userTypeId===n.s.Patient||this.userTypeId===n.s.Doctor?"/common-dashboard":"/patient/health-seekeer-registration?BookingNumber="+i.actionResult.stringVal2)):(this._UtilityService.showWarningAlert(i.actionResult.errMsg),this.searchtxt=t.split("~")[0],$("#clickSearch").click())})}this.showNewRegistration=!1}showPatientRegistaration(t){this.selectedPatientId=t,this.LoadPaitentDetails()}hidePatientRegistaration(){this.selectedPatientId=null,this.showModalPatientRegistaration=!1}LoadPaitentDetails(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._RegistrationServices.GetOnlineRegistrationDetailsById("",this.selectedPatientId).subscribe(t=>{var i,e,o;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var s=JSON.parse(t.actionResult.result);this.RegistrationMainModel=s=s||[],null!=(null===(i=this.RegistrationMainModel)||void 0===i?void 0:i.DateOfBirth)&&null!=(null===(e=this.RegistrationMainModel)||void 0===e?void 0:e.DateOfBirth)&&(this.RegistrationMainModel.DateOfBirth=new Date(null===(o=this.RegistrationMainModel)||void 0===o?void 0:o.DateOfBirth)),this.showModalPatientRegistaration=!0,this.cdRef.detectChanges()}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}OnUpdateRegDetails(t){"Update"==t&&(this.showModalPatientRegistaration=!1,this.searchtxt=this.RegistrationMainModel.MRNo,this.LoadPatientList())}SaveSlotBooking(t){this.confirmationService.confirm({header:"Confirmation",message:"Are you sure you want to booking as a guest?",icon:"pi pi-exclamation-triangle",accept:()=>{this.bookingMainModel.ClinicId=this.bookingclinicId,this.lstslotBookingMaster=[],this.lstslotBookingMaster.push({SlotBookingId:null,PackageMasterId:null,ReviewerDoctorId:null,PeriodFrom:void 0,PeriodUpto:void 0,BookModifiedOn:new Date,BookingModifiedBy:null,ClinicId:this.bookingclinicId,BookingType:"IPD",BookingFor:"Guest Booking",BookingStatus:n.d.Approved,CreatedBy:this.loginUserId,CreatedOn:new Date,ModifiedBy:this.loginUserId,ModifiedOn:new Date,SlotBookedOn:new Date,SlotBookedBy:this.loginUserId,PatientId:t,IsGrouped:!1,IsGrouphead:!1,GroupNumber:null,PatientRelation:null,PatientType:n.p.Guest}),this.bookingMainModel.SlotBooking=this.lstslotBookingMaster,this._UtilityService.showSpinner(),this.unsubscribe.add=this._PatientServices.AddSlotBooking(this.bookingMainModel).subscribe(t=>{this._UtilityService.hideSpinner(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.router.navigateByUrl("/patient/health-seekeer-registration?BookingNumber="+t.actionResult.stringVal2)):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}})}}return t.\u0275fac=function(i){return new(i||t)(r.Sb(r.h),r.Sb(s.i),r.Sb(l.a),r.Sb(a.a),r.Sb(n.f),r.Sb(b.a),r.Sb(d.a),r.Sb(o.f),r.Sb(u.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["app-frontdesk-booking"]],features:[r.Cb],decls:14,vars:37,consts:[["class","row ml-0 mr-0 mt25",4,"ngIf"],["id","childRef","header","New Registration",3,"visible","modal","maximizable","closeOnEscape","closable","draggable","resizable","visibleChange"],[4,"ngIf"],["class","mt10 mb10",4,"ngIf"],[3,"visible","modal","maximizable","closeOnEscape","closable","draggable","resizable","visibleChange"],["pTemplate","header"],["pTemplate","footer"],[1,"row","d-flex"],["class","ml-auto close",3,"click",4,"ngIf"],[1,"row","ml-0","mr-0","mt25"],[1,"col-md-12","mb-2"],[1,"row"],[1,"col-md-4","col-6","pl-0"],["type","text","name","searchtxt","placeholder","Search By MRNo/Name/Phone/Email/Id Proof",1,"form-control",3,"ngModel","ngModelChange"],["type","button","matTooltip","Search","id","clickSearch",1,"btn","btn-new-primary",3,"click"],[1,"col-md-2","col-3"],["type","button","matTooltip","New Registration","class","btn btn-new-primary",3,"click",4,"ngIf"],["type","button","matTooltip","New Registration",1,"btn","btn-new-primary",3,"click"],[3,"InputType","RegInputType","RegMRNo"],[1,"mt10","mb10"],[1,"card"],[1,"card-body"],[1,"row","mb-4"],[1,"col-md-12"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","250px",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","125px"],[2,"width","130px"],[2,"width","170px"],[2,"width","95px"],[2,"width","200px"],[2,"width","120px"],["title","New Booking",4,"ngIf"],["title","View/Edit","class","pi pi-user-edit  mr-2","style","font-size:1.5rem !important",3,"click",4,"ngIf"],["title","View History",1,"pi","pi-calendar-times","mr-2",2,"font-size","1.5rem !important",3,"click"],["title","Guest Booking","class","pi pi-home","style","font-size:1.5rem !important",3,"click",4,"ngIf"],["title","New Booking"],["src","./assets/custom-icons/book.svg",1,"custom-ico","mr-2",2,"width","18px !important","vertical-align","baseline",3,"click"],["title","View/Edit",1,"pi","pi-user-edit","mr-2",2,"font-size","1.5rem !important",3,"click"],["title","Guest Booking",1,"pi","pi-home",2,"font-size","1.5rem !important",3,"click"],[3,"PatientId","TotalVisitPrescriptionCount"],["type","button",1,"btn","btn-new-secondary",3,"click"],[1,"ml-auto","close",3,"click"],[1,"fas","fa-window-close"],[3,"bookingclinicId","gender","patientId","loginUserId","InputClinicList"],[3,"RegistrationMainModel","InputType","OnUpdateRegDetails"]],template:function(t,i){1&t&&(r.Sc(0,v,10,2,"div",0),r.Yb(1,"p-dialog",1),r.ic("visibleChange",function(t){return i.showNewRegistration=t}),r.Sc(2,w,2,2,"div",2),r.Xb(),r.Sc(3,N,12,5,"div",3),r.Yb(4,"p-dialog",4),r.ic("visibleChange",function(t){return i.showModalPrescriptionHistory=t}),r.Sc(5,B,2,1,"ng-template",5),r.Sc(6,F,2,1,"div",2),r.Sc(7,A,2,0,"ng-template",6),r.Xb(),r.Yb(8,"div",7),r.Sc(9,D,2,0,"a",8),r.Xb(),r.Sc(10,x,2,5,"div",2),r.Yb(11,"p-dialog",4),r.ic("visibleChange",function(t){return i.showModalPatientRegistaration=t}),r.Sc(12,O,2,0,"ng-template",5),r.Sc(13,_,2,2,"div",2),r.Xb()),2&t&&(r.tc("ngIf",null==i.mode),r.Fb(1),r.Pc(r.yc(34,V)),r.tc("visible",i.showNewRegistration)("modal",!0)("maximizable",!0)("closeOnEscape",!0)("closable",!0)("draggable",!1)("resizable",!0),r.Fb(1),r.tc("ngIf",i.showNewRegistration),r.Fb(1),r.tc("ngIf",null==i.mode),r.Fb(1),r.Pc(r.yc(35,V)),r.tc("visible",i.showModalPrescriptionHistory)("modal",!0)("maximizable",!0)("closeOnEscape",!1)("closable",!1)("draggable",!1)("resizable",!1),r.Fb(2),r.tc("ngIf",i.showModalPrescriptionHistory),r.Fb(3),r.tc("ngIf","booking"==i.mode),r.Fb(1),r.tc("ngIf","booking"==i.mode),r.Fb(1),r.Pc(r.yc(36,V)),r.tc("visible",i.showModalPatientRegistaration)("modal",!0)("maximizable",!0)("closeOnEscape",!1)("closable",!0)("draggable",!1)("resizable",!1),r.Fb(2),r.tc("ngIf",i.showModalPatientRegistaration))},directives:[o.p,p.a,l.i,h.b,h.o,h.r,g.a,m.c,f.a,I.a,S.a],styles:[""]}),t})()}];let H=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({imports:[[s.l.forChild(z)],s.l]}),t})();var E=e("jIHw"),G=e("eO1q"),Z=e("305l"),j=e("X/Io"),W=e("rmfV");let J=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({imports:[[o.c,H,h.i,m.f,E.c,f.b,G.b,Z.AuthModule,p.b,j.a,W.BookAppointmentModule]]}),t})()},x5zU:function(t,i,e){"use strict";e.d(i,"a",function(){return v});var o=e("fXoL"),s=e("CwUn"),n=e("Nach"),c=e("ReGW"),r=e("NLkC"),l=e("rEr+"),a=e("7zfz"),b=e("/RsI"),d=e("ofXK"),u=e("Xj43");function p(t,i){if(1&t&&(o.Yb(0,"tr"),o.Yb(1,"td"),o.Uc(2," No records found "),o.Xb(),o.Xb()),2&t){const t=i.$implicit;o.Fb(1),o.Gb("colspan",null==t?null:t.length)}}function h(t,i){1&t&&(o.Yb(0,"colgroup"),o.Tb(1,"col",12),o.Tb(2,"col",12),o.Tb(3,"col",12),o.Tb(4,"col",12),o.Tb(5,"col",13),o.Tb(6,"col",14),o.Tb(7,"col",15),o.Xb())}function g(t,i){1&t&&(o.Yb(0,"tr"),o.Yb(1,"th"),o.Uc(2,"Center"),o.Xb(),o.Yb(3,"th"),o.Uc(4,"Booking No"),o.Xb(),o.Yb(5,"th"),o.Uc(6,"Adm. Date"),o.Xb(),o.Yb(7,"th"),o.Uc(8,"Dis. Date"),o.Xb(),o.Yb(9,"th"),o.Uc(10,"Status"),o.Xb(),o.Yb(11,"th"),o.Uc(12,"Dr."),o.Xb(),o.Yb(13,"th"),o.Uc(14,"Actions"),o.Xb(),o.Xb())}function m(t,i){if(1&t){const t=o.Zb();o.Yb(0,"i",18),o.ic("click",function(){o.Lc(t);const i=o.mc().$implicit;return o.mc().DownloadLabReport(i.BookingNumber)}),o.Xb()}}function f(t,i){if(1&t){const t=o.Zb();o.Yb(0,"tr"),o.Yb(1,"td"),o.Uc(2),o.Xb(),o.Yb(3,"td"),o.Uc(4),o.Xb(),o.Yb(5,"td"),o.Uc(6),o.nc(7,"date"),o.nc(8,"date"),o.Xb(),o.Yb(9,"td"),o.Uc(10),o.nc(11,"date"),o.nc(12,"date"),o.Xb(),o.Yb(13,"td"),o.Yb(14,"span"),o.Uc(15),o.Xb(),o.Xb(),o.Yb(16,"td"),o.Uc(17),o.Xb(),o.Yb(18,"td"),o.Yb(19,"i",16),o.ic("click",function(){o.Lc(t);const e=i.$implicit;return o.mc().PrintHistoryPrescription(e.SlotBookingId,e.BookingType)}),o.Xb(),o.Sc(20,m,1,0,"i",17),o.Xb(),o.Xb()}if(2&t){const t=i.$implicit,e=o.mc();o.Fb(2),o.Vc(t.ClinicName),o.Fb(2),o.Vc(t.BookingNumber),o.Fb(2),o.Vc("0001"==o.pc(7,10,t.PeriodFrom,"yyyy")?"":o.pc(8,13,t.PeriodFrom,e.customDateFormat.DEF_DATE)),o.Fb(4),o.Vc("0001"==o.pc(11,16,t.PeriodUpto,"yyyy")?"":o.pc(12,19,t.PeriodUpto,e.customDateFormat.DEF_DATE)),o.Fb(4),o.Hb(t.BookingStatus),o.Fb(1),o.Vc(t.BookingStatus),o.Fb(2),o.Vc(t.DoctorName),o.Fb(3),o.tc("ngIf",e.lsobjClinicMaster.IsLIMS)}}function I(t,i){1&t&&(o.Yb(0,"h4"),o.Uc(1,"Patient Lab / Report Document"),o.Xb())}function S(t,i){if(1&t&&(o.Yb(0,"div"),o.Tb(1,"app-lab-report-queue",19),o.Xb()),2&t){const t=o.mc();o.Fb(1),o.tc("bookingNumber",t.bookingNumber)}}const y=function(){return{width:"70vw"}};let v=(()=>{class t extends s.a{constructor(t,i,e){super(),this.cdRef=t,this._DoctorServices=i,this._UtilityService=e,this.lsobjClinicMaster=JSON.parse(localStorage.getItem("objClinicMaster"))||null,this.PatientId=null,this.TotalVisitPrescriptionCount=new o.o,this.bookingStatus=n.d,this.customDateFormat=n.h,this.first=0,this.lstPatientHistory=[],this.TotalVisit=0,this.ShowLabReportModel=!1,this.bookingNumber=null}ngOnInit(){}ngOnChanges(t){this.LoadPatientAllPrescriptionHistory(0,5)}LoadPatientAllPrescriptionHistory(t,i){let e={};e.patientId=this.PatientId,e.first=t.toString(),e.rows=i.toString(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.PatientAllPrescriptionHistory(e).subscribe(t=>{this._UtilityService.hideSpinner(),t.actionResult.result.length>0?(this.lstPatientHistory=JSON.parse(t.actionResult.result[0]),this.TotalVisit=JSON.parse(t.actionResult.result[1]),this.cdRef.detectChanges()):(this.TotalVisit=0,this.lstPatientHistory=[],this.cdRef.detectChanges()),this.TotalVisitPrescriptionCount.emit(this.TotalVisit)})}loadPatientList(t){this.lstPatientHistory&&this.LoadPatientAllPrescriptionHistory(t.first,t.rows)}PrintHistoryPrescription(t,i){"IPD"==i?window.open("#/print/ipd-print-prescription?UserId="+this.PatientId+"&SlotBookingId="+t+"&tag="+i):window.open("#/print/patient-print-prescription?UserId="+this.PatientId+"&SlotBookingId="+t+"&tag="+i)}DownloadLabReport(t){this.bookingNumber=t,this.ShowLabReportModel=!0}}return t.\u0275fac=function(i){return new(i||t)(o.Sb(o.h),o.Sb(c.a),o.Sb(r.a))},t.\u0275cmp=o.Mb({type:t,selectors:[["app-patient-all-prescription-history"]],inputs:{PatientId:"PatientId"},outputs:{TotalVisitPrescriptionCount:"TotalVisitPrescriptionCount"},features:[o.Cb,o.Db],decls:13,vars:20,consts:[[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["responsiveLayout","scroll","scrollHeight","calc(100vh - 360px)",1,"ColumnFilterTable",3,"value","lazy","rowHover","lazyLoadOnInit","scrollable","paginator","rows","totalRecords","first","onLazyLoad","firstChange"],["dtHistory",""],["pTemplate","emptymessage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["modal","true","appendTo","body","id","ShowLabReportModel",3,"visible","modal","maximizable","closeOnEscape","closable","draggable","resizable","visibleChange"],[4,"ngIf"],[2,"width","100px"],[2,"width","110px"],[2,"width","80px"],[2,"width","65px"],["title","Print Prescription",1,"pi","pi-print","mt-4","mr-2",2,"font-size","18px",3,"click"],["title","View Report","class","fa fa-print",3,"click",4,"ngIf"],["title","View Report",1,"fa","fa-print",3,"click"],[3,"bookingNumber"]],template:function(t,i){1&t&&(o.Yb(0,"div",0),o.Yb(1,"div",1),o.Yb(2,"div",2),o.Yb(3,"div",3),o.Yb(4,"p-table",4,5),o.ic("onLazyLoad",function(t){return i.loadPatientList(t)})("firstChange",function(t){return i.first=t}),o.Sc(6,p,3,1,"ng-template",6),o.Sc(7,h,8,0,"ng-template",7),o.Sc(8,g,15,0,"ng-template",8),o.Sc(9,f,21,22,"ng-template",9),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(10,"p-dialog",10),o.ic("visibleChange",function(t){return i.ShowLabReportModel=t}),o.Sc(11,I,2,0,"ng-template",8),o.Sc(12,S,2,1,"div",11),o.Xb()),2&t&&(o.Fb(4),o.tc("value",i.lstPatientHistory)("lazy",!0)("rowHover",!0)("lazyLoadOnInit",!1)("scrollable",!0)("paginator",!0)("rows",5)("totalRecords",i.TotalVisit)("first",i.first),o.Fb(6),o.Pc(o.yc(19,y)),o.tc("visible",i.ShowLabReportModel)("modal",!0)("maximizable",!0)("closeOnEscape",!1)("closable",!0)("draggable",!1)("resizable",!0),o.Fb(2),o.tc("ngIf",i.ShowLabReportModel))},directives:[l.c,a.i,b.a,d.p,u.a],pipes:[d.f],styles:[""]}),t})()}}]);