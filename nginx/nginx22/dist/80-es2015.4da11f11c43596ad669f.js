(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{otAO:function(e,t,i){"use strict";i.r(t),i.d(t,"DischargeTemplateMasterModule",function(){return B});var s=i("ofXK"),c=i("tyNb"),n=i("Nach"),l=i("CwUn"),a=i("fXoL"),r=i("dcBc"),o=i("ReGW"),d=i("NLkC"),b=i("1kSV"),h=i("rEr+"),p=i("7zfz"),m=i("7kUa"),u=i("jIHw"),g=i("3Pt+"),T=i("arFO");const f=["myForm"];function v(e,t){if(1&e){const e=a.Zb();a.Yb(0,"button",22),a.ic("click",function(){return a.Lc(e),a.mc(3).AddNew()}),a.Xb()}}function M(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",12),a.Yb(1,"span",13),a.Uc(2),a.Xb(),a.Sc(3,v,1,0,"button",14),a.Yb(4,"span",15),a.Yb(5,"a",16),a.ic("click",function(){return a.Lc(e),a.mc(2).ngOnChanges()}),a.Xb(),a.Yb(6,"a",17),a.Tb(7,"img",18),a.Xb(),a.Yb(8,"span",19),a.Tb(9,"i",20),a.Yb(10,"input",21),a.ic("input",function(t){return a.Lc(e),a.mc(),a.Ic(5).filterGlobal(t.target.value,"contains")}),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=a.mc(2);a.Fb(2),a.Wc(" ",(null==e.lstDischargeTemplateMaster?null:e.lstDischargeTemplateMaster.length)>0?"Total Records: "+(null==e.lstDischargeTemplateMaster?null:e.lstDischargeTemplateMaster.length):""," "),a.Fb(1),a.tc("ngIf",null==e.lstIAccessStr?null:e.lstIAccessStr.includes(e.ActionList.ReadWrite.toString()))}}function S(e,t){1&e&&(a.Yb(0,"tr"),a.Yb(1,"td"),a.Uc(2," No records found "),a.Xb(),a.Xb()),2&e&&(a.Fb(1),a.Gb("colspan",5))}function y(e,t){1&e&&(a.Yb(0,"tr"),a.Yb(1,"th"),a.Uc(2,"S.No"),a.Xb(),a.Yb(3,"th"),a.Uc(4,"Type"),a.Xb(),a.Yb(5,"th"),a.Uc(6,"Template Name"),a.Xb(),a.Yb(7,"th"),a.Uc(8,"Status"),a.Xb(),a.Yb(9,"th"),a.Uc(10,"Action"),a.Xb(),a.Xb())}function X(e,t){if(1&e){const e=a.Zb();a.Yb(0,"tr"),a.Yb(1,"td"),a.Uc(2),a.Xb(),a.Yb(3,"td"),a.Uc(4),a.Xb(),a.Yb(5,"td"),a.Uc(6),a.Xb(),a.Yb(7,"td"),a.Uc(8),a.Xb(),a.Yb(9,"td"),a.Yb(10,"a",23),a.ic("click",function(){a.Lc(e);const i=t.$implicit;return a.mc(2).LoadDischargeTemplateMasterById(i.DTMId)}),a.Tb(11,"img",24),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=t.$implicit,i=t.rowIndex;a.Fb(2),a.Vc(i+1),a.Fb(2),a.Vc(e.TimeType),a.Fb(2),a.Vc(e.TemplateName),a.Fb(2),a.Vc(1==e.Status?"Active":"Inactive")}}const Y=function(){return["TemplateName","TimeType"]};function D(e,t){if(1&e&&(a.Yb(0,"div",2),a.Yb(1,"div",3),a.Yb(2,"div",4),a.Yb(3,"div",5),a.Yb(4,"p-table",6,7),a.Sc(6,M,11,2,"ng-template",8),a.Sc(7,S,3,1,"ng-template",9),a.Sc(8,y,11,0,"ng-template",10),a.Sc(9,X,12,4,"ng-template",11),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()),2&e){const e=a.mc();a.Fb(4),a.tc("value",e.lstDischargeTemplateMaster)("rowHover",!0)("globalFilterFields",a.yc(4,Y))("scrollable",!0)}}function I(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",12),a.Yb(1,"span",19),a.Tb(2,"i",20),a.Yb(3,"input",21),a.ic("input",function(t){return a.Lc(e),a.mc(),a.Ic(31).filterGlobal(t.target.value,"contains")}),a.Xb(),a.Xb(),a.Xb()}}function w(e,t){1&e&&(a.Yb(0,"tr"),a.Yb(1,"td"),a.Uc(2," No records found "),a.Xb(),a.Xb()),2&e&&(a.Fb(1),a.Gb("colspan",4))}function U(e,t){1&e&&(a.Yb(0,"colgroup"),a.Tb(1,"col",42),a.Tb(2,"col",43),a.Tb(3,"col",43),a.Tb(4,"col",43),a.Xb())}function C(e,t){1&e&&(a.Yb(0,"tr"),a.Yb(1,"th"),a.Uc(2,"Name"),a.Xb(),a.Yb(3,"th",44),a.Uc(4,"Treatment Duration/Timing"),a.Xb(),a.Tb(5,"th"),a.Xb())}const A=function(e){return{"background-color":e}},L=function(){return{width:"100%"}},R=function(){return{standalone:!0}};function F(e,t){if(1&e&&(a.Yb(0,"tr",45),a.Yb(1,"td"),a.Uc(2),a.Xb(),a.Yb(3,"td"),a.Yb(4,"input",46),a.ic("ngModelChange",function(e){return t.$implicit.Remarks=e}),a.Xb(),a.Xb(),a.Yb(5,"td"),a.Yb(6,"p-dropdown",47),a.ic("ngModelChange",function(e){return t.$implicit.Timing=e}),a.Xb(),a.Xb(),a.Yb(7,"td"),a.Yb(8,"input",48),a.ic("ngModelChange",function(e){return t.$implicit.checkAccess=e}),a.Xb(),a.Xb(),a.Xb()),2&e){const e=t.$implicit,i=t.rowIndex,s=a.mc(2);a.tc("ngStyle",a.zc(14,A,!1===e.checkAccess?"#ffffff":"#ededed")),a.Fb(2),a.Vc(e.Name),a.Fb(2),a.vc("name","txtRemarks_",i,""),a.tc("ngModel",e.Remarks),a.Fb(2),a.Pc(a.yc(16,L)),a.vc("name","ddlTiming_",i,""),a.tc("ngModelOptions",a.yc(17,R))("options",s.stlstTiming)("ngModel",e.Timing)("filter",!0),a.Fb(2),a.uc("id","chk"+i),a.tc("ngModel",e.checkAccess)("ngModelOptions",a.yc(18,R))}}function k(e,t){if(1&e){const e=a.Zb();a.Yb(0,"button",49),a.ic("click",function(){return a.Lc(e),a.mc(2).SaveDischargeTemplateMaster()}),a.Uc(1,"Save"),a.Xb()}if(2&e){a.mc();const e=a.Ic(5);a.tc("disabled",!e.form.valid)}}const _=function(){return["Name"]};function N(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",25),a.Yb(1,"div",26),a.Yb(2,"div",4),a.Yb(3,"div",5),a.Yb(4,"form",null,27),a.Yb(6,"div",28),a.Yb(7,"div",29),a.Yb(8,"div",30),a.Yb(9,"label"),a.Uc(10,"Type"),a.Xb(),a.Yb(11,"span",31),a.Uc(12,"*"),a.Xb(),a.Yb(13,"p-dropdown",32),a.ic("ngModelChange",function(t){return a.Lc(e),a.mc().DischargeTemplateMaster.TimeType=t})("onChange",function(){return a.Lc(e),a.mc().OnChangeTimeType()}),a.Xb(),a.Xb(),a.Xb(),a.Yb(14,"div",29),a.Yb(15,"div",30),a.Yb(16,"label"),a.Uc(17,"Template Name"),a.Xb(),a.Yb(18,"span",31),a.Uc(19,"*"),a.Xb(),a.Yb(20,"input",33),a.ic("ngModelChange",function(t){return a.Lc(e),a.mc().DischargeTemplateMaster.TemplateName=t}),a.Xb(),a.Xb(),a.Xb(),a.Yb(21,"div",29),a.Yb(22,"div",30),a.Yb(23,"label"),a.Uc(24,"Status"),a.Xb(),a.Yb(25,"span",31),a.Uc(26,"*"),a.Xb(),a.Yb(27,"p-dropdown",34),a.ic("ngModelChange",function(t){return a.Lc(e),a.mc().DischargeTemplateMaster.Status=t}),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(28,"div",35),a.Yb(29,"div",3),a.Yb(30,"p-table",36,37),a.Sc(32,I,4,0,"ng-template",8),a.Sc(33,w,3,1,"ng-template",9),a.Sc(34,U,5,0,"ng-template",38),a.Sc(35,C,6,0,"ng-template",10),a.Sc(36,F,9,19,"ng-template",11),a.Xb(),a.Xb(),a.Xb(),a.Yb(37,"div",39),a.Sc(38,k,2,1,"button",40),a.Yb(39,"button",41),a.ic("click",function(){return a.Lc(e),a.mc().CloseModal()}),a.Uc(40,"Close"),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=a.mc();a.Fb(13),a.Pc(a.yc(16,L)),a.tc("options",e.stlsttimetype)("ngModel",e.DischargeTemplateMaster.TimeType)("filter",!0),a.Fb(7),a.tc("ngModel",e.DischargeTemplateMaster.TemplateName),a.Fb(7),a.Pc(a.yc(17,L)),a.tc("options",e.stlststatus)("ngModel",e.DischargeTemplateMaster.Status)("filter",!0),a.Fb(3),a.tc("value",e.lstDischargeItemList)("rowHover",!0)("globalFilterFields",a.yc(18,_))("scrollable",!0),a.Fb(8),a.tc("ngIf",null==e.lstIAccessStr?null:e.lstIAccessStr.includes(e.ActionList.ReadWrite.toString()))}}const O=[{path:"",component:(()=>{class e extends l.a{constructor(e,t,i,s,c,l,a){super(),this.cdRef=e,this.router=t,this._MasterServices=i,this._DoctorServices=s,this._ConstantServices=c,this._UtilityService=l,this.modalService=a,this.dtOptions={},this.Mode=null,this.DischargeTemplateMaster={},this.stlsttimetype=[],this.stlstTiming=[],this.stlststatus=[],this.lstTreatmentCategory=[],this.lstDischargeItemList=[],this.ActionList=n.a,this.lstIAccess=[],this.lstIAccessStr=[],this.stlsttimetype=[{name:"Treatment",code:"Treatment"},{name:"Yoga",code:"Yoga"}],this.stlststatus=[{name:"Active",code:1},{name:"Inactive",code:0}],this.stlstTiming=[{name:"Minutes",code:"Minutes"},{name:"Hour(s)",code:"Hour(s)"},{name:"Time(s)",code:"Time(s)"}],this.getPageLevelAccess()}getPageLevelAccess(){var e,t,i=this.router.url,s=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==s?void 0:s.find(e=>e.MenuItemURL===i))&&(this.lstIAccess=null===(e=s.find(e=>e.MenuItemURL===i))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(e=>{this.lstIAccessStr.push(e.ActionId.toString())}))}ngOnInit(){this._ConstantServices.ActiveMenuName="Discharge Template Master",this.cdRef.detectChanges(),this.GetDischargeTemplateMasterList()}ngOnChanges(){this.GetDischargeTemplateMasterList()}OnChangeTimeType(){var e,t,i;null!=(null===(e=this.DischargeTemplateMaster)||void 0===e?void 0:e.TimeType)&&null!=(null===(t=this.DischargeTemplateMaster)||void 0===t?void 0:t.TimeType)&&""!=(null===(i=this.DischargeTemplateMaster)||void 0===i?void 0:i.TimeType)&&this.GetDischargeTemplateItemByIdAndType()}GetDischargeTemplateMasterList(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetDischargeTemplateMaster().subscribe(e=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);this.lstDischargeTemplateMaster=t=t||[],this.cdRef.detectChanges()}else this.lstDischargeTemplateMaster=[],this.cdRef.detectChanges()},e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.message)})}GetDischargeTemplateItemByIdAndType(){var e,t,i,s,c="";null!=(null===(e=this.DischargeTemplateMaster)||void 0===e?void 0:e.DTMId)&&null!=(null===(t=this.DischargeTemplateMaster)||void 0===t?void 0:t.DTMId)&&(c=null===(i=this.DischargeTemplateMaster)||void 0===i?void 0:i.DTMId),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetDischargeTemplateItemByIdAndType(c,null===(s=this.DischargeTemplateMaster)||void 0===s?void 0:s.TimeType).subscribe(e=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);this.lstDischargeItemList=t=t||[],this.cdRef.detectChanges()}else this.lstDischargeItemList=[],this.cdRef.detectChanges()},e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.message)})}LoadDischargeTemplateMasterById(e){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetDischargeTemplateMasterById(e).subscribe(e=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);this.DischargeTemplateMaster=t=t||[],this.Mode="update",this.OnChangeTimeType(),this.cdRef.detectChanges()}else this.DischargeTemplateMaster={}},e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.message)})}SaveDischargeTemplateMaster(){this.DischargeTemplateMaster.CreatedBy=localStorage.getItem("userId"),this.DischargeTemplateMaster.ModifiedBy=localStorage.getItem("userId");var e=this.lstDischargeItemList.filter(e=>!0===e.checkAccess);let t=[];for(let i=0;i<(null==e?void 0:e.length);i++)t.push({MCODE:e[i].MCODE,Remarks:e[i].Remarks,Timing:e[i].Timing});console.log(this.DischargeTemplateMaster),(null==t?void 0:t.length)>0?(this.DischargeTemplateMaster.lstDischargeTemplateItem=t,this._UtilityService.showSpinner(),console.log(this.DischargeTemplateMaster),this.unsubscribe.add=this._MasterServices.AddUpdateDischargeTemplateMaster(this.DischargeTemplateMaster).subscribe(e=>{this._UtilityService.hideSpinner(),1==e.actionResult.success?(this._UtilityService.showSuccessAlert(e.actionResult.errMsg),this.GetDischargeTemplateMasterList(),this.Mode=null):this._UtilityService.showWarningAlert(e.actionResult.errMsg),this.cdRef.detectChanges()},e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.message)})):this._UtilityService.showWarningAlert("No Item added for this Template")}AddNew(){this.ResetModel(),this.Mode="Add",this.cdRef.detectChanges(),this.myForm.resetForm()}ResetModel(){this.lstDischargeItemList=[],this.DischargeTemplateMaster={},this.DischargeTemplateMaster.DTMId=null,this.DischargeTemplateMaster.Status=1}CloseModal(){this.Mode=null}validateNumber(e){const t=e.keyCode;e.key.match(/[0-9]/g)&&![8,37,39,46].includes(t)||e.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(a.h),a.Sb(c.i),a.Sb(r.a),a.Sb(o.a),a.Sb(n.f),a.Sb(d.a),a.Sb(b.j))},e.\u0275cmp=a.Mb({type:e,selectors:[["app-discharge-template-master"]],viewQuery:function(e,t){if(1&e&&a.cd(f,1),2&e){let e;a.Hc(e=a.jc())&&(t.myForm=e.first)}},features:[a.Cb,a.Db],decls:2,vars:2,consts:[["class","row mt25",4,"ngIf"],["class","row mb-8",4,"ngIf"],[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["responsiveLayout","scroll","scrollHeight","500px",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-ml-left","mr-3"],["pButton","","title","New","label","Add New","class","p-button-outlined","icon","pi pi-plus",3,"click",4,"ngIf"],[1,"p-ml-auto"],["matTooltip","Refresh",3,"click"],["matTooltip","Refresh"],["src","./assets/custom-icons/refresh.svg",1,"custom-ico","mr4"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined",3,"click"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],[1,"row","mb-8"],[1,"col"],["myForm","ngForm"],[1,"row","m-0"],[1,"col-md-4"],[1,"form-group"],[1,"required"],["required","true","name","ddlType","optionLabel","name","optionValue","code","placeholder","Please Select Type",3,"options","ngModel","filter","ngModelChange","onChange"],["type","text","required","","name","txtTemplateName",1,"form-control",3,"ngModel","ngModelChange"],["required","true","name","ddlStatus","optionLabel","name","optionValue","code","placeholder","Please Select Status",3,"options","ngModel","filter","ngModelChange"],[1,"row"],["scrollHeight","200px","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable"],["dt5",""],["pTemplate","colgroup"],[1,"row","justify-content-center"],["type","button","type","button","class","btn-con btn btn-success mr-3",3,"disabled","click",4,"ngIf"],[1,"btn-con","closeButtonCon",3,"click"],[2,"width","200px"],[2,"width","50px"],["colspan","2"],[3,"ngStyle"],["type","text","autocomplete","off","onpaste","return false",1,"form-control",3,"name","ngModel","ngModelChange"],["appendTo","body","optionLabel","name","optionValue","code","placeholder"," ",3,"name","ngModelOptions","options","ngModel","filter","ngModelChange"],["type","checkbox",3,"id","ngModel","ngModelOptions","ngModelChange"],["type","button","type","button",1,"btn-con","btn","btn-success","mr-3",3,"disabled","click"]],template:function(e,t){1&e&&(a.Sc(0,D,10,5,"div",0),a.Sc(1,N,41,19,"div",1)),2&e&&(a.tc("ngIf",null==t.Mode),a.Fb(1),a.tc("ngIf",null!=t.Mode))},directives:[s.p,h.c,p.i,m.a,u.b,g.z,g.p,g.q,T.a,g.w,g.o,g.r,g.b,s.q,g.a],styles:[""]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Qb({type:e}),e.\u0275inj=a.Pb({imports:[[c.l.forChild(O)],c.l]}),e})();var G=i("LuMj");let B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Qb({type:e}),e.\u0275inj=a.Pb({imports:[[s.c,x,g.i,g.v,h.f,u.c,T.b,m.b,G.b]]}),e})()}}]);