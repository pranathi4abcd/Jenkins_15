(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{"pvl+":function(t,e,i){"use strict";i.r(e),i.d(e,"EmailTemplateModule",function(){return C});var s=i("ofXK"),c=i("tyNb"),n=i("Nach"),o=i("+z1p"),r=i("CwUn"),l=i("fXoL"),a=i("dcBc"),b=i("NLkC"),d=i("rEr+"),u=i("7zfz"),p=i("7kUa"),m=i("3Pt+"),h=i("zioG"),f=i("arFO");const g=["myForm"];function v(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",11),l.Yb(1,"span",12),l.Tb(2,"i",13),l.Yb(3,"input",14),l.ic("input",function(e){return l.Lc(t),l.mc(),l.Ic(5).filterGlobal(e.target.value,"contains")}),l.Xb(),l.Xb(),l.Xb()}}function S(t,e){1&t&&(l.Yb(0,"tr"),l.Yb(1,"td"),l.Uc(2," No records found "),l.Xb(),l.Xb()),2&t&&(l.Fb(1),l.Gb("colspan",4))}function X(t,e){1&t&&(l.Yb(0,"tr"),l.Yb(1,"th"),l.Uc(2,"Type"),l.Xb(),l.Yb(3,"th"),l.Uc(4,"Subject"),l.Xb(),l.Yb(5,"th"),l.Uc(6,"Status"),l.Xb(),l.Yb(7,"th"),l.Uc(8,"Action"),l.Xb(),l.Xb())}function Y(t,e){if(1&t){const t=l.Zb();l.Yb(0,"tr"),l.Yb(1,"td"),l.Uc(2),l.Xb(),l.Yb(3,"td"),l.Uc(4),l.Xb(),l.Yb(5,"td"),l.Uc(6),l.Xb(),l.Yb(7,"td"),l.Yb(8,"a",15),l.ic("click",function(){l.Lc(t);const i=e.$implicit;return l.mc(2).LoadEmailTemplateByType(i.DId)}),l.Tb(9,"img",16),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=e.$implicit;l.Fb(2),l.Vc(t.DraftingType),l.Fb(2),l.Vc(t.DraftingSubject),l.Fb(2),l.Vc(1==t.Status?"Active":"Inactive")}}const y=function(){return["DraftingType","DraftingSubject"]};function M(t,e){if(1&t&&(l.Yb(0,"div",1),l.Yb(1,"div",2),l.Yb(2,"div",3),l.Yb(3,"div",4),l.Yb(4,"p-table",5,6),l.Sc(6,v,4,0,"ng-template",7),l.Sc(7,S,3,1,"ng-template",8),l.Sc(8,X,9,0,"ng-template",9),l.Sc(9,Y,10,3,"ng-template",10),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()),2&t){const t=l.mc();l.Fb(4),l.tc("value",t.lstMaster)("rowHover",!0)("globalFilterFields",l.yc(4,y))("scrollable",!0)}}function w(t,e){if(1&t){const t=l.Zb();l.Yb(0,"button",31),l.ic("click",function(){return l.Lc(t),l.mc(2).Save()}),l.Uc(1,"Submit"),l.Xb()}if(2&t){l.mc();const t=l.Ic(5);l.tc("disabled",!t.form.valid)}}const U=function(){return{width:"100%"}};function A(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",1),l.Yb(1,"div",17),l.Yb(2,"div",3),l.Yb(3,"div",4),l.Yb(4,"form",null,18),l.Yb(6,"div",19),l.Yb(7,"div",20),l.Yb(8,"div",21),l.Yb(9,"label"),l.Uc(10,"Type"),l.Xb(),l.Yb(11,"span",22),l.Uc(12,"*"),l.Xb(),l.Yb(13,"input",23),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().objMaster.DraftingType=e}),l.Xb(),l.Xb(),l.Xb(),l.Yb(14,"div",24),l.Yb(15,"div",21),l.Yb(16,"label"),l.Uc(17,"Subject"),l.Xb(),l.Yb(18,"span",22),l.Uc(19,"*"),l.Xb(),l.Yb(20,"input",25),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().objMaster.DraftingSubject=e}),l.Xb(),l.Xb(),l.Xb(),l.Yb(21,"div",2),l.Yb(22,"div",21),l.Yb(23,"label"),l.Uc(24,"Details"),l.Xb(),l.Yb(25,"span",22),l.Uc(26,"*"),l.Xb(),l.Yb(27,"ckeditor",26),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().objMaster.DraftingDetails=e}),l.Xb(),l.Xb(),l.Xb(),l.Yb(28,"div",20),l.Yb(29,"label"),l.Uc(30,"Status"),l.Xb(),l.Yb(31,"span",22),l.Uc(32,"*"),l.Xb(),l.Yb(33,"p-dropdown",27),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().objMaster.Status=e}),l.Xb(),l.Xb(),l.Xb(),l.Yb(34,"div",28),l.Sc(35,w,2,1,"button",29),l.Yb(36,"button",30),l.ic("click",function(){return l.Lc(t),l.mc().CloseModal()}),l.Uc(37,"Close"),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=l.mc();l.Fb(13),l.tc("ngModel",t.objMaster.DraftingType),l.Fb(7),l.tc("ngModel",t.objMaster.DraftingSubject),l.Fb(7),l.tc("editor",t.Editor)("config",t.config)("ngModel",t.objMaster.DraftingDetails),l.Fb(6),l.Pc(l.yc(11,U)),l.tc("options",t.stlststatus)("ngModel",t.objMaster.Status)("filter",!0),l.Fb(2),l.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))}}const I=[{path:"",component:(()=>{class t extends r.a{constructor(t,e,i,s,c){super(),this.router=t,this._MasterServices=e,this._ConstantServices=i,this.cdRef=s,this._UtilityService=c,this.Editor=o,this.mode=null,this.objMaster={},this.stlststatus=[],this.ActionList=n.a,this.lstIAccess=[],this.lstIAccessStr=[],this.stlststatus=[{name:"Active",code:1},{name:"Inactive",code:0}],this.getPageLevelAccess()}getPageLevelAccess(){var t,e,i=this.router.url,s=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==s?void 0:s.find(t=>t.MenuItemURL===i))&&(this.lstIAccess=null===(t=s.find(t=>t.MenuItemURL===i))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}ngOnInit(){this._ConstantServices.ActiveMenuName="Email Template",this.GetAllEmailDrafting(),this.config={toolbar:{items:["bold","italic","|","undo","redo","|","numberedList","bulletedList"],shouldNotGroupWhenFull:!0}}}GetAllEmailDrafting(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetAllEmailDrafting().subscribe(t=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstMaster=e=e||[],this.cdRef.detectChanges()}else this.lstMaster=[],this.cdRef.detectChanges()})}AddNewEmailDrafting(){this.ResetModel(),this.mode="Add",this.cdRef.detectChanges(),this.myForm.resetForm()}LoadEmailTemplateByType(t){this.unsubscribe.add=this._MasterServices.GetEmailTemplateByType(t).subscribe(t=>{if(1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.objMaster=e=e||[],this.mode="update",this.cdRef.detectChanges()}})}Save(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.SaveUpdateEmailDrafting(this.objMaster).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),this._UtilityService.showSuccessAlert(t.actionResult.errMsg),1==t.actionResult.success&&(this.GetAllEmailDrafting(),this.mode=null)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}ResetModel(){this.objMaster={},this.objMaster.Status=1}CloseModal(){this.mode=null}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(c.i),l.Sb(a.a),l.Sb(n.f),l.Sb(l.h),l.Sb(b.a))},t.\u0275cmp=l.Mb({type:t,selectors:[["app-email-template"]],viewQuery:function(t,e){if(1&t&&l.cd(g,1),2&t){let t;l.Hc(t=l.jc())&&(e.myForm=t.first)}},features:[l.Cb],decls:2,vars:2,consts:[["class","row mt25",4,"ngIf"],[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["styleClass","p-datatable-striped","scrollHeight","calc(100vh - 165px)","responsiveLayout","scroll",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],[1,"col"],["myForm","ngForm"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"required"],["type","text","required","","name","txtDraftingType",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-8"],["type","text","required","","name","txtDraftingSubject",1,"form-control",3,"ngModel","ngModelChange"],["name","TEDDraftingDetails",3,"editor","config","ngModel","ngModelChange"],["required","true","name","ddlStatus","optionLabel","name","optionValue","code","placeholder","-Select-",3,"options","ngModel","filter","ngModelChange"],[1,"row","justify-content-center"],["type","button","class","btn btn-new-primary mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-new-secondary",3,"click"],["type","button",1,"btn","btn-new-primary","mr-2",3,"disabled","click"]],template:function(t,e){1&t&&(l.Sc(0,M,10,5,"div",0),l.Sc(1,A,38,12,"div",0)),2&t&&(l.tc("ngIf",null==e.mode),l.Fb(1),l.tc("ngIf",null!=e.mode))},directives:[s.p,d.c,u.i,p.a,m.z,m.p,m.q,m.b,m.w,m.o,m.r,h.a,f.a],styles:[""]}),t})()}];let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[c.l.forChild(I)],c.l]}),t})();var D=i("jIHw");let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[s.c,j,m.i,d.f,D.c,f.b,p.b,h.b]]}),t})()}}]);