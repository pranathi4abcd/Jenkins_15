(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{zu5C:function(e,t,i){"use strict";i.r(t),i.d(t,"PackageMasterModule",function(){return q});var c=i("ofXK"),a=i("tyNb"),n=i("CwUn"),s=i("Nach"),r=i("fXoL"),l=i("NLkC"),o=i("dcBc"),d=i("rEr+"),b=i("7zfz"),u=i("7kUa"),g=i("AAHA"),p=i("jIHw"),h=i("3Pt+"),m=i("arFO"),f=i("eO1q"),v=i("Ks7X");const S=["calendar"],k=["dt"],M=["filtr"];function Y(e,t){if(1&e){const e=r.Zb();r.Yb(0,"div"),r.Yb(1,"app-center-dropdown",22),r.ic("onclinicSelect",function(t){return r.Lc(e),r.mc(3).onclinicSelect(t)}),r.Xb(),r.Xb()}2&e&&(r.Fb(1),r.tc("isCenterLabel",!1)("mode","get"))}function X(e,t){if(1&e){const e=r.Zb();r.Yb(0,"button",23),r.ic("click",function(){return r.Lc(e),r.mc(3).AddNewPackage()}),r.Xb()}}function y(e,t){if(1&e){const e=r.Zb();r.Yb(0,"button",24),r.ic("click",function(){return r.Lc(e),r.mc(3).exportToItemExcel()}),r.Xb()}}function P(e,t){if(1&e){const e=r.Zb();r.Yb(0,"div",12),r.Sc(1,Y,2,2,"div",13),r.Uc(2,"\xa0\xa0 "),r.Sc(3,X,1,0,"button",14),r.Yb(4,"span",15),r.Uc(5),r.Xb(),r.Yb(6,"span",16),r.Sc(7,y,1,0,"button",17),r.Yb(8,"span",18),r.Tb(9,"i",19),r.Yb(10,"input",20,21),r.ic("input",function(t){return r.Lc(e),r.mc(),r.Ic(5).filterGlobal(t.target.value,"contains")}),r.Xb(),r.Xb(),r.Xb(),r.Xb()}if(2&e){const e=r.mc(2);r.Fb(1),r.tc("ngIf",e.UserTypeCurre===e.userTypes.SuperAdmin),r.Fb(2),r.tc("ngIf",null==e.lstIAccessStr?null:e.lstIAccessStr.includes(e.ActionList.ReadWrite.toString())),r.Fb(2),r.Wc(" ",(null==e.lstPackageMaster?null:e.lstPackageMaster.length)>0?"Total Records: "+e.filteredValuesLength:"",""),r.Fb(2),r.tc("ngIf",(null==e.lstIAccessStr?null:e.lstIAccessStr.includes(e.ActionList.Download.toString()))&&(null==e.lstPackageMaster?null:e.lstPackageMaster.length)>0)}}function I(e,t){if(1&e&&(r.Yb(0,"tr"),r.Yb(1,"td"),r.Uc(2," No records found "),r.Xb(),r.Xb()),2&e){const e=t.$implicit;r.Fb(1),r.Gb("colspan",null==e?null:e.length)}}function D(e,t){1&e&&(r.Yb(0,"tr"),r.Yb(1,"th"),r.Uc(2,"Package Description"),r.Xb(),r.Yb(3,"th"),r.Uc(4,"Department"),r.Xb(),r.Yb(5,"th"),r.Uc(6,"Effective Date"),r.Xb(),r.Yb(7,"th"),r.Uc(8,"Expiry Date"),r.Xb(),r.Yb(9,"th"),r.Uc(10,"Status"),r.Xb(),r.Yb(11,"th"),r.Uc(12,"Action"),r.Xb(),r.Xb())}function C(e,t){if(1&e){const e=r.Zb();r.Yb(0,"tr"),r.Yb(1,"td"),r.Uc(2),r.Xb(),r.Yb(3,"td"),r.Uc(4),r.Xb(),r.Yb(5,"td"),r.Uc(6),r.nc(7,"date"),r.Xb(),r.Yb(8,"td"),r.Uc(9),r.nc(10,"date"),r.Xb(),r.Yb(11,"td"),r.Uc(12),r.Xb(),r.Yb(13,"td"),r.Yb(14,"a",25),r.ic("click",function(){r.Lc(e);const i=t.$implicit;return r.mc(2).LoadPackageById(i.PackageMasterId)}),r.Tb(15,"img",26),r.Xb(),r.Xb(),r.Xb()}if(2&e){const e=t.$implicit,i=r.mc(2);r.Fb(2),r.Vc(e.PackageName),r.Fb(2),r.Vc(e.ServiceInludes),r.Fb(2),r.Vc(r.pc(7,5,e.EffectDate,i.customDateFormat.DEF_DATE)),r.Fb(3),r.Vc(r.pc(10,8,e.ExpiryDate,i.customDateFormat.DEF_DATE)),r.Fb(3),r.Vc(1==e.Status?"Active":"Inactive")}}const w=function(){return["PackageName"]};function U(e,t){if(1&e){const e=r.Zb();r.Yb(0,"div",2),r.Yb(1,"div",3),r.Yb(2,"div",4),r.Yb(3,"div",5),r.Yb(4,"p-table",6,7),r.ic("onFilter",function(t){r.Lc(e);const i=r.Ic(5);return r.mc().onFilter(t,i)}),r.Sc(6,P,12,4,"ng-template",8),r.Sc(7,I,3,1,"ng-template",9),r.Sc(8,D,13,0,"ng-template",10),r.Sc(9,C,16,11,"ng-template",11),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()}if(2&e){const e=r.mc();r.Fb(4),r.tc("value",e.lstPackageMaster)("rowHover",!0)("globalFilterFields",r.yc(4,w))("scrollable",!0)}}function A(e,t){if(1&e){const e=r.Zb();r.Yb(0,"a",49),r.ic("click",function(){r.Lc(e);const t=r.mc().index,i=r.mc(2);return i.RemovePackageServiceDetails(i.lstPackageService[t].Sequence)}),r.Tb(1,"i",52),r.Xb()}}const F=function(){return{width:"100%"}};function L(e,t){if(1&e){const e=r.Zb();r.Yb(0,"tr"),r.Yb(1,"td"),r.Uc(2),r.Xb(),r.Yb(3,"td"),r.Yb(4,"input",48),r.ic("ngModelChange",function(e){return t.$implicit.ItemCode=e}),r.Xb(),r.Xb(),r.Yb(5,"td"),r.Yb(6,"input",48),r.ic("ngModelChange",function(e){return t.$implicit.Description=e}),r.Xb(),r.Xb(),r.Yb(7,"td"),r.Yb(8,"a",49),r.ic("click",function(){return r.Lc(e),r.mc(2).AddPackageServiceDetails()}),r.Tb(9,"i",50),r.Xb(),r.Sc(10,A,2,0,"a",51),r.Xb(),r.Xb()}if(2&e){const e=t.$implicit,i=t.index,c=r.mc(2);r.Fb(2),r.Vc(i+1),r.Fb(2),r.Pc(r.yc(10,F)),r.vc("name","txtPackageServiceItemCode_",i,""),r.tc("ngModel",e.ItemCode),r.Fb(2),r.Pc(r.yc(11,F)),r.vc("name","txtPackageServiceItemDesc_",i,""),r.tc("ngModel",e.Description),r.Fb(4),r.tc("ngIf",1!==c.lstPackageService[i].Sequence)}}function x(e,t){if(1&e){const e=r.Zb();r.Yb(0,"button",53),r.ic("click",function(){return r.Lc(e),r.mc(2).SavePackage()}),r.Uc(1,"Submit"),r.Xb()}if(2&e){r.mc();const e=r.Ic(5),t=r.mc();r.tc("disabled",!e.form.valid||0==(null==t.lstPackageService?null:t.lstPackageService.length))}}const R=function(){return{standalone:!0}};function E(e,t){if(1&e){const e=r.Zb();r.Yb(0,"div",27),r.Yb(1,"div",28),r.Yb(2,"div",4),r.Yb(3,"div",5),r.Yb(4,"form",null,29),r.Yb(6,"div",2),r.Yb(7,"div",30),r.Yb(8,"div",31),r.Yb(9,"label"),r.Uc(10,"Package Description"),r.Xb(),r.Yb(11,"span",32),r.Uc(12,"*"),r.Xb(),r.Yb(13,"input",33),r.ic("ngModelChange",function(t){return r.Lc(e),r.mc().packageMaster.PackageName=t}),r.Xb(),r.Xb(),r.Xb(),r.Yb(14,"div",30),r.Yb(15,"div",31),r.Yb(16,"label"),r.Uc(17,"Department"),r.Xb(),r.Yb(18,"span",32),r.Uc(19,"*"),r.Xb(),r.Yb(20,"p-dropdown",34),r.ic("ngModelChange",function(t){return r.Lc(e),r.mc().packageMaster.ServiceInludes=t}),r.Xb(),r.Xb(),r.Xb(),r.Yb(21,"div",30),r.Yb(22,"div",31),r.Yb(23,"label"),r.Uc(24,"Billable MCODE"),r.Xb(),r.Yb(25,"span",32),r.Uc(26,"*"),r.Xb(),r.Yb(27,"input",35),r.ic("ngModelChange",function(t){return r.Lc(e),r.mc().packageMaster.MCODE=t}),r.Xb(),r.Xb(),r.Xb(),r.Yb(28,"div",30),r.Yb(29,"div",31),r.Yb(30,"label"),r.Uc(31,"Effective / Expiry Date"),r.Xb(),r.Yb(32,"span",32),r.Uc(33,"*"),r.Xb(),r.Yb(34,"p-calendar",36,37),r.ic("ngModelChange",function(t){return r.Lc(e),r.mc().rangeDates=t})("onSelect",function(){return r.Lc(e),r.mc().dateRangeChange()}),r.Xb(),r.Xb(),r.Xb(),r.Yb(36,"div",30),r.Yb(37,"div",31),r.Yb(38,"label"),r.Uc(39,"Actual Price"),r.Xb(),r.Yb(40,"span",32),r.Uc(41,"*"),r.Xb(),r.Yb(42,"p-inputNumber",38),r.ic("ngModelChange",function(t){return r.Lc(e),r.mc().packageMaster.ActualPrice=t}),r.Xb(),r.Xb(),r.Xb(),r.Yb(43,"div",30),r.Yb(44,"div",31),r.Yb(45,"label"),r.Uc(46,"Selling Price"),r.Xb(),r.Yb(47,"span",32),r.Uc(48,"*"),r.Xb(),r.Yb(49,"p-inputNumber",38),r.ic("ngModelChange",function(t){return r.Lc(e),r.mc().packageMaster.SellingPrice=t}),r.Xb(),r.Xb(),r.Xb(),r.Yb(50,"div",30),r.Yb(51,"div",31),r.Yb(52,"label"),r.Uc(53,"Status"),r.Xb(),r.Yb(54,"span",32),r.Uc(55,"*"),r.Xb(),r.Yb(56,"select",39),r.ic("ngModelChange",function(t){return r.Lc(e),r.mc().packageMaster.Status=t}),r.Yb(57,"option",40),r.Uc(58,"Active"),r.Xb(),r.Yb(59,"option",41),r.Uc(60,"Inactive"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(61,"div",2),r.Yb(62,"div",3),r.Yb(63,"table",42),r.Yb(64,"thead"),r.Yb(65,"tr"),r.Yb(66,"th"),r.Uc(67,"S.No"),r.Xb(),r.Yb(68,"th"),r.Uc(69,"Item Code"),r.Xb(),r.Yb(70,"th"),r.Uc(71,"Description "),r.Yb(72,"span",43),r.Uc(73,"*"),r.Xb(),r.Xb(),r.Yb(74,"th"),r.Uc(75,"Action"),r.Xb(),r.Xb(),r.Xb(),r.Yb(76,"tbody"),r.Sc(77,L,11,12,"tr",44),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(78,"div",45),r.Sc(79,x,2,1,"button",46),r.Yb(80,"button",47),r.ic("click",function(){return r.Lc(e),r.mc().CloseModal()}),r.Uc(81,"Close"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()}if(2&e){const e=r.mc();r.Fb(13),r.tc("required",!0)("ngModel",e.packageMaster.PackageName),r.Fb(7),r.Pc(r.yc(33,F)),r.tc("options",e.stlDepartment)("ngModel",e.packageMaster.ServiceInludes)("filter",!0),r.Fb(7),r.tc("required",!0)("ngModel",e.packageMaster.MCODE),r.Fb(7),r.wc("yearRange","",e.customDateFormat.MinYear,":",e.maxYear,""),r.tc("required",!0)("monthNavigator",!0)("yearNavigator",!0)("ngModel",e.rangeDates)("ngModelOptions",r.yc(34,R))("showIcon",!0)("dateFormat",e.customDateFormat.CalendarFormat)("readonlyInput",!0),r.Fb(8),r.tc("required",!0)("ngModel",e.packageMaster.ActualPrice)("min",1)("useGrouping",!1)("ngModelOptions",r.yc(35,R)),r.Fb(7),r.tc("required",!0)("ngModel",e.packageMaster.SellingPrice)("min",1)("useGrouping",!1)("ngModelOptions",r.yc(36,R)),r.Fb(7),r.tc("required",!0)("ngModel",e.packageMaster.Status),r.Fb(21),r.tc("ngForOf",e.lstPackageService),r.Fb(2),r.tc("ngIf",null==e.lstIAccessStr?null:e.lstIAccessStr.includes(e.ActionList.ReadWrite.toString()))}}const T=[{path:"",component:(()=>{class e extends n.a{constructor(e,t,i,c,a,n){super(),this.router=e,this.cdRef=t,this._UtilityService=i,this._ConstantServices=c,this._MasterServices=a,this.datepipe=n,this.filteredValuesLength=0,this.UserTypeCurre=localStorage.getItem("userTypeId"),this.userTypes=s.s,this.ActionList=s.a,this.lstIAccess=[],this.lstIAccessStr=[],this.PackageMode=null,this.packageMaster={},this.today=new Date,this.rangeDates=[],this.maxYear=(new Date).getFullYear(),this.customDateFormat=s.h,this.stlstYear=[],this.lstPackageService=[],this.PackageServiceCounter=1,this._ConstantServices.ActiveMenuName="Package Master",this.getPageLevelAccess();for(var r=2022,l=(new Date).getFullYear()+2;l>=r;)this.stlstYear.push({name:r,code:r}),r+=1;this.stlDepartment=[{name:"Dental",code:"Dental"},{name:"Other",code:"Other"}],this.year=(new Date).getFullYear(),this.maxYear=this.today.getFullYear()}getPageLevelAccess(){var e,t,i=this.router.url,c=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==c?void 0:c.find(e=>e.MenuItemURL===i))&&(this.lstIAccess=null===(e=c.find(e=>e.MenuItemURL===i))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(e=>{this.lstIAccessStr.push(e.ActionId.toString())}))}ngOnInit(){this.selectToday=new Date,this.rangeDates=[new Date,new Date],s.s.SuperAdmin!==localStorage.getItem("userTypeId")&&(this.ClinicIdSelected=localStorage.getItem("ClinicId"),this.LoadPackageMasterList())}onclinicSelect(e){this.ClinicIdSelected=e,this.LoadPackageMasterList()}LoadPackageMasterList(){this.lstPackageMaster=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPackageMaster(this.ClinicIdSelected,!1).subscribe(e=>{var t;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var i=JSON.parse(e.actionResult.result);this.lstPackageMaster=i=i||[],void 0!==this.filtr&&(this.filtr.nativeElement.value="",this.dataTable.reset(),this.filteredValuesLength=null===(t=this.lstPackageMaster)||void 0===t?void 0:t.length),this.cdRef.detectChanges()}else this.lstPackageMaster=[],this.cdRef.detectChanges();this.cdRef.detectChanges()},e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.message)})}onFilter(e,t){this.filteredValuesLength=e.filteredValue.length}exportToItemExcel(){let e={reportname:"medicine",filename:"medicine"};this.UserTypeCurre!==s.s.SuperAdmin?e.ClinicId=this.ClinicIdSelected:e.clinicId="",this._MasterServices.downloadReport(e)}AddNewPackage(){this.packageMaster={},this.packageMaster.Status=1,this.PackageServiceCounter=1,this.lstPackageService=[],this.AddPackageServiceDetails(),this.PackageMode="Add"}SavePackage(){var e,t;if((null===(e=this.lstPackageService)||void 0===e?void 0:e.length)>0&&(null===(t=this.lstPackageService.filter(e=>null!=e.Description&&""!=e.Description.trim()))||void 0===t?void 0:t.length)>0){var i={};this.packageMaster.ClinicId=this.ClinicIdSelected,this.packageMaster.CreatedBy=localStorage.getItem("userId"),this.packageMaster.ModifiedBy=localStorage.getItem("userId"),this.packageMaster.EffectDate=new Date(Date.parse(this.datepipe.transform(this.rangeDates[0],"yyyy-MM-dd"))),this.packageMaster.ExpiryDate=new Date(Date.parse(this.datepipe.transform(this.rangeDates[1],"yyyy-MM-dd"))),i.pckg=this.packageMaster,i.pckgDet=this.lstPackageService.filter(e=>null!=e.Description&&""!=e.Description.trim()),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.AddUpdatePackageMaster(i).subscribe(e=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success?(this._UtilityService.showSuccessAlert(e.actionResult.errMsg),this.PackageMode=null,this.LoadPackageMasterList(),this.cdRef.detectChanges()):this._UtilityService.showWarningAlert(e.actionResult.errMsg)},e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.message)})}else this._UtilityService.showWarningAlert("Please fill Package Service Details Properly")}CloseModal(){this.PackageMode=null}dateRangeChange(){this.rangeDates[0]&&this.rangeDates[1]&&void 0!==this.calendar&&(this.calendar.overlayVisible=!1)}AddPackageServiceDetails(){this.PackageServiceCounter++,this.lstPackageService.push({Sequence:this.PackageServiceCounter,ItemCode:"",Description:""}),this.cdRef.detectChanges()}RemovePackageServiceDetails(e){this.lstPackageService=this.lstPackageService.filter(t=>t.Sequence!==e),this.cdRef.detectChanges()}LoadPackageById(e){this.packageMaster={},this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPackageMasterById(e).subscribe(e=>{if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==e.actionResult.success){var t=JSON.parse(e.actionResult.result);this.packageMaster=t=t||[],this.rangeDates=[new Date(this.packageMaster.EffectDate),new Date(this.packageMaster.ExpiryDate)];var i=JSON.parse(e.actionResult.result2);this.lstPackageService=i=i||[],this.PackageMode="Edit",this.cdRef.detectChanges()}},e=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(e.message)})}}return e.\u0275fac=function(t){return new(t||e)(r.Sb(a.i),r.Sb(r.h),r.Sb(l.a),r.Sb(s.f),r.Sb(o.a),r.Sb(c.f))},e.\u0275cmp=r.Mb({type:e,selectors:[["app-package-master"]],viewQuery:function(e,t){if(1&e&&(r.cd(S,1),r.cd(k,1),r.cd(M,1)),2&e){let e;r.Hc(e=r.jc())&&(t.calendar=e.first),r.Hc(e=r.jc())&&(t.dataTable=e.first),r.Hc(e=r.jc())&&(t.filtr=e.first)}},features:[r.Cb],decls:2,vars:2,consts:[["class","row",4,"ngIf"],["class","row mt25",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 190px)",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[4,"ngIf"],["pButton","","title","New","label","Add New","class","p-button-outlined mr-2","icon","pi pi-plus",3,"click",4,"ngIf"],[1,"p-ml-left","pt-3"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],[3,"isCenterLabel","mode","onclinicSelect"],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined","mr-2",3,"click"],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],[1,"row","mt25"],[1,"col"],["myForm","ngForm"],[1,"col-md-4"],[1,"form-group"],[1,"required"],["pInputText","","type","text","name","txtPackageName",1,"w-100",3,"required","ngModel","ngModelChange"],["required","true","name","ddlDepartment","optionLabel","name","optionValue","code","placeholder","Please Select Department",3,"options","ngModel","filter","ngModelChange"],["pInputText","","type","text","name","txtMCODE",1,"w-100",3,"required","ngModel","ngModelChange"],["selectionMode","range","inputId","icon","name","rangeDates",3,"required","monthNavigator","yearNavigator","yearRange","ngModel","ngModelOptions","showIcon","dateFormat","readonlyInput","ngModelChange","onSelect"],["calendar",""],["mode","decimal",1,"w-100",3,"required","ngModel","min","useGrouping","ngModelOptions","ngModelChange"],["name","ddlStatus",1,"form-control",3,"required","ngModel","ngModelChange"],["value","1"],["value","0"],[1,"table","table-striped","table-bordered",2,"width","100%"],[1,"required",2,"color","red"],[4,"ngFor","ngForOf"],[1,"row","justify-content-center"],["type","button","class","btn btn-new-primary mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-new-secondary",3,"click"],["type","text","pInputText","",3,"name","ngModel","ngModelChange"],["href","javascript: void(0);",1,"add-btn","mr-2",3,"click"],[1,"fa","fa-plus"],["class","add-btn mr-2","href","javascript: void(0);",3,"click",4,"ngIf"],[1,"fa","fa-minus"],["type","button",1,"btn","btn-new-primary","mr-2",3,"disabled","click"]],template:function(e,t){1&e&&(r.Sc(0,U,10,5,"div",0),r.Sc(1,E,82,37,"div",1)),2&e&&(r.tc("ngIf",null==t.PackageMode),r.Fb(1),r.tc("ngIf",null!=t.PackageMode))},directives:[c.p,d.c,b.i,u.a,g.a,p.b,h.z,h.p,h.q,h.b,h.w,h.o,h.r,m.a,f.a,v.a,h.x,h.s,h.A,c.o],pipes:[c.f],styles:[""]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Qb({type:e}),e.\u0275inj=r.Pb({imports:[[a.l.forChild(T)],a.l]}),e})();var _=i("T2Aj");let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Qb({type:e}),e.\u0275inj=r.Pb({imports:[[c.c,N,h.i,d.f,p.c,m.b,u.b,_.a,f.b,v.b]]}),e})()}}]);