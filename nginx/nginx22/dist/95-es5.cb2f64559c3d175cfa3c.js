!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=l(e);if(t){var s=l(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return r(this,i)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{ItOj:function(r,l,s){"use strict";s.r(l),s.d(l,"PrescriptionDefaultTemplateMasterModule",function(){return oe});var c=s("ofXK"),o=s("tyNb"),a=s("Nach"),d=s("CwUn"),u=s("fXoL"),m=s("dcBc"),p=s("ReGW"),b=s("NLkC"),f=s("/RsI"),h=s("7zfz"),v=s("rEr+"),T=s("7kUa"),g=s("jIHw"),S=s("3Pt+"),y=s("arFO"),C=s("Ji6n"),D=s("W6nD"),M=["myForm"];function w(e,t){if(1&e){var i=u.Zb();u.Yb(0,"button",24),u.ic("click",function(){return u.Lc(i),u.mc(3).AddNew()}),u.Xb()}}function L(e,t){if(1&e){var i=u.Zb();u.Yb(0,"div",15),u.Yb(1,"span",16),u.Uc(2),u.Xb(),u.Sc(3,w,1,0,"button",17),u.Yb(4,"span",18),u.Yb(5,"a",19),u.ic("click",function(){return u.Lc(i),u.mc(2).ngOnChanges()}),u.Tb(6,"img",20),u.Xb(),u.Yb(7,"span",21),u.Tb(8,"i",22),u.Yb(9,"input",23),u.ic("input",function(e){return u.Lc(i),u.mc(),u.Ic(5).filterGlobal(e.target.value,"contains")}),u.Xb(),u.Xb(),u.Xb(),u.Xb()}if(2&e){var n=u.mc(2);u.Fb(2),u.Wc(" ",(null==n.lstPrescriptionDefaultTemplateMaster?null:n.lstPrescriptionDefaultTemplateMaster.length)>0?"Total Records: "+(null==n.lstPrescriptionDefaultTemplateMaster?null:n.lstPrescriptionDefaultTemplateMaster.length):""," "),u.Fb(1),u.tc("ngIf",null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))}}function I(e,t){1&e&&(u.Yb(0,"tr"),u.Yb(1,"td"),u.Uc(2," No records found "),u.Xb(),u.Xb()),2&e&&(u.Fb(1),u.Gb("colspan",5))}function P(e,t){1&e&&(u.Yb(0,"tr"),u.Yb(1,"th"),u.Uc(2,"S.No"),u.Xb(),u.Yb(3,"th"),u.Uc(4,"Type"),u.Xb(),u.Yb(5,"th"),u.Uc(6,"Template Name"),u.Xb(),u.Yb(7,"th"),u.Uc(8,"Status"),u.Xb(),u.Yb(9,"th"),u.Uc(10,"Action"),u.Xb(),u.Xb())}function X(e,t){if(1&e){var i=u.Zb();u.Yb(0,"tr"),u.Yb(1,"td"),u.Uc(2),u.Xb(),u.Yb(3,"td"),u.Uc(4),u.Xb(),u.Yb(5,"td"),u.Uc(6),u.Xb(),u.Yb(7,"td"),u.Uc(8),u.Xb(),u.Yb(9,"td"),u.Yb(10,"a",25),u.ic("click",function(){u.Lc(i);var e=t.$implicit;return u.mc(2).LoadPrescriptionDefaultTemplateMasterById(e.PDTMasterId)}),u.Tb(11,"img",26),u.Xb(),u.Xb(),u.Xb()}if(2&e){var n=t.$implicit,r=t.rowIndex;u.Fb(2),u.Vc(r+1),u.Fb(2),u.Vc(n.TimeType),u.Fb(2),u.Vc(n.TemplateName),u.Fb(2),u.Vc(1==n.Status?"Active":"Inactive")}}var Y=function(){return["TemplateName","TimeType"]};function O(e,t){if(1&e&&(u.Yb(0,"div",5),u.Yb(1,"div",6),u.Yb(2,"div",7),u.Yb(3,"div",8),u.Yb(4,"p-table",9,10),u.Sc(6,L,10,2,"ng-template",11),u.Sc(7,I,3,1,"ng-template",12),u.Sc(8,P,11,0,"ng-template",13),u.Sc(9,X,12,4,"ng-template",14),u.Xb(),u.Xb(),u.Xb(),u.Xb(),u.Xb()),2&e){var i=u.mc();u.Fb(4),u.tc("value",i.lstPrescriptionDefaultTemplateMaster)("rowHover",!0)("globalFilterFields",u.yc(4,Y))("scrollable",!0)}}function F(e,t){if(1&e&&(u.Yb(0,"tr"),u.Yb(1,"td"),u.Uc(2," No records found "),u.Xb(),u.Xb()),2&e){var i=t.$implicit;u.Fb(1),u.Gb("colspan",null==i?null:i.length)}}function R(e,t){if(1&e&&(u.Yb(0,"th"),u.Uc(1),u.Xb()),2&e){var i=t.$implicit;u.Fb(1),u.Wc(" ",i.header," ")}}function N(e,t){if(1&e&&(u.Yb(0,"tr"),u.Sc(1,R,2,1,"th",44),u.Xb()),2&e){var i=u.mc(2);u.Fb(1),u.tc("ngForOf",i.lstCommonField)}}function k(e,t){1&e&&u.Tb(0,"col",46)}function U(e,t){if(1&e&&(u.Yb(0,"colgroup"),u.Sc(1,k,1,0,"col",45),u.Xb()),2&e){var i=u.mc(2);u.Fb(1),u.tc("ngForOf",i.lstCommonField)}}function A(e,t){if(1&e){var i=u.Zb();u.Yb(0,"td",48),u.Uc(1),u.nc(2,"replaceSubstring"),u.Tb(3,"br"),u.Yb(4,"button",49),u.ic("click",function(){u.Lc(i);var e=t.$implicit;return u.mc(3).AddData(e.fieldId,e.field)}),u.Uc(5,"Add"),u.Xb(),u.Xb()}if(2&e){var n=t.$implicit,r=u.mc().$implicit;u.Fb(1),u.Wc(" ",null==r[n.field]?r[n.field]:u.qc(2,1,"#"+r[n.field],"#.*?[^,]~","\n").slice(1)," ")}}function _(e,t){if(1&e&&(u.Yb(0,"tr"),u.Sc(1,A,6,5,"td",47),u.Xb()),2&e){var i=t.columns;u.Fb(1),u.tc("ngForOf",i)}}function E(e,t){if(1&e){var i=u.Zb();u.Yb(0,"button",50),u.ic("click",function(){return u.Lc(i),u.mc(2).SavePrescriptionDefaultTemplateMaster()}),u.Uc(1,"Save"),u.Xb()}if(2&e){u.mc();var n=u.Ic(5);u.tc("disabled",!n.form.valid)}}var x=function(){return{width:"100%"}};function j(e,t){if(1&e){var i=u.Zb();u.Yb(0,"div",27),u.Yb(1,"div",28),u.Yb(2,"div",7),u.Yb(3,"div",8),u.Yb(4,"form",null,29),u.Yb(6,"div",30),u.Yb(7,"div",31),u.Yb(8,"div",32),u.Yb(9,"label"),u.Uc(10,"Type"),u.Xb(),u.Yb(11,"span",33),u.Uc(12,"*"),u.Xb(),u.Yb(13,"p-dropdown",34),u.ic("ngModelChange",function(e){return u.Lc(i),u.mc().PrescriptionDefaultTemplateMaster.TimeType=e})("onChange",function(){return u.Lc(i),u.mc().OnChangeTimeType()}),u.Xb(),u.Xb(),u.Xb(),u.Yb(14,"div",31),u.Yb(15,"div",32),u.Yb(16,"label"),u.Uc(17,"Template Name"),u.Xb(),u.Yb(18,"span",33),u.Uc(19,"*"),u.Xb(),u.Yb(20,"input",35),u.ic("ngModelChange",function(e){return u.Lc(i),u.mc().PrescriptionDefaultTemplateMaster.TemplateName=e}),u.Xb(),u.Xb(),u.Xb(),u.Yb(21,"div",31),u.Yb(22,"div",32),u.Yb(23,"label"),u.Uc(24,"Status"),u.Xb(),u.Yb(25,"span",33),u.Uc(26,"*"),u.Xb(),u.Yb(27,"p-dropdown",36),u.ic("ngModelChange",function(e){return u.Lc(i),u.mc().PrescriptionDefaultTemplateMaster.Status=e}),u.Xb(),u.Xb(),u.Xb(),u.Xb(),u.Yb(28,"div",37),u.Yb(29,"div",6),u.Yb(30,"p-table",38,39),u.Sc(32,F,3,1,"ng-template",12),u.Sc(33,N,2,1,"ng-template",13),u.Sc(34,U,2,1,"ng-template",40),u.Sc(35,_,2,1,"ng-template",14),u.Xb(),u.Xb(),u.Xb(),u.Yb(36,"div",41),u.Sc(37,E,2,1,"button",42),u.Yb(38,"button",43),u.ic("click",function(){return u.Lc(i),u.mc().CloseModal()}),u.Uc(39,"Close"),u.Xb(),u.Xb(),u.Xb(),u.Xb(),u.Xb(),u.Xb(),u.Xb()}if(2&e){var n=u.mc();u.Fb(13),u.Pc(u.yc(16,x)),u.tc("options",n.stlsttimetype)("ngModel",n.PrescriptionDefaultTemplateMaster.TimeType)("filter",!0),u.Fb(7),u.tc("ngModel",n.PrescriptionDefaultTemplateMaster.TemplateName),u.Fb(7),u.Pc(u.yc(17,x)),u.tc("options",n.stlststatus)("ngModel",n.PrescriptionDefaultTemplateMaster.Status)("filter",!0),u.Fb(3),u.tc("columns",n.lstCommonField)("value",n.lstTreatmentList)("rowHover",!0)("scrollable",!0),u.Fb(7),u.tc("ngIf",null==n.lstIAccessStr?null:n.lstIAccessStr.includes(n.ActionList.ReadWrite.toString()))}}function V(e,t){if(1&e){var i=u.Zb();u.Yb(0,"div",15),u.Yb(1,"span",21),u.Tb(2,"i",22),u.Yb(3,"input",54),u.ic("ngModelChange",function(e){return u.Lc(i),u.mc(2).SearchTreatVal=e})("change",function(){return u.Lc(i),u.mc(2).SearchTreatmentDiet()}),u.Xb(),u.Yb(4,"span",55),u.ic("click",function(){return u.Lc(i),u.mc(2).SearchTreatmentDiet()}),u.Uc(5," filter_alt "),u.Xb(),u.Xb(),u.Xb()}if(2&e){var n=u.mc(2);u.Fb(3),u.tc("ngModel",n.SearchTreatVal),u.Fb(1),u.Hb(null==n.SearchTreatVal||null==n.SearchTreatVal||""==n.SearchTreatVal?"material-icons ColumnfilterGlobalFilter":"material-icons ColumnfilterIconGlobalFilterColorDefult")}}function B(e,t){1&e&&(u.Yb(0,"tr"),u.Yb(1,"td"),u.Uc(2," No records found "),u.Xb(),u.Xb()),2&e&&(u.Fb(1),u.Gb("colspan",2))}function G(e,t){1&e&&(u.Yb(0,"colgroup"),u.Tb(1,"col",56),u.Tb(2,"col",57),u.Xb())}function H(e,t){1&e&&(u.Yb(0,"tr"),u.Yb(1,"th"),u.Uc(2,"Name"),u.Xb(),u.Tb(3,"th"),u.Xb())}function J(e,t){if(1&e){var i=u.Zb();u.Yb(0,"tr"),u.Yb(1,"td"),u.Uc(2),u.Xb(),u.Yb(3,"td"),u.Yb(4,"p-checkbox",58),u.ic("onChange",function(e){u.Lc(i);var n=t.rowIndex,r=t.$implicit;return u.mc(2).AddRemoveSelectedList(e,n,r.MCODE)})("ngModelChange",function(e){return t.$implicit.Checked=e}),u.Xb(),u.Xb(),u.Xb()}if(2&e){var n=t.$implicit,r=t.rowIndex;u.Fb(2),u.Vc(n.Description),u.Fb(2),u.vc("name","ChkItemCheck_",r,""),u.tc("ngModel",n.Checked)("binary",!0)}}function $(e,t){1&e&&(u.Yb(0,"colgroup"),u.Tb(1,"col",61),u.Tb(2,"col",62),u.Xb())}function W(e,t){1&e&&(u.Yb(0,"tr"),u.Tb(1,"th"),u.Yb(2,"th"),u.Uc(3,"Name"),u.Xb(),u.Xb())}function Z(e,t){if(1&e){var i=u.Zb();u.Yb(0,"tr"),u.Yb(1,"td"),u.Yb(2,"p-checkbox",58),u.ic("onChange",function(e){u.Lc(i);var n=t.rowIndex,r=t.$implicit;return u.mc(3).RemoveSelectedList(e,n,r.MCODE)})("ngModelChange",function(e){return t.$implicit.Checked=e}),u.Xb(),u.Xb(),u.Yb(3,"td"),u.Uc(4),u.Xb(),u.Xb()}if(2&e){var n=t.$implicit,r=t.rowIndex;u.Fb(2),u.vc("name","ChkItemTreatDietCheck_",r,""),u.tc("ngModel",n.Checked)("binary",!0),u.Fb(2),u.Wc(" ",n.Description," ")}}function z(e,t){if(1&e&&(u.Yb(0,"div",31),u.Yb(1,"b"),u.Uc(2,"Selected List"),u.Xb(),u.Yb(3,"p-table",59,60),u.Sc(5,$,3,0,"ng-template",40),u.Sc(6,W,4,0,"ng-template",13),u.Sc(7,Z,5,4,"ng-template",14),u.Xb(),u.Tb(8,"br"),u.Xb()),2&e){var i=u.mc(2);u.Fb(3),u.tc("value",i.lstCommmonListTreatDietSelcted)("rowHover",!0)("scrollable",!0)}}var q=function(){return["Description"]};function Q(e,t){if(1&e){var i=u.Zb();u.Yb(0,"div"),u.Yb(1,"div",37),u.Yb(2,"div"),u.Yb(3,"div",37),u.Yb(4,"div",6),u.Yb(5,"p-table",51,52),u.ic("onLazyLoad",function(e){return u.Lc(i),u.mc().loadTreatDietList(e)})("firstChange",function(e){return u.Lc(i),u.mc().first=e}),u.Sc(7,V,6,4,"ng-template",11),u.Sc(8,B,3,1,"ng-template",12),u.Sc(9,G,3,0,"ng-template",40),u.Sc(10,H,4,0,"ng-template",13),u.Sc(11,J,5,4,"ng-template",14),u.Xb(),u.Xb(),u.Xb(),u.Xb(),u.Sc(12,z,9,3,"div",53),u.Xb(),u.Xb()}if(2&e){var n=u.mc();u.Fb(2),u.Hb((null==n.lstCommmonListTreatDietSelcted?null:n.lstCommmonListTreatDietSelcted.length)>0?"col-md-8":"col-md-12"),u.Fb(3),u.tc("value",n.lstTreatmentNew)("rowHover",!0)("globalFilterFields",u.yc(14,q))("scrollable",!0)("lazy",!0)("paginator",!0)("rows",10)("totalRecords",n.TotalRecordsTreat)("lazyLoadOnInit",!1)("first",n.first),u.Fb(7),u.tc("ngIf",(null==n.lstCommmonListTreatDietSelcted?null:n.lstCommmonListTreatDietSelcted.length)>0)}}function K(e,t){if(1&e){var i=u.Zb();u.Yb(0,"button",64),u.ic("click",function(){return u.Lc(i),u.mc(2).SaveNewTreatment()}),u.Uc(1,"Save"),u.Xb()}}function ee(e,t){if(1&e&&u.Sc(0,K,2,0,"button",63),2&e){var i=u.mc();u.tc("ngIf",null==i.lstIAccessStr?null:i.lstIAccessStr.includes(i.ActionList.ReadWrite.toString()))}}var te,ie,ne,re=function(){return{width:"90vw"}},le=[{path:"",component:(te=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(d,r);var l,s,c,o=n(d);function d(t,i,n,r,l,s){var c;return e(this,d),(c=o.call(this)).cdRef=t,c.router=i,c._MasterServices=n,c._DoctorServices=r,c._ConstantServices=l,c._UtilityService=s,c.dtOptions={},c.Mode=null,c.PrescriptionDefaultTemplateMaster={},c.lstPrescriptionTimeMaster=[],c.lstPrescriptionItem=[],c.stlsttimetype=[],c.stlststatus=[],c.lstCommonField=[],c.lstTreatmentList=[],c.Trnmode="Add",c.lstTreatmentNew=[],c.lstTreatmentCategory=[],c.SelectedTreatCategory=null,c.lstCommmonListTreatDietSelcted=[],c.selectedlstPrescriptionObj=[],c.first=0,c.TotalRecordsTreat=0,c.TotalRecordsDiet=0,c.SearchTreatVal=null,c.ShowAddNewTreatmentModel=!1,c.ActionList=a.a,c.lstIAccess=[],c.lstIAccessStr=[],c.stlsttimetype=[{name:"Treatment",code:"Treatment"},{name:"Diet",code:"Diet"}],c.stlststatus=[{name:"Active",code:1},{name:"Inactive",code:0}],c.getPageLevelAccess(),c}return l=d,(s=[{key:"getPageLevelAccess",value:function(){var e,t,i=this,n=this.router.url,r=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==r?void 0:r.find(function(e){return e.MenuItemURL===n}))&&(this.lstIAccess=null===(e=r.find(function(e){return e.MenuItemURL===n}))||void 0===e?void 0:e.ActionIAccess,(null===(t=this.lstIAccess)||void 0===t?void 0:t.length)>0&&this.lstIAccess.map(function(e){i.lstIAccessStr.push(e.ActionId.toString())}))}},{key:"ngOnInit",value:function(){this._ConstantServices.ActiveMenuName="IPD Template Master",this.cdRef.detectChanges(),this.GetPrescriptionDefaultTemplateMasterList()}},{key:"ngOnChanges",value:function(){this.GetPrescriptionDefaultTemplateMasterList()}},{key:"OnChangeTimeType",value:function(){var e,t,i;null!=(null===(e=this.PrescriptionDefaultTemplateMaster)||void 0===e?void 0:e.TimeType)&&null!=(null===(t=this.PrescriptionDefaultTemplateMaster)||void 0===t?void 0:t.TimeType)&&""!=(null===(i=this.PrescriptionDefaultTemplateMaster)||void 0===i?void 0:i.TimeType)?(this.LoadTreatmentCategory(),this.GetPrescriptionDefaultTemplateItemByIdAndType()):(this.lstPrescriptionTimeMaster=[],this.lstPrescriptionItem=[])}},{key:"GetPrescriptionDefaultTemplateMasterList",value:function(){var e=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPrescriptionDefaultTemplateMaster().subscribe(function(t){if(e._UtilityService.hideSpinner(),e.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.lstPrescriptionDefaultTemplateMaster=i=i||[],e.cdRef.detectChanges()}else e.lstPrescriptionDefaultTemplateMaster=[],e.cdRef.detectChanges()},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"LoadPrescriptionDefaultTemplateMasterById",value:function(e){var t=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPrescriptionDefaultTemplateMasterById(e).subscribe(function(e){if(t._UtilityService.hideSpinner(),t.cdRef.detectChanges(),1==e.actionResult.success){var i=JSON.parse(e.actionResult.result);t.PrescriptionDefaultTemplateMaster=i=i||[],t.Mode="update",t.OnChangeTimeType(),t.cdRef.detectChanges()}else t.PrescriptionDefaultTemplateMaster={}},function(e){t._UtilityService.hideSpinner(),t._UtilityService.showErrorAlert(e.message)})}},{key:"SavePrescriptionDefaultTemplateMaster",value:function(){var e,t=this;this.PrescriptionDefaultTemplateMaster.CreatedBy=localStorage.getItem("userId"),this.PrescriptionDefaultTemplateMaster.ModifiedBy=localStorage.getItem("userId"),(null===(e=this.selectedlstPrescriptionObj)||void 0===e?void 0:e.length)>0?(this.PrescriptionDefaultTemplateMaster.lstDefaultTemplateItem=this.selectedlstPrescriptionObj,this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.AddUpdatePrescriptionDefaultTemplateMaster(this.PrescriptionDefaultTemplateMaster).subscribe(function(e){t._UtilityService.hideSpinner(),1==e.actionResult.success?(t._UtilityService.showSuccessAlert(e.actionResult.errMsg),t.GetPrescriptionDefaultTemplateMasterList(),t.Mode=null):t._UtilityService.showWarningAlert(e.actionResult.errMsg),t.cdRef.detectChanges()},function(e){t._UtilityService.hideSpinner(),t._UtilityService.showErrorAlert(e.message)})):this._UtilityService.showWarningAlert("No Item added for this Template")}},{key:"AddNew",value:function(){this.ResetModel(),this.Mode="Add",this.cdRef.detectChanges(),this.myForm.resetForm()}},{key:"ResetModel",value:function(){this.lstCommonField=[],this.lstTreatmentList=[],this.selectedlstPrescriptionObj=[],this.PrescriptionDefaultTemplateMaster={},this.PrescriptionDefaultTemplateMaster.PDTMasterId=null,this.PrescriptionDefaultTemplateMaster.Status=1}},{key:"CloseModal",value:function(){this.Mode=null}},{key:"AddData",value:function(e,t){var i,n,r=this;if(this.SearchTreatVal=null,this.cdRef.detectChanges(),this.lstCommmonListTreatDietSelcted=[],this.prescriptionFieldIdSelected=e,this.prescriptionFieldSelected=t,"Treatment"===(null===(i=this.PrescriptionDefaultTemplateMaster)||void 0===i?void 0:i.TimeType)?this.LoadTreatmentListByCategory(0,10):"Diet"===(null===(n=this.PrescriptionDefaultTemplateMaster)||void 0===n?void 0:n.TimeType)&&this.LoadDietListIPD(0,10),this.ShowAddNewTreatmentModel=!0,this.lstTreatmentList.length>0){var l=JSON.parse(JSON.stringify(this.lstTreatmentList));if(null!=l[0][t]&&null!=l[0][t]&&""!=l[0][t]){var s=l[0][t].split("#");(null==s?void 0:s.length)>0&&s.map(function(e){r.lstCommmonListTreatDietSelcted.push({Checked:!0,Description:e.split("~")[1],MCODE:e.split("~")[0]})})}}this.Trnmode="Add"}},{key:"LoadTreatmentCategory",value:function(){var e=this;this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetTreatmentCategory().subscribe(function(t){if(e._UtilityService.hideSpinner(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);e.lstTreatmentCategory=i=i||[],e.lstTreatmentCategory.length>0&&(e.SelectedTreatCategory=e.lstTreatmentCategory[0].HCategoryName),e.cdRef.detectChanges()}},function(t){e._UtilityService.hideSpinner(),e._UtilityService.showErrorAlert(t.message)})}},{key:"GetPrescriptionDefaultTemplateItemByIdAndType",value:function(){var e,t,i,n,r=this,l="";null!=(null===(e=this.PrescriptionDefaultTemplateMaster)||void 0===e?void 0:e.PDTMasterId)&&null!=(null===(t=this.PrescriptionDefaultTemplateMaster)||void 0===t?void 0:t.PDTMasterId)&&(l=null===(i=this.PrescriptionDefaultTemplateMaster)||void 0===i?void 0:i.PDTMasterId),this.lstCommonField=[],this.lstTreatmentList=[],this.selectedlstPrescriptionObj=[],this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetPrescriptionDefaultTemplateItemByIdAndType(l,null===(n=this.PrescriptionDefaultTemplateMaster)||void 0===n?void 0:n.TimeType).subscribe(function(e){var t,i,n,l;if(r._UtilityService.hideSpinner(),r.cdRef.detectChanges(),1==e.actionResult.success){var s=JSON.parse(e.actionResult.result);if(r.lstTreatmentList=s=s||[],null!=e.actionResult.result2){var c=JSON.parse(e.actionResult.result2);r.lstCommonField=c=c||[]}if(0==(null===(t=r.lstTreatmentList)||void 0===t?void 0:t.length))r.AddNewRow();else for(var o=0;o<(null===(i=r.lstTreatmentList)||void 0===i?void 0:i.length);o++)for(var a=0;a<(null===(n=r.lstCommonField)||void 0===n?void 0:n.length);a++){var d=null===(l=r.lstTreatmentList[o][r.lstCommonField[a].field])||void 0===l?void 0:l.split("#");if((null==d?void 0:d.length)>0)for(var u=0;u<(null==d?void 0:d.length);u++){var m={};m.MCODE=d[u].split("~")[0],m.TimeId=r.lstCommonField[a].fieldId,r.selectedlstPrescriptionObj.push(m)}}r.cdRef.detectChanges()}else r.lstTreatmentList=[],r.cdRef.detectChanges()},function(e){r._UtilityService.hideSpinner(),r._UtilityService.showErrorAlert(e.message)})}},{key:"AddNewRow",value:function(){this.lstTreatmentList.push({}),this.cdRef.detectChanges()}},{key:"LoadTreatmentListByCategory",value:function(e,t){var i=this;this.first=parseInt(e),this.lstTreatmentNew=[];var n={};n.TimeId=this.prescriptionFieldIdSelected,n.SearchText=null==this.SearchTreatVal||null==this.SearchTreatVal||""==this.SearchTreatVal?"":this.SearchTreatVal.trim(),n.first=e.toString(),n.rows=t.toString(),n.HCategoryName="",this.TotalRecordsTreat=0,this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetTreatmentListByCategory(n).subscribe(function(e){var t,n;if(i._UtilityService.hideSpinner(),1==e.actionResult.success){var r=JSON.parse(e.actionResult.result);i.lstTreatmentNew=r=r||[],(null===(t=i.lstTreatmentNew)||void 0===t?void 0:t.length)>0?(i.TotalRecordsTreat=parseInt(e.actionResult.stringVal),(null===(n=i.lstCommmonListTreatDietSelcted)||void 0===n?void 0:n.length)>0&&i.lstCommmonListTreatDietSelcted.forEach(function(e){if(i.lstTreatmentNew.find(function(t){return t.MCODE==e.MCODE&&1==e.Checked})){var t=i.lstTreatmentNew.findIndex(function(t){return t.MCODE==e.MCODE});t>=0&&(i.lstTreatmentNew[t].Checked=!0)}})):i.TotalRecordsTreat=0}else i.TotalRecordsTreat=0;i.cdRef.detectChanges()},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})}},{key:"LoadDietListIPD",value:function(e,t){var i=this;this.first=parseInt(e),this.lstTreatmentNew=[],this.TotalRecordsTreat=0;var n={};n.TimeId=this.prescriptionFieldIdSelected,n.SearchText=null==this.SearchTreatVal||null==this.SearchTreatVal||""==this.SearchTreatVal?"":this.SearchTreatVal.trim(),n.first=e.toString(),n.rows=t.toString(),this._UtilityService.showSpinner(),this.unsubscribe.add=this._DoctorServices.GetDietMasterIPD(n).subscribe(function(e){var t,n;if(i._UtilityService.hideSpinner(),1==e.actionResult.success){var r=JSON.parse(e.actionResult.result);i.lstTreatmentNew=r=r||[],(null===(t=i.lstTreatmentNew)||void 0===t?void 0:t.length)>0?(i.TotalRecordsTreat=parseInt(e.actionResult.stringVal),(null===(n=i.lstCommmonListTreatDietSelcted)||void 0===n?void 0:n.length)>0&&i.lstCommmonListTreatDietSelcted.forEach(function(e){if(i.lstTreatmentNew.find(function(t){return t.MCODE==e.MCODE&&1==e.Checked})){var t=i.lstTreatmentNew.findIndex(function(t){return t.MCODE==e.MCODE});t>=0&&(i.lstTreatmentNew[t].Checked=!0)}})):i.TotalRecordsTreat=0}else i.TotalRecordsTreat=0;i.cdRef.detectChanges()},function(e){i._UtilityService.hideSpinner(),i._UtilityService.showErrorAlert(e.message)})}},{key:"SaveNewTreatment",value:function(){var e,t=this,i=this.lstCommmonListTreatDietSelcted.filter(function(e){return 1==e.Checked});if((null==i?void 0:i.length)>0){var n=this.lstCommonField.find(function(e){return e.fieldId===t.prescriptionFieldIdSelected}).field,r=(JSON.parse(JSON.stringify(this.lstTreatmentList)),null);this.selectedlstPrescriptionObj=this.selectedlstPrescriptionObj.filter(function(e){return e.TimeId!==t.prescriptionFieldIdSelected});for(var l=0;l<(null==i?void 0:i.length);l++){var s={};null==r||null==r?(r=i[l].MCODE+"~"+i[l].Description,s.MCODE=i[l].MCODE,s.TimeId=this.prescriptionFieldIdSelected,this.selectedlstPrescriptionObj.push(s)):r.includes(i[l].MCODE)||(r=r+"#"+i[l].MCODE+"~"+i[l].Description,s.MCODE=i[l].MCODE,s.TimeId=this.prescriptionFieldIdSelected,this.selectedlstPrescriptionObj.push(s))}(null===(e=this.selectedlstPrescriptionObj)||void 0===e?void 0:e.length)>0&&(this.lstTreatmentList[0][n]=r,this.ShowAddNewTreatmentModel=!1)}else this._UtilityService.showWarningAlert("Please Select atleast One Treatment")}},{key:"UpdateNewTreatment",value:function(){var e,t,i=this,n=this.lstCommmonListTreatDietSelcted.filter(function(e){return!0===e.Checked}),r=this.lstCommmonListTreatDietSelcted.filter(function(e){return!1===e.Checked});if((null==n?void 0:n.length)>0){n.map(function(e){i.selectedlstPrescriptionObj=i.selectedlstPrescriptionObj.filter(function(t){return t.MCODE!=e.MCODE&&t.TimeId!=e.TimeId})});for(var l=0;l<(null===(e=this.lstTreatmentList)||void 0===e?void 0:e.length);l++){var s=this.lstCommonField.find(function(e){return e.fieldId===i.prescriptionFieldIdSelected}).field,c=null===(t=this.lstTreatmentList[l][s])||void 0===t?void 0:t.split("#"),o="";if((null==c?void 0:c.length)>0&&(null==r?void 0:r.length)>0)for(var a=0;a<(null==r?void 0:r.length);a++)for(var d=0;d<(null==c?void 0:c.length);d++)c[d].split("~")[0]==r[a].MCODE&&(null==o||null==o||""==o?o+=c[d]:o=o+"#"+c[d]);this.lstTreatmentList[l][s]=o}}}},{key:"loadTreatDietList",value:function(e){var t,i;(null===(t=this.lstTreatmentNew)||void 0===t?void 0:t.length)>0&&"Treatment"==this.PrescriptionDefaultTemplateMaster.TimeType?this.LoadTreatmentListByCategory(e.first,e.rows):(null===(i=this.lstTreatmentNew)||void 0===i?void 0:i.length)>0&&"Diet"==this.PrescriptionDefaultTemplateMaster.TimeType&&this.LoadDietListIPD(e.first,e.rows)}},{key:"SearchTreatmentDiet",value:function(){"Treatment"==this.PrescriptionDefaultTemplateMaster.TimeType?this.LoadTreatmentListByCategory(0,10):this.LoadDietListIPD(0,10)}},{key:"AddRemoveSelectedList",value:function(e,t,i){if(e.checked){var n=this.lstTreatmentNew.find(function(e){return e.MCODE==i});this.lstCommmonListTreatDietSelcted.push({MCODE:n.MCODE,Description:n.Description,Qty:n.Qty,Checked:e.checked})}else n=this.lstTreatmentNew.find(function(e){return e.MCODE==i}),this.lstCommmonListTreatDietSelcted=this.lstCommmonListTreatDietSelcted.filter(function(e){return e.MCODE!==n.MCODE})}},{key:"RemoveSelectedList",value:function(e,t,i){if(e.checked){var n=this.lstCommmonListTreatDietSelcted.find(function(e){return e.MCODE==i});(r=this.lstTreatmentNew.findIndex(function(e){return e.MCODE==n.MCODE}))>=0&&(this.lstTreatmentNew[r].Checked=!0)}else{var r;n=this.lstCommmonListTreatDietSelcted.find(function(e){return e.MCODE==i}),(r=this.lstTreatmentNew.findIndex(function(e){return e.MCODE==n.MCODE}))>=0&&(this.lstTreatmentNew[r].Checked=!1)}this.UpdateNewTreatment(),this.cdRef.detectChanges()}}])&&t(l.prototype,s),c&&t(l,c),d}(d.a),te.\u0275fac=function(e){return new(e||te)(u.Sb(u.h),u.Sb(o.i),u.Sb(m.a),u.Sb(p.a),u.Sb(a.f),u.Sb(b.a))},te.\u0275cmp=u.Mb({type:te,selectors:[["app-prescription-default-template-master"]],viewQuery:function(e,t){var i;1&e&&u.cd(M,1),2&e&&u.Hc(i=u.jc())&&(t.myForm=i.first)},features:[u.Cb,u.Db],decls:5,vars:8,consts:[["class","row mt25",4,"ngIf"],["class","row mb-8",4,"ngIf"],["header","Add New",3,"modal","visible","visibleChange"],[4,"ngIf"],["pTemplate","footer"],[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["responsiveLayout","scroll","scrollHeight","500px",3,"value","rowHover","globalFilterFields","scrollable"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],[1,"p-ml-left","mr-3"],["pButton","","title","New","label","Add New","class","p-button-outlined","icon","pi pi-plus",3,"click",4,"ngIf"],[1,"p-ml-auto"],["matTooltip","Refresh",3,"click"],["src","./assets/custom-icons/refresh.svg",1,"custom-ico","mr4"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined",3,"click"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],[1,"row","mb-8"],[1,"col"],["myForm","ngForm"],[1,"row","m-0"],[1,"col-md-4"],[1,"form-group"],[1,"required"],["required","true","name","ddlType","optionLabel","name","optionValue","code","placeholder","Please Select Type",3,"options","ngModel","filter","ngModelChange","onChange"],["type","text","required","","name","txtTemplateName",1,"form-control",3,"ngModel","ngModelChange"],["required","true","name","ddlStatus","optionLabel","name","optionValue","code","placeholder","Please Select Status",3,"options","ngModel","filter","ngModelChange"],[1,"row"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","250px",3,"columns","value","rowHover","scrollable"],["dt11",""],["pTemplate","colgroup"],[1,"row","justify-content-center"],["type","button","type","button","class","btn-con btn btn-success mr-3",3,"disabled","click",4,"ngIf"],[1,"btn-con","closeButtonCon",3,"click"],[4,"ngFor","ngForOf"],["style","width:140px",4,"ngFor","ngForOf"],[2,"width","140px"],["style","word-wrap: break-word;",4,"ngFor","ngForOf"],[2,"word-wrap","break-word"],["type","button",3,"click"],["type","button","type","button",1,"btn-con","btn","btn-success","mr-3",3,"disabled","click"],["scrollHeight","200px","responsiveLayout","scroll",1,"ColumnFilterTable",3,"value","rowHover","globalFilterFields","scrollable","lazy","paginator","rows","totalRecords","lazyLoadOnInit","first","onLazyLoad","firstChange"],["dt99",""],["class","col-md-4",4,"ngIf"],["type","text","name","txtInputSearchTreatment","placeholder","Search...",1,"form-control","psearchfilter",3,"ngModel","value","ngModelChange","change"],["matTooltip","Filter",3,"click"],[2,"width","100px"],[2,"width","50px"],["inputId","binary",3,"name","ngModel","binary","onChange","ngModelChange"],["scrollHeight","200px","responsiveLayout","scroll",3,"value","rowHover","scrollable"],["dt199",""],[2,"width","20px"],[2,"width","80px"],["type","button","class","btn btn-new-primary mr-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-new-primary","mr-2",3,"click"]],template:function(e,t){1&e&&(u.Sc(0,O,10,5,"div",0),u.Sc(1,j,40,18,"div",1),u.Yb(2,"p-dialog",2),u.ic("visibleChange",function(e){return t.ShowAddNewTreatmentModel=e}),u.Sc(3,Q,13,15,"div",3),u.Sc(4,ee,1,1,"ng-template",4),u.Xb()),2&e&&(u.tc("ngIf",null==t.Mode),u.Fb(1),u.tc("ngIf",null!=t.Mode),u.Fb(1),u.Pc(u.yc(7,re)),u.tc("modal",!0)("visible",t.ShowAddNewTreatmentModel),u.Fb(1),u.tc("ngIf",t.ShowAddNewTreatmentModel))},directives:[c.p,f.a,h.i,v.c,T.a,g.b,S.z,S.p,S.q,y.a,S.w,S.o,S.r,S.b,c.o,C.a],pipes:[D.a],styles:[""]}),te)}],se=((ie=function t(){e(this,t)}).\u0275fac=function(e){return new(e||ie)},ie.\u0275mod=u.Qb({type:ie}),ie.\u0275inj=u.Pb({imports:[[o.l.forChild(le)],o.l]}),ie),ce=s("QoE7"),oe=((ne=function t(){e(this,t)}).\u0275fac=function(e){return new(e||ne)},ne.\u0275mod=u.Qb({type:ne}),ne.\u0275inj=u.Pb({imports:[[c.c,se,S.i,v.f,g.c,y.b,T.b,C.b,f.b,ce.a]]}),ne)}}])}();