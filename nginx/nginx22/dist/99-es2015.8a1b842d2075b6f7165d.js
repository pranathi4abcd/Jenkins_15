(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{"3db/":function(t,e,i){"use strict";i.r(e),i.d(e,"ReferTreatmentMasterModule",function(){return k});var n=i("ofXK"),s=i("tyNb"),r=i("CwUn"),c=i("Nach"),l=i("fXoL"),o=i("dcBc"),a=i("NLkC"),b=i("rEr+"),d=i("7zfz"),u=i("7kUa"),h=i("jIHw"),p=i("3Pt+"),m=i("arFO");const f=["myForm"],g=["dt"],v=["filtr"];function C(t,e){if(1&t){const t=l.Zb();l.Yb(0,"button",20),l.ic("click",function(){return l.Lc(t),l.mc(3).AddNew()}),l.Xb()}}function S(t,e){if(1&t){const t=l.Zb();l.Yb(0,"button",21),l.ic("click",function(){return l.Lc(t),l.mc(3).exportToItemExcel()}),l.Xb()}}function M(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",11),l.Sc(1,C,1,0,"button",12),l.Yb(2,"span",13),l.Uc(3),l.Xb(),l.Yb(4,"span",14),l.Sc(5,S,1,0,"button",15),l.Yb(6,"span",16),l.Tb(7,"i",17),l.Yb(8,"input",18,19),l.ic("input",function(e){return l.Lc(t),l.mc(),l.Ic(5).filterGlobal(e.target.value,"contains")}),l.Xb(),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=l.mc(2);l.Fb(1),l.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString())),l.Fb(2),l.Wc(" ",(null==t.lstMaster?null:t.lstMaster.length)>0?"Total Records: "+t.filteredValuesLength:""," "),l.Fb(2),l.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.Download.toString()))}}function X(t,e){if(1&t&&(l.Yb(0,"tr"),l.Yb(1,"td"),l.Uc(2," No records found "),l.Xb(),l.Xb()),2&t){const t=e.$implicit;l.Fb(1),l.Gb("colspan",null==t?null:t.length)}}function w(t,e){1&t&&(l.Yb(0,"tr"),l.Yb(1,"th"),l.Uc(2,"Name"),l.Xb(),l.Yb(3,"th"),l.Uc(4,"Description"),l.Xb(),l.Yb(5,"th"),l.Uc(6,"Order Number"),l.Xb(),l.Yb(7,"th"),l.Uc(8,"Status"),l.Xb(),l.Yb(9,"th"),l.Uc(10,"Action"),l.Xb(),l.Xb())}function Y(t,e){if(1&t){const t=l.Zb();l.Yb(0,"tr"),l.Yb(1,"td"),l.Uc(2),l.Xb(),l.Yb(3,"td"),l.Uc(4),l.Xb(),l.Yb(5,"td"),l.Uc(6),l.Xb(),l.Yb(7,"td"),l.Uc(8),l.Xb(),l.Yb(9,"td"),l.Yb(10,"a",22),l.ic("click",function(){l.Lc(t);const i=e.$implicit;return l.mc(2).LoadReferToTreatmentMasterById(i.ReferTreatmentMasterId)}),l.Tb(11,"img",23),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=e.$implicit;l.Fb(2),l.Vc(t.Name),l.Fb(2),l.Vc(t.Description),l.Fb(2),l.Vc(t.OrderNo),l.Fb(2),l.Vc(1==t.Status?"Active":"Inactive")}}const I=function(){return["Name","Description","Status"]};function y(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",1),l.Yb(1,"div",2),l.Yb(2,"div",3),l.Yb(3,"div",4),l.Yb(4,"p-table",5,6),l.ic("onFilter",function(e){l.Lc(t);const i=l.Ic(5);return l.mc().onFilter(e,i)}),l.Sc(6,M,10,3,"ng-template",7),l.Sc(7,X,3,1,"ng-template",8),l.Sc(8,w,11,0,"ng-template",9),l.Sc(9,Y,12,4,"ng-template",10),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=l.mc();l.Fb(4),l.tc("value",t.lstMaster)("rowHover",!0)("globalFilterFields",l.yc(4,I))("scrollable",!0)}}function R(t,e){1&t&&(l.Yb(0,"tr"),l.Yb(1,"th",40),l.Uc(2,"Center"),l.Xb(),l.Yb(3,"th",41),l.Uc(4,"Name"),l.Xb(),l.Yb(5,"th",40),l.Uc(6,"Description"),l.Xb(),l.Yb(7,"th",42),l.Uc(8,"Status"),l.Xb(),l.Yb(9,"th",43),l.Uc(10,"Action"),l.Xb(),l.Xb())}function D(t,e){if(1&t){const t=l.Zb();l.Yb(0,"a",48),l.ic("click",function(){l.Lc(t);const e=l.mc().rowIndex,i=l.mc(2);return i.RemoveCounterDetails(i.lstCenterDetails[e].Sequence)}),l.Tb(1,"i",52),l.Xb()}}function U(t,e){if(1&t){const t=l.Zb();l.Yb(0,"a",53),l.ic("click",function(){l.Lc(t);const e=l.mc().rowIndex,i=l.mc(2);return i.ResetCounterDetails(i.lstCenterDetails[e].Sequence)}),l.Tb(1,"i",54),l.Xb()}}const L=function(){return{width:"100%"}},A=function(){return{standalone:!0}};function N(t,e){if(1&t){const t=l.Zb();l.Yb(0,"tr"),l.Yb(1,"td",40),l.Yb(2,"p-dropdown",44),l.ic("ngModelChange",function(i){l.Lc(t);const n=e.rowIndex;return l.mc(2).lstCenterDetails[n].ClinicId=i}),l.Xb(),l.Xb(),l.Yb(3,"td",41),l.Yb(4,"input",45),l.ic("ngModelChange",function(i){l.Lc(t);const n=e.rowIndex;return l.mc(2).lstCenterDetails[n].Name=i}),l.Xb(),l.Xb(),l.Yb(5,"td",40),l.Yb(6,"input",45),l.ic("ngModelChange",function(i){l.Lc(t);const n=e.rowIndex;return l.mc(2).lstCenterDetails[n].Description=i}),l.Xb(),l.Xb(),l.Yb(7,"td",42),l.Yb(8,"p-dropdown",46),l.ic("ngModelChange",function(i){l.Lc(t);const n=e.rowIndex;return l.mc(2).lstCenterDetails[n].Status=i}),l.Xb(),l.Xb(),l.Yb(9,"td",47),l.Yb(10,"a",48),l.ic("click",function(){return l.Lc(t),l.mc(2).AddCounterDetails()}),l.Tb(11,"i",49),l.Xb(),l.Sc(12,D,2,0,"a",50),l.Sc(13,U,2,0,"a",51),l.Xb(),l.Xb()}if(2&t){const t=e.rowIndex,i=l.mc(2);l.Fb(2),l.Pc(l.yc(20,L)),l.tc("options",i.lstClinicMaster)("ngModel",i.lstCenterDetails[t].ClinicId)("ngModelOptions",l.yc(21,A))("filter",!0)("showClear",!0),l.Fb(2),l.vc("name","Name_",i.lstCenterDetails[t].Sequence,""),l.tc("ngModel",i.lstCenterDetails[t].Name),l.Fb(2),l.vc("name","Description_",i.lstCenterDetails[t].Sequence,""),l.tc("ngModel",i.lstCenterDetails[t].Description),l.Fb(2),l.Pc(l.yc(22,L)),l.tc("options",i.stlststatus)("ngModel",i.lstCenterDetails[t].Status)("ngModelOptions",l.yc(23,A))("filter",!0)("showClear",!0),l.Fb(4),l.tc("ngIf",1!==i.lstCenterDetails[t].Sequence),l.Fb(1),l.tc("ngIf",null!=i.lstCenterDetails[t].CounterName)}}function x(t,e){if(1&t){const t=l.Zb();l.Yb(0,"button",55),l.ic("click",function(){return l.Lc(t),l.mc(2).Save()}),l.Uc(1,"Submit"),l.Xb()}if(2&t){l.mc();const t=l.Ic(5);l.tc("disabled",!t.form.valid)}}function T(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",1),l.Yb(1,"div",24),l.Yb(2,"div",3),l.Yb(3,"div",4),l.Yb(4,"form",null,25),l.Yb(6,"div",26),l.Yb(7,"div",27),l.Yb(8,"div",28),l.Yb(9,"label"),l.Uc(10,"Name"),l.Xb(),l.Yb(11,"span",29),l.Uc(12,"*"),l.Xb(),l.Yb(13,"input",30),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().objMaster.Name=e}),l.Xb(),l.Xb(),l.Xb(),l.Yb(14,"div",27),l.Yb(15,"div",28),l.Yb(16,"label"),l.Uc(17,"Description"),l.Xb(),l.Yb(18,"span",29),l.Uc(19,"*"),l.Xb(),l.Yb(20,"input",31),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().objMaster.Description=e}),l.Xb(),l.Xb(),l.Xb(),l.Yb(21,"div",27),l.Yb(22,"div",28),l.Yb(23,"label"),l.Uc(24,"Order Number"),l.Xb(),l.Yb(25,"span",29),l.Uc(26,"*"),l.Xb(),l.Yb(27,"input",32),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().objMaster.OrderNo=e}),l.Xb(),l.Xb(),l.Xb(),l.Yb(28,"div",27),l.Yb(29,"div",28),l.Yb(30,"label"),l.Uc(31,"Status"),l.Xb(),l.Yb(32,"span",29),l.Uc(33,"*"),l.Xb(),l.Yb(34,"p-dropdown",33),l.ic("ngModelChange",function(e){return l.Lc(t),l.mc().objMaster.Status=e}),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(35,"div",34),l.Yb(36,"div",2),l.Yb(37,"p-table",35,36),l.Sc(39,R,11,0,"ng-template",9),l.Sc(40,N,14,24,"ng-template",10),l.Xb(),l.Xb(),l.Xb(),l.Yb(41,"div",37),l.Sc(42,x,2,1,"button",38),l.Yb(43,"button",39),l.ic("click",function(){return l.Lc(t),l.mc().CloseModal()}),l.Uc(44,"Close"),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=l.mc();l.Fb(13),l.tc("ngModel",t.objMaster.Name),l.Fb(7),l.tc("ngModel",t.objMaster.Description),l.Fb(7),l.tc("ngModel",t.objMaster.OrderNo),l.Fb(7),l.Pc(l.yc(12,L)),l.tc("options",t.stlststatus)("ngModel",t.objMaster.Status)("filter",!0),l.Fb(3),l.tc("value",t.lstCenterDetails)("rowHover",!0)("scrollable",!0),l.Fb(5),l.tc("ngIf",null==t.lstIAccessStr?null:t.lstIAccessStr.includes(t.ActionList.ReadWrite.toString()))}}const F=[{path:"",component:(()=>{class t extends r.a{constructor(t,e,i,n,s){super(),this.cdRef=t,this.router=e,this._MasterServices=i,this._ConstantServices=n,this._UtilityService=s,this.filteredValuesLength=0,this.mode=null,this.objMaster={},this.stlststatus=[],this.extraCounterRowCounter=0,this.lstCenterDetails=[],this.lstClinicMaster=[],this.ActionList=c.a,this.lstIAccess=[],this.lstIAccessStr=[],this._ConstantServices.ActiveMenuName="Refer Treatment Master",this.stlststatus=[{name:"Active",code:1},{name:"Inactive",code:0}],this.getPageLevelAccess()}getPageLevelAccess(){var t,e,i=this.router.url,n=JSON.parse(localStorage.getItem("UerRoleAccess"))||[];(null==n?void 0:n.find(t=>t.MenuItemURL===i))&&(this.lstIAccess=null===(t=n.find(t=>t.MenuItemURL===i))||void 0===t?void 0:t.ActionIAccess,(null===(e=this.lstIAccess)||void 0===e?void 0:e.length)>0&&this.lstIAccess.map(t=>{this.lstIAccessStr.push(t.ActionId.toString())}))}ngOnInit(){this.LoadReferTreatementMasterList(),this.LoadClinicMaster()}LoadClinicMaster(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetClinicMaster(!0).subscribe(t=>{if(this._UtilityService.hideSpinner(),1==t.actionResult.success){var e=JSON.parse(t.actionResult.result);this.lstClinicMaster=e=e||[],this.cdRef.detectChanges()}else this._UtilityService.showWarningAlert(t.actionResult.errMsg),this.lstClinicMaster=[],this.cdRef.detectChanges()},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadReferTreatementMasterList(){this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.GetReferTreatmentMaster("",!1).subscribe(t=>{var e;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var i=JSON.parse(t.actionResult.result);this.lstMaster=i=i||[],void 0!==this.filtr&&(this.filtr.nativeElement.value="",this.dataTable.reset(),this.filteredValuesLength=null===(e=this.lstMaster)||void 0===e?void 0:e.length),this.cdRef.detectChanges()}else this.lstMaster=null},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}LoadReferToTreatmentMasterById(t){this._UtilityService.showSpinner(),this.mode="Edit",this.unsubscribe.add=this._MasterServices.GetReferTreatmentMasterById(t).subscribe(t=>{var e,i;if(this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success){var n=JSON.parse(t.actionResult.result);this.objMaster=n=n||[];var s=[];this.extraCounterRowCounter=0,null===(i=null===(e=this.objMaster)||void 0===e?void 0:e.lstCenterReferTreatDetails)||void 0===i||i.forEach(t=>{this.extraCounterRowCounter=this.extraCounterRowCounter+1,s.push({ClinicId:t.ClinicId,Name:t.Name,Description:t.Description,Status:t.Status,Sequence:this.extraCounterRowCounter})}),(null==s?void 0:s.length)>0?this.lstCenterDetails=s:this.clear(),this.cdRef.detectChanges()}else this.objMaster={}},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)})}Save(){this.objMaster.lstCenterReferTreatDetails=[];var t,e=[];this.lstCenterDetails.forEach(t=>{""!=t.ClinicId&&null!=t.ClinicId&&""!=t.Name&&null!=t.Name&&0!=t.Sequence&&e.push({ClinicId:t.ClinicId,Name:t.Name,Description:t.Description,Status:t.Status})}),t=e.reduce((t,e)=>(t[e.ClinicId]=(t[e.ClinicId]||0)+1,t),{}),Object.values(t).some(t=>t>1)?this._UtilityService.showWarningAlert("Center name should not duplicate."):(this.objMaster.lstCenterReferTreatDetails=e,this.objMaster.CreatedBy=localStorage.getItem("userId"),this.objMaster.ModifiedBy=localStorage.getItem("userId"),this._UtilityService.showSpinner(),this.unsubscribe.add=this._MasterServices.AddUpdateReferTreatementMaster(this.objMaster).subscribe(t=>{this._UtilityService.hideSpinner(),this.cdRef.detectChanges(),1==t.actionResult.success?(this._UtilityService.showSuccessAlert(t.actionResult.errMsg),this.LoadReferTreatementMasterList(),this.mode=null):this._UtilityService.showWarningAlert(t.actionResult.errMsg)},t=>{this._UtilityService.hideSpinner(),this._UtilityService.showErrorAlert(t.message)}))}AddNew(){this.ResetModel(),this.mode="Add",this.cdRef.detectChanges(),this.myForm.resetForm()}ResetModel(){this.objMaster={},this.objMaster.ReferToTreatmentId="",this.objMaster.Status=1}CloseModal(){this.mode=null}clear(){this.lstCenterDetails=[],this.extraCounterRowCounter=0,this.AddCounterDetails()}AddCounterDetails(){this.extraCounterRowCounter=this.extraCounterRowCounter+1,this.lstCenterDetails.push({Sequence:this.extraCounterRowCounter,ClinicId:null,Name:null,Description:null,Status:1})}RemoveCounterDetails(t){1!=t&&(this.lstCenterDetails=this.lstCenterDetails.filter(e=>e.Sequence!==t))}ResetCounterDetails(t){this.lstCenterDetails[t-1].ClinicId=null,this.lstCenterDetails[t-1].Name=null,this.lstCenterDetails[t-1].Description=null,this.lstCenterDetails[t-1].Status=1}onFilter(t,e){this.filteredValuesLength=t.filteredValue.length}exportToItemExcel(){this._MasterServices.downloadReport({reportname:"ReferTreatment",filename:"ReferTreatment",isExcel:!0})}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(l.h),l.Sb(s.i),l.Sb(o.a),l.Sb(c.f),l.Sb(a.a))},t.\u0275cmp=l.Mb({type:t,selectors:[["app-refer-treatment-master"]],viewQuery:function(t,e){if(1&t&&(l.cd(f,1),l.cd(g,1),l.cd(v,1)),2&t){let t;l.Hc(t=l.jc())&&(e.myForm=t.first),l.Hc(t=l.jc())&&(e.dataTable=t.first),l.Hc(t=l.jc())&&(e.filtr=t.first)}},features:[l.Cb],decls:2,vars:2,consts:[["class","row mt25",4,"ngIf"],[1,"row","mt25"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["responsiveLayout","scroll","styleClass","p-datatable-striped","scrollHeight","calc(100vh - 165px)",3,"value","rowHover","globalFilterFields","scrollable","onFilter"],["dt",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],["pButton","","title","New","label","Add New","class","p-button-outlined mr-2","icon","pi pi-plus",3,"click",4,"ngIf"],[1,"p-ml-left","pt-3"],[1,"p-ml-auto"],["pButton","","title","Export Data","label"," ","class","p-button-outlined mr-2","icon","pi pi-download",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["filtr",""],["pButton","","title","New","label","Add New","icon","pi pi-plus",1,"p-button-outlined","mr-2",3,"click"],["pButton","","title","Export Data","label"," ","icon","pi pi-download",1,"p-button-outlined","mr-2",3,"click"],["matTooltip","View/Edit",3,"click"],["src","./assets/custom-icons/view.svg",1,"custom-ico","mr4",2,"width","24px !important"],[1,"col"],["myForm","ngForm"],[1,"row"],[1,"col-md-3"],[1,"form-group"],[1,"required"],["type","text","required","","name","txtName",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","name","txtDescription",1,"form-control",3,"ngModel","ngModelChange"],["oninput","if(this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);","type","number","required","","name","OrderNo","maxlength","2",1,"form-control",3,"ngModel","ngModelChange"],["required","true","name","ddlStatus","optionLabel","name","optionValue","code","placeholder","-Select-",3,"options","ngModel","filter","ngModelChange"],[1,"row","mt-2","mb-2"],["responsiveLayout","scroll","scrollHeight","250px",1,"ColumnFilterTable",3,"value","rowHover","scrollable"],["dt1",""],[1,"row","justify-content-center"],["type","button","class","btn btn-new-primary mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-new-secondary",3,"click"],[2,"width","25%"],[2,"width","15%"],[2,"width","10%"],[2,"width","15%","text-align","center"],["appendTo","body","optionLabel","ClinicName","optionValue","ClinicId","placeholder","-Select-",3,"options","ngModel","ngModelOptions","filter","showClear","ngModelChange"],["pInputText","","type","text",1,"form-control",3,"name","ngModel","ngModelChange"],["appendTo","body","optionLabel","name","optionValue","code","placeholder","-Select-",3,"options","ngModel","ngModelOptions","filter","showClear","ngModelChange"],[2,"width","25%","text-align","center"],["href","javascript: void(0);",1,"add-btn","mr-2",3,"click"],[1,"fa","fa-plus"],["class","add-btn mr-2","href","javascript: void(0);",3,"click",4,"ngIf"],["class","add-btn","title","Reset","href","javascript: void(0);",3,"click",4,"ngIf"],[1,"fa","fa-minus"],["title","Reset","href","javascript: void(0);",1,"add-btn",3,"click"],[1,"fa","fa-refresh"],["type","button",1,"btn","btn-new-primary","mr-2",3,"disabled","click"]],template:function(t,e){1&t&&(l.Sc(0,y,10,5,"div",0),l.Sc(1,T,45,13,"div",0)),2&t&&(l.tc("ngIf",null==e.mode),l.Fb(1),l.tc("ngIf",null!=e.mode))},directives:[n.p,b.c,d.i,u.a,h.b,p.z,p.p,p.q,p.b,p.w,p.o,p.r,p.t,p.j,m.a],styles:[""]}),t})()}];let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[s.l.forChild(F)],s.l]}),t})();var _=i("Q4Mo");let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({imports:[[n.c,j,p.i,p.v,b.f,h.c,_.b,m.b,u.b]]}),t})()}}]);